easyblock = 'Tarball'

name = 'ecBuild'
version = '3.11.0'

homepage = 'https://ecbuild.readthedocs.io/'

description = """
A CMake-based build system, consisting of a collection of CMake macros and
functions that ease the managing of software build systems """

toolchain = {'name': 'GCCcore', 'version': '14.2.0'}

github_account = 'ecmwf'
sources = [
    {
        'source_urls': [GITHUB_SOURCE],
        'filename': '%(version)s.tar.gz',
        'extract_cmd': 'tar -xzf %s --strip-components=1',
    },
]
checksums = ['38a96bdeb38feb65446b6f95b35492232abd188c41b8a28fd128f9f88e00b05d']

builddependencies = [('binutils', '2.42')]

buildininstalldir = True

skipsteps = ['install']

sanity_check_paths = {
    'files': ['bin/ecbuild', 'cmake/ecbuild-config.cmake'],
    'dirs': ['bin', 'lib', 'share', 'cmake'],
}

sanity_check_commands = ['ecbuild --help']

moduleclass = 'tools'
