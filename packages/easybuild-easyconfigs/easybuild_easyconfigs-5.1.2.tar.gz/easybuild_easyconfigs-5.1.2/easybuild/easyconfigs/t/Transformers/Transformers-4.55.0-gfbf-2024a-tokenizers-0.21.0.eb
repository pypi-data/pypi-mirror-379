easyblock = 'PythonBundle'

name = 'Transformers'
version = '4.55.0'
local_tokenizersver = '0.21.0'
versionsuffix = '-tokenizers-%s' % local_tokenizersver

homepage = 'https://github.com/huggingface/transformers'
description = """State-of-the-art Natural Language Processing for PyTorch and TensorFlow 2.0"""

toolchain = {'name': 'gfbf', 'version': '2024a'}

dependencies = [
    ('Python', '3.12.3'),
    ('SciPy-bundle', '2024.05'),
    ('PyYAML', '6.0.2'),
    ('tqdm', '4.66.5'),
    ('tokenizers', '0.21.4'),  # tokenizers>=0.21,<0.22
    ('Safetensors', '0.6.2'),  # safetensors>=0.4.1
]

exts_list = [
    ('regex', '2025.7.34', {
        # fix configuration error: `project.license` must be valid exactly by one definition (2 matches found)
        'preinstallopts': "sed -i '/^license/d' pyproject.toml && ",
        'checksums': ['9ead9765217afd04a86822dfcd4ed2747dfe426e887da413b15ff0ac2457e21a'],
    }),
    ('transformers', version, {
        'checksums': ['15aa138a05d07a15b30d191ea2c45e23061ebf9fcc928a1318e03fe2234f3ae1'],
    }),
]

sanity_check_commands = [
    "python -c 'from transformers import AutoTokenizer'",
]

moduleclass = 'math'
