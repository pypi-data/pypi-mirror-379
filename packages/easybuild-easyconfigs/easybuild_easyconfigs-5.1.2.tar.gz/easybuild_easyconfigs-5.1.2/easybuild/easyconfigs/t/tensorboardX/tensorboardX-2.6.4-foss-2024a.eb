easyblock = 'PythonBundle'

name = 'tensorboardX'
version = '2.6.4'

homepage = 'https://github.com/lanpa/tensorboardX'
description = "Tensorboard for PyTorch."

toolchain = {'name': 'foss', 'version': '2024a'}

# tensorboardX v2.x works with tensorboards generated with TensorFlow 2,
# but TensorFlow is not needed to use tensorboardX
dependencies = [
    ('Python', '3.12.3'),
    ('SciPy-bundle', '2024.05'),
    ('protobuf-python', '5.28.0'),
]

exts_list = [
    ('tensorboardx', version, {
        'modulename': 'tensorboardX',
        # fix configuration error: `project.license` must be valid exactly by one definition (2 matches found)
        'preinstallopts': "sed -i '/^license/d' pyproject.toml && ",
        'checksums': ['b163ccb7798b31100b9f5fa4d6bc22dad362d7065c2f24b51e50731adde86828'],
    }),
]

moduleclass = 'vis'
