name = 'MUMPS'
version = '5.8.1'
versionsuffix = '-metis'

homepage = 'https://mumps-solver.org'
description = "A parallel sparse direct solver"

toolchain = {'name': 'foss', 'version': '2025a'}
toolchainopts = {'pic': True, 'usempi': True}

source_urls = [
    'https://mumps-solver.org',
    'https://ftp.mcs.anl.gov/pub/petsc/externalpackages',  # mirror
]
sources = ['%(name)s_%(version)s.tar.gz']
checksums = ['e91b6dcd93597a34c0d433b862cf303835e1ea05f12af073b06c32f652f3edd8']

dependencies = [
    ('SCOTCH', '7.0.8'),
    ('METIS', '5.1.0'),
]

maxparallel = 1

# fix 'Type mismatch between actual argument' errors with GCC 10.x
prebuildopts = 'export FFLAGS="$FFLAGS -fallow-argument-mismatch" && '

buildopts = 'all allshared SONAME_VERSION="%(version)s"'

moduleclass = 'math'
