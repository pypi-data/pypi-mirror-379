[project]
name = "textnets"
version = "0.10.4"
authors = [
    { name = "John D. Boy", email = "jboy@bius.moe" },
]
description = "Automated text analysis with networks"
readme = "README.rst"
keywords = [
    "computational social science",
    "network analysis",
    "nlp",
    "text analysis",
    "visualization",
]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Science/Research",
    "Operating System :: OS Independent",
    "Natural Language :: English",
    "Programming Language :: Cython",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3 :: Only",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Topic :: Scientific/Engineering :: Visualization",
    "Topic :: Sociology",
]
requires-python = "<3.14,>=3.10"
dependencies = [
    "igraph",
    "leidenalg",
    "pandas<3.0.0,>=2.2.3",
    "scipy<2.0.0,>=1.14.1",
    "spacy<4.0.0,>=3.8.5",
    "spacy-lookups-data<2.0.0,>=1.0.5",
    "toolz<1.0.0,>=0.12.1",
    "tqdm<5.0.0,>=4.66.5",
    "wasabi<2.0.0,>=1.1.3",
    "pyarrow>=20.0.0; implementation_name != \"pypy\"",
    "matplotlib<4.0.0,>=3.10.1",
]

[project.license]
text = "GPL-3.0-only"

[project.urls]
"Bug Tracker" = "https://github.com/jboynyc/textnets/issues"
Changelog = "https://textnets.readthedocs.io/en/stable/history.html"
Documentation = "https://textnets.readthedocs.io"
homepage = "https://textnets.readthedocs.io"
repository = "https://github.com/jboynyc/textnets"

[project.optional-dependencies]
zh = [
    "jieba>=0.42.1,<1.0.0",
]
cjk = [
    "mpl-font==1.1.0",
]

[build-system]
requires = [
    "Cython>=0.29",
    "pdm-backend",
    "setuptools>=49",
]
build-backend = "pdm.backend"

[tool.pdm.build]
includes = [
    "docs/*.py",
    "docs/refs.bib",
    "docs/*.rst",
    "docs/_static",
    "docs/*.svg",
    "LICENSE",
    "*.rst",
    "tests/*.py",
    "textnets/_ext*.so",
    "textnets/*.p*",
]
run-setuptools = true

[tool.pdm.dev-dependencies]
dev = [
    "coverage>=7.6.1",
    "pdm-bump>=0.9.11.post2",
]
doc = [
    "en-core-web-sm @ https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.8.0/en_core_web_sm-3.8.0-py3-none-any.whl",
    "ipykernel<7.0.0,>=6.29.5",
    "jupyter-sphinx>=0.5.0",
    "sphinx<8.3.2,>=7.4.7",
    "sphinxcontrib-bibtex<3.0.0,>=2.6.3",
    "shibuya>=2025.8.16,<2025.9.22",
]
lint = [
    "ruff<1.0.0,>=0.11.2",
]
test = [
    "en-core-web-sm @ https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.8.0/en_core_web_sm-3.8.0-py3-none-any.whl",
    "pytest<9.0.0,>=8.3.3",
]
typing = [
    "mypy<2.0.0,>=1.11.2",
    "pandas-stubs<3.0.0.0,>=2.2.2.240909",
]

[tool.pdm.options]
lock = [
    "-G",
    ":all",
]

[tool.pdm.plugin.bump]
commit_msg_tpl = "Bump to version {to}"

[tool.mypy]
files = "textnets"
warn_unused_ignores = true
warn_unreachable = true
ignore_missing_imports = true
pretty = true

[tool.ruff]
preview = true
extend-exclude = [
    "textnets/_ext*.so",
]

[tool.ruff.lint]
select = [
    "ARG",
    "D",
    "DOC",
    "E",
    "ERA",
    "F",
    "I",
    "NPY",
    "PERF",
    "PIE",
    "PLW0",
    "PTH",
    "Q",
    "RET",
    "RUF",
    "SIM",
    "T",
    "TID",
    "UP",
    "W",
]
extend-ignore = [
    "D105",
]

[tool.ruff.lint.pydocstyle]
convention = "numpy"

[tool.ruff.lint.pydoclint]
ignore-one-line-docstrings = true

[tool.ruff.format]
docstring-code-format = true

[tool.pytest.ini_options]
filterwarnings = [
    "ignore:invalid escape sequence:DeprecationWarning",
]
