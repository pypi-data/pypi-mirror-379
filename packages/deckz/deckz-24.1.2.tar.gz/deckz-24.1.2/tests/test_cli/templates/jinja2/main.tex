%% for k, v in variables.items()
\newcommand{\\V{k | camelcase}}{\V{v}}
%% endfor


\documentclass[\PresentationSize\BLOCK{if handout},handout\BLOCK{endif}]{beamer}

\usepackage[export]{adjustbox}

\usetheme[block=fill,sectionpage=progressbar,subsectionpage=progressbar,progressbar=frametitle]{metropolis}

\makeatletter
\setlength{\metropolis@frametitle@padding}{1.9ex}% <- default 2.2 ex
\renewcommand{\metropolis@frametitlestrut@start}{%
  \rule{0pt}{\metropolis@frametitle@padding}%
}
\renewcommand{\metropolis@frametitlestrut@end}{%
  \rule[-\metropolis@frametitle@padding]{0pt}{\metropolis@frametitle@padding}%
}
\setbeamertemplate{frametitle}{%
    \nointerlineskip%
    \begin{beamercolorbox}[%
        wd=\paperwidth,%
        sep=0pt,%
        leftskip=\metropolis@frametitle@padding,%
        rightskip=\metropolis@frametitle@padding,%
        ]{frametitle}%
        \metropolis@frametitlestrut@start%
        \ifdefempty{\insertsectionhead}{}{%
          {%
            \scriptsize%
            \insertsectionhead%
            \ifdefempty{\insertsubsectionhead}{}{ > \insertsubsectionhead}%
            \newline%
          }%
        }%
        \insertframetitle%
        \nolinebreak%
        \metropolis@frametitlestrut@end%
    \end{beamercolorbox}
    \usebeamertemplate*{progress bar in head/foot}
}

\setlength{\metropolis@progressinheadfoot@linewidth}{1pt}
\setbeamercolor{normal text}{bg=white}
\setbeamertemplate{bibliography item}{\insertbiblabel}
\setbeamertemplate{blocks}[rounded]

\author{\vfill\UserName}
\institute{%
  \vfill%
  \includegraphics[height=\CompanyLogoHeight]{\CompanyLogo}%
  \newline%
  \url{\CompanyWebsite}%
}
\date{}

\title{\DeckTitle}

\begin{document}

\maketitle

\begin{frame}{Program}
\tableofcontents[subsectionstyle=hide]
\end{frame}

%% for part in parts:
%% for section in part.sections:
\section{\V{section.title}}
%% for section_input in section.inputs:
%% if section_input.title != None:
\subsection{\V{subsection}}
%% endif
\input{\V{section_input.path}}
%% endfor
%% endfor
%% endfor

\end{document}
