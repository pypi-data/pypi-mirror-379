| Field Group      | Field Name                                         | Expected Type            | Description                                                                                                                                                              | Status    |
|:-----------------|:---------------------------------------------------|:-------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------|
| **input**        |                                                    |                          | Input data for the configuration                                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;file_vhr                               | Str                      | Input 4 bands VHR (Very High Resolution) image                                                                                                                           | Mandatory |
|                  | &nbsp;&nbsp;sensor_mode                            | Bool                     | True if input image is in its raw (sensor) geometry, False if input image is georeferenced (orthorectification)                                                          | Mandatory |
| **aux_layers**   |                                                    |                          | Auxiliary layers used in processing                                                                                                                                      | Mandatory |
|                  | &nbsp;&nbsp;valid_stack                            | Str (Default None)       | Path to store the valid stack file                                                                                                                                       | Optional  |
|                  | &nbsp;&nbsp;file_ndvi                              | Str                      | Path to the NDVI layer                                                                                                                                                   | Mandatory |
|                  | &nbsp;&nbsp;file_ndwi                              | Str                      | Path to the NDWI layer                                                                                                                                                   | Mandatory |
|                  | &nbsp;&nbsp;extracted_pekel                        | Str                      | Path to the extracted Pekel data                                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;extracted_hand                         | Str                      | Path to the extracted HAND data                                                                                                                                          | Mandatory |
|                  | &nbsp;&nbsp;extracted_wsf                          | Str                      | Path to the extracted World Settlement Footprint                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;extracted_wbm                          | Str (Default None)       | Path to the extracted Water Body Mask                                                                                                                                    | Optional  |
|                  | &nbsp;&nbsp;file_texture                           | Str                      | Path to store the texture file                                                                                                                                           | Mandatory |
|                  | &nbsp;&nbsp;mnh                                    | Str (Default None)       | Path to the Mean Height of Nearest Neighbors (MN) layer                                                                                                                  | Optional  |
|                  | &nbsp;&nbsp;file_cloud_gml                         | Str (Default None)       | GML file containing cloud masks (optional)                                                                                                                               | Optional  |
| **masks**        |                                                    |                          | Masks for different types of land cover and features                                                                                                                     | Mandatory |
|                  | &nbsp;&nbsp;watermask                              | Str                      | For watermask computation: Output classification filename. For stackmask: Water mask to stack. Otherwise, if given, output mask will exclude water areas                 | Mandatory |
|                  | &nbsp;&nbsp;urbanmask                              | Str                      | For urbanmask computation: Output classification filename. For stackmask: Vegetation mask to stack.                                                                      | Mandatory |
|                  | &nbsp;&nbsp;vegetationmask                         | Str                      | For vegetationmask computation : Output classification filename. For stackmask: Vegetation mask to stack. Otherwise, if given, output mask will exclude vegetation areas | Mandatory |
|                  | &nbsp;&nbsp;shadowmask                             | Str                      | For shadowmask computation : Output classification filename. For stackmask: Shadow mask to stack. Otherwise, if given, big shadow areas will be marked as background     | Mandatory |
|                  | &nbsp;&nbsp;stackmask                              | Str                      | Output classification filename                                                                                                                                           | Mandatory |
| **resources**    |                                                    |                          | Resources configuration for parallel processing                                                                                                                          | Mandatory |
|                  | &nbsp;&nbsp;debug                                  | Bool (Default False)     | Flag for debugging mode (default : False)                                                                                                                                | Optional  |
|                  | &nbsp;&nbsp;n_workers                              | Int                      | Number of CPU                                                                                                                                                            | Mandatory |
|                  | &nbsp;&nbsp;tile_max_size                          | Int                      | Maximum size of tiles to process                                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;multiproc_context                      | Str (Default 'spawn')    | Multiprocessing strategy: 'fork' or 'spawn' for EOScale                                                                                                                  | Optional  |
|                  | &nbsp;&nbsp;n_jobs                                 | Int                      | Nb of parallel jobs for Random Forest (1 is recommanded : use n_workers to optimize parallel computing)                                                                  | Mandatory |
|                  | &nbsp;&nbsp;save_mode                              | Str                      | Save all files (debug) or only output mask (none)                                                                                                                        | Mandatory |
| **prepare**      |                                                    |                          | Preparation settings for preprocessing                                                                                                                                   | Mandatory |
|                  | &nbsp;&nbsp;red                                    | Int                      | Red band index                                                                                                                                                           | Mandatory |
|                  | &nbsp;&nbsp;green                                  | Int                      | Green band index                                                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;nir                                    | Int                      | NIR band index                                                                                                                                                           | Mandatory |
|                  | &nbsp;&nbsp;cloud_mask                             | Str (Default None)       | Path to the input cloud mask                                                                                                                                             | Optional  |
|                  | &nbsp;&nbsp;pekel_method                           | Str                      | Method for Pekel recovery : 'all' for global file and 'month' for monthly recovery                                                                                       | Mandatory |
|                  | &nbsp;&nbsp;pekel                                  | Str                      | Path of the global Pekel (Global Surface Water) file                                                                                                                     | Mandatory |
|                  | &nbsp;&nbsp;pekel_monthly_occurrence               | Str (Default None)       | Path of the root of monthly occurrence Pekel files                                                                                                                       | Optional  |
|                  | &nbsp;&nbsp;pekel_obs                              | Str (Default None)       | Month of the desired Pekel (Global Surface Water) file (pekel_method = month)                                                                                            | Optional  |
|                  | &nbsp;&nbsp;hand                                   | Str                      | Path of the global Height Above Nearest Drainage (HAND) file                                                                                                             | Mandatory |
|                  | &nbsp;&nbsp;wsf                                    | Str                      | Path of the global World Settlement Footprint (WSF) file                                                                                                                 | Mandatory |
|                  | &nbsp;&nbsp;wbm                                    | Str                      | Path of the global Water Body Mask (WBM) file                                                                                                                            | Mandatory |
|                  | &nbsp;&nbsp;texture_rad                            | Int                      | Radius for texture (std convolution) computation                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;dtm                                    | Str (Default None)       | Digital Terrain Model, used only in sensor mode                                                                                                                          | Optional  |
|                  | &nbsp;&nbsp;geoid_file                             | Str                      | Geoid file, used only in sensor mode                                                                                                                                     | Mandatory |
|                  | &nbsp;&nbsp;analyse_glcm                           | Bool                     | Use a global land cover map to calculate the better number of vegetation cluster to use for mask computation                                                             | Mandatory |
|                  | &nbsp;&nbsp;land_cover_map                         | Str                      | Input land cover map, only used if 'analyse_glcm' is True                                                                                                                | Mandatory |
|                  | &nbsp;&nbsp;cropped_land_cover_map                 | Bool                     | If the land_cover_map image is cropped to the input VHR file or not                                                                                                      | Mandatory |
|                  | &nbsp;&nbsp;effective_used_config                  | Str                      | Path to the effective configuration used                                                                                                                                 | Mandatory |
| **post_process** |                                                    |                          | Settings for post-processing                                                                                                                                             | Mandatory |
|                  | &nbsp;&nbsp;binary_opening                         | Int                      | Size of disk structuring element                                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;binary_closing                         | Int                      | Size of disk structuring element                                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;binary_dilation                        | Int                      | Size of disk structuring element                                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;remove_small_objects                   | Int                      | The maximum area, in pixels, of a contiguous object that will be removed                                                                                                 | Mandatory |
|                  | &nbsp;&nbsp;remove_small_holes                     | Int                      | The maximum area, in pixels, of a contiguous hole that will be filled                                                                                                    | Mandatory |
|                  | &nbsp;&nbsp;area_closing                           | Str (Default None)       | Area closing removes all dark structures                                                                                                                                 | Optional  |
| **shadows**      |                                                    |                          | Shadow detection settings                                                                                                                                                | Mandatory |
|                  | &nbsp;&nbsp;th_rgb                                 | Float                    | Relative shadow threshold for RGB bands                                                                                                                                  | Mandatory |
|                  | &nbsp;&nbsp;th_nir                                 | Float                    | Relative shadow threshold for NIR band                                                                                                                                   | Mandatory |
|                  | &nbsp;&nbsp;percentile                             | Int                      | Percentile value to cut histogram and estimate shadow threshold                                                                                                          | Mandatory |
|                  | &nbsp;&nbsp;absolute_threshold                     | Bool                     | Compute shadow mask with a unique absolute threshold                                                                                                                     | Mandatory |
| **urban**        |                                                    |                          | Urban classification settings                                                                                                                                            | Mandatory |
|                  | &nbsp;&nbsp;files_layers                           | List[Str] (Default None) | Add layers as additional features used by learning algorithm                                                                                                             | Optional  |
|                  | &nbsp;&nbsp;vegmask_min_value                      | Int (Default None)       | Vegetation min value for vegetated areas : all pixels with lower value will be predicted                                                                                 | Optional  |
|                  | &nbsp;&nbsp;veg_binary_dilation                    | Int                      | Size of disk structuring element (dilate non vegetated areas)                                                                                                            | Mandatory |
|                  | &nbsp;&nbsp;value_classif                          | Int                      | Input ground truth class to consider in the input ground truth                                                                                                           | Mandatory |
|                  | &nbsp;&nbsp;gt_binary_erosion                      | Int                      | Size of disk structuring element (erode GT before picking-up samples)                                                                                                    | Mandatory |
|                  | &nbsp;&nbsp;nb_samples_other                       | Int                      | Number of samples in other for learning                                                                                                                                  | Mandatory |
|                  | &nbsp;&nbsp;nb_samples_urban                       | Int                      | Number of samples in buildings for learning                                                                                                                              | Mandatory |
|                  | &nbsp;&nbsp;max_depth                              | Int                      | Maximum depth of the decision tree                                                                                                                                       | Mandatory |
|                  | &nbsp;&nbsp;nb_estimators                          | Int                      | Number of trees in Random Forest                                                                                                                                         | Mandatory |
| **vegetation**   |                                                    |                          | Vegetation classification settings                                                                                                                                       | Mandatory |
|                  | &nbsp;&nbsp;texture_mode                           | Str                      | Labelize vegetation with (yes) or without (no) distinction low/high, or get all vegetation clusters without distinction low/high (debug)                                 | Mandatory |
|                  | &nbsp;&nbsp;filter_texture                         | Int                      | Percentile for texture (between 1 and 99)                                                                                                                                | Mandatory |
|                  | &nbsp;&nbsp;slic_seg_size                          | Int                      | Approximative segment size                                                                                                                                               | Mandatory |
|                  | &nbsp;&nbsp;slic_compactness                       | Float                    | Balance between color and space proximity (see skimage.slic documentation)                                                                                               | Mandatory |
|                  | &nbsp;&nbsp;nb_clusters_veg                        | Int                      | Nb of clusters considered as vegetation (1-NB_CLUSTERS)                                                                                                                  | Mandatory |
|                  | &nbsp;&nbsp;min_ndvi_veg                           | Float (Default None)     | Minimal mean NDVI value to consider a cluster as vegetation (overload nb clusters choice)                                                                                | Optional  |
|                  | &nbsp;&nbsp;max_ndvi_noveg                         | Float (Default None)     | Maximal mean NDVI value to consider a cluster as non-vegetation (overload nb clusters choice)                                                                            | Optional  |
|                  | &nbsp;&nbsp;non_veg_clusters                       | List[Int] (Default None) | Labelize each 'non vegetation cluster' as 0, 1, 2 (..) instead of single label (0)                                                                                       | Optional  |
|                  | &nbsp;&nbsp;nb_clusters_low_veg                    | Int                      | Nb of clusters considered as low vegetation (1-NB_CLUSTERS)                                                                                                              | Mandatory |
|                  | &nbsp;&nbsp;max_texture_th                         | Float (Default None)     | Maximal texture value to consider a cluster as low vegetation (overload nb clusters choice)                                                                              | Optional  |
| **water**        |                                                    |                          | Water detection settings                                                                                                                                                 | Mandatory |
|                  | &nbsp;&nbsp;files_layers                           | List[Str]                | Add layers as additional features used by learning algorithm                                                                                                             | Mandatory |
|                  | &nbsp;&nbsp;thresh_pekel                           | Int                      | Threshold for Pekel water occurrence detection                                                                                                                           | Mandatory |
|                  | &nbsp;&nbsp;thresh_hand                            | Int                      | Hand Threshold int >= 0                                                                                                                                                  | Mandatory |
|                  | &nbsp;&nbsp;hand_strict                            | Bool                     | Use not(pekelxx) for other (no water) samples                                                                                                                            | Mandatory |
|                  | &nbsp;&nbsp;strict_thresh                          | Int                      | Pekel Threshold float if hand_strict                                                                                                                                     | Mandatory |
|                  | &nbsp;&nbsp;simple_ndwi_threshold                  | Bool                     | Compute water mask as a simple NDWI threshold - useful in arid places where no water is known by Peckel                                                                  | Mandatory |
|                  | &nbsp;&nbsp;ndwi_threshold                         | Float                    | Threshold used when Pekel is empty in the area                                                                                                                           | Mandatory |
|                  | &nbsp;&nbsp;samples_method                         | Str                      | Select method for choosing learning samples ('grid' or 'random' or 'smart')                                                                                              | Mandatory |
|                  | &nbsp;&nbsp;nb_samples_water                       | Int                      | Number of samples in water for learning                                                                                                                                  | Mandatory |
|                  | &nbsp;&nbsp;nb_samples_other                       | Int                      | Number of samples in other for learning                                                                                                                                  | Mandatory |
|                  | &nbsp;&nbsp;nb_samples_auto                        | Bool                     | Auto select number of samples for water and other                                                                                                                        | Mandatory |
|                  | &nbsp;&nbsp;auto_pct                               | Float                    | Percentage of samples points, to use with -nb_samples_auto                                                                                                               | Mandatory |
|                  | &nbsp;&nbsp;smart_area_pct                         | Int                      | For smart method, importance of area for selecting number of samples in each water surface                                                                               | Mandatory |
|                  | &nbsp;&nbsp;smart_minimum                          | Int                      | For smart method, minimum number of samples in each water surface.                                                                                                       | Mandatory |
|                  | &nbsp;&nbsp;grid_spacing                           | Int                      | For grid method, select samples on a regular grid (40 pixels seems to be a good value)                                                                                   | Mandatory |
|                  | &nbsp;&nbsp;max_depth                              | Int                      | Max depth of trees                                                                                                                                                       | Mandatory |
|                  | &nbsp;&nbsp;nb_estimators                          | Int                      | Number of estimators for the water classifier                                                                                                                            | Mandatory |
|                  | &nbsp;&nbsp;no_pekel_filter                        | Bool                     | Deactivate postprocess with pekel which only keeps surfaces already known by pekel                                                                                       | Mandatory |
|                  | &nbsp;&nbsp;hand_filter                            | Bool                     | Postprocess with Hand (set to 0 when hand > thresh), incompatible with hand_strict                                                                                       | Mandatory |
|                  | &nbsp;&nbsp;value_classif                          | Int                      | Output classification value (default is 1)                                                                                                                               | Mandatory |
| **stack**        |                                                    |                          | Stack processing settings                                                                                                                                                | Mandatory |
|                  | &nbsp;&nbsp;building_threshold                     | Int                      | Threshold for building detection in the stack                                                                                                                            | Mandatory |
|                  | &nbsp;&nbsp;building_erosion                       | Int                      | Supposed buildings will be eroded by this size in the marker step                                                                                                        | Mandatory |
|                  | &nbsp;&nbsp;bonus_gt                               | Int                      | Bonus for pixels covered by GT, in the watershed regularization step (ex : +30 to improve discrimination between building and background)                                | Mandatory |
|                  | &nbsp;&nbsp;malus_shadow                           | Int                      | Value of the malus for pixels in shadow, in the watershed regularization step                                                                                            | Mandatory |
|                  | &nbsp;&nbsp;value_classif_low_veg                  | Int (Default 1)          | Output classification value for low vegetation                                                                                                                           | Optional  |
|                  | &nbsp;&nbsp;value_classif_high_veg                 | Int (Default 2)          | Output classification value for high vegetation                                                                                                                          | Optional  |
|                  | &nbsp;&nbsp;value_classif_water                    | Int (Default 3)          | Output classification value for water                                                                                                                                    | Optional  |
|                  | &nbsp;&nbsp;value_classif_buildings                | Int (Default 4)          | Output classification value for buildings                                                                                                                                | Optional  |
|                  | &nbsp;&nbsp;value_classif_bare_ground              | Int (Default 6)          | Output classification value for bare ground                                                                                                                              | Optional  |
|                  | &nbsp;&nbsp;value_classif_sea                      | Int (Default 7)          | Output classification value for sea                                                                                                                                      | Optional  |
|                  | &nbsp;&nbsp;value_classif_lake                     | Int (Default 8)          | Output classification value for sea                                                                                                                                      | Optional  |
|                  | &nbsp;&nbsp;value_classif_river                    | Int (Default 9)          | Output classification value for sea                                                                                                                                      | Optional  |
|                  | &nbsp;&nbsp;value_classif_false_positive_buildings | Int                      | Output classification value for buildings false positive                                                                                                                 | Mandatory |
|                  | &nbsp;&nbsp;value_classif_background               | Int                      | Output classification value for background                                                                                                                               | Mandatory |
|                  | &nbsp;&nbsp;vegmask_min_value                      | Int                      | Maximum allowed value in the vegetation mask                                                                                                                             | Mandatory |
|                  | &nbsp;&nbsp;binary_closing                         | Int                      | Size of disk structuring element                                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;binary_opening                         | Int                      | Size of disk structuring element                                                                                                                                         | Mandatory |
|                  | &nbsp;&nbsp;categorized_watermask                  | Bool (Default False)     | If true, stack_mask will infer water body category (lake, river, sea, unknown) from a general water body mask                                                            | Optional  |
|                  | &nbsp;&nbsp;minimal_size_water_area                | Int (Default 10000)      | Minimal area (in pixels) of water bodies                                                                                                                                 | Optional  |