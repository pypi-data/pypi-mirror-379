{
    "composition": {
        "name": "Fallback_Chain",
        "version": "1.0",
        "description": "Multi-protocol communication with automatic failover chain"
    },
    "fallback_config": {
        "strategy": "graceful_degradation",
        "failover_timeout": 5000,
        "recovery_check_interval": 30000,
        "max_cascade_depth": 3
    },
    "transport_hierarchy": {
        "primary": {
            "name": "high_speed_ethernet",
            "type": "ethernet",
            "priority": 1,
            "bandwidth": "1Gbps",
            "latency": "< 1ms",
            "reliability": "99.9%"
        },
        "secondary": {
            "name": "wifi_fallback",
            "type": "ethernet",
            "priority": 2,
            "bandwidth": "100Mbps",
            "latency": "< 10ms",
            "reliability": "99.5%"
        },
        "tertiary": {
            "name": "cellular_backup",
            "type": "cellular",
            "priority": 3,
            "bandwidth": "10Mbps",
            "latency": "< 50ms",
            "reliability": "99.0%"
        },
        "emergency": {
            "name": "satellite_emergency",
            "type": "satellite",
            "priority": 4,
            "bandwidth": "256Kbps",
            "latency": "< 600ms",
            "reliability": "95.0%"
        }
    },
    "protocol_stacks": {
        "ethernet_stack": {
            "transport": "high_speed_ethernet",
            "protocols": {
                "application_layer": [
                    {
                        "http_api": "RESTful API over HTTP/2"
                    },
                    {
                        "websocket": "Real-time bidirectional communication"
                    }
                ],
                "transport_layer": [
                    {
                        "tcp": "Reliable stream protocol"
                    },
                    {
                        "udp": "Fast datagram protocol"
                    }
                ],
                "network_layer": [
                    {
                        "ipv4": "Internet Protocol v4"
                    },
                    {
                        "ipv6": "Internet Protocol v6"
                    }
                ]
            }
        },
        "wifi_stack": {
            "transport": "wifi_fallback",
            "protocols": {
                "application_layer": [
                    {
                        "http_api": "RESTful API over HTTP/1.1"
                    },
                    {
                        "coap": "Constrained Application Protocol"
                    }
                ],
                "transport_layer": [
                    {
                        "tcp": "Reliable stream protocol"
                    },
                    {
                        "udp": "Fast datagram protocol"
                    }
                ]
            }
        },
        "cellular_stack": {
            "transport": "cellular_backup",
            "protocols": {
                "application_layer": [
                    {
                        "mqtt": "Message Queuing Telemetry Transport"
                    },
                    {
                        "sms_fallback": "SMS-based command protocol"
                    }
                ],
                "transport_layer": [
                    {
                        "tcp": "Reliable stream protocol over cellular"
                    }
                ]
            }
        },
        "satellite_stack": {
            "transport": "satellite_emergency",
            "protocols": {
                "application_layer": [
                    {
                        "custom_minimal": "Minimal custom protocol"
                    },
                    {
                        "emergency_beacon": "Distress signal protocol"
                    }
                ]
            }
        }
    },
    "health_monitoring": {
        "ethernet_health": {
            "transport": "high_speed_ethernet",
            "health_checks": {
                "connectivity": {
                    "method": "icmp_ping",
                    "target": "gateway",
                    "interval": 5000,
                    "threshold": 3
                },
                "bandwidth": {
                    "method": "iperf_test",
                    "target": "speed_test_server",
                    "interval": 60000,
                    "min_bandwidth": "800Mbps"
                },
                "latency": {
                    "method": "rtt_measurement",
                    "target": "time_server",
                    "interval": 10000,
                    "max_latency": 2
                }
            }
        },
        "wifi_health": {
            "transport": "wifi_fallback",
            "health_checks": {
                "signal_strength": {
                    "method": "rssi_monitoring",
                    "interval": 5000,
                    "min_rssi": -70
                },
                "packet_loss": {
                    "method": "ping_test",
                    "interval": 10000,
                    "max_loss_rate": 5
                }
            }
        },
        "cellular_health": {
            "transport": "cellular_backup",
            "health_checks": {
                "signal_quality": {
                    "method": "signal_monitoring",
                    "interval": 10000,
                    "min_bars": 2
                },
                "data_allowance": {
                    "method": "usage_monitoring",
                    "interval": 300000,
                    "warning_threshold": 80
                }
            }
        }
    },
    "behaviors": {
        "primary_monitor": {
            "type": "periodic",
            "interval": 1000,
            "transport": "high_speed_ethernet",
            "payload": [
                {
                    "message_type": "HEALTH_CHECK"
                },
                {
                    "timestamp": "[TIMESTAMP:8:current_time]"
                },
                {
                    "sequence": "[SEQ:4:increment]"
                }
            ]
        },
        "failover_trigger": {
            "type": "triggered",
            "trigger_event": "primary_transport_failure",
            "failover_sequence": "1. \"stop_primary_protocols\" 2. \"activate_secondary_transport\" 3. \"migrate_active_sessions\" 4. \"notify_applications\""
        },
        "recovery_monitor": {
            "type": "periodic",
            "interval": "[RECOVERY_CHECK_INTERVAL]",
            "active_states": [
                "FAILOVER_ACTIVE"
            ],
            "recovery_check": [
                "test_primary_connectivity",
                "verify_primary_performance",
                "assess_recovery_feasibility"
            ]
        },
        "failback_procedure": {
            "type": "triggered",
            "trigger_event": "primary_transport_recovered",
            "failback_sequence": "1. \"test_primary_stability\" 2. \"migrate_sessions_back\" 3. \"deactivate_secondary_transport\" 4. \"resume_normal_operation\""
        }
    },
    "session_migration": {
        "tcp_migration": {
            "enabled": true,
            "migration_methods": {
                "connection_splicing": {
                    "description": "Migrate existing TCP connections",
                    "complexity": "high",
                    "seamless": true
                },
                "application_restart": {
                    "description": "Restart applications on new transport",
                    "complexity": "medium",
                    "seamless": false
                },
                "session_resumption": {
                    "description": "Resume sessions using application-layer tokens",
                    "complexity": "low",
                    "seamless": true
                }
            }
        },
        "state_preservation": {
            "enabled": true,
            "state_types": {
                "authentication_tokens": {
                    "backup_location": "secure_storage",
                    "refresh_interval": 3600
                },
                "transaction_state": {
                    "backup_location": "persistent_queue",
                    "checkpoint_interval": 10
                },
                "user_session_data": {
                    "backup_location": "distributed_cache",
                    "replication_factor": 2
                }
            }
        }
    },
    "quality_adaptation": {
        "quality_profiles": {
            "high_quality": {
                "video_resolution": "4K",
                "audio_bitrate": "320kbps",
                "data_compression": "none"
            },
            "medium_quality": {
                "video_resolution": "1080p",
                "audio_bitrate": "128kbps",
                "data_compression": "lz4"
            },
            "low_quality": {
                "video_resolution": "720p",
                "audio_bitrate": "64kbps",
                "data_compression": "gzip"
            },
            "minimal_quality": {
                "video_resolution": "disabled",
                "audio_bitrate": "disabled",
                "data_compression": "brotli",
                "text_only": true
            }
        }
    },
    "state_machine": {
        "initial_state": "NORMAL_OPERATION",
        "states": {
            "NORMAL_OPERATION": {
                "description": "Primary transport operational",
                "active_transport": "primary"
            },
            "DEGRADED_PRIMARY": {
                "description": "Primary transport performance issues",
                "active_transport": "primary",
                "monitoring_increased": true
            },
            "FAILOVER_TRIGGERED": {
                "description": "Failover process initiated",
                "active_transport": "transitioning"
            },
            "SECONDARY_ACTIVE": {
                "description": "Operating on secondary transport",
                "active_transport": "secondary"
            },
            "TERTIARY_ACTIVE": {
                "description": "Operating on tertiary transport",
                "active_transport": "tertiary"
            },
            "EMERGENCY_MODE": {
                "description": "Emergency transport only",
                "active_transport": "emergency",
                "limited_functionality": true
            },
            "RECOVERY_TESTING": {
                "description": "Testing primary transport recovery",
                "active_transport": "current_backup",
                "testing_primary": true
            }
        },
        "transitions": [
            {
                "from": "NORMAL_OPERATION",
                "to": "DEGRADED_PRIMARY",
                "trigger": "performance_degradation"
            },
            {
                "from": "DEGRADED_PRIMARY",
                "to": "FAILOVER_TRIGGERED",
                "trigger": "critical_failure"
            },
            {
                "from": "FAILOVER_TRIGGERED",
                "to": "SECONDARY_ACTIVE",
                "trigger": "secondary_ready"
            },
            {
                "from": "SECONDARY_ACTIVE",
                "to": "TERTIARY_ACTIVE",
                "trigger": "secondary_failure"
            },
            {
                "from": "TERTIARY_ACTIVE",
                "to": "EMERGENCY_MODE",
                "trigger": "tertiary_failure"
            }
        ]
    },
    "orchestration": {
        "normal_operation": {
            "type": "parallel",
            "parallel_behaviors": [
                "primary_monitor",
                "application_services",
                "background_health_checks"
            ]
        },
        "failover_execution": {
            "type": "sequential",
            "trigger_condition": "failover_triggered",
            "sequence": [
                "stop_primary_services",
                "activate_backup_transport",
                "migrate_sessions",
                "resume_services",
                "verify_operation"
            ]
        },
        "recovery_phase": {
            "type": "parallel",
            "trigger_condition": "in_failover_state",
            "parallel_behaviors": [
                "recovery_monitor",
                "backup_transport_monitor",
                "failback_readiness_check"
            ]
        }
    },
    "monitoring": {
        "kpis": [
            "failover_frequency",
            "failover_duration",
            "session_migration_success_rate",
            "data_loss_incidents",
            "user_experience_impact"
        ],
        "alerts": {
            "failover_triggered": {
                "severity": "WARNING",
                "notification": "immediate"
            },
            "emergency_mode_active": {
                "severity": "CRITICAL",
                "notification": "immediate",
                "escalation": "management"
            },
            "frequent_failovers": {
                "condition": "failovers > 3 in 1 hour",
                "severity": "HIGH",
                "action": "investigate_root_cause"
            }
        }
    }
}