{
    "composition": {
        "name": "Hybrid_Discovery",
        "version": "1.0",
        "description": "Multi-transport discovery with failover and aggregation"
    },
    "discovery_config": {
        "strategy": "parallel_redundant",
        "timeout": 30000,
        "target_coverage": 95,
        "transport_priorities": [
            {
                "ethernet": 1
            },
            {
                "bluetooth": 2
            },
            {
                "lora": 3
            }
        ]
    },
    "transports": {
        "ethernet_transport": {
            "type": "ethernet",
            "services": {
                "arp_discovery": {
                    "type": "udp_multicast",
                    "bind": "0.0.0.0:0",
                    "multicast_groups": [
                        "224.0.0.1"
                    ]
                },
                "mdns_discovery": {
                    "type": "udp_multicast",
                    "bind": "0.0.0.0:5353",
                    "multicast_groups": [
                        "224.0.0.251"
                    ]
                }
            }
        },
        "bluetooth_transport": {
            "type": "bluetooth",
            "mode": "classic",
            "discoverable": true
        },
        "lora_transport": {
            "type": "lora",
            "frequency": 868000000,
            "spreading_factor": 7
        }
    },
    "behaviors": {
        "ethernet_arp_scan": {
            "type": "discovery",
            "transport": "ethernet_transport",
            "behavior_ref": "protocols/behaviors/discovery/arp_discovery.yaml",
            "parameters": {
                "scan_range": "192.168.1.0/24",
                "scan_interval": 100
            }
        },
        "ethernet_mdns_query": {
            "type": "discovery",
            "transport": "ethernet_transport",
            "payload": [
                {
                    "message_type": "MDNS_QUERY"
                },
                {
                    "query_type": "_services._dns-sd._udp.local"
                },
                {
                    "query_class": "IN"
                }
            ]
        },
        "bluetooth_inquiry": {
            "type": "discovery",
            "transport": "bluetooth_transport",
            "behavior_ref": "protocols/behaviors/discovery/bluetooth_inquiry.yaml",
            "parameters": {
                "inquiry_duration": 10240,
                "max_devices": 255
            }
        },
        "lora_network_scan": {
            "type": "discovery",
            "transport": "lora_transport",
            "behavior_ref": "protocols/behaviors/discovery/lora_beacon.yaml",
            "parameters": {
                "scan_channels": [
                    868100000,
                    868300000,
                    868500000
                ],
                "listen_duration": 10000
            }
        }
    },
    "orchestration": {
        "parallel_discovery_phase": {
            "type": "parallel",
            "duration": 15000,
            "parallel_behaviors": [
                {
                    "name": "ethernet_discovery",
                    "behaviors": [
                        "ethernet_arp_scan",
                        "ethernet_mdns_query"
                    ],
                    "priority": 1
                },
                {
                    "name": "bluetooth_discovery",
                    "behaviors": [
                        "bluetooth_inquiry"
                    ],
                    "priority": 2
                },
                {
                    "name": "lora_discovery",
                    "behaviors": [
                        "lora_network_scan"
                    ],
                    "priority": 3
                }
            ],
            "success_condition": {
                "or": [
                    {
                        "ethernet_devices_found": "> 5"
                    },
                    {
                        "bluetooth_devices_found": "> 2"
                    },
                    {
                        "lora_devices_found": "> 1"
                    }
                ]
            },
            "failure_condition": {
                "and": [
                    {
                        "total_devices_found": "< 3"
                    },
                    {
                        "elapsed_time": "> 10000"
                    }
                ]
            }
        },
        "focused_discovery_phase": {
            "type": "sequential",
            "trigger_condition": "parallel_discovery_phase.partial_success",
            "duration": 10000,
            "transport_selection": {
                "criteria": [
                    {
                        "device_count": 0.5
                    },
                    {
                        "response_time": 0.3
                    },
                    {
                        "signal_quality": 0.2
                    }
                ]
            },
            "behaviors": [
                "best_transport_deep_scan"
            ]
        },
        "fallback_discovery_phase": {
            "type": "sequential",
            "trigger_condition": "total_devices < target_coverage",
            "duration": 5000,
            "behaviors": [
                "fallback_transport_scan"
            ]
        }
    },
    "result_aggregation": {
        "deduplication": {
            "enabled": true,
            "match_criteria": [
                "mac_address",
                "device_name",
                "ip_address"
            ],
            "merge_strategy": "union"
        },
        "classification": {
            "device_types": [
                {
                    "name": "iot_sensor",
                    "criteria": [
                        {
                            "service_type": "sensor"
                        },
                        {
                            "protocol": [
                                "lora",
                                "zigbee"
                            ]
                        }
                    ]
                },
                {
                    "name": "computer",
                    "criteria": [
                        {
                            "service_type": [
                                "http",
                                "ssh",
                                "rdp"
                            ]
                        },
                        {
                            "os_type": [
                                "windows",
                                "linux",
                                "macos"
                            ]
                        }
                    ]
                },
                {
                    "name": "mobile_device",
                    "criteria": [
                        {
                            "transport": "bluetooth"
                        },
                        {
                            "device_class": [
                                "phone",
                                "tablet"
                            ]
                        }
                    ]
                },
                {
                    "name": "network_infrastructure",
                    "criteria": [
                        {
                            "service_type": [
                                "snmp",
                                "router",
                                "switch"
                            ]
                        }
                    ]
                }
            ]
        },
        "signal_correlation": {
            "enabled": true,
            "validation_rules": [
                {
                    "if": "device_found_on_ethernet AND device_found_on_bluetooth",
                    "then": "confidence += 0.3"
                },
                {
                    "if": "consistent_device_name_across_transports",
                    "then": "confidence += 0.2"
                },
                {
                    "if": "signal_strength_correlation > 0.8",
                    "then": "confidence += 0.1"
                }
            ]
        }
    },
    "adaptive_optimization": {
        "learning": {
            "enabled": true,
            "history_window": 10,
            "patterns": [
                "time_of_day_patterns",
                "location_based_patterns",
                "device_type_patterns"
            ]
        },
        "parameter_adaptation": {
            "scan_interval": {
                "optimal_range": [
                    50,
                    200
                ],
                "adaptation_factor": 0.1
            },
            "transmission_power": {
                "optimal_range": [
                    10,
                    20
                ],
                "adaptation_factor": 0.05
            },
            "timeout_values": {
                "optimal_range": [
                    1000,
                    5000
                ],
                "adaptation_factor": 0.2
            }
        }
    },
    "monitoring": {
        "metrics": [
            "devices_discovered_per_transport",
            "discovery_completion_time",
            "false_positive_rate",
            "coverage_percentage",
            "energy_consumption"
        ],
        "real_time_optimization": {
            "enabled": true,
            "optimization_triggers": [
                {
                    "low_discovery_rate": "< 50% expected devices"
                },
                {
                    "high_energy_consumption": "> 150% budget"
                },
                {
                    "poor_signal_quality": "< -90 dBm average"
                }
            ],
            "optimization_actions": [
                "adjust_transmission_power",
                "change_discovery_frequency",
                "switch_to_backup_transport",
                "modify_scan_parameters"
            ]
        }
    },
    "failure_recovery": {
        "transport_failures": {
            "ethernet_failure": {
                "detection": "no_response_for_5_seconds",
                "action": "increase_bluetooth_scanning"
            },
            "bluetooth_failure": {
                "detection": "inquiry_failed_3_times",
                "action": "focus_on_ethernet_and_lora"
            },
            "lora_failure": {
                "detection": "no_beacons_for_30_seconds",
                "action": "extend_ethernet_scanning"
            }
        },
        "degradation_strategy": {
            "full_functionality": "all_transports_operational",
            "reduced_functionality": "at_least_one_transport_operational",
            "minimal_functionality": "ethernet_only"
        }
    },
    "security": {
        "discovery_security": {
            "rate_limiting": true,
            "max_queries_per_second": 10
        },
        "privacy": {
            "anonymize_results": false,
            "encrypt_device_info": false,
            "respect_privacy_flags": true
        }
    },
    "output": {
        "report_format": "json",
        "report_sections": [
            "discovery_summary",
            "device_inventory",
            "transport_performance",
            "security_findings",
            "recommendations"
        ],
        "export": {
            "file_output": true,
            "api_endpoint": "http://inventory:8080/devices",
            "real_time_streaming": false
        }
    }
}