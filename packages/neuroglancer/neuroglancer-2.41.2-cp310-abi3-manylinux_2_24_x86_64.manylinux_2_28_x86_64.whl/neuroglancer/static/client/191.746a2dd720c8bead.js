"use strict";(globalThis.webpackChunkneuroglancer=globalThis.webpackChunkneuroglancer||[]).push([["191"],{4406:function(e,t,r){r.d(t,{Q:()=>o,q:()=>n});var s=r(2258);async function n(e,t,r,n,o){let i;for(let a=0;;){r.signal?.throwIfAborted(),a>1&&await new Promise(e=>setTimeout(e,(0,s.$C)(a-2))),i=await e.get(i,{signal:r.signal??void 0,progressListener:r.progressListener});try{return await (0,s.ru)("function"==typeof t?t(i.credentials):t,n(i.credentials,r))}catch(e){if(e instanceof s.oo&&"refresh"===o(e,i.credentials)){if(3==++a)throw e;continue}throw e}}}function o(e,t,r){return(s,o={})=>n(e,s,o,t,r)}},7399:function(e,t,r){r.d(t,{d:()=>l,i:()=>a});var s=r(4406),n=r(2258);function o(e,t){if(!e.accessToken)return t;let r=new Headers(t.headers);return r.set("Authorization",`${e.tokenType} ${e.accessToken}`),{...t,headers:r}}function i(e,t){let{status:r}=e;if(401===r||403===r&&!t.accessToken)return"refresh";throw e instanceof Error&&void 0!==t.email&&(e.message+=`  (Using credentials for ${JSON.stringify(t.email)})`),e}function a(e,t,r){return void 0===e?(0,n.ru)(t,r):(0,s.q)(e,t,r,o,i)}function l(e){return void 0===e?n.ru:(0,s.Q)(e,o,i)}},5898:function(e,t,r){r.d(t,{LD:()=>n,Wd:()=>i,Yn:()=>o,yP:()=>s});let s="CredentialsProvider",n="CredentialsProvider.get",o="CredentialsManager",i="CredentialsManager.get"},5675:function(e,t,r){r.d(t,{Yz:()=>n,i6:()=>o});class s{baseUrl;collection;experiment;channel;resolution}class n extends s{encoding;window;static RPC_ID="boss/VolumeChunkSource";static stringify(e){return`boss:volume:${e.baseUrl}/${e.collection}/${e.experiment}/${e.channel}/${e.resolution}/${e.encoding}`}}class o{baseUrl;static RPC_ID="boss/MeshChunkSource";static stringify(e){return`boss:mesh:${e.baseUrl}`}}},3488:function(e,t,r){r.d(t,{Jb:()=>u,LV:()=>o,WM:()=>c,f5:()=>i,i6:()=>a,ke:()=>n,zT:()=>l});var s,n=((s={})[s.RAW=0]="RAW",s[s.JPEG=1]="JPEG",s[s.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION",s);class o{instance;volumeId;scaleIndex;encoding;jpegQuality;changeSpec;static RPC_ID="brainmaps/VolumeChunkSource"}class i{instance;volumeId;info;changeSpec;static RPC_ID="brainmaps/MultiscaleMeshSource"}class a{instance;volumeId;meshName;changeSpec;static RPC_ID="brainmaps/MeshSource"}class l{instance;volumeId;meshName;changeSpec;static RPC_ID="brainmaps/SkeletonSource"}class u{instance;volumeId;changestack;upperVoxelBound;static RPC_ID="brainmaps/Annotation"}class c{instance;volumeId;changestack;static RPC_ID="brainmaps/AnnotationSpatialIndex"}},7484:function(e,t,r){r.d(t,{W:()=>n,j:()=>o});var s,n=((s={})[s.JPG=0]="JPG",s[s.JPEG=1]="JPEG",s[s.PNG=2]="PNG",s);class o{url;encoding;format;tilesize;overlap;static RPC_ID="deepzoom/ImageTileSource"}},2600:function(e,t,r){r.d(t,{Yz:()=>i,i6:()=>l,ke:()=>n,zT:()=>a});var s,n=((s={})[s.JPEG=0]="JPEG",s[s.RAW=1]="RAW",s[s.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION",s[s.COMPRESSED_SEGMENTATIONARRAY=3]="COMPRESSED_SEGMENTATIONARRAY",s);class o{baseUrl;nodeKey;dataInstanceKey;authServer;user}class i extends o{dataScale;encoding;static RPC_ID="dvid/VolumeChunkSource"}class a extends o{static RPC_ID="dvid/SkeletonSource"}class l extends o{static RPC_ID="dvid/MeshSource"}},835:function(e,t,r){r.d(t,{Y:()=>o,k:()=>n});var s,n=((s={})[s.RAW=0]="RAW",s[s.ZLIB=1]="ZLIB",s[s.GZIP=2]="GZIP",s[s.BLOSC=3]="BLOSC",s[s.ZSTD=4]="ZSTD",s);class o{url;encoding;static RPC_ID="n5/VolumeChunkSource"}},2147:function(e,t,r){r.d(t,{L:()=>n,_:()=>s});let s="nifti/getNiftiVolumeInfo";class n{url;static RPC_ID="nifti/VolumeChunkSource"}},602:function(e,t,r){r.d(t,{Jb:()=>p,WM:()=>d,Yz:()=>a,f5:()=>h,i6:()=>l,ke:()=>i,qm:()=>u,wC:()=>c,zT:()=>f});var s,n,o,i=((s={})[s.RAW=0]="RAW",s[s.JPEG=1]="JPEG",s[s.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION",s[s.COMPRESSO=3]="COMPRESSO",s[s.PNG=4]="PNG",s[s.JXL=5]="JXL",s);class a{url;encoding;sharding;static RPC_ID="precomputed/VolumeChunkSource"}class l{url;lod;static RPC_ID="precomputed/MeshSource"}var u=((n={})[n.RAW=0]="RAW",n[n.GZIP=1]="GZIP",n),c=((o={})[o.IDENTITY=0]="IDENTITY",o[o.MURMURHASH3_X86_128=1]="MURMURHASH3_X86_128",o);class h{url;metadata;static RPC_ID="precomputed/MultiscaleMeshSource"}class f{url;metadata;static RPC_ID="precomputed/SkeletonSource"}class d{url;sharding;static RPC_ID="precomputed/AnnotationSpatialIndexSource"}class p{rank;relationships;properties;byId;type;static RPC_ID="precomputed/AnnotationSource"}},7994:function(e,t,r){r.d(t,{Yz:()=>i,i6:()=>a,ke:()=>n,zT:()=>l});var s,n=((s={})[s.JPEG=0]="JPEG",s[s.NPZ=1]="NPZ",s[s.RAW=2]="RAW",s);class o{baseUrl;key}class i extends o{scaleKey;encoding;static RPC_ID="python/VolumeChunkSource"}class a extends o{static RPC_ID="python/MeshSource"}class l extends o{vertexAttributes;static RPC_ID="python/SkeletonSource"}},3074:function(e,t,r){r.d(t,{xd:()=>o});class s{baseUrl;owner;project;stack;channel}class n extends s{renderArgs}class o extends n{dims;level;encoding;static RPC_ID="render/TileChunkSource"}},6758:function(e,t,r){r.d(t,{Y:()=>s});class s{url;metadata;static RPC_ID="zarr/VolumeChunkSource"}},6363:function(e,t,r){r.d(t,{i:()=>n});var s,n=((s={})[s.arrayToArray=0]="arrayToArray",s[s.arrayToBytes=1]="arrayToBytes",s[s.bytesToBytes=2]="bytesToBytes",s)},6252:function(e,t,r){r.d(t,{$:()=>n});var s,n=((s={})[s.DEFAULT=0]="DEFAULT",s[s.V2=1]="V2",s)},1425:function(e,t,r){r.d(t,{B:()=>s});function s(e,t){return t>>>=0,e>>>=0,e=5*(e=((e=(e^(t=Math.imul(t=((t=Math.imul(t,0xcc9e2d51)>>>0)<<15|t>>>17)>>>0,0x1b873593)>>>0))>>>0)<<13|e>>>19)>>>0)+0xe6546b64>>>0}},7439:function(e,t,r){var s=r(4758);function n(e){let t=e.match(/^([0-9]+)-([0-9]+)$/);if(null!==t){let e=Number(t[1]),r=Number(t[2]);if(r>=e)return{offset:e,length:r-e}}throw Error(`Invalid key ${JSON.stringify(e)} for "byte-range:", expected "<begin>-<end>"`)}class o{base;constructor(e){this.base=e}getUrl(e){return this.base.getUrl()+`|byte-range:${e}`}async stat(e,t){let{length:r}=n(e);return{totalSize:r}}async read(e,t){let r=n(e);return new s.uX(this.base,r).read(t)}get supportsOffsetReads(){return!0}get supportsSuffixReads(){return!0}get singleKey(){return!0}}var i=r(6985),a=r(9858),l=r(6923);a.u.registerKvStoreAdapterProvider(function(){return{scheme:"byte-range",description:"byte range slicing",getKvStore:(e,t)=>((0,l.uh)(e),{store:new o(new i.f2(t.store,t.path)),path:e.suffix??""})}})},8580:function(e,t,r){r.d(t,{e:()=>i});var s=r(4881),n=r(6985),o=r(6923);class i{baseKvStoreProviders=new Map;kvStoreAdapterProviders=new Map;autoDetectRegistry=new s._E;getKvStore(e){let t;let r=(0,o.pN)(e);{let e=r[0];t=this.getBaseKvStoreProvider(e).getKvStore(e)}for(let e=1;e<r.length;++e)t=this.applyKvStoreAdapterUrl(t,r[e]);return t}getFileHandle(e){let{store:t,path:r}=this.getKvStore(e);return new n.f2(t,r)}getBaseKvStoreProvider(e){let t=this.baseKvStoreProviders.get(e.scheme);if(void 0===t){let t=this.describeProtocolUsage(e.scheme),r=`Invalid base kvstore protocol "${e.scheme}:"`;throw void 0!==t&&(r+=`; ${t}`),Error(r)}return t}getKvStoreAdapterProvider(e){let t=this.kvStoreAdapterProviders.get(e.scheme);if(void 0===t){let t=this.describeProtocolUsage(e.scheme),r=`Invalid kvstore adapter protocol "${e.scheme}:"`;throw void 0!==t&&(r+=`; ${t}`),Error(r+=`; supported schemes: ${JSON.stringify(Array.from(this.kvStoreAdapterProviders.keys()))}`)}return t}applyKvStoreAdapterUrl(e,t){return this.getKvStoreAdapterProvider(t).getKvStore(t,e)}describeProtocolUsage(e){return this.baseKvStoreProviders.has(e)?`"${e}:" may only be used as a base kvstore protocol`:this.kvStoreAdapterProviders.has(e)?`"${e}:" may only be used as a kvstore adapter protocol`:void 0}stat(e,t={}){let r=this.getKvStore(e);return r.store.stat(r.path,t)}read(e,t={}){let r=this.getKvStore(e);return(0,n.BF)(r.store,r.path,t)}list(e,t={}){let r=this.getKvStore(e);return(0,n.RQ)(r.store,r.path,t)}resolveRelativePath(e,t){let r=this.getKvStore(e);return r.store.getUrl((0,o.i1)(r.path,t))}}},6594:function(e,t,r){r.d(t,{J:()=>c});var s=r(119),n=r(6923),o=r(2258),i=r(290),a=r(7734),l=r(6224);function u(e){var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var s=Error(r);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};return(u=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var s,n=0;return function t(){for(;s=e.stack.pop();)try{if(!s.async&&1===n)return n=0,e.stack.push(s),Promise.resolve().then(t);if(s.dispose){var o=s.dispose.call(s.value);if(s.async)return n|=2,Promise.resolve(o).then(t,function(e){return r(e),t()})}else n|=1}catch(e){r(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}class c{bucket;baseUrlForDisplay;fetchOkImpl;constructor(e,t=`gs://${e}/`,r=o.ru){this.bucket=e,this.baseUrlForDisplay=t,this.fetchOkImpl=r}getObjectUrl(e){return`https://storage.googleapis.com/storage/v1/b/${this.bucket}/o/${encodeURIComponent(e)}?alt=media&neuroglancer=${(0,l.c0)()}`}stat(e,t){return(0,s.l)(this,e,this.getObjectUrl(e),t,this.fetchOkImpl)}read(e,t){return(0,s.i)(this,e,this.getObjectUrl(e),t,this.fetchOkImpl)}async list(e,t){let r={stack:[],error:void 0,hasError:!1};try{let{progressListener:s}=t;!function(e,t,r){if(null!=t){var s,n;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],r&&(n=s)}if("function"!=typeof s)throw TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0})}(r,void 0===s?void 0:new a.Vi(s,{message:`Listing prefix ${this.getUrl(e)}`}),!1);let n=await this.fetchOkImpl(`https://storage.googleapis.com/storage/v1/b/${this.bucket}/o?delimiter=${encodeURIComponent("/")}&prefix=${encodeURIComponent(e)}&neuroglancerOrigin=${encodeURIComponent(location.origin)}`,{signal:t.signal,progressListener:t.progressListener}),o=await n.json();(0,i.PT)(o);let l=(0,i.Kh)(o,"prefixes",i.zE,[]).map(e=>e.substring(0,e.length-1)),u=(0,i.Kh)(o,"items",e=>(0,i.m7)(e,e=>((0,i.PT)(e),(0,i.uq)(e,"name",i.ZE))),[]).filter(e=>!e.endsWith("_$folder$")).map(e=>({key:e}));return{directories:l,entries:u}}catch(e){r.error=e,r.hasError=!0}finally{u(r)}}getUrl(e){return this.baseUrlForDisplay+(0,n.aU)(e)}get supportsOffsetReads(){return!0}get supportsSuffixReads(){return!0}}},2298:function(e,t,r){var s=r(3032),n=r(6594);r(9858).u.registerBaseKvStoreProvider(function(e){return{scheme:"gs",description:s.Z?"Google Cloud Storage":"Google Cloud Storage (anonymous)",getKvStore(e){let t=(e.suffix??"").match(/^\/\/([^/]+)(\/.*)?$/);if(null===t)throw Error("Invalid URL, expected `gs://<bucket>/<path>`");let[,r,s]=t;return{store:new n.J(r),path:decodeURIComponent((s??"").substring(1))}}}})},4634:function(e,t,r){r.d(t,{Ll:()=>n});var s=r(2136);class n{base;format;constructor(e,t){this.base=e,this.format=t}async stat(e){return await this.base.stat(e),{totalSize:void 0}}async read(e){let{byteRange:t}=e;if(void 0===t){let t=await this.base.read(e);if(void 0===t)return;return{response:new Response((0,s.Nk)(t.response,this.format)),offset:0,length:void 0,totalSize:void 0}}if("suffixLength"in t||0!==t.offset)throw Error(`Byte range with offset not supported: ${JSON.stringify(t)}`);let r=new Uint8Array(t.length),n=[],o=0,i=t.length+100;for(;;){let t=await this.base.read({...e,byteRange:{offset:o,length:i-o}});if(void 0===t)return;{let e=new Uint8Array(await t.response.arrayBuffer());n.push(e),o+=e.length}let s=new DecompressionStream("gzip"),a=s.writable.getWriter(),l=[];for(let e of n)l.push(a.write(e));l.push(a.close());let u=s.readable.getReader(),c=0;try{for(;c<r.length;){let{value:e}=await u.read();if(void 0===e)break;let t=r.length-c;e.length>t&&(e=e.subarray(0,t)),r.set(e,c),c+=e.length}if(c===r.length||o===t.totalSize)return c<r.length&&(r=r.subarray(0,c)),{response:new Response(r),offset:0,length:r.length,totalSize:void 0}}finally{await u.cancel(),await Promise.allSettled(l)}i+=Math.min(100,r.length-c)}}getUrl(){return this.base.getUrl()+"|gzip"}}},8679:function(e,t,r){var s=r(4634),n=r(2136);class o{base;scheme;format;constructor(e,t,r){this.base=e,this.scheme=t,this.format=r}getUrl(e){return this.validatePath(e),this.base.getUrl()+`|${this.scheme}`}validatePath(e){if(e)throw Error(`"${this.scheme}:" does not support non-empty path ${JSON.stringify(e)}`)}async stat(e,t){return this.validatePath(e),await this.base.stat(t),{totalSize:void 0}}async read(e,t){return this.validatePath(e),new s.Ll(this.base,this.format).read(t)}get supportsOffsetReads(){return!1}get supportsSuffixReads(){return!1}get singleKey(){return!0}}async function i(e){return(0,n.fK)(e.prefix)?[{suffix:"gzip:",description:"gzip-compressed"}]:[]}var a=r(6985),l=r(9858),u=r(6923);l.u.registerKvStoreAdapterProvider(()=>{var e,t;return t="gzip",{scheme:e="gzip",description:`transparent ${e} decoding`,getKvStore:(r,s)=>((0,u.zY)(r),{store:new o(new a.f2(s.store,s.path),e,t),path:""})}}),function(e){e.registerFileFormat({prefixLength:3,suffixLength:0,match:i})}(l.u.autoDetectRegistry)},3078:function(e,t,r){r.d(t,{X:()=>a,Z:()=>i});var s=r(119),n=r(6923),o=r(2258);class i{sharedKvStoreContext;baseUrl;baseUrlForDisplay;fetchOkImpl;constructor(e,t,r=t,s=o.ru){this.sharedKvStoreContext=e,this.baseUrl=t,this.baseUrlForDisplay=r,this.fetchOkImpl=s}stat(e,t){return(0,s.l)(this,e,(0,n.Lj)(this.baseUrl,e),t,this.fetchOkImpl)}read(e,t){return(0,s.i)(this,e,(0,n.Lj)(this.baseUrl,e),t,this.fetchOkImpl)}getUrl(e){return(0,n.Lj)(this.baseUrlForDisplay,e)}get supportsOffsetReads(){return!0}get supportsSuffixReads(){return!0}}function a(e,t){for(let r of["http","https"])e.registerBaseKvStoreProvider(e=>(function(e,t,r){return{scheme:e,description:`${e} (unauthenticated)`,getKvStore(e){try{let{baseUrl:s,path:o}=(0,n.f0)(e.url);return{store:new r(t,s),path:o}}catch(t){throw Error(`Invalid URL ${JSON.stringify(e.url)}`,{cause:t})}}}})(r,e,t))}},119:function(e,t,r){r.d(t,{i:()=>c,l:()=>d});var s=r(4758),n=r(6985),o=r(2258);function i(e){if(void 0!==e)return`bytes=${e.offset}-${e.offset+e.length-1}`}let a=-1!==navigator.userAgent.indexOf("Chrome")?"no-store":"default";function l(e,t){return new URL(e).pathname+"/"===new URL(t.url).pathname}function u(e){let t;let r=e.match(/bytes ([0-9]+)-([0-9]+)\/([0-9]+|\*)/);if(null===r)throw Error(`Invalid content-range header: ${JSON.stringify(e)}`);let s=parseInt(r[1],10),n=parseInt(r[2],10);return"*"!==r[3]&&(t=parseInt(r[3],10)),{offset:s,length:n-s+1,totalSize:t}}async function c(e,t,r,n,p=o.ru){let g;try{let o,c,f,v;let{byteRange:m}=n;if(void 0!==m){if("suffixLength"in m){let a=await d(e,t,r,n,p);if(void 0===a)return;let{totalSize:l}=a;if(void 0===l)throw Error(`Failed to determine total size of ${e.getUrl(t)} in order to fetch suffix ${JSON.stringify(m)}`);if(g=(0,s.z2)({offset:0,length:l},m).outer,0===g.length)return{...g,totalSize:l,response:new Response(new Uint8Array(0))};o=i(g)}else g=m,o=0===g.length?i({offset:Math.max(g.offset-1,0),length:1}):i(g)}let S={signal:n.signal,progressListener:n.progressListener};void 0!==o&&(S.headers={range:o},S.cache=a);let y=await p(r,S);if(l(r,y))return;if(206===y.status){let e=y.headers.get("content-range");if(null===e){if(void 0!==g)c=g.offset;else throw Error("Unexpected HTTP 206 response when no byte range specified.")}null!==e&&({offset:c,length:f,totalSize:v}=u(e))}else f=v=h(y.headers);return void 0===c&&(c=0),void 0===f&&(f=h(y.headers)),g?.length===0&&(y=new Response(new Uint8Array(0)),c=g.offset,f=0),{response:y,offset:c,length:f,totalSize:v}}catch(r){if(r instanceof o.oo&&416===r.status&&g?.length===0&&0===g.offset)return{response:new Response(new Uint8Array(0)),offset:0,length:0,totalSize:0};return f(e,t,n,r)}}function h(e){let t=e.get("content-length");if(null===e.get("content-encoding")&&null!==t){let e=Number(t);if(!Number.isFinite(e)||e<0)throw Error("Invalid content-length: {contentLength}");return e}}function f(e,t,r,s){if((0,o.XD)(s)){if(!0===r.throwIfMissing)throw new n.dR(new n.f2(e,t),{cause:s});return}throw s}async function d(e,t,r,s,n=o.ru){try{let e=await n(r,{method:"HEAD",signal:s.signal,progressListener:s.progressListener});if(l(r,e))return;return{totalSize:h(e.headers)}}catch(r){if(!(r instanceof o.oo)||405!==r.status&&501!==r.status)return f(e,t,s,r)}try{let e;let t=await n(r,{signal:s.signal,progressListener:s.progressListener,headers:{range:"bytes=0-0"}});if(l(r,t))return;if(200===t.status)e=h(t.headers);else{let r=t.headers.get("content-range");null!==r&&({totalSize:e}=u(r))}return{totalSize:e}}catch(r){if(r instanceof o.oo&&416===r.status)return{totalSize:0};return f(e,t,s,r)}}},5139:function(e,t,r){r.d(t,{X:()=>i});var s=r(7399),n=r(6923);let o="middleauth+";function i(e,t){for(let r of["https"])e.registerBaseKvStoreProvider(e=>(function(e,t,r){return{scheme:o+e,description:`${e} with middleauth`,getKvStore(e){let i=e.url.substring(o.length),a=t.credentialsManager.getCredentialsProvider("middleauthapp",new URL(i).origin);try{let{baseUrl:e,path:l}=(0,n.f0)(i);return{store:new r(t,e,o+e,(0,s.d)(a)),path:l}}catch(t){throw Error(`Invalid URL ${JSON.stringify(e.url)}`,{cause:t})}}}})(r,e,t))}},8366:function(e,t,r){var s=r(3032),n=r(7399),o=r(6594),i=r(9858);let a="gs+ngauth+";for(let e of["http","https"])i.u.registerBaseKvStoreProvider(t=>(function(e,t){return{scheme:e,description:s.Z?"Google Cloud Storage":"Google Cloud Storage (ngauth)",getKvStore(e){var r;let i=(e.suffix??"").match(/^\/\/([^/]+)\/([^/]+)(\/.*)?$/);if(null===i)throw Error(`Invalid URL, expected ${e.scheme}://<ngauth-server>/<bucket>/<path>`);let[,l,u,c]=i,h=e.scheme.substring(a.length)+"://"+l,f=(r=t.credentialsManager,s.Z?r.getCredentialsProvider("gcs",{bucket:u}):r.getCredentialsProvider("ngauth_gcs",{authServer:h,bucket:u}));return{store:new o.J(u,`${e.scheme}://${l}/${u}/`,(0,n.d)(f)),path:decodeURIComponent((c??"").substring(1))}}}})(`${a}${e}`,t))},9922:function(e,t,r){r.d(t,{k:()=>o,r:()=>i});var s=r(8274),n=r(6923);function o(e,t){let{version:r,baseUrl:o}=e,i=void 0===r?"":`@${(0,s.ko)(r)}/`;return o+`|ocdbt:${i}${(0,n.aU)(t)}`}function i(e,t){(0,n.uh)(e);try{let[,r,o]=(e.suffix??"").match(/^(?:@([^/]*)(?:\/|$))?(.*)$/);return{baseUrl:t.store.getUrl((0,n.V8)(t.path)),version:(0,s.wy)(r),path:decodeURIComponent(o)}}catch(t){throw Error(`Invalid URL: ${e.url}`,{cause:t})}}},9858:function(e,t,r){r.d(t,{X:()=>n,u:()=>o});var s=r(4881);class n{baseKvStoreProviders=[];kvStoreAdapterProviders=[];autoDetectRegistry=new s._E;registerBaseKvStoreProvider(e){this.baseKvStoreProviders.push(e)}registerKvStoreAdapterProvider(e){this.kvStoreAdapterProviders.push(e)}applyToContext(e){let{kvStoreContext:t}=e;for(let r of["baseKvStoreProviders","kvStoreAdapterProviders"]){let s=t[r];for(let t of this[r]){let r=t(e),{scheme:n}=r;if(s.has(n))throw Error(`Duplicate kvstore scheme ${n}`);s.set(n,r)}}this.autoDetectRegistry.copyTo(e.kvStoreContext.autoDetectRegistry)}}let o=new n},3126:function(e,t,r){r.d(t,{S:()=>u,X:()=>c});var s=r(119),n=r(732),o=r(6923),i=r(2258),a=r(7734);function l(e){var t="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var s=Error(r);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};return(l=function(e){function r(r){e.error=e.hasError?new t(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var s,n=0;return function t(){for(;s=e.stack.pop();)try{if(!s.async&&1===n)return n=0,e.stack.push(s),Promise.resolve().then(t);if(s.dispose){var o=s.dispose.call(s.value);if(s.async)return n|=2,Promise.resolve(o).then(t,function(e){return r(e),t()})}else n|=1}catch(e){r(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()})(e)}class u{sharedKvStoreContext;baseUrl;baseUrlForDisplay;knownToBeVirtualHostedStyle;fetchOkImpl;constructor(e,t,r,s,n=i.ru){this.sharedKvStoreContext=e,this.baseUrl=t,this.baseUrlForDisplay=r,this.knownToBeVirtualHostedStyle=s,this.fetchOkImpl=n}stat(e,t){let r=(0,o.Lj)(this.baseUrl,e);return(0,s.l)(this,e,r,t,this.fetchOkImpl)}read(e,t){let r=(0,o.Lj)(this.baseUrl,e);return(0,s.i)(this,e,r,t,this.fetchOkImpl)}list(e,t){let r={stack:[],error:void 0,hasError:!1};try{let{progressListener:s}=t;if(!function(e,t,r){if(null!=t){var s,n;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],r&&(n=s)}if("function"!=typeof s)throw TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0})}(r,void 0===s?void 0:new a.Vi(s,{message:`Listing prefix ${this.getUrl(e)}`}),!1),this.knownToBeVirtualHostedStyle)return(0,n.ib)(this.baseUrl,e,this.fetchOkImpl,t);return(0,n.g6)((0,o.Lj)(this.baseUrl,e),this.baseUrlForDisplay,this.sharedKvStoreContext.chunkManager.memoize,this.fetchOkImpl,t)}catch(e){r.error=e,r.hasError=!0}finally{l(r)}}getUrl(e){return(0,o.Lj)(this.baseUrlForDisplay,e)}get supportsOffsetReads(){return!0}get supportsSuffixReads(){return!0}}function c(e,t){for(let r of(e.registerBaseKvStoreProvider(e=>({scheme:"s3",description:"S3 (anonymous)",getKvStore(r){let s=(r.suffix??"").match(/^\/\/([^/]+)(\/.*)?$/);if(null===s)throw Error("Invalid URL, expected `s3://<bucket>/<path>`");let[,n,o]=s;return{store:new t(e,`https://${n}.s3.amazonaws.com/`,`s3://${n}/`,!0),path:decodeURIComponent((o??"").substring(1))}}})),["http","https"]))e.registerBaseKvStoreProvider(e=>(function(e,t,r){return{scheme:`s3+${t}`,description:`S3-compatible ${t} server`,getKvStore(s){let n=(s.suffix??"").match(/^\/\/([^/]+)(\/.*)?$/);if(null===n)throw Error("Invalid URL, expected `s3+${httpScheme}://<host>/<path>`");let[,o,i]=n;return{store:new r(e,`${t}://${o}/`,`s3+${t}://${o}/`,!1),path:decodeURIComponent((i??"").substring(1))}}}})(e,r,t))}},6249:function(e,t,r){r.d(t,{Bg:()=>i,F0:()=>s,aJ:()=>a,cn:()=>o,md:()=>n});let s="SharedKvStoreContext",n="SharedKvStoreContext.stat",o="SharedKvStoreContext.read",i="SharedKvStoreContext.list",a="SharedKvStoreContext.completeUrl"},7688:function(e,t,r){r.d(t,{Ff:()=>i,k_:()=>l,nL:()=>n,q7:()=>o,ve:()=>s});let s="mesh/MeshLayer",n="mesh/MultiscaleMeshLayer",o="mesh/FragmentSource",i="mesh/MultiscaleFragmentSource";var a,l=((a={})[a.float32=0]="float32",a[a.uint10=1]="uint10",a[a.uint16=2]="uint16",a)},9443:function(e,t,r){r.d(t,{w:()=>s});let s="perspective_view/PerspectiveView"},1395:function(e,t,r){r.d(t,{ny:()=>s,rC:()=>o,ti:()=>n,uH:()=>i});let s="rendered_view.addLayer",n="rendered_view.removeLayer",o="SharedProjectionParameters",i="SharedProjectionParameters.changed"},8956:function(e,t,r){r.d(t,{J6:()=>a,Sk:()=>o,V4:()=>s,Wl:()=>n});let s="single_mesh/SingleMeshLayer",n="single_mesh/getSingleMeshInfo",o="";class i{meshSourceUrl}class a extends i{info;static RPC_ID="single_mesh/SingleMeshSource"}},5105:function(e,t,r){r.d(t,{f:()=>s});let s="skeleton/SkeletonLayer"},9023:function(e,t,r){r.d(t,{d:()=>o});var s=r(3783),n=r(3853);class o{size;transform;invTransform;detTransform;finiteRank;constructor(e,t,r){this.size=s.R3.clone(e),this.transform=s._E.clone(t),this.finiteRank=r;let o=s._E.create(),i=n.SO(o,4,t,4,4);if(0===i)throw Error("Transform is singular");this.invTransform=o,this.detTransform=i}toObject(){return{size:this.size,transform:this.transform,finiteRank:this.finiteRank}}static fromObject(e){return new o(e.size,e.transform,e.finiteRank)}globalToLocalSpatial(e,t){return s.R3.transformMat4(e,t,this.invTransform)}localSpatialVectorToGlobal(e,t){return(0,s.vx)(e,t,this.transform)}globalToLocalNormal(e,t){return(0,s._Z)(e,t,this.transform)}}},2606:function(e,t,r){function s(e,t){if(void 0!==e){if(e.aborted){t(e.reason);return}return e.addEventListener("abort",r,{once:!0}),{[Symbol.dispose](){e.removeEventListener("abort",r)}}}function r(){t(this.reason)}}r.d(t,{L0:()=>o,eg:()=>n,oi:()=>i});class n{consumers=new Map;controller=new AbortController;retainCount=0;get signal(){return this.controller.signal}addConsumer(e){if(!this.controller.signal.aborted){if(void 0!==e){if(e.aborted)return;let t=this;e.addEventListener("abort",function e(){t.consumers.delete(e),0==--t.retainCount&&(t.controller.abort(),t[Symbol.dispose]())},{once:!0})}++this.retainCount}}[Symbol.dispose](){for(let[e,t]of this.consumers)t.removeEventListener("abort",e);this.consumers.clear(),this.retainCount=0}start(){0===this.retainCount&&this.controller.abort()}}function o(e,t){let{promise:r,resolve:n,reject:o}=Promise.withResolvers(),i=s(e,t);return{promise:r,resolve:e=>{i?.[Symbol.dispose](),n(e)},reject:e=>{i?.[Symbol.dispose](),o(e)}}}function i(e,t){return void 0===t?e:t.aborted?Promise.reject(t.reason):new Promise((r,n)=>{let o=s(t,e=>{n(e)});e.then(e=>{o?.[Symbol.dispose](),r(e)},e=>{o?.[Symbol.dispose](),n(e)})})}},5901:function(e,t,r){r.d(t,{H:()=>s});function s(e){let t=-1;return Object.assign(()=>{-1===t&&(t=requestAnimationFrame(()=>{t=-1,e()}))},{flush:()=>{-1!==t&&(t=-1,e())},cancel:()=>{-1!==t&&(cancelAnimationFrame(t),t=-1)}})}},658:function(e,t,r){r.d(t,{D:()=>c});var s=r(4066),n=r(3719),o=r(686);class i{value;rank;parent;next;prev;min;constructor(e){this.value=e,this.rank=0,this.parent=this,this.next=this,this.prev=this,this.min=e}}function a(e){let t=e,r=e.parent;for(;r!==e;)r=(e=r).parent;for(e=t.parent;r!==e;)t.parent=r,e=(t=e).parent;return r}function*l(e){let t=e;do yield t.value,t=t.next;while(t!==e)}function u(e){return e.parent===e}class c{map=new Map;visibleSegmentEquivalencePolicy=new n.SN(s.BA.MIN_REPRESENTATIVE);generation=0;has(e){return this.map.has(e)}get(e){let t=this.map.get(e);return void 0===t?e:a(t).min}isMinElement(e){return e===this.get(e)}makeSet(e){let{map:t}=this,r=t.get(e);return void 0===r?(r=new i(e),t.set(e,r),r):a(r)}link(e,t){let r=this.makeSet(e),n=this.makeSet(t);if(r===n)return!1;this.generation++;let o=function(e,t){let r=e.rank,s=t.rank;return r>s?(t.parent=e,e):(e.parent=t,r===s&&(t.rank=s+1),t)}(r,n);!function(e,t){let r=e.prev,s=t.prev;t.prev=r,r.next=t,e.prev=s,s.next=e}(r,n);let i=r.min,a=n.min,l=(this.visibleSegmentEquivalencePolicy.value&s.BA.MAX_REPRESENTATIVE)!=0;return o.min=i<a===l?a:i,!0}linkAll(e){for(let t=1,r=e.length;t<r;++t)this.link(e[0],e[t])}deleteSet(e){let{map:t}=this,r=!1;for(let s of this.setElements(e))t.delete(s),r=!0;return r&&++this.generation,r}*setElements(e){let t=this.map.get(e);void 0===t?yield e:yield*l(t)}clear(){let{map:e}=this;return 0!==e.size&&(++this.generation,e.clear(),!0)}get size(){return this.map.size}*mappings(){for(let e of this.map.values())yield[e.value,a(e).min]}*roots(){for(let e of this.map.values())u(e)&&(yield e.value)}[Symbol.iterator](){return this.mappings()}toJSON(){let e=[];for(let t of this.map.values())if(u(t)){let r=[];for(let e of l(t))r.push(e);r.sort(o._f),e.push(r)}return e.sort((e,t)=>(0,o._f)(e[0],t[0])),e.map(e=>e.map(e=>e.toString()))}}},5931:function(e,t,r){r.d(t,{i:()=>n});let s=new Float32Array(1);function n(e){s[0]=e,e=s[0];for(let t=1;t<21;++t){let r=e.toPrecision(t);if(s[0]=parseFloat(r),s[0]===e)return r}return e.toString()}},2258:function(e,t,r){r.d(t,{$C:()=>n,XD:()=>i,oo:()=>s,ru:()=>o});class s extends Error{url;status;statusText;response;constructor(e,t,r,s,n){let o=`Fetching ${JSON.stringify(e)} resulted in HTTP error ${t}`;r&&(o+=`: ${r}`),super(o+=".",n),this.name="HttpError",this.message=o,this.url=e,this.status=t,this.statusText=r,s&&(this.response=s)}static fromResponse(e){return new s(e.url,e.status,e.statusText,e)}static fromRequestError(e,t){if(t instanceof TypeError){let r;return new s("string"==typeof e?e:e.url,0,"Network or CORS error",void 0,{cause:t})}return t}}function n(e){return Math.min(2**e*500,5e3)*(1+Math.random())}async function o(e,t){for(let r=0;;){let o;t?.signal?.throwIfAborted();try{o=await fetch(e,t)}catch(t){throw s.fromRequestError(e,t)}if(!o.ok){let{status:e}=o;if((429===e||503===e||504===e)&&32!=++r){await new Promise(e=>setTimeout(e,n(r-1)));continue}throw s.fromResponse(o)}return o}}function i(e){return e instanceof s&&(0===e.status||403===e.status||404===e.status)}},7902:function(e,t,r){r.d(t,{Z:()=>s});function s(e){let{next:t,prev:r}=e;return{insertAfter(e,s){let n=e[t];s[t]=n,s[r]=e,e[t]=s,n[r]=s},insertBefore(e,s){let n=e[r];s[r]=n,s[t]=e,e[r]=s,n[t]=s},front(e){let r=e[t];return r===e?null:r},back(e){let t=e[r];return t===e?null:t},pop(e){let s=e[t],n=e[r];return s[r]=n,n[t]=s,e[t]=null,e[r]=null,e},*iterator(e){for(let r=e[t];r!==e;r=r[t])yield r},*reverseIterator(e){for(let t=e[r];t!==e;t=t[r])yield t},initializeHead(e){e[t]=e[r]=e}}}},4571:function(e,t,r){r.d(t,{E7:()=>u,O1:()=>l,PW:()=>a});var s=r(2606),n=r(106),o=r(290),i=r(7734);class a{map=new Map;get(e,t){let{map:r}=this,s=r.get(e);return void 0===s?((s=t()).registerDisposer(()=>{r.delete(e)}),r.set(e,s)):s.addRef(),s}}class l extends a{get(e,t){return"string"!=typeof e&&(e=(0,o.hd)(e)),super.get(e,t)}getUncounted(e,t){return this.get(e,()=>new n.IF(t())).value}getAsync(e,t,r){return this.getUncounted(e,()=>u(r))(t)}}function u(e){let t,r,n;let o=!1;return async a=>{if(o)return n;let{signal:l}=a;if(l?.throwIfAborted(),void 0===n||r.signal.aborted){t=new i.Zi;let a=r=new s.eg;n=(async()=>{try{return await e({signal:a.signal,progressListener:t})}catch(e){throw a.signal.aborted&&(n=void 0),e}finally{void 0!==n&&(o=!0),t=void 0,a[Symbol.dispose](),r===a&&(r=void 0)}})()}r.addConsumer(l);let u=t;u.addListener(a.progressListener);try{return await (0,s.oi)(n,l)}finally{u.removeListener(a.progressListener)}}}},7927:function(e,t,r){r.d(t,{M:()=>o});let s=Symbol("objectId"),n=0;function o(e){if(e instanceof Object){let t=e[s];return void 0===t&&(t=e[s]=n++),`o${t}`}return""+JSON.stringify(e)}},2374:function(e,t,r){r(549),r(2679)},6235:function(e,t,r){r.d(t,{B:()=>s});function s(e,t){return e<t?-1:e>t?1:0}},5580:function(e,t,r){r.d(t,{B:()=>o});var s=r(290),n=r(566);class o{enumType;value_;defaultValue;changed;constructor(e,t,r=t){this.enumType=e,this.value_=t,this.defaultValue=r,this.changed=new n.K_}set value(e){this.value_!==e&&(this.value_=e,this.changed.dispatch())}get value(){return this.value_}reset(){this.value=this.defaultValue}restoreState(e){this.value=(0,s.CT)(e,this.enumType)}toJSON(){if(this.value_!==this.defaultValue)return this.enumType[this.value_].toLowerCase()}}},4186:function(e,t,r){r.d(t,{$:()=>i,u:()=>o});var s,n=r(5580),o=((s={})[s.OFF=0]="OFF",s[s.ON=1]="ON",s[s.FORCE=2]="FORCE",s[s.PREVIEW=3]="PREVIEW",s);class i extends n.B{constructor(e,t=e){super(o,e,t)}}},3032:function(e,t,r){r.d(t,{Z:()=>s});let s=!0},9652:function(e,t,r){r.d(t,{B:()=>n});var s=r(4571);function n(e){let t=e.getContext("webgl2",{antialias:!1,stencil:!0});if(null==t)throw Error("WebGL not supported.");for(let e of(t.memoize=new s.PW,t.maxTextureSize=t.getParameter(WebGL2RenderingContext.MAX_TEXTURE_SIZE),t.max3dTextureSize=t.getParameter(WebGL2RenderingContext.MAX_3D_TEXTURE_SIZE),t.maxTextureImageUnits=t.getParameter(WebGL2RenderingContext.MAX_TEXTURE_IMAGE_UNITS),t.tempTextureUnit=t.maxTextureImageUnits-1,["EXT_color_buffer_float"]))if(!t.getExtension(e))throw Error(`${e} extension not available`);for(let e of["EXT_float_blend"])t.getExtension(e);return t}}}]);
//# sourceMappingURL=191.746a2dd720c8bead.js.map