<form
  id="spending-filters"
  class="bg-surface-container mx-auto mb-2 grid max-w-2xl grid-cols-2 gap-2 rounded-xl p-2 md:grid-cols-3"
  hx-swap-oob="{{ oob }}"
  hx-include="this"
>
  <label class="input-outlined input-bg-surface-container">
    <select name="period" autocomplete="off" onchange="spending.changePeriod()">
      {% for item in ctx.options_period %}
        <option
          value="{{ item.key }}"
          {% if item.key == ctx.selected_period %}selected{% endif %}
        >
          {{ item.name }}
        </option>
      {% endfor %}
    </select>
    <div>
      <div>Date range</div>
    </div>
  </label>
  <label class="input-outlined input-bg-surface-container">
    <input
      id="spending-filter-start"
      name="start"
      type="date"
      value="{{ ctx.start or '' }}"
      autocomplete="off"
      {% if ctx.selected_period != "custom" %}disabled{% endif %}
    />
    <div>
      <div>Start date</div>
    </div>
  </label>
  <label class="input-outlined input-bg-surface-container">
    <input
      id="spending-filter-end"
      name="end"
      type="date"
      value="{{ ctx.end or '' }}"
      autocomplete="off"
      {% if ctx.selected_period != "custom" %}disabled{% endif %}
    />
    <div>
      <div>End date</div>
    </div>
  </label>
  <label
    class="input-outlined input-bg-surface-container col-start-2 max-md:row-start-1 md:col-start-1"
  >
    <select
      name="account"
      autocomplete="off"
      {% if ctx.no_matches and not ctx.selected_account %}disabled{% endif %}
    >
      <option value=""></option>
      {% for item in ctx.options_account %}
        <option
          value="{{ item.key }}"
          {% if item.key == ctx.selected_account %}selected{% endif %}
        >
          {{ item.name }}
        </option>
      {% endfor %}
    </select>
    <div>
      <div>Account</div>
    </div>
  </label>
  <label class="input-outlined input-bg-surface-container col-span-2">
    <select
      name="category"
      autocomplete="off"
      {% if ctx.no_matches and not ctx.selected_category %}disabled{% endif %}
      onkeyup="onSelectKey(event)"
    >
      <option value=""></option>
      {% with category_groups=ctx.options_category, selected_uri=ctx.selected_category %}
        {% include "shared/category-options.jinja" %}
      {% endwith %}
    </select>
    <div>
      <div>Category</div>
    </div>
  </label>
  <label
    class="input-outlined input-bg-surface-container col-span-2 col-start-1 md:col-start-2"
  >
    <select
      name="label"
      autocomplete="off"
      {% if ctx.no_matches and not ctx.selected_label %}disabled{% endif %}
    >
      <option value=""></option>
      {% for item in ctx.options_label %}
        <option
          value="{{ item.key }}"
          {% if item.key == ctx.selected_label %}selected{% endif %}
        >
          {{ item.name }}
        </option>
      {% endfor %}
    </select>
    <div>
      <div>Label</div>
    </div>
  </label>
  <div
    class="col-span-full flex justify-around"
    hx-target="#spending-chart-data"
  >
    <button
      class="btn-filled"
      hx-get="{{ url_for(controller + '.chart') }}"
      hx-disabled-elt="this"
    >
      Apply filter
    </button>
    <button
      class="btn-text"
      type="button"
      hx-get="{{ url_for(controller + '.chart') }}"
      hx-disabled-elt="this"
      hx-include="unset"
    >
      Clear all filters
    </button>
  </div>
</form>
