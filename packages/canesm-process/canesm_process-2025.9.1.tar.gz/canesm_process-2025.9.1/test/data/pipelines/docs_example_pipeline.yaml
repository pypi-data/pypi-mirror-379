# the `setup` section helps define I/O but does not directly compute anything.
setup:

    canesm_version: "6.0"
    file_format: "netcdf4"

    # output directories define where results from each stage will go.
    output_directories:
        monthly: 'diags/monthly'

    # `stages` defines the order in which pipelines will run.
    stages:
        - transforms
        - monthly

# for this examples we'll create two stages: "transfroms" and "monthly"
# transforms are applied to variables after opening files but before any processing
transforms:
    variables:
        - OLR:
            rename: RLUT
        - FSO:
            rename: RSTD
        - FSR:
            rename: RSUT

# `monthly` is a special keyword whose `variables`` should resampled and averaged at monthly granularity.
# `daily` and `yearly` keywords are also available.
monthly:
    reuse: transforms
    # variables come from files generated by CanESM
    variables:
        - OLR
        - FSR
        - FSO
    # computed values are derived from `variables` in this stage.
        - BALT: "FSO-FSR-OLR"
