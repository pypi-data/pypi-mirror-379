from fastapi_mail import FastMail, ConnectionConfig
from pydantic import SecretStr
from pathlib import Path

from ..core.config import settings

# Templates folder (for email HTML templates)
TEMPLATES_DIR = Path(__file__).parent / "templates"

# FastAPI-Mail configuration
email_config = ConnectionConfig(
    MAIL_FROM=settings.MAIL_FROM,
    MAIL_FROM_NAME=settings.MAIL_FROM_NAME,
    MAIL_PORT=settings.MAIL_PORT,
    MAIL_SERVER=settings.MAIL_SERVER,
    MAIL_USERNAME="",
    MAIL_PASSWORD=SecretStr(""),
    MAIL_SSL_TLS=False,
    MAIL_STARTTLS=False,
    USE_CREDENTIALS=False,
    VALIDATE_CERTS=False,
    TEMPLATE_FOLDER=None,
)

# FastMail instance for sending emails
fastmail = FastMail(email_config)
