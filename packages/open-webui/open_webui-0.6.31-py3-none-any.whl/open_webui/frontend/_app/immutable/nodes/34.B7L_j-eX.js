import{S as h,i as M,s as S,m as w,g as E,r as f,u as D,q as _,d as C,k as l,v as N,w as P,C as q,D as A,E as B,F as J,y as L,n as O}from"../chunks/BpeRjEzf.js";import"../chunks/IHki7fMi.js";import{t as m}from"../chunks/W3liupZx.js";import{g as U}from"../chunks/3K180Vpd.js";import{a as v,c as F,d as y,g as R}from"../chunks/B863V-9z.js";import{c as W}from"../chunks/BpFQ6lid.js";import{g as j}from"../chunks/CBZFsLb-.js";import{M as x}from"../chunks/I2Ljw_ny.js";function k(n){let a,s;return a=new x({props:{model:n[0],onSubmit:n[2]}}),{c(){q(a.$$.fragment)},l(r){A(a.$$.fragment,r)},m(r,e){B(a,r,e),s=!0},p(r,e){const t={};e&1&&(t.model=r[0]),a.$set(t)},i(r){s||(_(a.$$.fragment,r),s=!0)},o(r){f(a.$$.fragment,r),s=!1},d(r){J(a,r)}}}function z(n){let a=n[0],s,r,e=k(n);return{c(){e.c(),s=w()},l(t){e.l(t),s=w()},m(t,c){e.m(t,c),E(t,s,c),r=!0},p(t,[c]){c&1&&S(a,a=t[0])?(L(),f(e,1,1,O),D(),e=k(t),e.c(),_(e,1),e.m(s.parentNode,s)):e.p(t,c)},i(t){r||(_(e),r=!0)},o(t){f(e),r=!1},d(t){t&&C(s),e.d(t)}}}function G(n,a,s){let r,e,t,c;l(n,v,o=>s(4,e=o)),l(n,F,o=>s(5,t=o)),l(n,y,o=>s(6,c=o));const p=N("i18n");l(n,p,o=>s(3,r=o));const b=async o=>{var i;if(c.find(g=>g.id===o.id)){m.error(p.t("Error: A model with the ID '{{modelId}}' already exists. Please select a different ID to proceed.",{modelId:o.id}));return}if(o.id===""){m.error(r.t("Error: Model ID cannot be empty. Please enter a valid ID to proceed."));return}o&&await W(localStorage.token,{...o,meta:{...o.meta,profile_image_url:o.meta.profile_image_url??`${R}/static/favicon.png`,suggestion_prompts:o.meta.suggestion_prompts?o.meta.suggestion_prompts.filter(d=>d.content!==""):null},params:{...o.params}}).catch(d=>(m.error(`${d}`),null))&&(await y.set(await j(localStorage.token,((i=t==null?void 0:t.features)==null?void 0:i.enable_direct_connections)&&((e==null?void 0:e.directConnections)??null))),m.success(r.t("Model created successfully!")),await U("/workspace/models"))};let u=null;return P(async()=>{window.addEventListener("message",async o=>{if(!["https://openwebui.com","https://www.openwebui.com","http://localhost:5173"].includes(o.origin))return;let i=JSON.parse(o.data);i!=null&&i.info&&(i=i.info),s(0,u=i)}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.model&&(s(0,u=JSON.parse(sessionStorage.model)),sessionStorage.removeItem("model"))}),[u,p,b]}class I extends h{constructor(a){super(),M(this,a,G,z,S,{})}}export{I as component};
//# sourceMappingURL=34.B7L_j-eX.js.map
