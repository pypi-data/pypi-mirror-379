import{e as ie,d as ht,c as pt,u as _t}from"./B863V-9z.js";import{S as Se,i as je,s as Ce,W as rt,X as st,a as k,d as u,f,g as T,h as c,n as nt,H as pe,I as _e,C as R,D as W,E as J,K as ge,q as B,r as N,F as K,k as oe,v as Le,e as w,t as O,l as V,c as v,b as A,p as U,G as te,j as M,y as Ae,u as Me,P as gt,x as bt,z as wt,A as vt,B as kt,M as yt,L as at,J as $t,O as Et}from"./BpeRjEzf.js";import"./IHki7fMi.js";import{t as Pe}from"./W3liupZx.js";import{a as Fe,s as It,b as Dt}from"./CRy6EL-3.js";import{f as St}from"./BvhXBtnk.js";import{M as ct}from"./BhjJtu3B.js";import{L as jt}from"./DsmBtJ6j.js";import{X as dt}from"./C5v5GryL.js";import"./D1_AUG_k.js";import{b as Ct,c as Oe}from"./BcvTzfAu.js";import{f as Tt}from"./g5t9vw8M.js";import{D as Bt}from"./DHIcdO2O.js";import{G as Vt}from"./zDkaPNEj.js";import{P as Ut}from"./wao1Aep9.js";import{T as Nt}from"./t7JSQ-4O.js";import{D as xt}from"./BzWGW5qq.js";import{S as Ft}from"./B9AxoR9S.js";import"./3K180Vpd.js";import{T as Ot}from"./Cb5uHaQd.js";import{K as At}from"./CaicRIdL.js";const Tl=async(a,e)=>{let t=null;const l=await fetch(`${ie}/folders/`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify(e)}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(t=n.detail,null));if(t)throw t;return l},Bl=async(a="")=>{let e=null;const t=await fetch(`${ie}/folders/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`}}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).then(l=>l).catch(l=>(e=l.detail,null));if(e)throw e;return t},Vl=async(a,e,t)=>{let l=null;const n=await fetch(`${ie}/folders/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify(t)}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(l=o.detail,null));if(l)throw l;return n},Ul=async(a,e,t)=>{let l=null;const n=await fetch(`${ie}/folders/${e}/update/expanded`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify({is_expanded:t})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(l=o.detail,null));if(l)throw l;return n},Nl=async(a,e,t)=>{let l=null;const n=await fetch(`${ie}/folders/${e}/update/parent`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`},body:JSON.stringify({parent_id:t})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(l=o.detail,null));if(l)throw l;return n},xl=async(a,e)=>{let t=null;const l=await fetch(`${ie}/folders/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${a}`}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(t=n.detail,null));if(t)throw t;return l};function Mt(a){let e,t;return{c(){e=rt("svg"),t=rt("path"),this.h()},l(l){e=st(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=k(e);t=st(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(u),n.forEach(u),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",a[1]),f(e,"stroke","currentColor"),f(e,"class",a[0])},m(l,n){T(l,e,n),c(e,t)},p(l,[n]){n&2&&f(e,"stroke-width",l[1]),n&1&&f(e,"class",l[0])},i:nt,o:nt,d(l){l&&u(e)}}}function Pt(a,e,t){let{className:l="size-4"}=e,{strokeWidth:n="1.5"}=e;return a.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,n=o.strokeWidth)},[l,n]}class Fl extends Se{constructor(e){super(),je(this,e,Pt,Mt,Ce,{className:0,strokeWidth:1})}}function ot(a){var z;let e,t,l,n,o,s,r,i,g,p,b,d,_;function y(h,E){return h[2].share_id?zt:Lt}let S=y(a),j=S(a),$=((z=a[4])==null?void 0:z.features.enable_community_sharing)&&it(a);g=new jt({});function F(h,E){return h[2].share_id?Wt:Rt}let m=F(a),C=m(a);return{c(){e=w("div"),t=w("div"),j.c(),l=V(),n=w("div"),o=w("div"),s=w("div"),$&&$.c(),r=V(),i=w("button"),R(g.$$.fragment),p=V(),C.c(),this.h()},l(h){e=v(h,"DIV",{class:!0});var E=k(e);t=v(E,"DIV",{class:!0});var q=k(t);j.l(q),q.forEach(u),l=U(E),n=v(E,"DIV",{class:!0});var I=k(n);o=v(I,"DIV",{class:!0});var Z=k(o);s=v(Z,"DIV",{class:!0});var H=k(s);$&&$.l(H),r=U(H),i=v(H,"BUTTON",{class:!0,type:!0,id:!0});var G=k(i);W(g.$$.fragment,G),p=U(G),C.l(G),G.forEach(u),H.forEach(u),Z.forEach(u),I.forEach(u),E.forEach(u),this.h()},h(){f(t,"class","text-sm dark:text-gray-300 mb-1"),f(i,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),f(i,"type","button"),f(i,"id","copy-and-share-chat-button"),f(s,"class","flex gap-1"),f(o,"class","flex flex-col items-end space-x-1 mt-3"),f(n,"class","flex justify-end"),f(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(h,E){T(h,e,E),c(e,t),j.m(t,null),c(e,l),c(e,n),c(n,o),c(o,s),$&&$.m(s,null),c(s,r),c(s,i),J(g,i,null),c(i,p),C.m(i,null),b=!0,d||(_=te(i,"click",a[11]),d=!0)},p(h,E){var q;S===(S=y(h))&&j?j.p(h,E):(j.d(1),j=S(h),j&&(j.c(),j.m(t,null))),(q=h[4])!=null&&q.features.enable_community_sharing?$?$.p(h,E):($=it(h),$.c(),$.m(s,r)):$&&($.d(1),$=null),m===(m=F(h))&&C?C.p(h,E):(C.d(1),C=m(h),C&&(C.c(),C.m(i,null)))},i(h){b||(B(g.$$.fragment,h),b=!0)},o(h){N(g.$$.fragment,h),b=!1},d(h){h&&u(e),j.d(),$&&$.d(),K(g),C.d(),d=!1,_()}}}function Lt(a){let e=a[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",t;return{c(){t=O(e)},l(l){t=A(l,e)},m(l,n){T(l,t,n)},p(l,n){n&8&&e!==(e=l[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&M(t,e)},d(l){l&&u(t)}}}function zt(a){let e,t=a[3].t("You have shared this chat")+"",l,n,o,s=a[3].t("before")+"",r,i,g,p,b=a[3].t("Click here to")+"",d,_,y,S=a[3].t("delete this link")+"",j,$,F=a[3].t("and create a new shared link.")+"",m,C,z;return{c(){e=w("a"),l=O(t),n=V(),o=w("span"),r=O(s),i=O("."),p=V(),d=O(b),_=V(),y=w("button"),j=O(S),$=V(),m=O(F),this.h()},l(h){e=v(h,"A",{href:!0,target:!0});var E=k(e);l=A(E,t),n=U(E),o=v(E,"SPAN",{class:!0});var q=k(o);r=A(q,s),q.forEach(u),i=A(E,"."),E.forEach(u),p=U(h),d=A(h,b),_=U(h),y=v(h,"BUTTON",{class:!0});var I=k(y);j=A(I,S),I.forEach(u),$=U(h),m=A(h,F),this.h()},h(){f(o,"class","underline"),f(e,"href",g="/s/"+a[2].share_id),f(e,"target","_blank"),f(y,"class","underline")},m(h,E){T(h,e,E),c(e,l),c(e,n),c(e,o),c(o,r),c(e,i),T(h,p,E),T(h,d,E),T(h,_,E),T(h,y,E),c(y,j),T(h,$,E),T(h,m,E),C||(z=te(y,"click",a[9]),C=!0)},p(h,E){E&8&&t!==(t=h[3].t("You have shared this chat")+"")&&M(l,t),E&8&&s!==(s=h[3].t("before")+"")&&M(r,s),E&4&&g!==(g="/s/"+h[2].share_id)&&f(e,"href",g),E&8&&b!==(b=h[3].t("Click here to")+"")&&M(d,b),E&8&&S!==(S=h[3].t("delete this link")+"")&&M(j,S),E&8&&F!==(F=h[3].t("and create a new shared link.")+"")&&M(m,F)},d(h){h&&(u(e),u(p),u(d),u(_),u(y),u($),u(m)),C=!1,z()}}}function it(a){let e,t=a[3].t("Share to Open WebUI Community")+"",l,n,o;return{c(){e=w("button"),l=O(t),this.h()},l(s){e=v(s,"BUTTON",{class:!0,type:!0});var r=k(e);l=A(r,t),r.forEach(u),this.h()},h(){f(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),f(e,"type","button")},m(s,r){T(s,e,r),c(e,l),n||(o=te(e,"click",a[10]),n=!0)},p(s,r){r&8&&t!==(t=s[3].t("Share to Open WebUI Community")+"")&&M(l,t)},d(s){s&&u(e),n=!1,o()}}}function Rt(a){let e=a[3].t("Copy Link")+"",t;return{c(){t=O(e)},l(l){t=A(l,e)},m(l,n){T(l,t,n)},p(l,n){n&8&&e!==(e=l[3].t("Copy Link")+"")&&M(t,e)},d(l){l&&u(t)}}}function Wt(a){let e=a[3].t("Update and Copy Link")+"",t;return{c(){t=O(e)},l(l){t=A(l,e)},m(l,n){T(l,t,n)},p(l,n){n&8&&e!==(e=l[3].t("Update and Copy Link")+"")&&M(t,e)},d(l){l&&u(t)}}}function Jt(a){let e,t,l,n=a[3].t("Share Chat")+"",o,s,r,i,g,p,b,d;i=new dt({props:{className:"size-5"}});let _=a[2]&&ot(a);return{c(){e=w("div"),t=w("div"),l=w("div"),o=O(n),s=V(),r=w("button"),R(i.$$.fragment),g=V(),_&&_.c(),this.h()},l(y){e=v(y,"DIV",{});var S=k(e);t=v(S,"DIV",{class:!0});var j=k(t);l=v(j,"DIV",{class:!0});var $=k(l);o=A($,n),$.forEach(u),s=U(j),r=v(j,"BUTTON",{class:!0});var F=k(r);W(i.$$.fragment,F),F.forEach(u),j.forEach(u),g=U(S),_&&_.l(S),S.forEach(u),this.h()},h(){f(l,"class","text-lg font-medium self-center"),f(r,"class","self-center"),f(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(y,S){T(y,e,S),c(e,t),c(t,l),c(l,o),c(t,s),c(t,r),J(i,r,null),c(e,g),_&&_.m(e,null),p=!0,b||(d=te(r,"click",a[8]),b=!0)},p(y,S){(!p||S&8)&&n!==(n=y[3].t("Share Chat")+"")&&M(o,n),y[2]?_?(_.p(y,S),S&4&&B(_,1)):(_=ot(y),_.c(),B(_,1),_.m(e,null)):_&&(Ae(),N(_,1,1,()=>{_=null}),Me())},i(y){p||(B(i.$$.fragment,y),B(_),p=!0)},o(y){N(i.$$.fragment,y),N(_),p=!1},d(y){y&&u(e),K(i),_&&_.d(),b=!1,d()}}}function Kt(a){let e,t,l;function n(s){a[12](s)}let o={size:"md",$$slots:{default:[Jt]},$$scope:{ctx:a}};return a[0]!==void 0&&(o.show=a[0]),e=new ct({props:o}),pe.push(()=>_e(e,"show",n)),{c(){R(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,r){J(e,s,r),l=!0},p(s,[r]){const i={};r&65567&&(i.$$scope={dirty:r,ctx:s}),!t&&r&1&&(t=!0,i.show=s[0],ge(()=>t=!1)),e.$set(i)},i(s){l||(B(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){K(e,s)}}}function qt(a,e,t){let l,n,o;oe(a,ht,m=>t(14,l=m)),oe(a,pt,m=>t(4,o=m));let{chatId:s}=e,r=null,i=null;const g=Le("i18n");oe(a,g,m=>t(3,n=m));const p=async()=>{const m=await It(localStorage.token,s);return i=`${window.location.origin}/s/${m.id}`,t(2,r=await Fe(localStorage.token,s)),i},b=async()=>{const m=r.chat;Pe.success(n.t("Redirecting you to Open WebUI Community"));const C="https://openwebui.com",z=await window.open(`${C}/chats/upload`,"_blank");window.addEventListener("message",h=>{h.origin===C&&h.data==="loaded"&&z.postMessage(JSON.stringify({chat:m,models:l.filter(E=>m.models.includes(E.id))}),"*")},!1)};let{show:d=!1}=e;const _=m=>r?m?r.id!==m.id||r.share_id!==m.share_id:!1:!0,y=()=>{t(0,d=!1)},S=async()=>{await Dt(localStorage.token,s)&&t(2,r=await Fe(localStorage.token,s))},j=()=>{b(),t(0,d=!1)},$=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const C=async()=>{const z=await p();return new Blob([z],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":C()})]).then(()=>!0).catch(z=>!1)}else St(await p());Pe.success(n.t("Copied shared chat URL to clipboard!")),t(0,d=!1)};function F(m){d=m,t(0,d)}return a.$$set=m=>{"chatId"in m&&t(1,s=m.chatId),"show"in m&&t(0,d=m.show)},a.$$.update=()=>{a.$$.dirty&7&&d&&(async()=>{if(s){const m=await Fe(localStorage.token,s);_(m)&&t(2,r=m)}else t(2,r=null)})()},[d,s,r,n,o,g,p,b,y,S,j,$,F]}class Ol extends Se{constructor(e){super(),je(this,e,qt,Kt,Ce,{chatId:1,show:0})}}function Gt(a){let e,t,l,n;const o=a[8].default,s=bt(o,a,a[15],null);return{c(){e=w("button"),s&&s.c()},l(r){e=v(r,"BUTTON",{});var i=k(e);s&&s.l(i),i.forEach(u)},m(r,i){T(r,e,i),s&&s.m(e,null),t=!0,l||(n=te(e,"click",a[12]),l=!0)},p(r,i){s&&s.p&&(!t||i&32768)&&wt(s,o,r,r[15],t?kt(o,r[15],i,null):vt(r[15]),null)},i(r){t||(B(s,r),t=!0)},o(r){N(s,r),t=!1},d(r){r&&u(e),s&&s.d(r),l=!1,n()}}}function Ht(a){let e,t;return e=new Nt({props:{content:a[5].t("More"),$$slots:{default:[Gt]},$$scope:{ctx:a}}}),{c(){R(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,n){J(e,l,n),t=!0},p(l,n){const o={};n&32&&(o.content=l[5].t("More")),n&32784&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){K(e,l)}}}function Yt(a){let e,t,l,n=a[5].t("Edit")+"",o,s;return e=new Ut({}),{c(){R(e.$$.fragment),t=V(),l=w("div"),o=O(n),this.h()},l(r){W(e.$$.fragment,r),t=U(r),l=v(r,"DIV",{class:!0});var i=k(l);o=A(i,n),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(r,i){J(e,r,i),T(r,t,i),T(r,l,i),c(l,o),s=!0},p(r,i){(!s||i&32)&&n!==(n=r[5].t("Edit")+"")&&M(o,n)},i(r){s||(B(e.$$.fragment,r),s=!0)},o(r){N(e.$$.fragment,r),s=!1},d(r){r&&(u(t),u(l)),K(e,r)}}}function Xt(a){let e,t,l,n=a[5].t("Export")+"",o,s;return e=new xt({}),{c(){R(e.$$.fragment),t=V(),l=w("div"),o=O(n),this.h()},l(r){W(e.$$.fragment,r),t=U(r),l=v(r,"DIV",{class:!0});var i=k(l);o=A(i,n),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(r,i){J(e,r,i),T(r,t,i),T(r,l,i),c(l,o),s=!0},p(r,i){(!s||i&32)&&n!==(n=r[5].t("Export")+"")&&M(o,n)},i(r){s||(B(e.$$.fragment,r),s=!0)},o(r){N(e.$$.fragment,r),s=!1},d(r){r&&(u(t),u(l)),K(e,r)}}}function Zt(a){let e,t,l,n=a[5].t("Delete")+"",o,s;return e=new Vt({}),{c(){R(e.$$.fragment),t=V(),l=w("div"),o=O(n),this.h()},l(r){W(e.$$.fragment,r),t=U(r),l=v(r,"DIV",{class:!0});var i=k(l);o=A(i,n),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(r,i){J(e,r,i),T(r,t,i),T(r,l,i),c(l,o),s=!0},p(r,i){(!s||i&32)&&n!==(n=r[5].t("Delete")+"")&&M(o,n)},i(r){s||(B(e.$$.fragment,r),s=!0)},o(r){N(e.$$.fragment,r),s=!1},d(r){r&&(u(t),u(l)),K(e,r)}}}function Qt(a){let e,t,l,n,o,s;return e=new Oe({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Yt]},$$scope:{ctx:a}}}),e.$on("click",a[9]),l=new Oe({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Xt]},$$scope:{ctx:a}}}),l.$on("click",a[10]),o=new Oe({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$slots:{default:[Zt]},$$scope:{ctx:a}}}),o.$on("click",a[11]),{c(){R(e.$$.fragment),t=V(),R(l.$$.fragment),n=V(),R(o.$$.fragment)},l(r){W(e.$$.fragment,r),t=U(r),W(l.$$.fragment,r),n=U(r),W(o.$$.fragment,r)},m(r,i){J(e,r,i),T(r,t,i),J(l,r,i),T(r,n,i),J(o,r,i),s=!0},p(r,i){const g={};i&32800&&(g.$$scope={dirty:i,ctx:r}),e.$set(g);const p={};i&32800&&(p.$$scope={dirty:i,ctx:r}),l.$set(p);const b={};i&32800&&(b.$$scope={dirty:i,ctx:r}),o.$set(b)},i(r){s||(B(e.$$.fragment,r),B(l.$$.fragment,r),B(o.$$.fragment,r),s=!0)},o(r){N(e.$$.fragment,r),N(l.$$.fragment,r),N(o.$$.fragment,r),s=!1},d(r){r&&(u(t),u(n)),K(e,r),K(l,r),K(o,r)}}}function el(a){let e,t,l;return t=new Ct({props:{class:"w-full max-w-[170px] rounded-2xl px-1 py-1 border border-gray-100  dark:border-gray-800   z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:a[0],transition:Tt,$$slots:{default:[Qt]},$$scope:{ctx:a}}}),{c(){e=w("div"),R(t.$$.fragment),this.h()},l(n){e=v(n,"DIV",{slot:!0});var o=k(e);W(t.$$.fragment,o),o.forEach(u),this.h()},h(){f(e,"slot","content")},m(n,o){T(n,e,o),J(t,e,null),l=!0},p(n,o){const s={};o&1&&(s.align=n[0]),o&32814&&(s.$$scope={dirty:o,ctx:n}),t.$set(s)},i(n){l||(B(t.$$.fragment,n),l=!0)},o(n){N(t.$$.fragment,n),l=!1},d(n){n&&u(e),K(t)}}}function tl(a){let e,t,l;function n(s){a[13](s)}let o={$$slots:{content:[el],default:[Ht]},$$scope:{ctx:a}};return a[4]!==void 0&&(o.show=a[4]),e=new Bt({props:o}),pe.push(()=>_e(e,"show",n)),e.$on("change",a[14]),{c(){R(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,r){J(e,s,r),l=!0},p(s,[r]){const i={};r&32831&&(i.$$scope={dirty:r,ctx:s}),!t&&r&16&&(t=!0,i.show=s[4],ge(()=>t=!1)),e.$set(i)},i(s){l||(B(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){K(e,s)}}}function ll(a,e,t){let l,{$$slots:n={},$$scope:o}=e;const s=Le("i18n");oe(a,s,m=>t(5,l=m));const r=gt();let{align:i="start"}=e,{onEdit:g=()=>{}}=e,{onExport:p=()=>{}}=e,{onDelete:b=()=>{}}=e,d=!1;const _=()=>{g()},y=()=>{p()},S=()=>{b()},j=m=>{m.stopPropagation(),t(4,d=!d)};function $(m){d=m,t(4,d)}const F=m=>{m.detail===!1&&r("close")};return a.$$set=m=>{"align"in m&&t(0,i=m.align),"onEdit"in m&&t(1,g=m.onEdit),"onExport"in m&&t(2,p=m.onExport),"onDelete"in m&&t(3,b=m.onDelete),"$$scope"in m&&t(15,o=m.$$scope)},[i,g,p,b,d,l,s,r,n,_,y,S,j,$,F,o]}class Al extends Se{constructor(e){super(),je(this,e,ll,tl,Ce,{align:0,onEdit:1,onExport:2,onDelete:3})}}function rl(a){let e=a[6].t("Create Folder")+"",t;return{c(){t=O(e)},l(l){t=A(l,e)},m(l,n){T(l,t,n)},p(l,n){n&64&&e!==(e=l[6].t("Create Folder")+"")&&M(t,e)},d(l){l&&u(t)}}}function sl(a){let e=a[6].t("Edit Folder")+"",t;return{c(){t=O(e)},l(l){t=A(l,e)},m(l,n){T(l,t,n)},p(l,n){n&64&&e!==(e=l[6].t("Edit Folder")+"")&&M(t,e)},d(l){l&&u(t)}}}function ut(a){let e,t,l=a[6].t("System Prompt")+"",n,o,s,r,i,g;function p(d){a[16](d)}let b={className:" text-sm w-full bg-transparent outline-hidden ",placeholder:a[6].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`),maxSize:200};return a[4].system_prompt!==void 0&&(b.value=a[4].system_prompt),r=new Ot({props:b}),pe.push(()=>_e(r,"value",p)),{c(){e=w("div"),t=w("div"),n=O(l),o=V(),s=w("div"),R(r.$$.fragment),this.h()},l(d){e=v(d,"DIV",{class:!0});var _=k(e);t=v(_,"DIV",{class:!0});var y=k(t);n=A(y,l),y.forEach(u),o=U(_),s=v(_,"DIV",{});var S=k(s);W(r.$$.fragment,S),S.forEach(u),_.forEach(u),this.h()},h(){f(t,"class","mb-2 text-xs text-gray-500"),f(e,"class","my-1")},m(d,_){T(d,e,_),c(e,t),c(t,n),c(e,o),c(e,s),J(r,s,null),g=!0},p(d,_){(!g||_&64)&&l!==(l=d[6].t("System Prompt")+"")&&M(n,l);const y={};_&64&&(y.placeholder=d[6].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`)),!i&&_&16&&(i=!0,y.value=d[4].system_prompt,ge(()=>i=!1)),r.$set(y)},i(d){g||(B(r.$$.fragment,d),g=!0)},o(d){N(r.$$.fragment,d),g=!1},d(d){d&&u(e),K(r)}}}function nl(a){let e,t,l,n=a[6].t("Knowledge")+"",o;return{c(){e=w("div"),t=w("div"),l=w("div"),o=O(n),this.h()},l(s){e=v(s,"DIV",{slot:!0});var r=k(e);t=v(r,"DIV",{class:!0});var i=k(t);l=v(i,"DIV",{class:!0});var g=k(l);o=A(g,n),g.forEach(u),i.forEach(u),r.forEach(u),this.h()},h(){f(l,"class","mb-2 text-xs text-gray-500"),f(t,"class","flex w-full justify-between"),f(e,"slot","label")},m(s,r){T(s,e,r),c(e,t),c(t,l),c(l,o)},p(s,r){r&64&&n!==(n=s[6].t("Knowledge")+"")&&M(o,n)},d(s){s&&u(e)}}}function ft(a){let e,t,l;return t=new Ft({}),{c(){e=w("div"),R(t.$$.fragment),this.h()},l(n){e=v(n,"DIV",{class:!0});var o=k(e);W(t.$$.fragment,o),o.forEach(u),this.h()},h(){f(e,"class","ml-2 self-center")},m(n,o){T(n,e,o),J(t,e,null),l=!0},i(n){l||(B(t.$$.fragment,n),l=!0)},o(n){N(t.$$.fragment,n),l=!1},d(n){n&&u(e),K(t)}}}function al(a){var Je,Ke,qe,Ge;let e,t,l,n,o,s,r,i,g,p,b,d,_=a[6].t("Folder Name")+"",y,S,j,$,F,m,C,z,h,E,q=a[6].t("Folder Background Image")+"",I,Z,H,G,le,ue=((((Je=a[3])==null?void 0:Je.background_image_url)??null)===null?a[6].t("Upload"):a[6].t("Reset"))+"",be,Te,we,Be,ve,ne,re,Ve,Ue,ae,X,fe=a[6].t("Save")+"",ke,Ne,ye,Q,xe,ze;function Re(D,x){return D[1]?sl:rl}let $e=Re(a),ee=$e(a);s=new dt({props:{className:"size-5"}});let P=(((Ke=a[7])==null?void 0:Ke.role)==="admin"||(((Ge=(qe=a[7])==null?void 0:qe.permissions.chat)==null?void 0:Ge.system_prompt)??!0))&&ut(a);function mt(D){a[17](D)}let We={$$slots:{label:[nl]},$$scope:{ctx:a}};a[4].files!==void 0&&(We.selectedItems=a[4].files),re=new At({props:We}),pe.push(()=>_e(re,"selectedItems",mt));let L=a[5]&&ft();return{c(){e=w("div"),t=w("div"),l=w("div"),ee.c(),n=V(),o=w("button"),R(s.$$.fragment),r=V(),i=w("div"),g=w("div"),p=w("form"),b=w("div"),d=w("div"),y=O(_),S=V(),j=w("div"),$=w("input"),m=V(),C=w("input"),z=V(),h=w("div"),E=w("div"),I=O(q),Z=V(),H=w("div"),G=w("button"),le=w("span"),be=O(ue),Te=V(),we=w("hr"),Be=V(),P&&P.c(),ve=V(),ne=w("div"),R(re.$$.fragment),Ue=V(),ae=w("div"),X=w("button"),ke=O(fe),Ne=V(),L&&L.c(),this.h()},l(D){e=v(D,"DIV",{});var x=k(e);t=v(x,"DIV",{class:!0});var se=k(t);l=v(se,"DIV",{class:!0});var ce=k(l);ee.l(ce),ce.forEach(u),n=U(se),o=v(se,"BUTTON",{class:!0});var de=k(o);W(s.$$.fragment,de),de.forEach(u),se.forEach(u),r=U(x),i=v(x,"DIV",{class:!0});var me=k(i);g=v(me,"DIV",{class:!0});var he=k(g);p=v(he,"FORM",{class:!0});var Y=k(p);b=v(Y,"DIV",{class:!0});var Ee=k(b);d=v(Ee,"DIV",{class:!0});var He=k(d);y=A(He,_),He.forEach(u),S=U(Ee),j=v(Ee,"DIV",{class:!0});var Ye=k(j);$=v(Ye,"INPUT",{id:!0,class:!0,type:!0,placeholder:!0,autocomplete:!0}),Ye.forEach(u),Ee.forEach(u),m=U(Y),C=v(Y,"INPUT",{id:!0,type:!0,accept:!0}),z=U(Y),h=v(Y,"DIV",{class:!0});var Ie=k(h);E=v(Ie,"DIV",{class:!0});var Xe=k(E);I=A(Xe,q),Xe.forEach(u),Z=U(Ie),H=v(Ie,"DIV",{class:!0});var Ze=k(H);G=v(Ze,"BUTTON",{"aria-labelledby":!0,class:!0,type:!0});var Qe=k(G);le=v(Qe,"SPAN",{class:!0,id:!0});var et=k(le);be=A(et,ue),et.forEach(u),Qe.forEach(u),Ze.forEach(u),Ie.forEach(u),Te=U(Y),we=v(Y,"HR",{class:!0}),Be=U(Y),P&&P.l(Y),ve=U(Y),ne=v(Y,"DIV",{class:!0});var tt=k(ne);W(re.$$.fragment,tt),tt.forEach(u),Ue=U(Y),ae=v(Y,"DIV",{class:!0});var lt=k(ae);X=v(lt,"BUTTON",{class:!0,type:!0});var De=k(X);ke=A(De,fe),Ne=U(De),L&&L.l(De),De.forEach(u),lt.forEach(u),Y.forEach(u),he.forEach(u),me.forEach(u),x.forEach(u),this.h()},h(){f(l,"class","text-lg font-medium self-center"),f(o,"class","self-center"),f(t,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"),f(d,"class","mb-1 text-xs text-gray-500"),f($,"id","folder-name"),f($,"class","w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden"),f($,"type","text"),f($,"placeholder",F=a[6].t("Enter folder name")),f($,"autocomplete","off"),f(j,"class","flex-1"),f(b,"class","flex flex-col w-full mt-1"),f(C,"id","folder-background-image-input"),f(C,"type","file"),C.hidden=!0,f(C,"accept","image/*"),f(E,"class","text-xs text-gray-500"),f(le,"class","ml-2 self-center"),f(le,"id","background-image-url-state"),f(G,"aria-labelledby","chat-background-label background-image-url-state"),f(G,"class","p-1 px-3 text-xs flex rounded-sm transition"),f(G,"type","button"),f(H,"class",""),f(h,"class","flex justify-between w-full mt-1 items-center"),f(we,"class","border-gray-50 dark:border-gray-850 my-2.5 w-full"),f(ne,"class","my-2"),f(X,"class",ye="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(a[5]?" cursor-not-allowed":"")),f(X,"type","submit"),X.disabled=a[5],f(ae,"class","flex justify-end pt-3 text-sm font-medium gap-1.5"),f(p,"class","flex flex-col w-full"),f(g,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),f(i,"class","flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200")},m(D,x){T(D,e,x),c(e,t),c(t,l),ee.m(l,null),c(t,n),c(t,o),J(s,o,null),c(e,r),c(e,i),c(i,g),c(g,p),c(p,b),c(b,d),c(d,y),c(b,S),c(b,j),c(j,$),at($,a[2]),c(p,m),c(p,C),c(p,z),c(p,h),c(h,E),c(E,I),c(h,Z),c(h,H),c(H,G),c(G,le),c(le,be),c(p,Te),c(p,we),c(p,Be),P&&P.m(p,null),c(p,ve),c(p,ne),J(re,ne,null),c(p,Ue),c(p,ae),c(ae,X),c(X,ke),c(X,Ne),L&&L.m(X,null),Q=!0,xe||(ze=[te(o,"click",a[12]),te($,"input",a[13]),te(C,"change",a[14]),te(G,"click",a[15]),te(p,"submit",$t(a[18]))],xe=!0)},p(D,x){var ce,de,me,he;$e===($e=Re(D))&&ee?ee.p(D,x):(ee.d(1),ee=$e(D),ee&&(ee.c(),ee.m(l,null))),(!Q||x&64)&&_!==(_=D[6].t("Folder Name")+"")&&M(y,_),(!Q||x&64&&F!==(F=D[6].t("Enter folder name")))&&f($,"placeholder",F),x&4&&$.value!==D[2]&&at($,D[2]),(!Q||x&64)&&q!==(q=D[6].t("Folder Background Image")+"")&&M(I,q),(!Q||x&72)&&ue!==(ue=((((ce=D[3])==null?void 0:ce.background_image_url)??null)===null?D[6].t("Upload"):D[6].t("Reset"))+"")&&M(be,ue),((de=D[7])==null?void 0:de.role)==="admin"||(((he=(me=D[7])==null?void 0:me.permissions.chat)==null?void 0:he.system_prompt)??!0)?P?(P.p(D,x),x&128&&B(P,1)):(P=ut(D),P.c(),B(P,1),P.m(p,ve)):P&&(Ae(),N(P,1,1,()=>{P=null}),Me());const se={};x&4194368&&(se.$$scope={dirty:x,ctx:D}),!Ve&&x&16&&(Ve=!0,se.selectedItems=D[4].files,ge(()=>Ve=!1)),re.$set(se),(!Q||x&64)&&fe!==(fe=D[6].t("Save")+"")&&M(ke,fe),D[5]?L?x&32&&B(L,1):(L=ft(),L.c(),B(L,1),L.m(X,null)):L&&(Ae(),N(L,1,1,()=>{L=null}),Me()),(!Q||x&32&&ye!==(ye="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(D[5]?" cursor-not-allowed":"")))&&f(X,"class",ye),(!Q||x&32)&&(X.disabled=D[5])},i(D){Q||(B(s.$$.fragment,D),B(P),B(re.$$.fragment,D),B(L),Q=!0)},o(D){N(s.$$.fragment,D),N(P),N(re.$$.fragment,D),N(L),Q=!1},d(D){D&&u(e),ee.d(),K(s),P&&P.d(),K(re),L&&L.d(),xe=!1,Et(ze)}}}function ol(a){let e,t,l;function n(s){a[19](s)}let o={size:"md",$$slots:{default:[al]},$$scope:{ctx:a}};return a[0]!==void 0&&(o.show=a[0]),e=new ct({props:o}),pe.push(()=>_e(e,"show",n)),{c(){R(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,r){J(e,s,r),l=!0},p(s,[r]){const i={};r&4194559&&(i.$$scope={dirty:r,ctx:s}),!t&&r&1&&(t=!0,i.show=s[0],ge(()=>t=!1)),e.$set(i)},i(s){l||(B(e.$$.fragment,s),l=!0)},o(s){N(e.$$.fragment,s),l=!1},d(s){K(e,s)}}}function il(a,e,t){let l,n;oe(a,_t,I=>t(7,n=I));const o=Le("i18n");oe(a,o,I=>t(6,l=I));let{show:s=!1}=e,{onSubmit:r=I=>{}}=e,{edit:i=!1}=e,{folder:g=null}=e,p="",b={background_image_url:null},d={system_prompt:"",files:[]},_=!1;const y=async()=>{if(t(5,_=!0),((d==null?void 0:d.files)??[]).some(I=>I.status==="uploading")){Pe.error(l.t("Please wait until all files are uploaded.")),t(5,_=!1);return}await r({name:p,meta:b,data:d}),t(0,s=!1),t(5,_=!1)},S=()=>{t(2,p=g.name),t(3,b=g.meta||{background_image_url:null}),t(4,d=g.data||{system_prompt:"",files:[]})},j=async()=>{await yt();const I=document.getElementById("folder-name");I&&(I.focus(),I.select())},$=()=>{t(0,s=!1)};function F(){p=this.value,t(2,p),t(0,s),t(1,i)}const m=I=>{const Z=I.target.files;let H=new FileReader;H.onload=G=>{let le=`${G.target.result}`;t(3,b.background_image_url=le,b)},Z&&Z.length>0&&["image/gif","image/webp","image/jpeg","image/png"].includes(Z[0].type)?H.readAsDataURL(Z[0]):(`${Z[0].type}`,I.target.value="")},C=()=>{if((b==null?void 0:b.background_image_url)!==null)t(3,b.background_image_url=null,b);else{const I=document.getElementById("folder-background-image-input");I&&I.click()}};function z(I){a.$$.not_equal(d.system_prompt,I)&&(d.system_prompt=I,t(4,d),t(0,s),t(1,i))}function h(I){a.$$.not_equal(d.files,I)&&(d.files=I,t(4,d),t(0,s),t(1,i))}const E=()=>{y()};function q(I){s=I,t(0,s)}return a.$$set=I=>{"show"in I&&t(0,s=I.show),"onSubmit"in I&&t(10,r=I.onSubmit),"edit"in I&&t(1,i=I.edit),"folder"in I&&t(11,g=I.folder)},a.$$.update=()=>{a.$$.dirty&1&&s&&j(),a.$$.dirty&2048&&g&&S(),a.$$.dirty&3&&!s&&!i&&(t(2,p=""),t(3,b={background_image_url:null}),t(4,d={system_prompt:"",files:[]}))},[s,i,p,b,d,_,l,n,o,y,r,g,$,F,m,C,z,h,E,q]}class Ml extends Se{constructor(e){super(),je(this,e,il,ol,Ce,{show:0,onSubmit:10,edit:1,folder:11})}}export{Fl as F,Ol as S,Ml as a,Al as b,Ul as c,xl as d,Nl as e,Tl as f,Bl as g,Vl as u};
//# sourceMappingURL=FrJIbQZQ.js.map
