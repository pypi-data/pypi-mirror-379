import{S as ye,i as De,s as ke,W as Me,X as Ee,a as L,d as _,f as m,g as O,h as H,n as _e,H as We,I as Ge,C as F,D as q,E as R,K as Ke,q as v,r as D,F as Z,k as pe,v as Ye,l as U,p as W,x as At,z as Ut,A as Wt,B as Ft,e as T,c as z,y as se,u as ie,t as le,b as ne,j as re,G as ue,V as et,m as Ae,N as Ce,a0 as Ue,P as Jt,w as Xt,M as tt,L as lt,O as Qt}from"./BpeRjEzf.js";import{e as ge}from"./C5oNBBkD.js";import"./IHki7fMi.js";import"./D1_AUG_k.js";import{M as qt,a as Rt,b as Zt,c as nt}from"./BcvTzfAu.js";import{m as rt,x as ot,f as xt,i as el}from"./BvhXBtnk.js";import{F as tl}from"./CU2r43ac.js";import{d as Ze,r as ll}from"./I1CDPYOB.js";import"./BXP-4RTu.js";import{S as nl}from"./B9AxoR9S.js";import{f as Gt}from"./g5t9vw8M.js";import"./3K180Vpd.js";import{p as rl,d as ol,u as al,g as sl}from"./BEYGjvOy.js";import{a as Kt,u as Yt,g as at,c as il,M as we,m as fl,d as qe}from"./B863V-9z.js";import{t as de}from"./W3liupZx.js";import{g as Re}from"./CBZFsLb-.js";import{C as ul}from"./BavK9KcW.js";import{S as cl}from"./79rrQaVO.js";import{T as ce}from"./t7JSQ-4O.js";import{C as dl}from"./jdy913HD.js";import{L as ml}from"./DsmBtJ6j.js";import{E as _l}from"./B27kDZEc.js";import{E as hl}from"./B25Ee2lf.js";import{E as pl}from"./C3oNrgiT.js";function gl(o){let e,l;return{c(){e=Me("svg"),l=Me("path"),this.h()},l(t){e=Ee(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=L(e);l=Ee(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),L(l).forEach(_),n.forEach(_),this.h()},h(){m(l,"stroke-linecap","round"),m(l,"stroke-linejoin","round"),m(l,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",o[1]),m(e,"stroke","currentColor"),m(e,"class",o[0])},m(t,n){O(t,e,n),H(e,l)},p(t,[n]){n&2&&m(e,"stroke-width",t[1]),n&1&&m(e,"class",t[0])},i:_e,o:_e,d(t){t&&_(e)}}}function vl(o,e,l){let{className:t="size-4"}=e,{strokeWidth:n="1.5"}=e;return o.$$set=r=>{"className"in r&&l(0,t=r.className),"strokeWidth"in r&&l(1,n=r.strokeWidth)},[t,n]}class bl extends ye{constructor(e){super(),De(this,e,vl,gl,ke,{className:0,strokeWidth:1})}}function wl(o){let e;const l=o[8].default,t=At(l,o,o[13],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&8192)&&Ut(t,l,n,n[13],e?Ft(l,n[13],r,null):Wt(n[13]),null)},i(n){e||(v(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function kl(o){var t;let e,l;return e=new ce({props:{content:o[5].t("More"),className:((t=o[6])==null?void 0:t.highContrastMode)??!1?"":"group-hover/item:opacity-100 opacity-0",$$slots:{default:[wl]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,r){R(e,n,r),l=!0},p(n,r){var s;const a={};r&32&&(a.content=n[5].t("More")),r&64&&(a.className=((s=n[6])==null?void 0:s.highContrastMode)??!1?"":"group-hover/item:opacity-100 opacity-0"),r&8192&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){l||(v(e.$$.fragment,n),l=!0)},o(n){D(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function $l(o){let e,l;return e=new _l({}),{c(){F(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Ml(o){let e,l;return e=new hl({}),{c(){F(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function El(o){let e=o[5].t("Keep in Sidebar")+"",l;return{c(){l=le(e)},l(t){l=ne(t,e)},m(t,n){O(t,l,n)},p(t,n){n&32&&e!==(e=t[5].t("Keep in Sidebar")+"")&&re(l,e)},d(t){t&&_(l)}}}function yl(o){let e=o[5].t("Hide from Sidebar")+"",l;return{c(){l=le(e)},l(t){l=ne(t,e)},m(t,n){O(t,l,n)},p(t,n){n&32&&e!==(e=t[5].t("Hide from Sidebar")+"")&&re(l,e)},d(t){t&&_(l)}}}function Dl(o){let e,l,t,n,r,a,s;const i=[Ml,$l],u=[];function c(p,C){var $,g;return C&66&&(e=null),e==null&&(e=!!((($=p[6])==null?void 0:$.pinnedModels)??[]).includes((g=p[1])==null?void 0:g.id)),e?0:1}l=c(o,-1),t=u[l]=i[l](o);function d(p,C){var $,g;return C&66&&(a=null),a==null&&(a=!!((($=p[6])==null?void 0:$.pinnedModels)??[]).includes((g=p[1])==null?void 0:g.id)),a?yl:El}let y=d(o,-1),k=y(o);return{c(){t.c(),n=U(),r=T("div"),k.c(),this.h()},l(p){t.l(p),n=W(p),r=z(p,"DIV",{class:!0});var C=L(r);k.l(C),C.forEach(_),this.h()},h(){m(r,"class","flex items-center")},m(p,C){u[l].m(p,C),O(p,n,C),O(p,r,C),k.m(r,null),s=!0},p(p,C){let $=l;l=c(p,C),l!==$&&(se(),D(u[$],1,1,()=>{u[$]=null}),ie(),t=u[l],t||(t=u[l]=i[l](p),t.c()),v(t,1),t.m(n.parentNode,n)),y===(y=d(p,C))&&k?k.p(p,C):(k.d(1),k=y(p),k&&(k.c(),k.m(r,null)))},i(p){s||(v(t),s=!0)},o(p){D(t),s=!1},d(p){p&&(_(n),_(r)),u[l].d(p),k.d()}}}function Cl(o){let e,l,t,n=o[5].t("Copy Link")+"",r,a;return e=new ml({}),{c(){F(e.$$.fragment),l=U(),t=T("div"),r=le(n),this.h()},l(s){q(e.$$.fragment,s),l=W(s),t=z(s,"DIV",{class:!0});var i=L(t);r=ne(i,n),i.forEach(_),this.h()},h(){m(t,"class","flex items-center")},m(s,i){R(e,s,i),O(s,l,i),O(s,t,i),H(t,r),a=!0},p(s,i){(!a||i&32)&&n!==(n=s[5].t("Copy Link")+"")&&re(r,n)},i(s){a||(v(e.$$.fragment,s),a=!0)},o(s){D(e.$$.fragment,s),a=!1},d(s){s&&(_(l),_(t)),Z(e,s)}}}function Il(o){var r,a;let e,l,t,n;return e=new nt({props:{type:"button","aria-pressed":(((r=o[6])==null?void 0:r.pinnedModels)??[]).includes((a=o[1])==null?void 0:a.id),class:"flex rounded-xl py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition items-center gap-2",$$slots:{default:[Dl]},$$scope:{ctx:o}}}),e.$on("click",o[9]),t=new nt({props:{type:"button",class:"flex rounded-xl py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition items-center gap-2",$$slots:{default:[Cl]},$$scope:{ctx:o}}}),t.$on("click",o[10]),{c(){F(e.$$.fragment),l=U(),F(t.$$.fragment)},l(s){q(e.$$.fragment,s),l=W(s),q(t.$$.fragment,s)},m(s,i){R(e,s,i),O(s,l,i),R(t,s,i),n=!0},p(s,i){var d,y;const u={};i&66&&(u["aria-pressed"]=(((d=s[6])==null?void 0:d.pinnedModels)??[]).includes((y=s[1])==null?void 0:y.id)),i&8290&&(u.$$scope={dirty:i,ctx:s}),e.$set(u);const c={};i&8224&&(c.$$scope={dirty:i,ctx:s}),t.$set(c)},i(s){n||(v(e.$$.fragment,s),v(t.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),n=!1},d(s){s&&_(l),Z(e,s),Z(t,s)}}}function Nl(o){let e,l,t,n;return e=new Rt({props:{$$slots:{default:[kl]},$$scope:{ctx:o}}}),t=new Zt({props:{strategy:"fixed",class:"w-full max-w-[180px] text-sm rounded-2xl p-1 z-[9999999] bg-white dark:bg-gray-850 dark:text-white shadow-lg border border-gray-100  dark:border-gray-800",sideOffset:-2,side:"bottom",align:"end",transition:Gt,$$slots:{default:[Il]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment),l=U(),F(t.$$.fragment)},l(r){q(e.$$.fragment,r),l=W(r),q(t.$$.fragment,r)},m(r,a){R(e,r,a),O(r,l,a),R(t,r,a),n=!0},p(r,a){const s={};a&8288&&(s.$$scope={dirty:a,ctx:r}),e.$set(s);const i={};a&8303&&(i.$$scope={dirty:a,ctx:r}),t.$set(i)},i(r){n||(v(e.$$.fragment,r),v(t.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),D(t.$$.fragment,r),n=!1},d(r){r&&_(l),Z(e,r),Z(t,r)}}}function Vl(o){let e,l,t;function n(a){o[12](a)}let r={closeFocus:!1,onOpenChange:o[11],typeahead:!1,$$slots:{default:[Nl]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.open=o[0]),e=new qt({props:r}),We.push(()=>Ge(e,"open",n)),{c(){F(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,s){R(e,a,s),t=!0},p(a,[s]){const i={};s&16&&(i.onOpenChange=a[11]),s&8303&&(i.$$scope={dirty:s,ctx:a}),!l&&s&1&&(l=!0,i.open=a[0],Ke(()=>l=!1)),e.$set(i)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){D(e.$$.fragment,a),t=!1},d(a){Z(e,a)}}}function Hl(o,e,l){let t,n;pe(o,Kt,g=>l(6,n=g));let{$$slots:r={},$$scope:a}=e;const s=Ye("i18n");pe(o,s,g=>l(5,t=g));let{show:i=!1}=e,{model:u}=e,{pinModelHandler:c=()=>{}}=e,{copyLinkHandler:d=()=>{}}=e,{onClose:y=()=>{}}=e;const k=g=>{g.stopPropagation(),g.preventDefault(),c(u==null?void 0:u.id),l(0,i=!1)},p=g=>{g.stopPropagation(),g.preventDefault(),d(),l(0,i=!1)},C=g=>{g===!1&&y()};function $(g){i=g,l(0,i)}return o.$$set=g=>{"show"in g&&l(0,i=g.show),"model"in g&&l(1,u=g.model),"pinModelHandler"in g&&l(2,c=g.pinModelHandler),"copyLinkHandler"in g&&l(3,d=g.copyLinkHandler),"onClose"in g&&l(4,y=g.onClose),"$$scope"in g&&l(13,a=g.$$scope)},[i,u,c,d,y,t,n,s,r,k,p,C,$,a]}class Ol extends ye{constructor(e){super(),De(this,e,Hl,Vl,ke,{show:0,model:1,pinModelHandler:2,copyLinkHandler:3,onClose:4})}}function Tl(o){let e,l,t;return{c(){e=Me("svg"),l=Me("path"),t=Me("circle"),this.h()},l(n){e=Ee(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=L(e);l=Ee(r,"path",{d:!0,stroke:!0,fill:!0}),L(l).forEach(_),t=Ee(r,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0}),L(t).forEach(_),r.forEach(_),this.h()},h(){m(l,"d","M4 12 L8 7 H21 V17 H8 L4 12 Z"),m(l,"stroke","currentColor"),m(l,"fill","none"),m(t,"cx","10"),m(t,"cy","12"),m(t,"r","0.75"),m(t,"fill","currentColor"),m(t,"stroke","currentColor"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",o[1]),m(e,"stroke","currentColor"),m(e,"class",o[0])},m(n,r){O(n,e,r),H(e,l),H(e,t)},p(n,[r]){r&2&&m(e,"stroke-width",n[1]),r&1&&m(e,"class",n[0])},i:_e,o:_e,d(n){n&&_(e)}}}function zl(o,e,l){let{className:t="size-4"}=e,{strokeWidth:n="1.8"}=e;return o.$$set=r=>{"className"in r&&l(0,t=r.className),"strokeWidth"in r&&l(1,n=r.strokeWidth)},[t,n]}class Ll extends ye{constructor(e){super(),De(this,e,zl,Tl,ke,{className:0,strokeWidth:1})}}function st(o,e,l){const t=o.slice();return t[17]=e[l],t}function Sl(o){let e,l;return{c(){e=T("img"),this.h()},l(t){e=z(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){var t,n,r;et(e.src,l=((r=(n=(t=o[1].model)==null?void 0:t.info)==null?void 0:n.meta)==null?void 0:r.profile_image_url)??`${at}/static/favicon.png`)||m(e,"src",l),m(e,"alt","Model"),m(e,"class","rounded-full size-5 flex items-center")},m(t,n){O(t,e,n)},p(t,n){var r,a,s;n&2&&!et(e.src,l=((s=(a=(r=t[1].model)==null?void 0:r.info)==null?void 0:a.meta)==null?void 0:s.profile_image_url)??`${at}/static/favicon.png`)&&m(e,"src",l)},d(t){t&&_(e)}}}function Bl(o){let e,l=o[1].label+"",t;return{c(){e=T("div"),t=le(l),this.h()},l(n){e=z(n,"DIV",{class:!0});var r=L(e);t=ne(r,l),r.forEach(_),this.h()},h(){m(e,"class","line-clamp-1")},m(n,r){O(n,e,r),H(e,t)},p(n,r){r&2&&l!==(l=n[1].label+"")&&re(t,l)},d(n){n&&_(e)}}}function it(o){var s,i,u,c;let e,l=((s=o[1].model.ollama)==null?void 0:s.expires_at)&&new Date(((i=o[1].model.ollama)==null?void 0:i.expires_at)*1e3)>new Date,t,n,r=(((c=(u=o[1].model.ollama)==null?void 0:u.details)==null?void 0:c.parameter_size)??"")!==""&&ft(o),a=l&&ut(o);return{c(){r&&r.c(),e=U(),a&&a.c(),t=Ae()},l(d){r&&r.l(d),e=W(d),a&&a.l(d),t=Ae()},m(d,y){r&&r.m(d,y),O(d,e,y),a&&a.m(d,y),O(d,t,y),n=!0},p(d,y){var k,p,C,$;(((p=(k=d[1].model.ollama)==null?void 0:k.details)==null?void 0:p.parameter_size)??"")!==""?r?(r.p(d,y),y&2&&v(r,1)):(r=ft(d),r.c(),v(r,1),r.m(e.parentNode,e)):r&&(se(),D(r,1,1,()=>{r=null}),ie()),y&2&&(l=((C=d[1].model.ollama)==null?void 0:C.expires_at)&&new Date((($=d[1].model.ollama)==null?void 0:$.expires_at)*1e3)>new Date),l?a?(a.p(d,y),y&2&&v(a,1)):(a=ut(d),a.c(),v(a,1),a.m(t.parentNode,t)):a&&(se(),D(a,1,1,()=>{a=null}),ie())},i(d){n||(v(r),v(a),n=!0)},o(d){D(r),D(a),n=!1},d(d){d&&(_(e),_(t)),r&&r.d(d),a&&a.d(d)}}}function ft(o){var n,r,a,s,i,u;let e,l,t;return l=new ce({props:{content:`${(r=(n=o[1].model.ollama)==null?void 0:n.details)!=null&&r.quantization_level?((s=(a=o[1].model.ollama)==null?void 0:a.details)==null?void 0:s.quantization_level)+" ":""}${(i=o[1].model.ollama)!=null&&i.size?`(${(((u=o[1].model.ollama)==null?void 0:u.size)/1024**3).toFixed(1)}GB)`:""}`,className:"self-end",$$slots:{default:[Pl]},$$scope:{ctx:o}}}),{c(){e=T("div"),F(l.$$.fragment),this.h()},l(c){e=z(c,"DIV",{class:!0});var d=L(e);q(l.$$.fragment,d),d.forEach(_),this.h()},h(){m(e,"class","flex items-center translate-y-[0.5px]")},m(c,d){O(c,e,d),R(l,e,null),t=!0},p(c,d){var k,p,C,$,g,B;const y={};d&2&&(y.content=`${(p=(k=c[1].model.ollama)==null?void 0:k.details)!=null&&p.quantization_level?(($=(C=c[1].model.ollama)==null?void 0:C.details)==null?void 0:$.quantization_level)+" ":""}${(g=c[1].model.ollama)!=null&&g.size?`(${(((B=c[1].model.ollama)==null?void 0:B.size)/1024**3).toFixed(1)}GB)`:""}`),d&1048578&&(y.$$scope={dirty:d,ctx:c}),l.$set(y)},i(c){t||(v(l.$$.fragment,c),t=!0)},o(c){D(l.$$.fragment,c),t=!1},d(c){c&&_(e),Z(l)}}}function Pl(o){var n,r;let e,l=(((r=(n=o[1].model.ollama)==null?void 0:n.details)==null?void 0:r.parameter_size)??"")+"",t;return{c(){e=T("span"),t=le(l),this.h()},l(a){e=z(a,"SPAN",{class:!0});var s=L(e);t=ne(s,l),s.forEach(_),this.h()},h(){m(e,"class","text-xs font-medium text-gray-600 dark:text-gray-400 line-clamp-1")},m(a,s){O(a,e,s),H(e,t)},p(a,s){var i,u;s&2&&l!==(l=(((u=(i=a[1].model.ollama)==null?void 0:i.details)==null?void 0:u.parameter_size)??"")+"")&&re(t,l)},d(a){a&&_(e)}}}function ut(o){var n;let e,l,t;return l=new ce({props:{content:`${o[8].t("Unloads {{FROM_NOW}}",{FROM_NOW:Ze(((n=o[1].model.ollama)==null?void 0:n.expires_at)*1e3).fromNow()})}`,className:"self-end",$$slots:{default:[jl]},$$scope:{ctx:o}}}),{c(){e=T("div"),F(l.$$.fragment),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=L(e);q(l.$$.fragment,a),a.forEach(_),this.h()},h(){m(e,"class","flex items-center translate-y-[0.5px] px-0.5")},m(r,a){O(r,e,a),R(l,e,null),t=!0},p(r,a){var i;const s={};a&258&&(s.content=`${r[8].t("Unloads {{FROM_NOW}}",{FROM_NOW:Ze(((i=r[1].model.ollama)==null?void 0:i.expires_at)*1e3).fromNow()})}`),a&1048576&&(s.$$scope={dirty:a,ctx:r}),l.$set(s)},i(r){t||(v(l.$$.fragment,r),t=!0)},o(r){D(l.$$.fragment,r),t=!1},d(r){r&&_(e),Z(l)}}}function jl(o){let e,l='<span class="relative flex size-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span> <span class="relative inline-flex rounded-full size-2 bg-green-500"></span></span>';return{c(){e=T("div"),e.innerHTML=l,this.h()},l(t){e=z(t,"DIV",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-pq0hxj"&&(e.innerHTML=l),this.h()},h(){m(e,"class","flex items-center")},m(t,n){O(t,e,n)},p:_e,d(t){t&&_(e)}}}function ct(o){let e=o[1].model.id,l,t,n=mt(o);return{c(){n.c(),l=Ae()},l(r){n.l(r),l=Ae()},m(r,a){n.m(r,a),O(r,l,a),t=!0},p(r,a){a&2&&ke(e,e=r[1].model.id)?(se(),D(n,1,1,_e),ie(),n=mt(r),n.c(),v(n,1),n.m(l.parentNode,l)):n.p(r,a)},i(r){t||(v(n),t=!0)},o(r){D(n),t=!1},d(r){r&&_(l),n.d(r)}}}function Al(o){let e,l,t;return l=new Ll({}),{c(){e=T("div"),F(l.$$.fragment),this.h()},l(n){e=z(n,"DIV",{class:!0});var r=L(e);q(l.$$.fragment,r),r.forEach(_),this.h()},h(){m(e,"class","translate-y-[1px]")},m(n,r){O(n,e,r),R(l,e,null),t=!0},p:_e,i(n){t||(v(l.$$.fragment,n),t=!0)},o(n){D(l.$$.fragment,n),t=!1},d(n){n&&_(e),Z(l)}}}function Ul(o){let e,l=o[17].name+"",t,n;return{c(){e=T("div"),t=le(l),n=U(),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=L(e);t=ne(a,l),a.forEach(_),n=W(r),this.h()},h(){m(e,"class","text-xs font-medium rounded-sm uppercase text-white")},m(r,a){O(r,e,a),H(e,t),O(r,n,a)},p(r,a){a&2&&l!==(l=r[17].name+"")&&re(t,l)},d(r){r&&(_(e),_(n))}}}function dt(o){let e,l;return e=new ce({props:{content:o[17].name,className:"flex-shrink-0",$$slots:{default:[Ul]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.content=t[17].name),n&1048578&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Wl(o){var s;let e,l,t,n=ge((s=o[1].model)==null?void 0:s.tags.sort(gt)),r=[];for(let i=0;i<n.length;i+=1)r[i]=dt(st(o,n,i));const a=i=>D(r[i],1,1,()=>{r[i]=null});return{c(){e=T("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=z(i,"DIV",{slot:!0,id:!0});var u=L(e);for(let c=0;c<r.length;c+=1)r[c].l(u);u.forEach(_),this.h()},h(){m(e,"slot","tooltip"),m(e,"id",l="tags-"+o[1].model.id)},m(i,u){O(i,e,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);t=!0},p(i,u){var c;if(u&2){n=ge((c=i[1].model)==null?void 0:c.tags.sort(gt));let d;for(d=0;d<n.length;d+=1){const y=st(i,n,d);r[d]?(r[d].p(y,u),v(r[d],1)):(r[d]=dt(y),r[d].c(),v(r[d],1),r[d].m(e,null))}for(se(),d=n.length;d<r.length;d+=1)a(d);ie()}(!t||u&2&&l!==(l="tags-"+i[1].model.id))&&m(e,"id",l)},i(i){if(!t){for(let u=0;u<n.length;u+=1)v(r[u]);t=!0}},o(i){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)D(r[u]);t=!1},d(i){i&&_(e),Ue(r,i)}}}function mt(o){let e,l;return e=new ce({props:{elementId:"tags-"+o[1].model.id,$$slots:{tooltip:[Wl],default:[Al]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.elementId="tags-"+t[1].model.id),n&1048578&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Fl(o){let e,l;return e=new ce({props:{content:`${o[8].t("External")}`,$$slots:{default:[Rl]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.content=`${t[8].t("External")}`),n&1048576&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function ql(o){let e,l;return e=new ce({props:{content:`${o[8].t("Direct")}`,$$slots:{default:[Zl]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.content=`${t[8].t("Direct")}`),n&1048576&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Rl(o){let e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z" clip-rule="evenodd"></path></svg>';return{c(){e=T("div"),e.innerHTML=l,this.h()},l(t){e=z(t,"DIV",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-1we9nfa"&&(e.innerHTML=l),this.h()},h(){m(e,"class","translate-y-[1px]")},m(t,n){O(t,e,n)},p:_e,d(t){t&&_(e)}}}function Zl(o){let e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M2 2.75A.75.75 0 0 1 2.75 2C8.963 2 14 7.037 14 13.25a.75.75 0 0 1-1.5 0c0-5.385-4.365-9.75-9.75-9.75A.75.75 0 0 1 2 2.75Zm0 4.5a.75.75 0 0 1 .75-.75 6.75 6.75 0 0 1 6.75 6.75.75.75 0 0 1-1.5 0C8 10.35 5.65 8 2.75 8A.75.75 0 0 1 2 7.25ZM3.5 11a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z" clip-rule="evenodd"></path></svg>';return{c(){e=T("div"),e.innerHTML=l,this.h()},l(t){e=z(t,"DIV",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-1pvx0j8"&&(e.innerHTML=l),this.h()},h(){m(e,"class","translate-y-[1px]")},m(t,n){O(t,e,n)},p:_e,d(t){t&&_(e)}}}function _t(o){var t,n,r;let e,l;return e=new ce({props:{content:`${rt.parse(ot((r=(n=(t=o[1].model)==null?void 0:t.info)==null?void 0:n.meta)==null?void 0:r.description).replaceAll(`
`,"<br>"))}`,$$slots:{default:[Gl]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,s){R(e,a,s),l=!0},p(a,s){var u,c,d;const i={};s&2&&(i.content=`${rt.parse(ot((d=(c=(u=a[1].model)==null?void 0:u.info)==null?void 0:c.meta)==null?void 0:d.description).replaceAll(`
`,"<br>"))}`),s&1048576&&(i.$$scope={dirty:s,ctx:a}),e.$set(i)},i(a){l||(v(e.$$.fragment,a),l=!0)},o(a){D(e.$$.fragment,a),l=!1},d(a){Z(e,a)}}}function Gl(o){let e,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>';return{c(){e=T("div"),e.innerHTML=l,this.h()},l(t){e=z(t,"DIV",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-i7zoyb"&&(e.innerHTML=l),this.h()},h(){m(e,"class","translate-y-[1px]")},m(t,n){O(t,e,n)},p:_e,d(t){t&&_(e)}}}function ht(o){let e,l;return e=new ce({props:{content:`${o[8].t("Eject")}`,className:"flex-shrink-0 group-hover/item:opacity-100 opacity-0 ",$$slots:{default:[Kl]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.content=`${t[8].t("Eject")}`),n&1048594&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Kl(o){let e,l,t,n,r;return l=new bl({props:{className:"size-3"}}),{c(){e=T("button"),F(l.$$.fragment),this.h()},l(a){e=z(a,"BUTTON",{class:!0});var s=L(e);q(l.$$.fragment,s),s.forEach(_),this.h()},h(){m(e,"class","flex")},m(a,s){O(a,e,s),R(l,e,null),t=!0,n||(r=ue(e,"click",o[12]),n=!0)},p:_e,i(a){t||(v(l.$$.fragment,a),t=!0)},o(a){D(l.$$.fragment,a),t=!1},d(a){a&&_(e),Z(l),n=!1,r()}}}function Yl(o){let e,l,t,n,r,a;return l=new pl({}),{c(){e=T("button"),F(l.$$.fragment),this.h()},l(s){e=z(s,"BUTTON",{"aria-label":!0,class:!0});var i=L(e);q(l.$$.fragment,i),i.forEach(_),this.h()},h(){m(e,"aria-label",t=`${o[8].t("More Options")}`),m(e,"class","flex")},m(s,i){O(s,e,i),R(l,e,null),n=!0,r||(a=ue(e,"click",o[13]),r=!0)},p(s,i){(!n||i&256&&t!==(t=`${s[8].t("More Options")}`))&&m(e,"aria-label",t)},i(s){n||(v(l.$$.fragment,s),n=!0)},o(s){D(l.$$.fragment,s),n=!1},d(s){s&&_(e),Z(l),r=!1,a()}}}function pt(o){let e,l,t;return l=new dl({props:{className:"size-3"}}),{c(){e=T("div"),F(l.$$.fragment)},l(n){e=z(n,"DIV",{});var r=L(e);q(l.$$.fragment,r),r.forEach(_)},m(n,r){O(n,e,r),R(l,e,null),t=!0},i(n){t||(v(l.$$.fragment,n),t=!0)},o(n){D(l.$$.fragment,n),t=!1},d(n){n&&_(e),Z(l)}}}function Jl(o){var Ve,He,Oe,Te,ze,Le,Se,Be,Pe,je;let e,l,t,n,r,a,s,i,u,c,d,y,k,p,C,$,g,B=((Ve=o[9])==null?void 0:Ve.role)==="admin"&&o[1].model.owned_by==="ollama"&&((He=o[1].model.ollama)==null?void 0:He.expires_at)&&new Date(((Oe=o[1].model.ollama)==null?void 0:Oe.expires_at)*1e3)>new Date,w,M,N,P,A,I,J,X,h,E,G;r=new ce({props:{content:((Te=o[9])==null?void 0:Te.role)==="admin"?((ze=o[1])==null?void 0:ze.value)??"":"",placement:"top-start",$$slots:{default:[Sl]},$$scope:{ctx:o}}}),i=new ce({props:{content:`${o[1].label} (${o[1].value})`,placement:"top-start",$$slots:{default:[Bl]},$$scope:{ctx:o}}});let b=o[1].model.owned_by==="ollama"&&it(o),K=(((Se=(Le=o[1])==null?void 0:Le.model)==null?void 0:Se.tags)??[]).length>0&&ct(o);const he=[ql,Fl],me=[];function Ie(V,f){var S;return(S=V[1].model)!=null&&S.direct?0:V[1].model.connection_type==="external"?1:-1}~(k=Ie(o))&&(p=me[k]=he[k](o));let Q=((je=(Pe=(Be=o[1].model)==null?void 0:Be.info)==null?void 0:Pe.meta)==null?void 0:je.description)&&_t(o),x=B&&ht(o);function Fe(V){o[15](V)}let Ne={model:o[1].model,pinModelHandler:o[5],copyLinkHandler:o[14],$$slots:{default:[Yl]},$$scope:{ctx:o}};o[7]!==void 0&&(Ne.show=o[7]),M=new Ol({props:Ne}),We.push(()=>Ge(M,"show",Fe));let te=o[3]===o[1].value&&pt();return{c(){e=T("button"),l=T("div"),t=T("div"),n=T("div"),F(r.$$.fragment),a=U(),s=T("div"),F(i.$$.fragment),u=U(),c=T("div"),b&&b.c(),d=U(),K&&K.c(),y=U(),p&&p.c(),C=U(),Q&&Q.c(),$=U(),g=T("div"),x&&x.c(),w=U(),F(M.$$.fragment),P=U(),te&&te.c(),this.h()},l(V){e=z(V,"BUTTON",{"aria-roledescription":!0,"aria-label":!0,class:!0,"data-arrow-selected":!0,"data-value":!0});var f=L(e);l=z(f,"DIV",{class:!0});var S=L(l);t=z(S,"DIV",{class:!0});var j=L(t);n=z(j,"DIV",{class:!0});var Y=L(n);q(r.$$.fragment,Y),Y.forEach(_),a=W(j),s=z(j,"DIV",{class:!0});var oe=L(s);q(i.$$.fragment,oe),oe.forEach(_),u=W(j),c=z(j,"DIV",{class:!0});var ee=L(c);b&&b.l(ee),d=W(ee),K&&K.l(ee),y=W(ee),p&&p.l(ee),C=W(ee),Q&&Q.l(ee),ee.forEach(_),j.forEach(_),S.forEach(_),$=W(f),g=z(f,"DIV",{class:!0});var fe=L(g);x&&x.l(fe),w=W(fe),q(M.$$.fragment,fe),P=W(fe),te&&te.l(fe),fe.forEach(_),f.forEach(_),this.h()},h(){m(n,"class","flex items-center min-w-fit"),m(s,"class","flex items-center"),m(c,"class","shrink-0 flex items-center gap-2"),m(t,"class","flex items-center gap-2"),m(l,"class","flex flex-col flex-1 gap-1.5"),m(g,"class","ml-auto pl-2 pr-1 flex items-center gap-1.5 shrink-0"),m(e,"aria-roledescription","model-item"),m(e,"aria-label",A=o[1].label),m(e,"class",I="flex group/item w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl cursor-pointer data-highlighted:bg-muted "+(o[2]===o[0]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")),m(e,"data-arrow-selected",J=o[2]===o[0]),m(e,"data-value",X=o[1].value)},m(V,f){O(V,e,f),H(e,l),H(l,t),H(t,n),R(r,n,null),H(t,a),H(t,s),R(i,s,null),H(t,u),H(t,c),b&&b.m(c,null),H(c,d),K&&K.m(c,null),H(c,y),~k&&me[k].m(c,null),H(c,C),Q&&Q.m(c,null),H(e,$),H(e,g),x&&x.m(g,null),H(g,w),R(M,g,null),H(g,P),te&&te.m(g,null),h=!0,E||(G=ue(e,"click",o[16]),E=!0)},p(V,[f]){var ee,fe,ve,$e,ae,be,Je,Xe,Qe,xe;const S={};f&514&&(S.content=((ee=V[9])==null?void 0:ee.role)==="admin"?((fe=V[1])==null?void 0:fe.value)??"":""),f&1048578&&(S.$$scope={dirty:f,ctx:V}),r.$set(S);const j={};f&2&&(j.content=`${V[1].label} (${V[1].value})`),f&1048578&&(j.$$scope={dirty:f,ctx:V}),i.$set(j),V[1].model.owned_by==="ollama"?b?(b.p(V,f),f&2&&v(b,1)):(b=it(V),b.c(),v(b,1),b.m(c,d)):b&&(se(),D(b,1,1,()=>{b=null}),ie()),((($e=(ve=V[1])==null?void 0:ve.model)==null?void 0:$e.tags)??[]).length>0?K?(K.p(V,f),f&2&&v(K,1)):(K=ct(V),K.c(),v(K,1),K.m(c,y)):K&&(se(),D(K,1,1,()=>{K=null}),ie());let Y=k;k=Ie(V),k===Y?~k&&me[k].p(V,f):(p&&(se(),D(me[Y],1,1,()=>{me[Y]=null}),ie()),~k?(p=me[k],p?p.p(V,f):(p=me[k]=he[k](V),p.c()),v(p,1),p.m(c,C)):p=null),(Je=(be=(ae=V[1].model)==null?void 0:ae.info)==null?void 0:be.meta)!=null&&Je.description?Q?(Q.p(V,f),f&2&&v(Q,1)):(Q=_t(V),Q.c(),v(Q,1),Q.m(c,null)):Q&&(se(),D(Q,1,1,()=>{Q=null}),ie()),f&514&&(B=((Xe=V[9])==null?void 0:Xe.role)==="admin"&&V[1].model.owned_by==="ollama"&&((Qe=V[1].model.ollama)==null?void 0:Qe.expires_at)&&new Date(((xe=V[1].model.ollama)==null?void 0:xe.expires_at)*1e3)>new Date),B?x?(x.p(V,f),f&514&&v(x,1)):(x=ht(V),x.c(),v(x,1),x.m(g,w)):x&&(se(),D(x,1,1,()=>{x=null}),ie());const oe={};f&2&&(oe.model=V[1].model),f&32&&(oe.pinModelHandler=V[5]),f&2&&(oe.copyLinkHandler=V[14]),f&1048960&&(oe.$$scope={dirty:f,ctx:V}),!N&&f&128&&(N=!0,oe.show=V[7],Ke(()=>N=!1)),M.$set(oe),V[3]===V[1].value?te?f&10&&v(te,1):(te=pt(),te.c(),v(te,1),te.m(g,null)):te&&(se(),D(te,1,1,()=>{te=null}),ie()),(!h||f&2&&A!==(A=V[1].label))&&m(e,"aria-label",A),(!h||f&5&&I!==(I="flex group/item w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl cursor-pointer data-highlighted:bg-muted "+(V[2]===V[0]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")))&&m(e,"class",I),(!h||f&5&&J!==(J=V[2]===V[0]))&&m(e,"data-arrow-selected",J),(!h||f&2&&X!==(X=V[1].value))&&m(e,"data-value",X)},i(V){h||(v(r.$$.fragment,V),v(i.$$.fragment,V),v(b),v(K),v(p),v(Q),v(x),v(M.$$.fragment,V),v(te),h=!0)},o(V){D(r.$$.fragment,V),D(i.$$.fragment,V),D(b),D(K),D(p),D(Q),D(x),D(M.$$.fragment,V),D(te),h=!1},d(V){V&&_(e),Z(r),Z(i),b&&b.d(),K&&K.d(),~k&&me[k].d(),Q&&Q.d(),x&&x.d(),Z(M),te&&te.d(),E=!1,G()}}}const gt=(o,e)=>o.name.localeCompare(e.name);function Xl(o,e,l){let t,n;pe(o,Yt,M=>l(9,n=M));const r=Ye("i18n");pe(o,r,M=>l(8,t=M));let{selectedModelIdx:a=-1}=e,{item:s={}}=e,{index:i=-1}=e,{value:u=""}=e,{unloadModelHandler:c=()=>{}}=e,{pinModelHandler:d=()=>{}}=e,{onClick:y=()=>{}}=e;const k=async M=>{const N=window.location.origin;await xt(`${N}/?model=${encodeURIComponent(M.id)}`)?de.success(t.t("Copied link to clipboard")):de.error(t.t("Failed to copy link"))};let p=!1;const C=M=>{M.preventDefault(),M.stopPropagation(),c(s.value)},$=M=>{M.preventDefault(),M.stopPropagation(),l(7,p=!p)},g=()=>{k(s.model)};function B(M){p=M,l(7,p)}const w=()=>{y()};return o.$$set=M=>{"selectedModelIdx"in M&&l(0,a=M.selectedModelIdx),"item"in M&&l(1,s=M.item),"index"in M&&l(2,i=M.index),"value"in M&&l(3,u=M.value),"unloadModelHandler"in M&&l(4,c=M.unloadModelHandler),"pinModelHandler"in M&&l(5,d=M.pinModelHandler),"onClick"in M&&l(6,y=M.onClick)},[a,s,i,u,c,d,y,p,t,n,r,k,C,$,g,B,w]}class Ql extends ye{constructor(e){super(),De(this,e,Xl,Jl,ke,{selectedModelIdx:0,item:1,index:2,value:3,unloadModelHandler:4,pinModelHandler:5,onClick:6})}}function vt(o,e,l){const t=o.slice();return t[49]=e[l],t}function bt(o,e,l){const t=o.slice();return t[52]=e[l],t[54]=l,t}function wt(o,e,l){const t=o.slice();return t[55]=e[l],t}function xl(o){let e;return{c(){e=le(o[2])},l(l){e=ne(l,o[2])},m(l,t){O(l,e,t)},p(l,t){t[0]&4&&re(e,l[2])},d(l){l&&_(e)}}}function en(o){let e=o[15].label+"",l;return{c(){l=le(e)},l(t){l=ne(t,e)},m(t,n){O(t,l,n)},p(t,n){n[0]&32768&&e!==(e=t[15].label+"")&&re(l,e)},d(t){t&&_(l)}}}function tn(o){let e,l,t,n,r,a,s;function i(d,y){return d[15]?en:xl}let u=i(o),c=u(o);return t=new ul({props:{className:" self-center ml-2 size-3",strokeWidth:"2.5"}}),{c(){e=T("div"),c.c(),l=U(),F(t.$$.fragment),this.h()},l(d){e=z(d,"DIV",{class:!0});var y=L(e);c.l(y),l=W(y),q(t.$$.fragment,y),y.forEach(_),this.h()},h(){var d;m(e,"class",n="flex w-full text-left px-0.5 bg-transparent truncate "+o[7]+" justify-between "+(((d=o[19])==null?void 0:d.highContrastMode)??!1?"dark:placeholder-gray-100 placeholder-gray-800":"placeholder-gray-400"))},m(d,y){O(d,e,y),c.m(e,null),H(e,l),R(t,e,null),r=!0,a||(s=ue(e,"mouseenter",o[31]),a=!0)},p(d,y){var k;u===(u=i(d))&&c?c.p(d,y):(c.d(1),c=u(d),c&&(c.c(),c.m(e,l))),(!r||y[0]&524416&&n!==(n="flex w-full text-left px-0.5 bg-transparent truncate "+d[7]+" justify-between "+(((k=d[19])==null?void 0:k.highContrastMode)??!1?"dark:placeholder-gray-100 placeholder-gray-800":"placeholder-gray-400")))&&m(e,"class",n)},i(d){r||(v(t.$$.fragment,d),r=!0)},o(d){D(t.$$.fragment,d),r=!1},d(d){d&&_(e),c.d(),Z(t),a=!1,s()}}}function kt(o){let e,l,t,n,r,a,s,i;return l=new cl({props:{className:"size-4",strokeWidth:"2.5"}}),{c(){e=T("div"),F(l.$$.fragment),t=U(),n=T("input"),this.h()},l(u){e=z(u,"DIV",{class:!0});var c=L(e);q(l.$$.fragment,c),t=W(c),n=z(c,"INPUT",{id:!0,class:!0,placeholder:!0,autocomplete:!0,"aria-label":!0}),c.forEach(_),this.h()},h(){m(n,"id","model-search-input"),m(n,"class","w-full text-sm bg-transparent outline-hidden"),m(n,"placeholder",o[4]),m(n,"autocomplete","off"),m(n,"aria-label",r=o[21].t("Search In Models")),m(e,"class","flex items-center gap-2.5 px-4.5 mt-3.5 mb-1.5")},m(u,c){O(u,e,c),R(l,e,null),H(e,t),H(e,n),lt(n,o[10]),a=!0,s||(i=[ue(n,"input",o[32]),ue(n,"keydown",o[33])],s=!0)},p(u,c){(!a||c[0]&16)&&m(n,"placeholder",u[4]),(!a||c[0]&2097152&&r!==(r=u[21].t("Search In Models")))&&m(n,"aria-label",r),c[0]&1024&&n.value!==u[10]&&lt(n,u[10])},i(u){a||(v(l.$$.fragment,u),a=!0)},o(u){D(l.$$.fragment,u),a=!1},d(u){u&&_(e),Z(l),s=!1,Qt(i)}}}function $t(o){let e,l,t=o[5].find(Bt)||o[5].find(Pt)||o[5].find(jt)||o[14].length>0,n,r=o[5].find(St),a,s=o[5].find(Lt),i,u=o[5].find(zt),c,d,y,k=t&&Mt(o),p=r&&Et(o),C=s&&yt(o),$=u&&Dt(o),g=ge(o[14]),B=[];for(let w=0;w<g.length;w+=1)B[w]=Ct(wt(o,g,w));return{c(){e=T("div"),l=T("div"),k&&k.c(),n=U(),p&&p.c(),a=U(),C&&C.c(),i=U(),$&&$.c(),c=U();for(let w=0;w<B.length;w+=1)B[w].c();this.h()},l(w){e=z(w,"DIV",{class:!0});var M=L(e);l=z(M,"DIV",{class:!0});var N=L(l);k&&k.l(N),n=W(N),p&&p.l(N),a=W(N),C&&C.l(N),i=W(N),$&&$.l(N),c=W(N);for(let P=0;P<B.length;P+=1)B[P].l(N);N.forEach(_),M.forEach(_),this.h()},h(){m(l,"class","flex gap-1 w-fit text-center text-sm rounded-full bg-transparent px-1.5"),m(e,"class","flex w-full bg-white dark:bg-gray-850 overflow-x-auto scrollbar-none font-[450] mb-0.5")},m(w,M){O(w,e,M),H(e,l),k&&k.m(l,null),H(l,n),p&&p.m(l,null),H(l,a),C&&C.m(l,null),H(l,i),$&&$.m(l,null),H(l,c);for(let N=0;N<B.length;N+=1)B[N]&&B[N].m(l,null);o[39](l),d||(y=ue(e,"wheel",fn),d=!0)},p(w,M){if(M[0]&16416&&(t=w[5].find(Bt)||w[5].find(Pt)||w[5].find(jt)||w[14].length>0),t?k?k.p(w,M):(k=Mt(w),k.c(),k.m(l,n)):k&&(k.d(1),k=null),M[0]&32&&(r=w[5].find(St)),r?p?p.p(w,M):(p=Et(w),p.c(),p.m(l,a)):p&&(p.d(1),p=null),M[0]&32&&(s=w[5].find(Lt)),s?C?C.p(w,M):(C=yt(w),C.c(),C.m(l,i)):C&&(C.d(1),C=null),M[0]&32&&(u=w[5].find(zt)),u?$?$.p(w,M):($=Dt(w),$.c(),$.m(l,c)):$&&($.d(1),$=null),M[0]&22528){g=ge(w[14]);let N;for(N=0;N<g.length;N+=1){const P=wt(w,g,N);B[N]?B[N].p(P,M):(B[N]=Ct(P),B[N].c(),B[N].m(l,null))}for(;N<B.length;N+=1)B[N].d(1);B.length=g.length}},d(w){w&&_(e),k&&k.d(),p&&p.d(),C&&C.d(),$&&$.d(),Ue(B,w),o[39](null),d=!1,y()}}}function Mt(o){let e,l=o[21].t("All")+"",t,n,r,a,s;return{c(){e=T("button"),t=le(l),this.h()},l(i){e=z(i,"BUTTON",{class:!0,"aria-pressed":!0});var u=L(e);t=ne(u,l),u.forEach(_),this.h()},h(){m(e,"class",n="min-w-fit outline-none px-1.5 py-0.5 "+(o[11]===""&&o[12]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),m(e,"aria-pressed",r=o[11]===""&&o[12]==="")},m(i,u){O(i,e,u),H(e,t),a||(s=ue(e,"click",o[34]),a=!0)},p(i,u){u[0]&2097152&&l!==(l=i[21].t("All")+"")&&re(t,l),u[0]&6144&&n!==(n="min-w-fit outline-none px-1.5 py-0.5 "+(i[11]===""&&i[12]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&m(e,"class",n),u[0]&6144&&r!==(r=i[11]===""&&i[12]==="")&&m(e,"aria-pressed",r)},d(i){i&&_(e),a=!1,s()}}}function Et(o){let e,l=o[21].t("Local")+"",t,n,r,a,s;return{c(){e=T("button"),t=le(l),this.h()},l(i){e=z(i,"BUTTON",{class:!0,"aria-pressed":!0});var u=L(e);t=ne(u,l),u.forEach(_),this.h()},h(){m(e,"class",n="min-w-fit outline-none px-1.5 py-0.5 "+(o[12]==="local"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),m(e,"aria-pressed",r=o[12]==="local")},m(i,u){O(i,e,u),H(e,t),a||(s=ue(e,"click",o[35]),a=!0)},p(i,u){u[0]&2097152&&l!==(l=i[21].t("Local")+"")&&re(t,l),u[0]&4096&&n!==(n="min-w-fit outline-none px-1.5 py-0.5 "+(i[12]==="local"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&m(e,"class",n),u[0]&4096&&r!==(r=i[12]==="local")&&m(e,"aria-pressed",r)},d(i){i&&_(e),a=!1,s()}}}function yt(o){let e,l=o[21].t("External")+"",t,n,r,a,s;return{c(){e=T("button"),t=le(l),this.h()},l(i){e=z(i,"BUTTON",{class:!0,"aria-pressed":!0});var u=L(e);t=ne(u,l),u.forEach(_),this.h()},h(){m(e,"class",n="min-w-fit outline-none px-1.5 py-0.5 "+(o[12]==="external"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),m(e,"aria-pressed",r=o[12]==="external")},m(i,u){O(i,e,u),H(e,t),a||(s=ue(e,"click",o[36]),a=!0)},p(i,u){u[0]&2097152&&l!==(l=i[21].t("External")+"")&&re(t,l),u[0]&4096&&n!==(n="min-w-fit outline-none px-1.5 py-0.5 "+(i[12]==="external"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&m(e,"class",n),u[0]&4096&&r!==(r=i[12]==="external")&&m(e,"aria-pressed",r)},d(i){i&&_(e),a=!1,s()}}}function Dt(o){let e,l=o[21].t("Direct")+"",t,n,r,a,s;return{c(){e=T("button"),t=le(l),this.h()},l(i){e=z(i,"BUTTON",{class:!0,"aria-pressed":!0});var u=L(e);t=ne(u,l),u.forEach(_),this.h()},h(){m(e,"class",n="min-w-fit outline-none px-1.5 py-0.5 "+(o[12]==="direct"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),m(e,"aria-pressed",r=o[12]==="direct")},m(i,u){O(i,e,u),H(e,t),a||(s=ue(e,"click",o[37]),a=!0)},p(i,u){u[0]&2097152&&l!==(l=i[21].t("Direct")+"")&&re(t,l),u[0]&4096&&n!==(n="min-w-fit outline-none px-1.5 py-0.5 "+(i[12]==="direct"?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&m(e,"class",n),u[0]&4096&&r!==(r=i[12]==="direct")&&m(e,"aria-pressed",r)},d(i){i&&_(e),a=!1,s()}}}function Ct(o){let e,l=o[55]+"",t,n,r,a,s,i;function u(){return o[38](o[55])}return{c(){e=T("button"),t=le(l),n=U(),this.h()},l(c){e=z(c,"BUTTON",{class:!0,"aria-pressed":!0});var d=L(e);t=ne(d,l),n=W(d),d.forEach(_),this.h()},h(){m(e,"class",r="min-w-fit outline-none px-1.5 py-0.5 "+(o[11]===o[55]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),m(e,"aria-pressed",a=o[11]===o[55])},m(c,d){O(c,e,d),H(e,t),H(e,n),s||(i=ue(e,"click",u),s=!0)},p(c,d){o=c,d[0]&16384&&l!==(l=o[55]+"")&&re(t,l),d[0]&18432&&r!==(r="min-w-fit outline-none px-1.5 py-0.5 "+(o[11]===o[55]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&m(e,"class",r),d[0]&18432&&a!==(a=o[11]===o[55])&&m(e,"aria-pressed",a)},d(c){c&&_(e),s=!1,i()}}}function It(o){let e,l,t=o[21].t("No results found")+"",n;return{c(){e=T("div"),l=T("div"),n=le(t),this.h()},l(r){e=z(r,"DIV",{class:!0});var a=L(e);l=z(a,"DIV",{class:!0});var s=L(l);n=ne(s,t),s.forEach(_),a.forEach(_),this.h()},h(){m(l,"class","block px-3 py-2 text-sm text-gray-700 dark:text-gray-100"),m(e,"class","")},m(r,a){O(r,e,a),H(e,l),H(l,n)},p(r,a){a[0]&2097152&&t!==(t=r[21].t("No results found")+"")&&re(n,t)},d(r){r&&_(e)}}}function Nt(o){let e,l;function t(){return o[40](o[52],o[54])}return e=new Ql({props:{selectedModelIdx:o[17],item:o[52],index:o[54],value:o[0],pinModelHandler:o[8],unloadModelHandler:o[29],onClick:t}}),{c(){F(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,r){R(e,n,r),l=!0},p(n,r){o=n;const a={};r[0]&131072&&(a.selectedModelIdx=o[17]),r[0]&262144&&(a.item=o[52]),r[0]&1&&(a.value=o[0]),r[0]&256&&(a.pinModelHandler=o[8]),r[0]&393729&&(a.onClick=t),e.$set(a)},i(n){l||(v(e.$$.fragment,n),l=!0)},o(n){D(e.$$.fragment,n),l=!1},d(n){Z(e,n)}}}function Vt(o){let e,l;return e=new ce({props:{content:o[21].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:o[10]}),placement:"top-start",$$slots:{default:[ln]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const r={};n[0]&2098176&&(r.content=t[21].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:t[10]})),n[0]&2098176|n[1]&16384&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function ln(o){let e,l,t=o[21].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:o[10]})+"",n,r,a;return{c(){e=T("button"),l=T("div"),n=le(t),this.h()},l(s){e=z(s,"BUTTON",{class:!0});var i=L(e);l=z(i,"DIV",{class:!0});var u=L(l);n=ne(u,t),u.forEach(_),i.forEach(_),this.h()},h(){m(l,"class","truncate"),m(e,"class","flex w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl cursor-pointer data-highlighted:bg-muted")},m(s,i){O(s,e,i),H(e,l),H(l,n),r||(a=ue(e,"click",o[41]),r=!0)},p(s,i){i[0]&2098176&&t!==(t=s[21].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:s[10]})+"")&&re(n,t)},d(s){s&&_(e),r=!1,a()}}}function Ht(o){let e,l=o[22][o[49]].digest+"",t;return{c(){e=T("div"),t=le(l),this.h()},l(n){e=z(n,"DIV",{class:!0});var r=L(e);t=ne(r,l),r.forEach(_),this.h()},h(){m(e,"class","-mt-1 h-fit text-[0.7rem] dark:text-gray-500 line-clamp-1")},m(n,r){O(n,e,r),H(e,t)},p(n,r){r[0]&4194304&&l!==(l=n[22][n[49]].digest+"")&&re(t,l)},d(n){n&&_(e)}}}function nn(o){let e,l='<svg class="w-4 h-4 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"></path></svg>',t,n;function r(){return o[42](o[49])}return{c(){e=T("button"),e.innerHTML=l,this.h()},l(a){e=z(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-19bzgft"&&(e.innerHTML=l),this.h()},h(){m(e,"class","text-gray-800 dark:text-gray-100")},m(a,s){O(a,e,s),t||(n=ue(e,"click",r),t=!0)},p(a,s){o=a},d(a){a&&_(e),t=!1,n()}}}function Ot(o){let e,l,t,n,r,a,s,i,u,c=o[49]+"",d,y,k,p,C="pullProgress"in o[22][o[49]]?`(${o[22][o[49]].pullProgress}%)`:"",$,g,B,w,M,N,P;n=new nl({});let A="digest"in o[22][o[49]]&&o[22][o[49]].digest&&Ht(o);return M=new ce({props:{content:o[21].t("Cancel"),$$slots:{default:[nn]},$$scope:{ctx:o}}}),{c(){e=T("div"),l=T("div"),t=T("div"),F(n.$$.fragment),r=U(),a=T("div"),s=T("div"),i=T("div"),u=le('Downloading "'),d=le(c),y=le('"'),k=U(),p=T("div"),$=le(C),g=U(),A&&A.c(),B=U(),w=T("div"),F(M.$$.fragment),N=U(),this.h()},l(I){e=z(I,"DIV",{class:!0});var J=L(e);l=z(J,"DIV",{class:!0});var X=L(l);t=z(X,"DIV",{class:!0});var h=L(t);q(n.$$.fragment,h),h.forEach(_),r=W(X),a=z(X,"DIV",{class:!0});var E=L(a);s=z(E,"DIV",{class:!0});var G=L(s);i=z(G,"DIV",{class:!0});var b=L(i);u=ne(b,'Downloading "'),d=ne(b,c),y=ne(b,'"'),b.forEach(_),k=W(G),p=z(G,"DIV",{class:!0});var K=L(p);$=ne(K,C),K.forEach(_),G.forEach(_),g=W(E),A&&A.l(E),E.forEach(_),X.forEach(_),B=W(J),w=z(J,"DIV",{class:!0});var he=L(w);q(M.$$.fragment,he),he.forEach(_),N=W(J),J.forEach(_),this.h()},h(){m(t,"class","mr-2.5 translate-y-0.5"),m(i,"class","line-clamp-1"),m(p,"class","shrink-0"),m(s,"class","flex gap-1"),m(a,"class","flex flex-col self-start"),m(l,"class","flex"),m(w,"class","mr-2 ml-1 translate-y-0.5"),m(e,"class","flex w-full justify-between font-medium select-none rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 rounded-xl cursor-pointer data-highlighted:bg-muted")},m(I,J){O(I,e,J),H(e,l),H(l,t),R(n,t,null),H(l,r),H(l,a),H(a,s),H(s,i),H(i,u),H(i,d),H(i,y),H(s,k),H(s,p),H(p,$),H(a,g),A&&A.m(a,null),H(e,B),H(e,w),R(M,w,null),H(e,N),P=!0},p(I,J){(!P||J[0]&4194304)&&c!==(c=I[49]+"")&&re(d,c),(!P||J[0]&4194304)&&C!==(C="pullProgress"in I[22][I[49]]?`(${I[22][I[49]].pullProgress}%)`:"")&&re($,C),"digest"in I[22][I[49]]&&I[22][I[49]].digest?A?A.p(I,J):(A=Ht(I),A.c(),A.m(a,null)):A&&(A.d(1),A=null);const X={};J[0]&2097152&&(X.content=I[21].t("Cancel")),J[0]&4194304|J[1]&16384&&(X.$$scope={dirty:J,ctx:I}),M.$set(X)},i(I){P||(v(n.$$.fragment,I),v(M.$$.fragment,I),P=!0)},o(I){D(n.$$.fragment,I),D(M.$$.fragment,I),P=!1},d(I){I&&_(e),Z(n),A&&A.d(),Z(M)}}}function rn(o){var X;let e,l,t=o[14]&&o[5].filter(Tt).length>0,n,r,a,s=!(o[10].trim()in o[22])&&o[10]&&o[16]&&((X=o[24])==null?void 0:X.role)==="admin",i,u,c,d,y,k,p,C,$=o[3]&&kt(o),g=t&&$t(o),B=ge(o[18]),w=[];for(let h=0;h<B.length;h+=1)w[h]=Nt(bt(o,B,h));const M=h=>D(w[h],1,1,()=>{w[h]=null});let N=null;B.length||(N=It(o));let P=s&&Vt(o),A=ge(Object.keys(o[22])),I=[];for(let h=0;h<A.length;h+=1)I[h]=Ot(vt(o,A,h));const J=h=>D(I[h],1,1,()=>{I[h]=null});return{c(){$&&$.c(),e=U(),l=T("div"),g&&g.c(),n=U(),r=T("div");for(let h=0;h<w.length;h+=1)w[h].c();N&&N.c(),a=U(),P&&P.c(),i=U();for(let h=0;h<I.length;h+=1)I[h].c();u=U(),c=T("div"),d=U(),y=T("div"),k=U(),p=T("div"),this.h()},l(h){$&&$.l(h),e=W(h),l=z(h,"DIV",{class:!0});var E=L(l);g&&g.l(E),E.forEach(_),n=W(h),r=z(h,"DIV",{class:!0});var G=L(r);for(let b=0;b<w.length;b+=1)w[b].l(G);N&&N.l(G),a=W(G),P&&P.l(G),i=W(G);for(let b=0;b<I.length;b+=1)I[b].l(G);G.forEach(_),u=W(h),c=z(h,"DIV",{class:!0}),L(c).forEach(_),d=W(h),y=z(h,"DIV",{class:!0}),L(y).forEach(_),k=W(h),p=z(h,"DIV",{class:!0}),L(p).forEach(_),this.h()},h(){m(l,"class","px-2"),m(r,"class","px-2.5 max-h-64 overflow-y-auto group relative"),m(c,"class","mb-2.5"),m(y,"class","hidden w-[42rem]"),m(p,"class","hidden w-[32rem]")},m(h,E){$&&$.m(h,E),O(h,e,E),O(h,l,E),g&&g.m(l,null),O(h,n,E),O(h,r,E);for(let G=0;G<w.length;G+=1)w[G]&&w[G].m(r,null);N&&N.m(r,null),H(r,a),P&&P.m(r,null),H(r,i);for(let G=0;G<I.length;G+=1)I[G]&&I[G].m(r,null);O(h,u,E),O(h,c,E),O(h,d,E),O(h,y,E),O(h,k,E),O(h,p,E),C=!0},p(h,E){var G;if(h[3]?$?($.p(h,E),E[0]&8&&v($,1)):($=kt(h),$.c(),v($,1),$.m(e.parentNode,e)):$&&(se(),D($,1,1,()=>{$=null}),ie()),E[0]&16416&&(t=h[14]&&h[5].filter(Tt).length>0),t?g?g.p(h,E):(g=$t(h),g.c(),g.m(l,null)):g&&(g.d(1),g=null),E[0]&539362049){B=ge(h[18]);let b;for(b=0;b<B.length;b+=1){const K=bt(h,B,b);w[b]?(w[b].p(K,E),v(w[b],1)):(w[b]=Nt(K),w[b].c(),v(w[b],1),w[b].m(r,a))}for(se(),b=B.length;b<w.length;b+=1)M(b);ie(),!B.length&&N?N.p(h,E):B.length?N&&(N.d(1),N=null):(N=It(h),N.c(),N.m(r,a))}if(E[0]&21038080&&(s=!(h[10].trim()in h[22])&&h[10]&&h[16]&&((G=h[24])==null?void 0:G.role)==="admin"),s?P?(P.p(h,E),E[0]&21038080&&v(P,1)):(P=Vt(h),P.c(),v(P,1),P.m(r,i)):P&&(se(),D(P,1,1,()=>{P=null}),ie()),E[0]&274726912){A=ge(Object.keys(h[22]));let b;for(b=0;b<A.length;b+=1){const K=vt(h,A,b);I[b]?(I[b].p(K,E),v(I[b],1)):(I[b]=Ot(K),I[b].c(),v(I[b],1),I[b].m(r,null))}for(se(),b=A.length;b<I.length;b+=1)J(b);ie()}},i(h){if(!C){v($);for(let E=0;E<B.length;E+=1)v(w[E]);v(P);for(let E=0;E<A.length;E+=1)v(I[E]);C=!0}},o(h){D($),w=w.filter(Boolean);for(let E=0;E<w.length;E+=1)D(w[E]);D(P),I=I.filter(Boolean);for(let E=0;E<I.length;E+=1)D(I[E]);C=!1},d(h){h&&(_(e),_(l),_(n),_(r),_(u),_(c),_(d),_(y),_(k),_(p)),$&&$.d(h),g&&g.d(),Ue(w,h),N&&N.d(),P&&P.d(),Ue(I,h)}}}function on(o){let e;const l=o[30].default,t=At(l,o,o[45],null),n=t||rn(o);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,a){n&&n.m(r,a),e=!0},p(r,a){t?t.p&&(!e||a[1]&16384)&&Ut(t,l,r,r[45],e?Ft(l,r[45],a,null):Wt(r[45]),null):n&&n.p&&(!e||a[0]&23559993)&&n.p(r,e?a:[-1,-1])},i(r){e||(v(n,r),e=!0)},o(r){D(n,r),e=!1},d(r){n&&n.d(r)}}}function an(o){var r;let e,l,t,n;return e=new Rt({props:{class:"relative w-full "+(((r=o[19])==null?void 0:r.highContrastMode)??!1?"":"outline-hidden focus:outline-hidden"),"aria-label":o[2],id:"model-selector-"+o[1]+"-button",$$slots:{default:[tn]},$$scope:{ctx:o}}}),t=new Zt({props:{class:" z-40 "+(o[23]?"w-full":`${o[6]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-2xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden",transition:Gt,side:o[23]?"bottom":"bottom-start",sideOffset:2,alignOffset:-1,$$slots:{default:[on]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment),l=U(),F(t.$$.fragment)},l(a){q(e.$$.fragment,a),l=W(a),q(t.$$.fragment,a)},m(a,s){R(e,a,s),O(a,l,s),R(t,a,s),n=!0},p(a,s){var c;const i={};s[0]&524288&&(i.class="relative w-full "+(((c=a[19])==null?void 0:c.highContrastMode)??!1?"":"outline-hidden focus:outline-hidden")),s[0]&4&&(i["aria-label"]=a[2]),s[0]&2&&(i.id="model-selector-"+a[1]+"-button"),s[0]&1605764|s[1]&16384&&(i.$$scope={dirty:s,ctx:a}),e.$set(i);const u={};s[0]&8388672&&(u.class=" z-40 "+(a[23]?"w-full":`${a[6]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-2xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden"),s[0]&8388608&&(u.side=a[23]?"bottom":"bottom-start"),s[0]&23559993|s[1]&16384&&(u.$$scope={dirty:s,ctx:a}),t.$set(u)},i(a){n||(v(e.$$.fragment,a),v(t.$$.fragment,a),n=!0)},o(a){D(e.$$.fragment,a),D(t.$$.fragment,a),n=!1},d(a){a&&_(l),Z(e,a),Z(t,a)}}}function sn(o){let e,l,t;function n(a){o[44](a)}let r={onOpenChange:o[43],closeFocus:!1,$$slots:{default:[an]},$$scope:{ctx:o}};return o[9]!==void 0&&(r.open=o[9]),e=new qt({props:r}),We.push(()=>Ge(e,"open",n)),{c(){F(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,s){R(e,a,s),t=!0},p(a,s){const i={};s[0]&1024&&(i.onOpenChange=a[43]),s[0]&33554431|s[1]&16384&&(i.$$scope={dirty:s,ctx:a}),!l&&s[0]&512&&(l=!0,i.open=a[9],Ke(()=>l=!1)),e.$set(i)},i(a){t||(v(e.$$.fragment,a),t=!0)},o(a){D(e.$$.fragment,a),t=!1},d(a){Z(e,a)}}}const Tt=o=>{var e,l,t;return!(((t=(l=(e=o.model)==null?void 0:e.info)==null?void 0:l.meta)==null?void 0:t.hidden)??!1)},zt=o=>{var e;return(e=o.model)==null?void 0:e.direct},Lt=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="external"},St=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="local"},Bt=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="local"},Pt=o=>{var e;return((e=o.model)==null?void 0:e.connection_type)==="external"},jt=o=>{var e;return(e=o.model)==null?void 0:e.direct},fn=o=>{o.deltaY!==0&&(o.preventDefault(),o.currentTarget.scrollLeft+=o.deltaY)};function un(o,e,l){let t,n,r,a,s,i,u;pe(o,Kt,f=>l(19,n=f)),pe(o,il,f=>l(20,r=f)),pe(o,we,f=>l(22,s=f)),pe(o,fl,f=>l(23,i=f)),pe(o,Yt,f=>l(24,u=f));let{$$slots:c={},$$scope:d}=e;Ze.extend(ll);const y=Ye("i18n");pe(o,y,f=>l(21,a=f)),Jt();let{id:k=""}=e,{value:p=""}=e,{placeholder:C=a.t("Select a model")}=e,{searchEnabled:$=!0}=e,{searchPlaceholder:g=a.t("Search a model")}=e,{items:B=[]}=e,{className:w="w-[32rem]"}=e,{triggerClassName:M="text-lg"}=e,{pinModelHandler:N=()=>{}}=e,P,A=!1,I=[],J="",X="",h="",E="",G=null,b=0;const K=new tl(B.map(f=>{var j,Y,oe,ee,fe;return{...f,modelName:(j=f.model)==null?void 0:j.name,tags:(((Y=f.model)==null?void 0:Y.tags)??[]).map(ve=>ve.name).join(" "),desc:(fe=(ee=(oe=f.model)==null?void 0:oe.info)==null?void 0:ee.meta)==null?void 0:fe.description}}),{keys:["value","tags","modelName"],threshold:.4}),he=async()=>{await tt();const f=t.findIndex(j=>j.value===p);f>=0?l(17,b=f):l(17,b=0),await tt();const S=document.querySelector('[data-arrow-selected="true"]');S==null||S.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})},me=async()=>{var Y;const f=X.trim().replace(/^ollama\s+(run|pull)\s+/,"");if(s[f]){de.error(a.t("Model '{{modelTag}}' is already in queue for downloading.",{modelTag:f}));return}if(Object.keys(s).length===3){de.error(a.t("Maximum of 3 models can be downloaded simultaneously. Please try again later."));return}const[S,j]=await rl(localStorage.token,f,"0").catch(oe=>(de.error(`${oe}`),null));if(S){const oe=S.body.pipeThrough(new TextDecoderStream).pipeThrough(el(`
`)).getReader();for(we.set({...s,[f]:{...s[f],abortController:j,reader:oe,done:!1}});;)try{const{value:ee,done:fe}=await oe.read();if(fe)break;let ve=ee.split(`
`);for(const $e of ve)if($e!==""){let ae=JSON.parse($e);if(ae.error)throw ae.error;if(ae.detail)throw ae.detail;if(ae.status)if(ae.digest){let be=0;ae.completed?be=Math.round(ae.completed/ae.total*1e3)/10:be=100,we.set({...s,[f]:{...s[f],pullProgress:be,digest:ae.digest}})}else de.success(ae.status),we.set({...s,[f]:{...s[f],done:ae.status==="success"}})}}catch(ee){typeof ee!="string"&&(ee=ee.message),de.error(`${ee}`);break}s[f].done?(de.success(a.t("Model '{{modelName}}' has been successfully downloaded.",{modelName:f})),qe.set(await Re(localStorage.token,((Y=r==null?void 0:r.features)==null?void 0:Y.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null)))):de.error(a.t("Download canceled")),delete s[f],we.set({...s})}},Ie=async()=>{l(16,G=await sl(localStorage.token).catch(f=>!1))};Xt(async()=>{B&&(l(14,I=B.filter(f=>{var S,j,Y;return!(((Y=(j=(S=f.model)==null?void 0:S.info)==null?void 0:j.meta)==null?void 0:Y.hidden)??!1)}).flatMap(f=>{var S;return((S=f.model)==null?void 0:S.tags)??[]}).map(f=>f.name)),l(14,I=Array.from(new Set(I)).sort((f,S)=>f.localeCompare(S))))});const Q=async f=>{const{reader:S,abortController:j}=s[f];j&&j.abort(),S&&(await S.cancel(),delete s[f],we.set({...s}),await ol(localStorage.token,f),de.success(a.t("{{model}} download has been canceled",{model:f})))},x=async f=>{var j;await al(localStorage.token,f).catch(Y=>{de.error(a.t("Error unloading model: {{error}}",{error:Y}))})&&(de.success(a.t("Model unloaded successfully")),qe.set(await Re(localStorage.token,((j=r==null?void 0:r.features)==null?void 0:j.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null))))},Fe=async()=>{var f;qe.set(await Re(localStorage.token,((f=r==null?void 0:r.features)==null?void 0:f.enable_direct_connections)&&((n==null?void 0:n.directConnections)??null)))};function Ne(){X=this.value,l(10,X)}const te=f=>{if(f.code==="Enter"&&t.length>0){l(0,p=t[b].value),l(9,A=!1);return}else f.code==="ArrowDown"?(f.stopPropagation(),l(17,b=Math.min(b+1,t.length-1))):f.code==="ArrowUp"?(f.stopPropagation(),l(17,b=Math.max(b-1,0))):l(17,b=0);const S=document.querySelector('[data-arrow-selected="true"]');S==null||S.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})},Ve=()=>{l(12,E=""),l(11,h="")},He=()=>{l(11,h=""),l(12,E="local")},Oe=()=>{l(11,h=""),l(12,E="external")},Te=()=>{l(11,h=""),l(12,E="direct")},ze=f=>{l(12,E=""),l(11,h=f)};function Le(f){We[f?"unshift":"push"](()=>{P=f,l(13,P)})}const Se=(f,S)=>{l(0,p=f.value),l(17,b=S),l(9,A=!1)},Be=()=>{me()},Pe=f=>{Q(f)},je=async()=>{l(10,X=""),window.setTimeout(()=>{var f;return(f=document.getElementById("model-search-input"))==null?void 0:f.focus()},0),he()};function V(f){A=f,l(9,A)}return o.$$set=f=>{"id"in f&&l(1,k=f.id),"value"in f&&l(0,p=f.value),"placeholder"in f&&l(2,C=f.placeholder),"searchEnabled"in f&&l(3,$=f.searchEnabled),"searchPlaceholder"in f&&l(4,g=f.searchPlaceholder),"items"in f&&l(5,B=f.items),"className"in f&&l(6,w=f.className),"triggerClassName"in f&&l(7,M=f.triggerClassName),"pinModelHandler"in f&&l(8,N=f.pinModelHandler),"$$scope"in f&&l(45,d=f.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&33&&l(15,J=B.find(f=>f.value===p)??""),o.$$.dirty[0]&7200&&l(18,t=(X?K.search(X).map(f=>f.item).filter(f=>{var S;return h===""?!0:(((S=f.model)==null?void 0:S.tags)??[]).map(j=>j.name).includes(h)}).filter(f=>{var S,j,Y;if(E==="")return!0;if(E==="local")return((S=f.model)==null?void 0:S.connection_type)==="local";if(E==="external")return((j=f.model)==null?void 0:j.connection_type)==="external";if(E==="direct")return(Y=f.model)==null?void 0:Y.direct}):B.filter(f=>{var S;return h===""?!0:(((S=f.model)==null?void 0:S.tags)??[]).map(j=>j.name).includes(h)}).filter(f=>{var S,j,Y;if(E==="")return!0;if(E==="local")return((S=f.model)==null?void 0:S.connection_type)==="local";if(E==="external")return((j=f.model)==null?void 0:j.connection_type)==="external";if(E==="direct")return(Y=f.model)==null?void 0:Y.direct})).filter(f=>{var S,j,Y;return!(((Y=(j=(S=f.model)==null?void 0:S.info)==null?void 0:j.meta)==null?void 0:Y.hidden)??!1)})),o.$$.dirty[0]&6144&&he(),o.$$.dirty[0]&512&&A&&Ie()},[p,k,C,$,g,B,w,M,N,A,X,h,E,P,I,J,G,b,t,n,r,a,s,i,u,y,he,me,Q,x,c,Fe,Ne,te,Ve,He,Oe,Te,ze,Le,Se,Be,Pe,je,V,d]}class Ln extends ye{constructor(e){super(),De(this,e,un,sn,ke,{id:1,value:0,placeholder:2,searchEnabled:3,searchPlaceholder:4,items:5,className:6,triggerClassName:7,pinModelHandler:8},null,[-1,-1])}}export{Ln as S};
//# sourceMappingURL=CyvomhRm.js.map
