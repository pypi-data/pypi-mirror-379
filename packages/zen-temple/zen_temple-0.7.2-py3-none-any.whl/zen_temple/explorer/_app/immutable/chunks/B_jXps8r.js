import"./DsnmJJEf.js";import{s as Le,o as Ve}from"./B98B7x2v.js";import{y as Xe,a5 as $e,B as et,V as tt,b5 as rt,A as nt,w as Je,e as oe,m as V,r as J,h as Ae,v as fe,a as ae,p as it,b as Re,s as Se,j as X,g as y,l as De,f as st,n as je,i as at}from"./BZ0BXH4m.js";import{p as he,i as He}from"./CUAkeMiK.js";import{c as ve,g as Fe,u as ot,e as Ue,i as Me}from"./B9BLuPDP.js";import{s as _e}from"./C5ruyaoV.js";import{d as lt}from"./fIP5WTNy.js";import{s as Ne}from"./DLtGBQZ4.js";function Ze(n,i,u=!1){if(n.multiple){if(i==null)return;if(!tt(i))return rt();for(var a of n.options)a.selected=i.includes(Ie(a));return}for(a of n.options){var c=Ie(a);if(nt(c,i)){a.selected=!0;return}}(!u||i!==void 0)&&(n.selectedIndex=-1)}function ut(n){var i=new MutationObserver(()=>{Ze(n,n.__value)});i.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),et(()=>{i.disconnect()})}function ze(n,i,u=i){var a=!0;Xe(n,"change",c=>{var d=c?"[selected]":":checked",_;if(n.multiple)_=[].map.call(n.querySelectorAll(d),Ie);else{var b=n.querySelector(d)??n.querySelector("option:not([disabled])");_=b&&Ie(b)}u(_)}),$e(()=>{var c=i();if(Ze(n,c,a),a&&c===void 0){var d=n.querySelector(":checked");d!==null&&(c=Ie(d),u(c))}n.__value=c,a=!1}),ut(n)}function Ie(n){return"__value"in n?n.__value:n.value}function ct(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Te={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var ft=Te.exports,Qe;function dt(){return Qe||(Qe=1,(function(n,i){((u,a)=>{n.exports=a()})(ft,function u(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},c,d=!a.document&&!!a.postMessage,_=a.IS_PAPA_WORKER||!1,b={},L=0,l={};function p(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var r=pe(e);r.chunkSize=parseInt(r.chunkSize),e.step||e.chunk||(r.chunkSize=null),this._handle=new le(r),(this._handle.streamer=this)._config=r}).call(this,t),this.parseChunk=function(e,r){var o=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<o){let f=this._config.newline;f||(s=this._config.quoteChar||'"',f=this._handle.guessLineEndings(e,s)),e=[...e.split(f).slice(o)].join(f)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(s=this._config.beforeFirstChunk(e))!==void 0&&(e=s),this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e,s=(this._partialLine="",this._handle.parse(o,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=s.meta.cursor,o=(this._finished||(this._partialLine=o.substring(e-this._baseIndex),this._baseIndex=e),s&&s.data&&(this._rowCount+=s.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),_)a.postMessage({results:s,workerId:l.WORKER_ID,finished:o});else if(j(this._config.chunk)&&!r){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=s=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!o||!j(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),o||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(e){j(this._config.error)?this._config.error(e):_&&this._config.error&&a.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function E(t){var e;(t=t||{}).chunkSize||(t.chunkSize=l.RemoteChunkSize),p.call(this,t),this._nextChunk=d?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),d||(e.onload=re(this._chunkLoaded,this),e.onerror=re(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!d),this._config.downloadRequestHeaders){var r,o=this._config.downloadRequestHeaders;for(r in o)e.setRequestHeader(r,o[r])}var s;this._config.chunkSize&&(s=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+s));try{e.send(this._config.downloadRequestBody)}catch(f){this._chunkError(f.message)}d&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(r){r=e.statusText||r,this._sendError(new Error(r))}}function F(t){(t=t||{}).chunkSize||(t.chunkSize=l.LocalChunkSize),p.call(this,t);var e,r,o=typeof FileReader<"u";this.stream=function(s){this._input=s,r=s.slice||s.webkitSlice||s.mozSlice,o?((e=new FileReader).onload=re(this._chunkLoaded,this),e.onerror=re(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var s=this._input,f=(this._config.chunkSize&&(f=Math.min(this._start+this._config.chunkSize,this._input.size),s=r.call(s,this._start,f)),e.readAsText(s,this._config.encoding));o||this._chunkLoaded({target:{result:f}})},this._chunkLoaded=function(s){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(s.target.result)},this._chunkError=function(){this._sendError(e.error)}}function q(t){var e;p.call(this,t=t||{}),this.stream=function(r){return e=r,this._nextChunk()},this._nextChunk=function(){var r,o;if(!this._finished)return r=this._config.chunkSize,e=r?(o=e.substring(0,r),e.substring(r)):(o=e,""),this._finished=!e,this.parseChunk(o)}}function N(t){p.call(this,t=t||{});var e=[],r=!0,o=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(s){this._input=s,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){o&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):r=!0},this._streamData=re(function(s){try{e.push(typeof s=="string"?s:s.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(f){this._streamError(f)}},this),this._streamError=re(function(s){this._streamCleanUp(),this._sendError(s)},this),this._streamEnd=re(function(){this._streamCleanUp(),o=!0,this._streamData("")},this),this._streamCleanUp=re(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function le(t){var e,r,o,s,f=Math.pow(2,53),x=-f,A=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,P=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,v=this,I=0,g=0,Z=!1,k=!1,O=[],h={data:[],errors:[],meta:{}};function W(R){return t.skipEmptyLines==="greedy"?R.join("").trim()==="":R.length===1&&R[0].length===0}function B(){if(h&&o&&($("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),o=!1),t.skipEmptyLines&&(h.data=h.data.filter(function(m){return!W(m)})),Q()){let m=function(z,K){j(t.transformHeader)&&(z=t.transformHeader(z,K)),O.push(z)};if(h)if(Array.isArray(h.data[0])){for(var R=0;Q()&&R<h.data.length;R++)h.data[R].forEach(m);h.data.splice(0,1)}else h.data.forEach(m)}function C(m,z){for(var K=t.header?{}:[],T=0;T<m.length;T++){var D=T,S=m[T],S=((ee,w)=>(U=>(t.dynamicTypingFunction&&t.dynamicTyping[U]===void 0&&(t.dynamicTyping[U]=t.dynamicTypingFunction(U)),(t.dynamicTyping[U]||t.dynamicTyping)===!0))(ee)?w==="true"||w==="TRUE"||w!=="false"&&w!=="FALSE"&&((U=>{if(A.test(U)&&(U=parseFloat(U),x<U&&U<f))return 1})(w)?parseFloat(w):P.test(w)?new Date(w):w===""?null:w):w)(D=t.header?T>=O.length?"__parsed_extra":O[T]:D,S=t.transform?t.transform(S,D):S);D==="__parsed_extra"?(K[D]=K[D]||[],K[D].push(S)):K[D]=S}return t.header&&(T>O.length?$("FieldMismatch","TooManyFields","Too many fields: expected "+O.length+" fields but parsed "+T,g+z):T<O.length&&$("FieldMismatch","TooFewFields","Too few fields: expected "+O.length+" fields but parsed "+T,g+z)),K}var M;h&&(t.header||t.dynamicTyping||t.transform)&&(M=1,!h.data.length||Array.isArray(h.data[0])?(h.data=h.data.map(C),M=h.data.length):h.data=C(h.data,0),t.header&&h.meta&&(h.meta.fields=O),g+=M)}function Q(){return t.header&&O.length===0}function $(R,C,M,m){R={type:R,code:C,message:M},m!==void 0&&(R.row=m),h.errors.push(R)}j(t.step)&&(s=t.step,t.step=function(R){h=R,Q()?B():(B(),h.data.length!==0&&(I+=R.data.length,t.preview&&I>t.preview?r.abort():(h.data=h.data[0],s(h,v))))}),this.parse=function(R,C,M){var m=t.quoteChar||'"',m=(t.newline||(t.newline=this.guessLineEndings(R,m)),o=!1,t.delimiter?j(t.delimiter)&&(t.delimiter=t.delimiter(R),h.meta.delimiter=t.delimiter):((m=((z,K,T,D,S)=>{var ee,w,U,ce;S=S||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var ge=0;ge<S.length;ge++){for(var ne,Ee=S[ge],G=0,ie=0,H=0,Y=(U=void 0,new de({comments:D,delimiter:Ee,newline:K,preview:10}).parse(z)),ue=0;ue<Y.data.length;ue++)T&&W(Y.data[ue])?H++:(ne=Y.data[ue].length,ie+=ne,U===void 0?U=ne:0<ne&&(G+=Math.abs(ne-U),U=ne));0<Y.data.length&&(ie/=Y.data.length-H),(w===void 0||G<=w)&&(ce===void 0||ce<ie)&&1.99<ie&&(w=G,ee=Ee,ce=ie)}return{successful:!!(t.delimiter=ee),bestDelimiter:ee}})(R,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=m.bestDelimiter:(o=!0,t.delimiter=l.DefaultDelimiter),h.meta.delimiter=t.delimiter),pe(t));return t.preview&&t.header&&m.preview++,e=R,r=new de(m),h=r.parse(e,C,M),B(),Z?{meta:{paused:!0}}:h||{meta:{paused:!1}}},this.paused=function(){return Z},this.pause=function(){Z=!0,r.abort(),e=j(t.chunk)?"":e.substring(r.getCharIndex())},this.resume=function(){v.streamer._halted?(Z=!1,v.streamer.parseChunk(e,!0)):setTimeout(v.resume,3)},this.aborted=function(){return k},this.abort=function(){k=!0,r.abort(),h.meta.aborted=!0,j(t.complete)&&t.complete(h),e=""},this.guessLineEndings=function(z,m){z=z.substring(0,1048576);var m=new RegExp(te(m)+"([^]*?)"+te(m),"gm"),M=(z=z.replace(m,"")).split("\r"),m=z.split(`
`),z=1<m.length&&m[0].length<M[0].length;if(M.length===1||z)return`
`;for(var K=0,T=0;T<M.length;T++)M[T][0]===`
`&&K++;return K>=M.length/2?`\r
`:"\r"}}function te(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function de(t){var e=(t=t||{}).delimiter,r=t.newline,o=t.comments,s=t.step,f=t.preview,x=t.fastMode,A=null,P=!1,v=t.quoteChar==null?'"':t.quoteChar,I=v;if(t.escapeChar!==void 0&&(I=t.escapeChar),(typeof e!="string"||-1<l.BAD_DELIMITERS.indexOf(e))&&(e=","),o===e)throw new Error("Comment character same as delimiter");o===!0?o="#":(typeof o!="string"||-1<l.BAD_DELIMITERS.indexOf(o))&&(o=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var g=0,Z=!1;this.parse=function(k,O,h){if(typeof k!="string")throw new Error("Input must be a string");var W=k.length,B=e.length,Q=r.length,$=o.length,R=j(s),C=[],M=[],m=[],z=g=0;if(!k)return G();if(x||x!==!1&&k.indexOf(v)===-1){for(var K=k.split(r),T=0;T<K.length;T++){if(m=K[T],g+=m.length,T!==K.length-1)g+=r.length;else if(h)return G();if(!o||m.substring(0,$)!==o){if(R){if(C=[],ce(m.split(e)),ie(),Z)return G()}else ce(m.split(e));if(f&&f<=T)return C=C.slice(0,f),G(!0)}}return G()}for(var D=k.indexOf(e,g),S=k.indexOf(r,g),ee=new RegExp(te(I)+te(v),"g"),w=k.indexOf(v,g);;)if(k[g]===v)for(w=g,g++;;){if((w=k.indexOf(v,w+1))===-1)return h||M.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:C.length,index:g}),ne();if(w===W-1)return ne(k.substring(g,w).replace(ee,v));if(v===I&&k[w+1]===I)w++;else if(v===I||w===0||k[w-1]!==I){D!==-1&&D<w+1&&(D=k.indexOf(e,w+1));var U=ge((S=S!==-1&&S<w+1?k.indexOf(r,w+1):S)===-1?D:Math.min(D,S));if(k.substr(w+1+U,B)===e){m.push(k.substring(g,w).replace(ee,v)),k[g=w+1+U+B]!==v&&(w=k.indexOf(v,g)),D=k.indexOf(e,g),S=k.indexOf(r,g);break}if(U=ge(S),k.substring(w+1+U,w+1+U+Q)===r){if(m.push(k.substring(g,w).replace(ee,v)),Ee(w+1+U+Q),D=k.indexOf(e,g),w=k.indexOf(v,g),R&&(ie(),Z))return G();if(f&&C.length>=f)return G(!0);break}M.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:C.length,index:g}),w++}}else if(o&&m.length===0&&k.substring(g,g+$)===o){if(S===-1)return G();g=S+Q,S=k.indexOf(r,g),D=k.indexOf(e,g)}else if(D!==-1&&(D<S||S===-1))m.push(k.substring(g,D)),g=D+B,D=k.indexOf(e,g);else{if(S===-1)break;if(m.push(k.substring(g,S)),Ee(S+Q),R&&(ie(),Z))return G();if(f&&C.length>=f)return G(!0)}return ne();function ce(H){C.push(H),z=g}function ge(H){var Y=0;return Y=H!==-1&&(H=k.substring(w+1,H))&&H.trim()===""?H.length:Y}function ne(H){return h||(H===void 0&&(H=k.substring(g)),m.push(H),g=W,ce(m),R&&ie()),G()}function Ee(H){g=H,ce(m),m=[],S=k.indexOf(r,g)}function G(H){if(t.header&&!O&&C.length&&!P){var Y=C[0],ue=Object.create(null),Pe=new Set(Y);let We=!1;for(let me=0;me<Y.length;me++){let se=Y[me];if(ue[se=j(t.transformHeader)?t.transformHeader(se,me):se]){let Oe,Ke=ue[se];for(;Oe=se+"_"+Ke,Ke++,Pe.has(Oe););Pe.add(Oe),Y[me]=Oe,ue[se]++,We=!0,(A=A===null?{}:A)[Oe]=se}else ue[se]=1,Y[me]=se;Pe.add(se)}We&&console.warn("Duplicate headers found and renamed."),P=!0}return{data:C,errors:M,meta:{delimiter:e,linebreak:r,aborted:Z,truncated:!!H,cursor:z+(O||0),renamedHeaders:A}}}function ie(){s(G()),C=[],M=[]}},this.abort=function(){Z=!0},this.getCharIndex=function(){return g}}function ye(t){var e=t.data,r=b[e.workerId],o=!1;if(e.error)r.userError(e.error,e.file);else if(e.results&&e.results.data){var s={abort:function(){o=!0,ke(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:we,resume:we};if(j(r.userStep)){for(var f=0;f<e.results.data.length&&(r.userStep({data:e.results.data[f],errors:e.results.errors,meta:e.results.meta},s),!o);f++);delete e.results}else j(r.userChunk)&&(r.userChunk(e.results,s,e.file),delete e.results)}e.finished&&!o&&ke(e.workerId,e.results)}function ke(t,e){var r=b[t];j(r.userComplete)&&r.userComplete(e),r.terminate(),delete b[t]}function we(){throw new Error("Not implemented.")}function pe(t){if(typeof t!="object"||t===null)return t;var e,r=Array.isArray(t)?[]:{};for(e in t)r[e]=pe(t[e]);return r}function re(t,e){return function(){t.apply(e,arguments)}}function j(t){return typeof t=="function"}return l.parse=function(t,e){var r=(e=e||{}).dynamicTyping||!1;if(j(r)&&(e.dynamicTypingFunction=r,r={}),e.dynamicTyping=r,e.transform=!!j(e.transform)&&e.transform,!e.worker||!l.WORKERS_SUPPORTED)return r=null,l.NODE_STREAM_INPUT,typeof t=="string"?(t=(o=>o.charCodeAt(0)!==65279?o:o.slice(1))(t),r=new(e.download?E:q)(e)):t.readable===!0&&j(t.read)&&j(t.on)?r=new N(e):(a.File&&t instanceof File||t instanceof Object)&&(r=new F(e)),r.stream(t);(r=(()=>{var o;return!!l.WORKERS_SUPPORTED&&(o=(()=>{var s=a.URL||a.webkitURL||null,f=u.toString();return l.BLOB_URL||(l.BLOB_URL=s.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",f,")();"],{type:"text/javascript"})))})(),(o=new a.Worker(o)).onmessage=ye,o.id=L++,b[o.id]=o)})()).userStep=e.step,r.userChunk=e.chunk,r.userComplete=e.complete,r.userError=e.error,e.step=j(e.step),e.chunk=j(e.chunk),e.complete=j(e.complete),e.error=j(e.error),delete e.worker,r.postMessage({input:t,config:e,workerId:r.id})},l.unparse=function(t,e){var r=!1,o=!0,s=",",f=`\r
`,x='"',A=x+x,P=!1,v=null,I=!1,g=((()=>{if(typeof e=="object"){if(typeof e.delimiter!="string"||l.BAD_DELIMITERS.filter(function(O){return e.delimiter.indexOf(O)!==-1}).length||(s=e.delimiter),typeof e.quotes!="boolean"&&typeof e.quotes!="function"&&!Array.isArray(e.quotes)||(r=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(P=e.skipEmptyLines),typeof e.newline=="string"&&(f=e.newline),typeof e.quoteChar=="string"&&(x=e.quoteChar),typeof e.header=="boolean"&&(o=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");v=e.columns}e.escapeChar!==void 0&&(A=e.escapeChar+x),e.escapeFormulae instanceof RegExp?I=e.escapeFormulae:typeof e.escapeFormulae=="boolean"&&e.escapeFormulae&&(I=/^[=+\-@\t\r].*$/)}})(),new RegExp(te(x),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return Z(null,t,P);if(typeof t[0]=="object")return Z(v||Object.keys(t[0]),t,P)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||v),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),Z(t.fields||[],t.data||[],P);throw new Error("Unable to serialize unrecognized input");function Z(O,h,W){var B="",Q=(typeof O=="string"&&(O=JSON.parse(O)),typeof h=="string"&&(h=JSON.parse(h)),Array.isArray(O)&&0<O.length),$=!Array.isArray(h[0]);if(Q&&o){for(var R=0;R<O.length;R++)0<R&&(B+=s),B+=k(O[R],R);0<h.length&&(B+=f)}for(var C=0;C<h.length;C++){var M=(Q?O:h[C]).length,m=!1,z=Q?Object.keys(h[C]).length===0:h[C].length===0;if(W&&!Q&&(m=W==="greedy"?h[C].join("").trim()==="":h[C].length===1&&h[C][0].length===0),W==="greedy"&&Q){for(var K=[],T=0;T<M;T++){var D=$?O[T]:T;K.push(h[C][D])}m=K.join("").trim()===""}if(!m){for(var S=0;S<M;S++){0<S&&!z&&(B+=s);var ee=Q&&$?O[S]:S;B+=k(h[C][ee],S)}C<h.length-1&&(!W||0<M&&!z)&&(B+=f)}}return B}function k(O,h){var W,B;return O==null?"":O.constructor===Date?JSON.stringify(O).slice(1,25):(B=!1,I&&typeof O=="string"&&I.test(O)&&(O="'"+O,B=!0),W=O.toString().replace(g,A),(B=B||r===!0||typeof r=="function"&&r(O,h)||Array.isArray(r)&&r[h]||((Q,$)=>{for(var R=0;R<$.length;R++)if(-1<Q.indexOf($[R]))return!0;return!1})(W,l.BAD_DELIMITERS)||-1<W.indexOf(s)||W.charAt(0)===" "||W.charAt(W.length-1)===" ")?x+W+x:W)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!d&&!!a.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=de,l.ParserHandle=le,l.NetworkStreamer=E,l.FileStreamer=F,l.StringStreamer=q,l.ReadableStreamStreamer=N,a.jQuery&&((c=a.jQuery).fn.parse=function(t){var e=t.config||{},r=[];return this.each(function(f){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var x=0;x<this.files.length;x++)r.push({file:this.files[x],inputElem:this,instanceConfig:c.extend({},e)})}),o(),this;function o(){if(r.length===0)j(t.complete)&&t.complete();else{var f,x,A,P,v=r[0];if(j(t.before)){var I=t.before(v.file,v.inputElem);if(typeof I=="object"){if(I.action==="abort")return f="AbortError",x=v.file,A=v.inputElem,P=I.reason,void(j(t.error)&&t.error({name:f},x,A,P));if(I.action==="skip")return void s();typeof I.config=="object"&&(v.instanceConfig=c.extend(v.instanceConfig,I.config))}else if(I==="skip")return void s()}var g=v.instanceConfig.complete;v.instanceConfig.complete=function(Z){j(g)&&g(Z,v.file,v.inputElem),s()},l.parse(v.file,v.instanceConfig)}}function s(){r.splice(0,1),o()}}),_&&(a.onmessage=function(t){t=t.data,l.WORKER_ID===void 0&&t&&(l.WORKER_ID=t.workerId),typeof t.input=="string"?a.postMessage({workerId:l.WORKER_ID,results:l.parse(t.input,t.config),finished:!0}):(a.File&&t.input instanceof File||t.input instanceof Object)&&(t=l.parse(t.input,t.config))&&a.postMessage({workerId:l.WORKER_ID,results:t,finished:!0})}),(E.prototype=Object.create(p.prototype)).constructor=E,(F.prototype=Object.create(p.prototype)).constructor=F,(q.prototype=Object.create(q.prototype)).constructor=q,(N.prototype=Object.create(p.prototype)).constructor=N,l})})(Te)),Te.exports}var ht=dt();const Ge=ct(ht);async function _t(){let n=ve.PUBLIC_TEMPLE_URL+"solutions/list",i=await fetch(n,{cache:"no-store"});if(!i.ok)return alert("could not fetch "+n),[];let u=await i.json();return u.sort((a,c)=>a.name<c.name?-1:a.name>c.name?1:0),u}async function pt(n){const i=ve.PUBLIC_TEMPLE_URL+`solutions/get_detail/${n}`;let u=await fetch(i,{cache:"no-store"});if(!u.ok)throw alert("Could not fetch "+i),new Error("Could not fetch "+i);return await u.json()}async function Nt(n,i,u,a="",c=0,d=1){const _=new URL(ve.PUBLIC_TEMPLE_URL+"solutions/get_full_ts");_.searchParams.set("solution_name",n),_.searchParams.set("components",i.join(",")),_.searchParams.set("unit_component",a),_.searchParams.set("scenario",u),_.searchParams.set("year",c.toString()),_.searchParams.set("rolling_average_size",d.toString());const b=_.toString();let L=await fetch(b,{cache:"no-store"});if(!L.ok)throw alert("Error when fetching "+b),new Error("Error when fetching "+b);let l=await L.json();const p=Object.fromEntries(Object.entries(l).map(([E,F])=>E=="unit"||F===void 0?null:[E,Ye(F)]).filter(E=>E!==null));return{unit:Be(l.unit||""),components:p}}async function Bt(n,i,u,a=""){let c=new URL(ve.PUBLIC_TEMPLE_URL+"solutions/get_total");c.searchParams.set("solution_name",n),c.searchParams.set("components",i.join(",")),c.searchParams.set("scenario",u),c.searchParams.set("unit_component",a);const d=c.toString();let _=await fetch(d,{cache:"no-store"});if(!_.ok)throw alert("Error when fetching "+d),new Error("Error when fetching "+d);let b=await _.json();for(const L in b)L=="unit"||b[L]===void 0||(b[L]=mt(gt(b[L])));return b.unit=Be(b.unit||""),b}async function Wt(n,i,u){let a=await(await fetch(ve.PUBLIC_TEMPLE_URL+`solutions/get_unit/${n}/${i}?scenario=${u}`,{cache:"no-store"})).json();return Be(a)}async function Kt(n,i,u,a,c,d){const _=ve.PUBLIC_TEMPLE_URL+`solutions/get_energy_balance/${n}/${i}/${u}?scenario=${a}&year=${c}&rolling_average_size=${d}`;let b=await fetch(_,{cache:"no-store"});if(!b.ok)throw alert("Could not fetch "+_),new Error("Could not fetch "+_);let L=await b.json(),l=["shed_demand","demand","flow_conversion_input","flow_export","flow_import","flow_storage_charge","flow_storage_discharge","flow_transport_in","flow_transport_out","cost_shed_demand","flow_conversion_output"],p={};for(const E of l)L[E]!==void 0&&(p[E]=Ye(L[E]));return p}function gt(n){if(n.slice(0,n.indexOf(`
`)).split(",").length==2){let c=n.split(`
`),d="",_="";for(const b of c.slice(1,c.length)){if(b=="")continue;let L=b.split(",");d+=L[0]+",",_+=L[1]+","}n=d.substring(0,d.length-1)+`
`+_.substring(0,_.length-1)}return n.slice(-1)==`
`&&(n=n.slice(0,-1)),Ge.parse(n,{delimiter:",",header:!0,newline:`
`})}function Ye(n){return n.map(i=>{let{d:u,t:a,...c}=i;const[d,_]=a;let b=0;return u=u.map(L=>b+=L),u=u.map(L=>L*_+d),{index:c,data:u}})}function Be(n){return n.slice(-1)==`
`&&(n=n.slice(0,n.length-1)),Ge.parse(n,{delimiter:",",header:!0,newline:`
`})}function mt(n){return n.data=n.data.filter(i=>Object.keys(i).some(u=>!Number.isNaN(Number(u))&&!Number.isNaN(i[u])&&Math.abs(i[u])>0)),n}const be=[["rgb(122, 157, 207)","rgb(8, 64, 126)","rgb(166, 190, 223)","rgb(33, 92, 175)","rgb(211, 222, 239)","rgb(77, 125, 191)"],["rgb(212, 134, 129)","rgb(150, 39, 45)","rgb(226, 174, 171)","rgb(183, 53, 45)","rgb(241, 215, 213)","rgb(197, 93, 87)"],["rgb(102, 175, 192)","rgb(0, 89, 109)","rgb(153, 202, 213)","rgb(0, 120, 148)","rgb(204, 228, 234)","rgb(51, 149, 171)"],["rgb(202, 108, 174)","rgb(140, 10, 89)","rgb(220, 158, 201)","rgb(167, 17, 122)","rgb(239, 208, 227)","rgb(183, 59, 146)"],["rgb(161, 171, 113)","rgb(54, 82, 19)","rgb(192, 199, 161)","rgb(98, 115, 19)","rgb(224, 227, 208)","rgb(129, 143, 66)"],["rgb(187, 164, 113)","rgb(112, 79, 18)","rgb(210, 194, 161)","rgb(142, 103, 19)","rgb(232, 225, 208)","rgb(165, 133, 66)"]];let xe=0,Ce=0;function Ht(){xe=0,Ce=0}function bt(){xe>=be.length&&(xe=0,Ce++,Ce>=be[0].length&&(Ce=0));const n=be[xe][Ce];return xe++,n}function vt(n,i=.8){return n.replace("rgb","rgba").replace(")",`, ${i})`)}function Qt(){let n=[];for(let i=0;i<be.length;i++)for(let u=0;u<be[0].length;u++)n.push(be[u][i]);return n}function Jt(n,i,u,a=[],c=!1,d="bar",_=""){if(n.length==0)return[];let b=Object.keys(n[0]).filter(p=>!isNaN(Number(p))&&!a.includes(Number(p))),L=Object.keys(i),l={};for(const p of n){let E=!1;for(let N in i)if(!i[N].includes(p[N])){E=!0;break}if(E)continue;for(let N of Object.keys(u))if(!u[N].includes(p[N])){E=!0;break}if(E)continue;let F=[];for(let N of L)F.push(p[N]);let q=F.join("_")+_;q in l||(l[q]=Object.fromEntries(b.map(N=>[N,0])));for(let N of b){let le=Number(p[N]);p[N]=="inf"&&(le=1/0),l[q][N]+=le}}if(c){let p=Object.fromEntries(b.map(E=>[E,0]));for(let E of b)for(let F in l)p[E]+=l[F][E];for(let E of b)for(let F in l)p[E]==0?l[F][E]=0:l[F][E]*=1/p[E]}return Object.entries(l).filter(([,p])=>!Object.values(p).includes(NaN)).map(([p,E])=>{let F=bt();return{label:p,data:Object.values(E),type:d,borderColor:F,backgroundColor:vt(F)}})}function yt(n){return Array.from(new Set(n))}function Zt(n){return n.map(i=>({value:i,label:i}))}function Gt(n){let i={};n.forEach(a=>{Object.entries(a.data).forEach(([c,d])=>{!d||d<=0||(i[c]=(i[c]||0)+d)})});let u={};return n.forEach(a=>{Object.entries(a.data).forEach(([c,d])=>{!d||d>=0||(u[c]=(u[c]||0)-d)})}),n.map(a=>({...a,data:Object.values(Object.entries(a.data).reduce((c,[d,_])=>(_&&i[d]>0?c[d]=_/i[d]:_&&u[d]>0?c[d]=_/u[d]:c[d]=0,c),{}))}))}var kt=oe('<div class="row mb-2"><div class="col-sm-3"><label class="fw-medium fs-4"> </label></div> <div class="col-sm-9"><!></div></div>');function qe(n,i){const u=Je();var a=kt(),c=V(a),d=V(c),_=V(d,!0);J(d),J(c);var b=Ae(c,2),L=V(b);Ne(L,()=>i.content,()=>u),J(b),J(a),fe(()=>{_e(d,"for",u),Le(_,i.label)}),ae(n,a)}function wt(n,i,u,a,c){X(i,""),X(u,""),X(a,null),c()}function Et(n,i,u){X(i,""),u()}var Ot=oe("<option> </option>"),Rt=oe('<select class="form-select"></select>'),St=oe("<option> </option>"),xt=oe('<select class="form-select"></select>'),Ct=oe("<option> </option>"),Lt=oe('<select class="form-select"></select>'),jt=oe("<!> <!> <!>",1);function Yt(n,i){it(i,!0);let u=he(i,"carriers",31,()=>Re([])),a=he(i,"nodes",31,()=>Re([])),c=he(i,"edges",31,()=>Re([])),d=he(i,"years",31,()=>Re([])),_=he(i,"selected_solution",15),b=he(i,"loading",15,!1),L=he(i,"disabled",3,!0),l=Se(Re([])),p=Se(null),E=Se(""),F=Se(""),q=Se(""),N=De(()=>yt(y(l).map(e=>e.name.split(".")[0]))),le=De(()=>y(l).filter(e=>e.name.startsWith(y(E))).map(e=>e.name.split(".")[1]||null).filter(e=>e!=null)),te=De(()=>y(le).length==0?y(E)||null:y(F)?y(E)+"."+y(F):null);Ve(async function(){X(l,await _t(),!0),X(E,Fe("solution")?.split(".")[0]||"",!0),X(F,Fe("solution")?.split(".")[1]||"",!0),X(q,Fe("scenario")||"",!0),de()});async function de(){if(y(te)==null){_(null);return}b(!0),X(p,await pt(y(te)),!0),Object.keys(y(p).scenarios).length==1?(X(q,Object.keys(y(p).scenarios)[0],!0),ye()):y(q)!=""&&y(q)in y(p).scenarios?ye():_(null),b(!1)}function ye(){y(p)==null||y(te)==null||(_({solution_name:y(te),scenario_name:y(q),detail:y(p).scenarios[y(q)],version:y(p).version}),ot({solution:_().solution_name,scenario:Object.keys(y(p).scenarios).length>1?_().scenario_name:null}),u(_().detail.system.set_carriers.slice()),a(_().detail.system.set_nodes),c(Object.keys(_().detail.edges)),d([...Array(_().detail.system.optimized_years).keys()].map(e=>e*_().detail.system.interval_between_years+_().detail.system.reference_year)),i.solution_selected?.(_()))}var ke=jt(),we=st(ke);qe(we,{label:"Solution",content:(r,o=je)=>{var s=Rt();s.__change=[wt,F,q,p,de],Ue(s,21,()=>y(N),Me,(f,x)=>{var A=Ot(),P=V(A,!0);J(A);var v={};fe(()=>{Le(P,y(x)),v!==(v=y(x))&&(A.value=(A.__value=y(x))??"")}),ae(f,A)}),J(s),fe(()=>{_e(s,"id",o()),s.disabled=L()}),ze(s,()=>y(E),f=>X(E,f)),ae(r,s)}});var pe=Ae(we,2);{var re=e=>{qe(e,{label:"Subsolution",content:(o,s=je)=>{var f=xt();f.__change=[Et,q,de],Ue(f,21,()=>y(le),Me,(x,A)=>{var P=St(),v=V(P,!0);J(P);var I={};fe(()=>{Le(v,y(A)),I!==(I=y(A))&&(P.value=(P.__value=y(A))??"")}),ae(x,P)}),J(f),fe(()=>{_e(f,"id",s()),f.disabled=L()}),ze(f,()=>y(F),x=>X(F,x)),ae(o,f)}})};He(pe,e=>{y(le).length>0&&e(re)})}var j=Ae(pe,2);{var t=e=>{qe(e,{label:"Scenario",content:(o,s=je)=>{var f=Lt();f.__change=ye,Ue(f,21,()=>Object.keys(y(p)?.scenarios||[]),Me,(x,A)=>{var P=Ct(),v=V(P,!0);J(P);var I={};fe(()=>{Le(v,y(A)),I!==(I=y(A))&&(P.value=(P.__value=y(A))??"")}),ae(x,P)}),J(f),fe(()=>{_e(f,"id",s()),f.disabled=L()}),ze(f,()=>y(q),x=>X(q,x)),ae(o,f)}})};He(j,e=>{y(p)&&Object.keys(y(p).scenarios).length>1&&e(t)})}ae(n,ke),at()}lt(["change"]);var It=oe('<div class="z-1 position-relative"><div class="accordion" id="accordionFilters"><!></div></div>');function Vt(n,i){var u=It(),a=V(u),c=V(a);Ne(c,()=>i.children??je),J(a),J(u),ae(n,u)}var Tt=oe('<div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" aria-expanded="true"> </button></h2> <div class="accordion-collapse collapse show"><div class="accordion-body"><!></div></div></div>');function Xt(n,i){const u=Je();var a=Tt(),c=V(a),d=V(c),_=V(d,!0);J(d),J(c);var b=Ae(c,2),L=V(b),l=V(L);Ne(l,()=>i.children??je),J(L),J(b),J(a),fe(()=>{_e(d,"data-bs-target","#collapse"+u),_e(d,"aria-controls","collapse"+u),Le(_,i.title),_e(b,"id","collapse"+u)}),ae(n,a)}export{Vt as F,Yt as S,Wt as a,Xt as b,qe as c,Nt as d,yt as e,Bt as f,Kt as g,Jt as h,Gt as i,ze as j,ct as k,Qt as l,bt as n,Ht as r,Zt as t};
