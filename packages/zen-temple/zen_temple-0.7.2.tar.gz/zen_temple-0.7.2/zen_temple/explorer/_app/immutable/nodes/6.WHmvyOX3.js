import"../chunks/DsnmJJEf.js";import{o as ze,s as Ae}from"../chunks/B98B7x2v.js";import{p as ht,u as we,d as qe,s as C,b as le,j as v,g as e,l as ue,k as et,e as ce,b3 as _t,m as Q,c as Re,f as ye,a as P,b4 as Ve,r as z,v as ke,h as ve,i as mt,t as xt,n as bt}from"../chunks/BZ0BXH4m.js";import{i as Ee,b as wt}from"../chunks/CUAkeMiK.js";import{F as Et,n as Se,r as Ct,b as He,S as Nt,c as $t,t as It,f as Ot}from"../chunks/B_jXps8r.js";import{e as tt,i as rt,u as Lt,g as Bt,b as at}from"../chunks/B9BLuPDP.js";import{A as nt}from"../chunks/adaaFKwn.js";import{D as Dt}from"../chunks/Bxbeg6fW.js";import{s as W}from"../chunks/C5ruyaoV.js";import{d as St,e as Tt}from"../chunks/fIP5WTNy.js";import{s as ot}from"../chunks/DQIR6haY.js";import{d as Rt,n as Mt,s as Me,a as st,b as jt,c as Ue,e as We,y as At,p as it,i as lt,f as kt}from"../chunks/D6s5toP0.js";import{u as ut}from"../chunks/D8Fzd1QO.js";class q{entries;constructor(t){this.entries=t}static fromRows(t){return new q(t.map(r=>{const c={},l=[];return Object.entries(r).forEach(([g,d])=>{if(isNaN(d)){c[g]=d;return}else l.push(Number(d))}),{index:c,data:l}}))}filterByCriteria(t){const r=this.entries.filter(c=>Object.entries(t).every(([l,g])=>Object.keys(c.index).includes(l)?g.includes(c.index[l]):!0));return new q(r)}groupBy(t){const r={},c={};return this.entries.forEach(l=>{const g=Object.fromEntries(t.map(h=>[h,l.index[h]])),d=Object.values(g).join("_");c[d]||(c[d]=g),r[d]?l.data.forEach((h,f)=>{r[d][f]+=Number(h)}):r[d]=l.data}),new q(Object.entries(r).map(([l,g])=>({index:c[l],data:g})))}dump(){return console.table(this.entries.map(t=>({...t.index,...Object.fromEntries(t.data.map((r,c)=>[c.toString(),r]))}))),this}*[Symbol.iterator](){return this.entries[Symbol.iterator]()}forEach(t){return this.entries.forEach(t),this}reduce(t,r){return this.entries.reduce(t,r)}find(t){return this.entries.find(t)}filter(t){return new q(this.entries.filter(t))}get length(){return this.entries.length}get(t){return this.entries[t]}toArray(){return this.entries}}const Ce=120,ct=16,Ft=200,Pt=140,Yt=32,Te=5,Fe=20,ft=-10,dt=2,be=16;let T=[],$e=[];function Ne(n,t){return n.reduce((r,c)=>r+t(c),0)}function Ht(){T.forEach(n=>{n.linksOut=$e.filter(t=>t.source===n),n.linksIn=$e.filter(t=>t.target===n)})}function Ut(){T.forEach(n=>{n.value=Math.max(Ne(n.linksIn,t=>t.value),Ne(n.linksOut,t=>t.value))})}function Wt(){T=T.filter(n=>n.linksIn.length>0||n.linksOut.length>0)}function zt(){let n=0,t=[];$e.forEach(r=>{yt(r.source,r.target,t)?(r.causesCycle=!0,r.cycleIndex=++n):(r.causesCycle=!1,t.push(r))})}function yt(n,t,r){let c=r.filter(l=>l.source===t);return r.length==0||c.length==0?!1:c.some(l=>l.target===n||yt(n,l.target,r))}function qt(){let n=T,t=[],r=0;for(;n.length;)t=[],n.forEach(c=>{c.x=r,c.linksOut.forEach(l=>{l.causesCycle||t.push(l.target)})}),n=t,r++;for(n=T;n.length;)t=[],n.forEach(c=>{if(c.linksOut.length>0){const l=c.linksOut.filter(g=>!g.causesCycle).map(g=>g.target.x);l.length>0&&(c.x=Math.max(c.x,Math.min(...l)-1))}c.linksIn.forEach(l=>{l.causesCycle||t.push(l.source)})}),n=t;Xt(Pt+Ce)}function Xt(n){T.forEach(t=>{t.x*=n})}function Vt(){let n={};return T.forEach(t=>{const r=t.x;n[r]||(n[r]=[]),n[r].push(t)}),Object.values(n).sort((t,r)=>t[0].x-r[0].x)}function Pe(n){return n.y+n.dy/2}function Gt(){let n=Vt();t(),l();for(let d=1,h=0;h<Yt;++h,d*=.99)c(d),l(),r(d),l();g();function t(){const d=Math.min(...T.map(h=>h.value>1e-6?Ft/h.value:1/0));n.forEach(h=>{let f=0;h.forEach(p=>{p.y=f,p.dy=p.value*d,f+=p.dy+ct})}),$e.forEach(h=>{h.dy=h.value*d})}function r(d){n.forEach(h=>{h.forEach(f=>{if(f.linksIn.length==0)return;const p=Ne(f.linksIn,N=>Pe(N.source)*N.value)/Ne(f.linksIn,N=>N.value);f.y+=(p-Pe(f))*d})})}function c(d){n.slice().reverse().forEach(h=>{h.forEach(f=>{if(f.linksOut.length==0)return;const p=Ne(f.linksOut,N=>Pe(N.target)*N.value)/Ne(f.linksOut,N=>N.value);f.y+=(p-Pe(f))*d})})}function l(){n.forEach(d=>{let h=d[0],f,p=0,N=d.length,Z;for(d.sort((L,fe)=>L.y-fe.y),Z=0;Z<N;++Z)h=d[Z],f=p-h.y,f>0&&(h.y+=f),p=h.y+h.dy+ct})}function g(){let d=Math.min(...T.map(h=>h.y));T.forEach(h=>{h.y-=d})}}function vt(){let n=t=>(r,c)=>r.causesCycle&&c.causesCycle?r.cycleIndex-c.cycleIndex:r.causesCycle?-1:c.causesCycle?1:r[t].y-c[t].y;T.forEach(t=>{t.linksIn.sort(n("source")),t.linksOut.sort(n("target"))}),T.forEach(t=>{let r=0,c=0;t.linksOut.forEach(l=>{l.sy=r,r+=l.dy}),t.linksIn.forEach(l=>{l.ty=c,c+=l.dy})})}function Kt(n,t){T=n,$e=t,Ht(),Ut(),Wt(),zt(),qt(),Gt(),vt()}function Zt(n,t){n<0||n>=T.length||(T[n].y=t,vt())}function gt(){const n=T.map(r=>({label:r.label,color:r.color,value:r.value,unit:r.unit,x:r.x,y:r.y,dy:r.dy,numLinksIn:r.linksIn.length,numLinksOut:r.linksOut.length})),t=$e.map(r=>({source:n[T.indexOf(r.source)],target:n[T.indexOf(r.target)],value:r.value,color:r.color,unit:r.unit,causesCycle:r.causesCycle,cycleIndex:r.cycleIndex,dy:r.dy,sy:r.sy,ty:r.ty}));return[n,t]}const Ye=n=>()=>n;function Xe(n,{sourceEvent:t,subject:r,target:c,identifier:l,active:g,x:d,y:h,dx:f,dy:p,dispatch:N}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:c,enumerable:!0,configurable:!0},identifier:{value:l,enumerable:!0,configurable:!0},active:{value:g,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:N}})}Xe.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function Jt(n){return!n.ctrlKey&&!n.button}function Qt(){return this.parentNode}function er(n,t){return t??{x:n.x,y:n.y}}function tr(){return navigator.maxTouchPoints||"ontouchstart"in this}function rr(){var n=Jt,t=Qt,r=er,c=tr,l={},g=Rt("start","drag","end"),d=0,h,f,p,N,Z=0;function L(s){s.on("mousedown.drag",fe).filter(c).on("touchstart.drag",ne).on("touchmove.drag",he,Mt).on("touchend.drag touchcancel.drag",me).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function fe(s,w){if(!(N||!n.call(this,s,w))){var $=ie(this,t.call(this,s,w),s,w,"mouse");$&&(Me(s.view).on("mousemove.drag",de,st).on("mouseup.drag",ge,st),jt(s.view),Ue(s),p=!1,h=s.clientX,f=s.clientY,$("start",s))}}function de(s){if(We(s),!p){var w=s.clientX-h,$=s.clientY-f;p=w*w+$*$>Z}l.mouse("drag",s)}function ge(s){Me(s.view).on("mousemove.drag mouseup.drag",null),At(s.view,p),We(s),l.mouse("end",s)}function ne(s,w){if(n.call(this,s,w)){var $=s.changedTouches,I=t.call(this,s,w),R=$.length,M,re;for(M=0;M<R;++M)(re=ie(this,I,s,w,$[M].identifier,$[M]))&&(Ue(s),re("start",s,$[M]))}}function he(s){var w=s.changedTouches,$=w.length,I,R;for(I=0;I<$;++I)(R=l[w[I].identifier])&&(We(s),R("drag",s,w[I]))}function me(s){var w=s.changedTouches,$=w.length,I,R;for(N&&clearTimeout(N),N=setTimeout(function(){N=null},500),I=0;I<$;++I)(R=l[w[I].identifier])&&(Ue(s),R("end",s,w[I]))}function ie(s,w,$,I,R,M){var re=g.copy(),X=it(M||$,w),J,oe,V;if((V=r.call(s,new Xe("beforestart",{sourceEvent:$,target:L,identifier:R,active:d,x:X[0],y:X[1],dx:0,dy:0,dispatch:re}),I))!=null)return J=V.x-X[0]||0,oe=V.y-X[1]||0,function j(G,pe,_e){var xe=X,a;switch(G){case"start":l[R]=j,a=d++;break;case"end":delete l[R],--d;case"drag":X=it(_e||pe,w),a=d;break}re.call(G,s,new Xe(G,{sourceEvent:pe,subject:V,target:L,identifier:R,active:a,x:X[0]+J,y:X[1]+oe,dx:X[0]-xe[0],dy:X[1]-xe[1],dispatch:re}),I)}}return L.filter=function(s){return arguments.length?(n=typeof s=="function"?s:Ye(!!s),L):n},L.container=function(s){return arguments.length?(t=typeof s=="function"?s:Ye(s),L):t},L.subject=function(s){return arguments.length?(r=typeof s=="function"?s:Ye(s),L):r},L.touchable=function(s){return arguments.length?(c=typeof s=="function"?s:Ye(!!s),L):c},L.on=function(){var s=g.on.apply(g,arguments);return s===g?L:s},L.clickDistance=function(s){return arguments.length?(Z=(s=+s)*s,L):Math.sqrt(Z)},L}var ar=Ve('<path class="cycle-link svelte-1joeiwq"><title> </title></path>'),nr=Ve('<path class="link svelte-1joeiwq"><title> </title></path>'),or=Ve('<g class="node svelte-1joeiwq"><rect class="svelte-1joeiwq"><title> </title></rect><text text-anchor="middle"> </text></g>'),sr=ce('<div class="position-relative border rounded overflow-hidden"><svg class="svelte-1joeiwq"><g><g class="links"></g><g class="nodes"></g></g></svg> <div class="position-absolute top-0 end-0 m-2"><button class="btn btn-secondary"><i class="bi bi-house"></i> <div class="visually-hidden">Reset zoom</div></button></div></div>');function ir(n,t){ht(t,!0);let r=C(936),c=C(800),l=C(void 0),g=N(L,100);we(()=>{t.nodes.length&&qe(()=>{Z(t.nodes,t.links),g()})});let d=[],h=[],f=C(le([])),p=C(le([]));function N(a,i){let m;return function(){clearTimeout(m),m=setTimeout(()=>a(),i)}}function Z(a,i){d=a.map(m=>({label:m.label??"Unnamed",color:m.color??"#ccc",id:m.id??"",value:0,unit:m.unit??"",linksIn:[],linksOut:[],x:0,y:0,dy:0})),h=i.flatMap(m=>{let A=d.find(o=>o.id===m.source.id&&o.label===m.source.label),B=d.find(o=>o.id===m.target.id&&o.label===m.target.label);return!A||!B?(console.warn("Link refers to unknown node",m),[]):[{source:A,target:B,value:m.value,color:m.color,unit:m.unit,causesCycle:!1,cycleIndex:0,dy:0,sy:0,ty:0}]})}function L(){Kt(d,h),(a=>{var i=et(a,2);v(f,i[0],!0),v(p,i[1],!0)})(gt())}function fe(a,i){return m=>a*(1-m)+i*m}function de(a){if(a.causesCycle){const y=Te,x=a.source.x+Ce,b=a.source.y+a.sy+a.dy,D=a.target.x,E=a.target.y,k=x+Fe,S=b,O=k,Y=ft-a.cycleIndex*(y+dt),H=D-Fe,se=Y,ee=H,F=E+a.ty+a.dy,U=be/2-Te;return`M${x},${b}L${k},${S}C${k+be},${S} ${O+be},${Y} ${O},${Y}H${H-y}C${H-be},${se} ${ee-be},${F} ${ee},${F}H${D}V${E+a.ty}H${ee}C${ee-U},${E} ${H-U},${se+y} ${H},${se+y}H${O-y}C${O+U},${Y+y} ${k+U},${S-a.dy} ${k},${S-a.dy}L${x},${b-a.dy}`}const i=a.source.x+Ce,m=a.target.x,B=fe(i,m)(.5),o=a.source.y+a.sy+a.dy/2,_=a.target.y+a.ty+a.dy/2;return`M${i},${o} C${B},${o} ${B},${_} ${m},${_}`}let ge=ue(()=>{if(!e(p).length)return 0;const a=Math.max(...e(p).map(i=>i.cycleIndex));return a==0?0:ft-a*(Te+dt)}),ne=ue(()=>e(f).length&&e(f).some(a=>a.x===0&&a.numLinksIn>0)?-Fe-Te-be:0),he=ue(()=>{if(!e(f).length)return e(r);const a=Math.max(...e(f).map(i=>i.x+Ce));return e(f).some(i=>i.x===a&&i.numLinksOut>0)?a+Fe+Te+be-e(ne):a-e(ne)}),me=ue(()=>e(f).length?Math.max(...e(f).map(a=>a.y+a.dy)):e(c));function ie(a,i=6){const m=10**i;return Math.round(a*m)/m}function s(a){return`${a.source.label} → ${a.target.label}:
${ie(a.value)} ${a.unit}`}function w(a){return`${a.label}:
${ie(a.value)} ${a.unit}`}function $(a){let i,m,A,B=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/;const o=a.match(B);if(o)i=parseInt(o[1],10),m=parseInt(o[2],10),A=parseInt(o[3],10);else return!1;return .299*i+.587*m+.114*A<85}function I(){if(!e(l))return;const{width:a,height:i}=e(l).parentElement.getBoundingClientRect();v(r,a,!0),v(c,i,!0),g()}ze(I);let R=C(le(lt.toString())),M=kt().scaleExtent([1,1/0]).on("zoom",a=>{v(R,a.transform.toString(),!0)});we(()=>{M=M.translateExtent([[e(ne)-5,e(ge)-5],[e(he)+5,e(me)+5]])}),ze(()=>{e(l)&&Me(e(l)).call(M)});function re(){e(l)&&Me(e(l)).call(M.transform,lt)}let X=rr().on("start",function(){this.parentNode&&this.parentNode.appendChild(this)}).on("drag",function(a){const i=Number(this.dataset.idx);isNaN(i)||J(a,i)});we(()=>{e(f),e(l)&&Me(e(l)).selectAll(".node").call(X)});function J(a,i){if(a.clientY===0||i<0||i>=e(f).length)return;const m=e(f)[i].y+a.dy,A=Math.max(0,Math.min(e(c)-e(f)[i].dy,m));Zt(i,A),(B=>{var o=et(B,2);v(f,o[0],!0),v(p,o[1],!0)})(gt())}var oe=sr();Tt("resize",_t,I);var V=Q(oe),j=Q(V),G=Q(j);tt(G,21,()=>e(p).toSorted((a,i)=>i.value-a.value),rt,(a,i)=>{var m=Re(),A=ye(m);{var B=_=>{var y=ar();let x;var b=Q(y),D=Q(b,!0);z(b),z(y),ke((E,k,S)=>{W(y,"d",E),x=ot(y,"",x,k),Ae(D,S)},[()=>de(e(i)),()=>({fill:e(i).color}),()=>s(e(i))]),P(_,y)},o=_=>{var y=nr();let x;var b=Q(y),D=Q(b,!0);z(b),z(y),ke((E,k,S)=>{W(y,"d",E),x=ot(y,"",x,k),Ae(D,S)},[()=>de(e(i)),()=>({stroke:e(i).color,"stroke-width":Math.max(1,e(i).dy)}),()=>s(e(i))]),P(_,y)};Ee(A,_=>{e(i).causesCycle?_(B):_(o,!1)})}P(a,m)}),z(G);var pe=ve(G);tt(pe,21,()=>e(f),rt,(a,i,m)=>{var A=or();W(A,"data-idx",m);var B=Q(A),o=Q(B),_=Q(o,!0);z(o),z(B);var y=ve(B),x=Q(y,!0);z(y),z(A),ke((b,D,E)=>{W(B,"x",e(i).x),W(B,"y",e(i).y+1),W(B,"width",Ce),W(B,"height",b),W(B,"fill",e(i).color),Ae(_,D),W(y,"x",e(i).x+Ce/2),W(y,"y",e(i).dy>16?e(i).y+e(i).dy/2:e(i).y-2),W(y,"dominant-baseline",e(i).dy>16?"middle":"auto"),W(y,"fill",E),Ae(x,e(i).label)},[()=>Math.max(.1,e(i).dy-2),()=>w(e(i)),()=>e(i).dy>16&&$(e(i).color)?"#fff":"#000"]),P(a,A)}),z(pe),z(j),z(V),wt(V,a=>v(l,a),()=>e(l));var _e=ve(V,2),xe=Q(_e);xe.__click=re,z(_e),z(oe),ke(()=>{W(V,"width",e(r)),W(V,"height",e(c)),W(V,"viewBox",`${e(ne)-1} ${e(ge)} ${e(he)+4} ${e(me)}`),W(j,"transform",e(R))}),P(n,oe),mt()}St(["click"]);var lr=ce("<!> <!>",1),ur=ce("<!> <!> <!>",1),cr=ce('<div class="text-center"><div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div></div>'),fr=ce('<div class="text-center">No solution selected</div>'),dr=ce('<div class="text-center">No carriers selected</div>'),gr=ce('<div class="text-center">No nodes selected</div>'),hr=ce('<div class="text-center">No data available for the selected filters</div>'),mr=ce('<h1 class="mt-2 mb-4">The Energy System</h1> <!> <h2 class="visually-hidden">Sankey Diagram</h2> <div class="plot my-4"><!></div>',1);function Lr(n,t){ht(t,!0);let r=C(le([])),c=C(!1),l=C(!1),g=C(null),d=C(le([])),h=C(le([])),f=C(null),p=null,N=null,Z="",L="",fe="",de=C(null),ge=C(null),ne=C(null),he=C(null),me=C(null),ie=C(null),s=C(null),w=C(null),$=C(null),I=C(null),R=C(le([])),M=C(le([])),re=C(le([]));function X(){V()}let J=ue(()=>e(g)?e(g).detail.system.set_carriers.slice().sort():[]),oe=ue(()=>e(g)?e(g).detail.system.set_nodes.slice().sort():[]);we(()=>{if(!e(r).length){v(f,null);return}v(f,fe||e(r)[0].toString(),!0)}),we(()=>{e(f)&&(fe=e(f))}),ut(()=>e(J),()=>!!e(g),()=>Z,()=>p,o=>v(d,o,!0),o=>Z=o,o=>p=o),ut(()=>e(oe),()=>!!e(g),()=>L,()=>N,o=>v(h,o,!0),o=>L=o,o=>N=o),we(()=>{e(d),e(h),e(f),qe(()=>{_e()})}),we(()=>{e(f),e(d),e(h),xt().then(()=>{qe(()=>{Lt({year:e(f),car:e(d).map(o=>e(J).indexOf(o)).join("~")||null,nodes:e(h).map(o=>e(oe).indexOf(o)).join("~")||null})})})}),ze(()=>{v(f,Bt("year"),!0),p=at("car"),N=at("nodes")});async function V(){if(!e(g))return;v(l,!0);let o=await Ot(e(g).solution_name,["flow_conversion_input","flow_conversion_output","flow_storage_charge","flow_storage_discharge","flow_import","flow_export","demand","shed_demand","flow_storage_inflow","flow_storage_spillage"],e(g).scenario_name,"demand");v(de,q.fromRows(o.flow_conversion_input?.data??[])),v(ge,q.fromRows(o.flow_conversion_output?.data??[]),!0),v(ne,q.fromRows(o.flow_storage_charge?.data??[]),!0),v(he,q.fromRows(o.flow_storage_discharge?.data??[]),!0),v(me,q.fromRows(o.flow_import?.data??[]),!0),v(ie,q.fromRows(o.flow_export?.data??[]),!0),v(s,q.fromRows(o.demand?.data??[]),!0),v(w,q.fromRows(o.shed_demand?.data??[]),!0),v($,q.fromRows(o.flow_storage_inflow?.data??[]),!0),v(I,q.fromRows(o.flow_storage_spillage?.data??[]),!0),v(R,o.unit?.data||[],!0),v(l,!1),_e()}function j(o){let _=e(R).find(y=>y.carrier===o)||{};return _[0]||_.units||""}function G(o){return e(g)&&e(g).detail.reference_carrier[o]||""}function pe(o){return e(g)?e(g).detail.system.set_technologies.filter(_=>{const y=e(g)?.detail.carriers_input[_]||[],x=e(g)?.detail.carriers_output[_]||[];return[...y,...x].some(b=>o.includes(b))}):[]}function _e(){if(!e(g)||!e(de)||!e(ge)||!e(ne)||!e(he)||!e(me)||!e(ie)||!e(s)||!e(w)||!e($)||!e(I))return[];const o="rgb(180,180,180)",_=e(g)?.detail.system.set_storage_technologies||[],y=e(g)?.detail.system.set_conversion_technologies||[];function x(u,K,Oe,Le){return{id:u,label:K,color:Oe,unit:Le}}Ct();const b=e(J).map(u=>x(u,u+"_"+j(u),Se(),j(u))),D=y.map(u=>x(u,u,o,j(G(u)))),E=_.map(u=>x(u,u,o,j(G(u)))),k=_.map(u=>x(u,u+"_inflow",o,j(G(u)))),S=_.map(u=>x(u,u+"_spillage",o,j(G(u))));let O=Se();const Y=e(J).map(u=>x(u,u+"_import",O,j(u)));O=Se();const H=e(J).map(u=>x(u,u+"_export",O,j(u)));O=Se();const se=e(J).map(u=>x(u,u+"_shed_demand",O,j(u)));O=Se();const ee=e(J).map(u=>x(u,u+"_demand",O,j(u))),F={carrier:e(d),node:e(h),technology:pe(e(d))},U=e(r).indexOf(Number(e(f))),ae=[];function te(u,K,Oe,Le,pt=0){return Be=>{const Ge=Be.data[U]-pt;if(Math.abs(Ge)<1e-6)return;const Ke=u.find(De=>De.id===Be.index[K]),Ze=Oe.find(De=>De.id===Be.index[Le]);if(!Ke||!Ze)return;let Je=o;const Qe=b.find(De=>De.id===Be.index.carrier);Qe&&(Je=Qe.color||o),ae.push({source:Ke,target:Ze,value:Ge,color:Je,unit:j(Be.index.carrier)})}}function Ie(u){const K=G(u.index.technology);K&&(u.index.carrier=K)}e(de).filterByCriteria(F).groupBy(["technology","carrier"]).forEach(te(b,"carrier",D,"technology")),e(ge).filterByCriteria(F).groupBy(["technology","carrier"]).forEach(te(D,"technology",b,"carrier")),e(ne).filterByCriteria(F).groupBy(["technology"]).forEach(u=>{const K=G(u.index.technology);K&&(u.index.carrier=K)}).forEach(te(b,"carrier",E,"technology")),e(he).filterByCriteria(F).groupBy(["technology"]).forEach(Ie).forEach(te(E,"technology",b,"carrier")),e($).filterByCriteria(F).groupBy(["technology"]).forEach(Ie).forEach(te(k,"technology",E,"technology")),e(I).filterByCriteria(F).groupBy(["technology"]).forEach(Ie).forEach(te(E,"technology",S,"technology")),e(me).filterByCriteria(F).groupBy(["carrier"]).forEach(te(Y,"carrier",b,"carrier")),e(ie).filterByCriteria(F).groupBy(["carrier"]).forEach(te(b,"carrier",H,"carrier"));const je=e(w).filterByCriteria(F).groupBy(["carrier"]);je.forEach(te(se,"carrier",ee,"carrier")),e(s).filterByCriteria(F).groupBy(["carrier"]).forEach(u=>{const K=je.find(Le=>Le.index.carrier===u.index.carrier),Oe=K?K.data[U]:0;te(b,"carrier",ee,"carrier",Oe)(u)}),v(M,[...b,...D,...E,...k,...S,...Y,...H,...se,...ee],!0),v(re,ae,!0)}var xe=mr(),a=ve(ye(xe),2);Et(a,{children:(o,_)=>{var y=ur(),x=ye(y);He(x,{title:"Solution Selection",children:(E,k)=>{{let S=ue(()=>e(l)||e(c));Nt(E,{solution_selected:X,get disabled(){return e(S)},get years(){return e(r)},set years(O){v(r,O,!0)},get selected_solution(){return e(g)},set selected_solution(O){v(g,O,!0)},get loading(){return e(c)},set loading(O){v(c,O,!0)}})}}});var b=ve(x,2);He(b,{title:"Carrier Selection",children:(E,k)=>{nt(E,{label:"Carriers",get elements(){return e(J)},get value(){return e(d)},set value(S){v(d,S,!0)}})}});var D=ve(b,2);He(D,{title:"Data Selection",children:(E,k)=>{var S=lr(),O=ye(S);$t(O,{label:"Year",content:(se,ee=bt)=>{{let F=ue(()=>It(e(r).map(ae=>ae.toString()))),U=ue(()=>e(l)||e(c));Dt(se,{get formId(){return ee()},get options(){return e(F)},get disabled(){return e(U)},get value(){return e(f)},set value(ae){v(f,ae,!0)}})}}});var Y=ve(O,2);nt(Y,{label:"Nodes",get elements(){return e(oe)},get value(){return e(h)},set value(H){v(h,H,!0)}}),P(E,S)}}),P(o,y)}});var i=ve(a,4),m=Q(i);{var A=o=>{var _=cr();P(o,_)},B=o=>{var _=Re(),y=ye(_);{var x=D=>{var E=fr();P(D,E)},b=D=>{var E=Re(),k=ye(E);{var S=Y=>{var H=dr();P(Y,H)},O=Y=>{var H=Re(),se=ye(H);{var ee=U=>{var ae=gr();P(U,ae)},F=U=>{var ae=Re(),te=ye(ae);{var Ie=u=>{var K=hr();P(u,K)},je=u=>{ir(u,{get nodes(){return e(M)},get links(){return e(re)}})};Ee(te,u=>{e(M).length===0?u(Ie):u(je,!1)},!0)}P(U,ae)};Ee(se,U=>{e(h).length===0?U(ee):U(F,!1)},!0)}P(Y,H)};Ee(k,Y=>{e(d).length===0?Y(S):Y(O,!1)},!0)}P(D,E)};Ee(y,D=>{e(g)?D(b,!1):D(x)},!0)}P(o,_)};Ee(m,o=>{e(c)||e(l)?o(A):o(B,!1)})}z(i),P(n,xe),mt()}export{Lr as component};
