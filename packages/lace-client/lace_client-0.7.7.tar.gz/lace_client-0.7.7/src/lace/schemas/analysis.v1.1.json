{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Lace Dataset Analysis v1.1",
  "type": "object",
  "required": [
    "schema_version",
    "domain_analysis",
    "size_metrics",
    "metadata"
  ],
  "properties": {
    "schema_version": {
      "type": "string",
      "enum": ["analysis.v1.1"]
    },
    "domain_analysis": {
      "type": "object",
      "required": ["top_domains", "measurement_method", "coverage_percentage", "total_domains"],
      "properties": {
        "top_domains": {
          "type": "array",
          "items": {"type": "string"}
        },
        "measurement_method": {
          "type": "string",
          "enum": ["bytes", "tokens", "files"]
        },
        "coverage_percentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "total_domains": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "size_metrics": {
      "type": "object",
      "required": ["total_files", "total_bytes", "avg_file_size"],
      "properties": {
        "total_files": {
          "type": "integer",
          "minimum": 0
        },
        "total_bytes": {
          "type": "integer",
          "minimum": 0
        },
        "avg_file_size": {
          "type": "number",
          "minimum": 0
        }
      }
    },
    "metadata": {
      "type": "object",
      "required": ["analyzed_at", "analyzer_version"],
      "properties": {
        "analyzed_at": {
          "type": "string",
          "format": "date-time"
        },
        "analyzer_version": {
          "type": "string"
        },
        "sample_rate": {
          "type": "number"
        },
        "privacy_notice": {
          "type": "string"
        }
      }
    },
    "dataset_origin": {
      "type": "string",
      "enum": ["local", "huggingface", "github", "s3", "url", "custom"]
    },
    "dataset_locator": {
      "type": "string"
    },
    "license": {
      "type": "string"
    },
    "languages": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["code", "pct"],
        "properties": {
          "code": {"type": "string"},
          "pct": {"type": "number", "minimum": 0, "maximum": 1}
        }
      }
    },
    "content_types": {
      "type": "object",
      "additionalProperties": {
        "type": "number",
        "minimum": 0,
        "maximum": 1
      }
    },
    "temporal_coverage": {
      "type": "object",
      "properties": {
        "start": {"type": "string"},
        "end": {"type": "string"}
      }
    },
    "pii_signals": {
      "type": "object",
      "properties": {
        "detected": {"type": "boolean"},
        "types": {
          "type": "array",
          "items": {"type": "string"}
        }
      }
    },
    "synthetic_data_presence": {
      "type": "object",
      "properties": {
        "detected": {"type": "boolean"},
        "confidence": {"type": "number", "minimum": 0, "maximum": 1},
        "evidence": {"type": "string"}
      }
    },
    "dataset_card": {
      "type": "object",
      "properties": {
        "found": {"type": "boolean"},
        "source": {"type": "string"}
      }
    },
    "line_token_estimates": {
      "type": "object",
      "properties": {
        "total_lines": {"type": "integer"},
        "total_tokens": {"type": "integer"}
      }
    },
    "provenance_summary": {
      "type": "string"
    },
    "summary": {
      "type": "object",
      "properties": {
        "files_processed": {"type": "integer"},
        "bytes_total": {"type": "integer"},
        "modalities": {
          "type": "array",
          "items": {"type": "string"}
        }
      }
    },
    "confidence_scores": {
      "type": "object"
    }
  }
}