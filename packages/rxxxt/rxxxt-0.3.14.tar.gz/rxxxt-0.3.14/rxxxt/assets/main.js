(()=>{var Se=Object.defineProperty;var se=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var oe=(e,n,t)=>n in e?Se(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,ee=(e,n)=>{for(var t in n||(n={}))xe.call(n,t)&&oe(e,t,n[t]);if(se)for(var t of se(n))Ae.call(n,t)&&oe(e,t,n[t]);return e};var le="rxxxt-on-",de=()=>new Date().getTime(),ue=new WeakMap;function F(e){var t,r,a;let n=ue.get(e);return n===void 0&&(n=JSON.stringify([e.context_id,e.handler_name,(t=e.options.debounce)!=null?t:null,(r=e.options.prevent_default)!=null?r:null,(a=e.options.throttle)!=null?a:null,...Object.entries(e.param_map).sort((l,v)=>l[0].localeCompare(v[0]))]),ue.set(e,n)),n}function _e(e){var t;let n=new Map;for(let r of e.getAttributeNames())if(r.startsWith(le)){let a=r.substring(le.length),l=JSON.parse(atob((t=e.getAttribute(r))!=null?t:""));n.set(a,l)}return n}function Ue(e,n){let t=e;try{for(let r of n.split("."))t=t[r];return typeof t=="string"||typeof t=="number"||typeof t=="boolean"?t:void 0}catch(r){return}}function pe(e){let n=0,t=new WeakMap,r=new WeakMap,a=new Map,l=new Set,v=(i,p)=>{var u,T,g,U,x;let f=(u=t.get(i))!=null?u:[],E=f.filter(m=>l.has(m.descriptor.context_id));E.length!==f.length&&(t.set(i,E),S(i),f=E);for(let m of f.filter(I=>I.event===p.type)){let I=ee(ee({$handler_name:m.descriptor.handler_name},(T=m.descriptor.options.default_params)!=null?T:{}),Object.fromEntries(Object.entries(m.descriptor.param_map).map(R=>[R[0],Ue(p,R[1])])));if(a.set(m.submitId,{context_id:m.descriptor.context_id,data:I}),m.timeoutHandle&&(clearTimeout(m.timeoutHandle),m.timeoutHandle=void 0),m.descriptor.options.prevent_default&&p.preventDefault(),!m.descriptor.options.no_trigger){let R=Math.max(0,(g=m.descriptor.options.debounce)!=null?g:0,((U=m.lastCall)!=null?U:0)+((x=m.descriptor.options.throttle)!=null?x:0)-de());m.timeoutHandle=setTimeout(()=>{a.has(m.submitId)&&(m.lastCall=de(),e())},R)}}},S=i=>{var E,u,T;let p=(E=r.get(i))!=null?E:new Map;r.set(i,p);let f=new Set((T=(u=t.get(i))==null?void 0:u.map(g=>g.event))!=null?T:[]);for(let g of Array.from(p.keys()))f.has(g)||(i.removeEventListener(g,p.get(g)),p.delete(g));for(let g of f)if(!p.has(g)){let U=x=>v(i,x);i.addEventListener(g,U),p.set(g,U)}},A=()=>{let i=new Map(a);return a.clear(),i},O=i=>{var E;i.tagName==="RXXXT-META"&&l.add(i.id);let p=new Map(((E=t.get(i))!=null?E:[]).filter(u=>u.tag=="local").map(u=>[u.event,u])),f=_e(i);for(let u of p.values())f.has(u.event)||b(i,u.event,u.descriptor,"local");for(let u of f.entries())p.has(u[0])?p.get(u[0]).descriptor=u[1]:P(i,u[0],u[1],"local")},_=i=>{i.tagName==="RXXXT-META"&&l.delete(i.id)},P=(i,p,f,E="global")=>{var U;let u=F(f),T=(U=t.get(i))!=null?U:[];t.set(i,T);let g=T.find(x=>x.event===p&&F(x.descriptor)===u&&x.tag==E);g===void 0?T.push({descriptor:f,event:p,submitId:++n,tag:E}):g.descriptor=f,S(i)},b=(i,p,f,E="global")=>{var T;let u=F(f);t.set(i,((T=t.get(i))!=null?T:[]).filter(g=>g.event!=p||F(g.descriptor)!==u||g.tag!==E)),S(i)};return{registerEvent:P,unregisterEvent:b,onElementUpdated:O,onElementDeleted:_,popPendingEvents:A}}function ce(e){let n,t=!1,r=!1,a=!1,l,v=new Map,S=()=>{let b=e.popPendingEvents();for(let i of b)v.set(i[0],i[1]);return b.size},A=()=>{if(t){r=!0;return}t=!0,r=!1,S(),l(Array.from(v.values()))},O=(b,i)=>{v.clear(),e.onUpdate(b,i),t=!1,r&&A()},_=()=>{n==null||n.close(),n=void 0,l=async b=>{var p;let i=await fetch(location.href,{method:"POST",body:JSON.stringify({state_token:e.stateToken,events:b}),headers:{"Content-Type":"application/json"},credentials:"include"});if(i.ok){let f=await i.json();S()>0&&!e.disableHTTPRetry?(console.info("retry http update"),t=!1,A()):(O(f.html_parts,f.events),e.stateToken=(p=f.state_token)!=null?p:e.stateToken)}else throw O([],[]),new Error("Update failed! Server responded with ".concat(i.statusText," (").concat(i.status,")."))}},P=()=>{if(n!==void 0){console.warn("tried to switch to websocket again, despite using it already");return}let b=async p=>n==null?void 0:n.send(JSON.stringify({type:"update",events:p,location:location.href.substring(location.origin.length)})),i=new URL(location.href);i.protocol=location.protocol=="https:"?"wss":"ws",n=new WebSocket(i),n.addEventListener("close",_),n.addEventListener("open",()=>{l=b,n==null||n.send(JSON.stringify({type:"init",state_token:e.stateToken,enable_state_updates:e.enableWebSocketStateUpdates}))}),n.addEventListener("message",p=>{var E;if(typeof p.data!="string")return;let f=JSON.parse(p.data);e.stateToken=(E=f.state_token)!=null?E:e.stateToken,O(f.html_parts,f.events)})};return _(),{useHTTP:_,useWebSocket:P,update:()=>{a||(a=!0,setTimeout(()=>{a=!1,A()},0))}}}var fe=11;function Oe(e,n){var t=n.attributes,r,a,l,v,S;if(!(n.nodeType===fe||e.nodeType===fe)){for(var A=t.length-1;A>=0;A--)r=t[A],a=r.name,l=r.namespaceURI,v=r.value,l?(a=r.localName||a,S=e.getAttributeNS(l,a),S!==v&&(r.prefix==="xmlns"&&(a=r.name),e.setAttributeNS(l,a,v))):(S=e.getAttribute(a),S!==v&&e.setAttribute(a,v));for(var O=e.attributes,_=O.length-1;_>=0;_--)r=O[_],a=r.name,l=r.namespaceURI,l?(a=r.localName||a,n.hasAttributeNS(l,a)||e.removeAttributeNS(l,a)):n.hasAttribute(a)||e.removeAttribute(a)}}var J,ke="http://www.w3.org/1999/xhtml",w=typeof document>"u"?void 0:document,Ne=!!w&&"content"in w.createElement("template"),He=!!w&&w.createRange&&"createContextualFragment"in w.createRange();function Ce(e){var n=w.createElement("template");return n.innerHTML=e,n.content.childNodes[0]}function De(e){J||(J=w.createRange(),J.selectNode(w.body));var n=J.createContextualFragment(e);return n.childNodes[0]}function Ie(e){var n=w.createElement("body");return n.innerHTML=e,n.childNodes[0]}function Me(e){return e=e.trim(),Ne?Ce(e):He?De(e):Ie(e)}function z(e,n){var t=e.nodeName,r=n.nodeName,a,l;return t===r?!0:(a=t.charCodeAt(0),l=r.charCodeAt(0),a<=90&&l>=97?t===r.toUpperCase():l<=90&&a>=97?r===t.toUpperCase():!1)}function Pe(e,n){return!n||n===ke?w.createElement(e):w.createElementNS(n,e)}function Re(e,n){for(var t=e.firstChild;t;){var r=t.nextSibling;n.appendChild(t),t=r}return n}function te(e,n,t){e[t]!==n[t]&&(e[t]=n[t],e[t]?e.setAttribute(t,""):e.removeAttribute(t))}var ve={OPTION:function(e,n){var t=e.parentNode;if(t){var r=t.nodeName.toUpperCase();r==="OPTGROUP"&&(t=t.parentNode,r=t&&t.nodeName.toUpperCase()),r==="SELECT"&&!t.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!n.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),t.selectedIndex=-1)}te(e,n,"selected")},INPUT:function(e,n){te(e,n,"checked"),te(e,n,"disabled"),e.value!==n.value&&(e.value=n.value),n.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,n){var t=n.value;e.value!==t&&(e.value=t);var r=e.firstChild;if(r){var a=r.nodeValue;if(a==t||!t&&a==e.placeholder)return;r.nodeValue=t}},SELECT:function(e,n){if(!n.hasAttribute("multiple")){for(var t=-1,r=0,a=e.firstChild,l,v;a;)if(v=a.nodeName&&a.nodeName.toUpperCase(),v==="OPTGROUP")l=a,a=l.firstChild;else{if(v==="OPTION"){if(a.hasAttribute("selected")){t=r;break}r++}a=a.nextSibling,!a&&l&&(a=l.nextSibling,l=null)}e.selectedIndex=t}}},B=1,ge=11,me=3,he=8;function C(){}function Le(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function We(e){return function(t,r,a){if(a||(a={}),typeof r=="string")if(t.nodeName==="#document"||t.nodeName==="HTML"||t.nodeName==="BODY"){var l=r;r=w.createElement("html"),r.innerHTML=l}else r=Me(r);else r.nodeType===ge&&(r=r.firstElementChild);var v=a.getNodeKey||Le,S=a.onBeforeNodeAdded||C,A=a.onNodeAdded||C,O=a.onBeforeElUpdated||C,_=a.onElUpdated||C,P=a.onBeforeNodeDiscarded||C,b=a.onNodeDiscarded||C,i=a.onBeforeElChildrenUpdated||C,p=a.skipFromChildren||C,f=a.addChild||function(s,o){return s.appendChild(o)},E=a.childrenOnly===!0,u=Object.create(null),T=[];function g(s){T.push(s)}function U(s,o){if(s.nodeType===B)for(var h=s.firstChild;h;){var d=void 0;o&&(d=v(h))?g(d):(b(h),h.firstChild&&U(h,o)),h=h.nextSibling}}function x(s,o,h){P(s)!==!1&&(o&&o.removeChild(s),b(s),U(s,h))}function m(s){if(s.nodeType===B||s.nodeType===ge)for(var o=s.firstChild;o;){var h=v(o);h&&(u[h]=o),m(o),o=o.nextSibling}}m(t);function I(s){A(s);for(var o=s.firstChild;o;){var h=o.nextSibling,d=v(o);if(d){var c=u[d];c&&z(o,c)?(o.parentNode.replaceChild(c,o),X(c,o)):I(o)}else I(o);o=h}}function R(s,o,h){for(;o;){var d=o.nextSibling;(h=v(o))?g(h):x(o,s,!0),o=d}}function X(s,o,h){var d=v(o);if(d&&delete u[d],!h){var c=O(s,o);if(c===!1||(c instanceof HTMLElement&&(s=c,m(s)),e(s,o),_(s),i(s,o)===!1))return}s.nodeName!=="TEXTAREA"?ye(s,o):ve.TEXTAREA(s,o)}function ye(s,o){var h=p(s,o),d=o.firstChild,c=s.firstChild,L,k,W,K,N;e:for(;d;){for(K=d.nextSibling,L=v(d);!h&&c;){if(W=c.nextSibling,d.isSameNode&&d.isSameNode(c)){d=K,c=W;continue e}k=v(c);var j=c.nodeType,H=void 0;if(j===d.nodeType&&(j===B?(L?L!==k&&((N=u[L])?W===N?H=!1:(s.insertBefore(N,c),k?g(k):x(c,s,!0),c=N,k=v(c)):H=!1):k&&(H=!1),H=H!==!1&&z(c,d),H&&X(c,d)):(j===me||j==he)&&(H=!0,c.nodeValue!==d.nodeValue&&(c.nodeValue=d.nodeValue))),H){d=K,c=W;continue e}k?g(k):x(c,s,!0),c=W}if(L&&(N=u[L])&&z(N,d))h||f(s,N),X(N,d);else{var Z=S(d);Z!==!1&&(Z&&(d=Z),d.actualize&&(d=d.actualize(s.ownerDocument||w)),f(s,d),I(d))}d=K,c=W}R(s,c,k);var ie=ve[s.nodeName];ie&&ie(s,o)}var y=t,$=y.nodeType,ae=r.nodeType;if(!E){if($===B)ae===B?z(t,r)||(b(t),y=Re(t,Pe(r.nodeName,r.namespaceURI))):y=r;else if($===me||$===he){if(ae===$)return y.nodeValue!==r.nodeValue&&(y.nodeValue=r.nodeValue),y;y=r}}if(y===r)b(t);else{if(r.isSameNode&&r.isSameNode(y))return;if(X(y,r,E),T)for(var Y=0,we=T.length;Y<we;Y++){var Q=u[T[Y]];Q&&x(Q,Q.parentNode,!1)}}return!E&&y!==t&&t.parentNode&&(y.actualize&&(y=y.actualize(t.ownerDocument||w)),t.parentNode.replaceChild(y,t)),y}}var Be=We(Oe),Ee=Be;var Ve="root",G=new Map,D,q={stateToken:"",onUpdate:(e,n)=>{for(let t of e)Te(t);re(n)},popPendingEvents:()=>M.popPendingEvents()},V=ce(q),M=pe(V.update),Te=e=>{let n;if(e===void 0){let t=document.getElementById(Ve);if(t===null)throw new Error("Update target not found!");n=t}else{let t=document.createElement("div");t.innerHTML=e;let r=t.children.item(0);if(r===null||r.tagName!=="rxxxt-meta".toUpperCase())throw new Error("Invalid update root!");let a=document.getElementById(r.id);if(a===null)throw new Error("Update target not found!");n=a,Ee(n,r,{onNodeDiscarded:l=>{l instanceof Element&&M.onElementDeleted(l)}})}for(let t of n.getElementsByTagName("*"))M.onElementUpdated(t)},Xe={custom:e=>{var n;for(let t of(n=G.get(e.name))!=null?n:[])try{t(e.data)}catch(r){console.error(r)}},navigate:e=>{let n=new URL(e.location,location.href);D===void 0||D.origin!==n.origin||!n.pathname.startsWith(D.pathname)?location.assign(n):(window.history.pushState({},"",e.location),e.requires_refresh&&V.update())},"use-websocket":e=>{e.websocket?V.useWebSocket():V.useHTTP()},"set-cookie":e=>{var t;let n=["".concat(e.name,"=").concat((t=e.value)!=null?t:"")];typeof e.path=="string"&&n.push("path=".concat(e.path)),typeof e.expires=="string"&&n.push("expires=".concat(new Date(e.expires).toUTCString())),typeof e.max_age=="number"&&n.push("max-age=".concat(e.max_age)),typeof e.domain=="string"&&n.push("domain=".concat(e.domain)),e.secure&&n.push("secure"),e.http_only&&n.push("httponly"),document.cookie=n.join(";")},"event-modify-window":e=>{e.mode==="add"?M.registerEvent(window,e.name,e.descriptor):e.mode==="remove"&&M.unregisterEvent(window,e.name,e.descriptor)},"event-modify-query-selector":e=>{let n;if(e.all)n=Array.from(document.querySelectorAll(e.selector));else{let t=document.querySelector(e.selector);n=t===null?[]:[t]}for(let t of n)e.mode==="add"?M.registerEvent(t,e.name,e.descriptor):e.mode==="remove"&&M.unregisterEvent(t,e.name,e.descriptor)}},re=e=>e.forEach(n=>Xe[n.event](n)),be={on:(e,n)=>{var r;let t=(r=G.get(e))!=null?r:new Set;G.set(e,t),t.add(n)},off:(e,n)=>{var r;return((r=G.get(e))!=null?r:new Set).delete(n)},navigate:e=>{re([{event:"navigate",location:new URL(e,location.href).href,requires_refresh:!0}])},init:e=>{D=new URL(location.href),D.pathname.endsWith(e.path)?D.pathname=D.pathname.slice(0,D.pathname.length-e.path.length):console.warn("Invalid base url!"),window.addEventListener("popstate",V.update),q.stateToken=e.state_token,q.enableWebSocketStateUpdates=e.enable_web_socket_state_updates,q.disableHTTPRetry=e.disable_http_update_retry,re(e.events),Te()}};window.rxxxt=be;var ne=document.getElementById("rxxxt-init-data");ne!=null&&ne.textContent!==null?be.init(JSON.parse(ne.textContent)):console.warn("failed to initialize rxxxt. init data not found.");})();
