Metadata-Version: 2.4
Name: smooth-criminal
Version: 0.7.0
Summary: Dashboard de an√°lisis de rendimiento con decoradores inteligentes
Home-page: https://github.com/Alphonsus411/smooth_criminal
Author: Adolfo Gonz√°lez
Author-email: Adolfo Gonz√°lez <tucorreo@example.com>
License: MIT License
        
        Copyright (c) 2025 Adolfo Gonz√°lez
        
        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the "Software"), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included in all
        copies or substantial portions of the Software.
        
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        SOFTWARE.
        
        ---
        
        Este proyecto utiliza bibliotecas de terceros como Flet (Apache 2.0), Numba y
        NumPy (BSD-3-Clause) y Rich (MIT). Consulta THIRD_PARTY_LICENSES.md para m√°s
        detalles.
        
Project-URL: Homepage, https://github.com/Alphonsus411/smooth_criminal
Project-URL: Documentation, https://smooth-criminal.readthedocs.io/en/latest/
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE.txt
Provides-Extra: tinydb
Requires-Dist: tinydb; extra == "tinydb"
Provides-Extra: sqlite
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# üé© Smooth Criminal

**A Python performance acceleration toolkit with the soul of Michael Jackson.**

[![Python](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/Alphonsus411/smooth_criminal/HEAD?urlpath=streamlit/examples/benchmark_streamlit.py)
[![Streamlit](https://static.streamlit.io/badges/streamlit.svg)](https://smooth-criminal-demo.streamlit.app)

---

## üöÄ ¬øQu√© es esto?

**Smooth Criminal** es una librer√≠a de Python para acelerar funciones y scripts autom√°ticamente usando:
- üß† [Numba](https://numba.pydata.org/)
- ‚ö° Asyncio y threading
- üìä Dashboard visual con [Flet](https://flet.dev)
- üß™ Benchmarks y profiling
- üé∂ Estilo, carisma y mensajes inspirados en MJ

---

## üí° Caracter√≠sticas principales

| Decorador / Funci√≥n     | Descripci√≥n                                           |
|-------------------------|--------------------------------------------------------|
| `@smooth`               | Aceleraci√≥n con Numba (modo sigiloso y r√°pido)        |
| `@vectorized`          | Vectoriza funciones estilo NumPy con *fallback*       |
| `@guvectorized`        | Generaliza ufuncs con *fallback* seguro               |
| `@moonwalk`             | Convierte funciones en corutinas `async` sin esfuerzo |
| `@thriller`             | Benchmark antes y despu√©s (con ritmo)                 |
| `@jam(workers=n, backend="thread|process|async")` | Paralelismo con hilos, procesos o asyncio (cola din√°mica) |
| `@black_or_white(mode)` | Optimiza tipos num√©ricos (`float32` vs `float64`)     |
| `@bad`                  | Modo de optimizaci√≥n agresiva (`fastmath`)            |
| `@beat_it`              | Fallback autom√°tico si algo falla                     |
| `@mj_mode`              | Aplica un decorador aleatorio con mensaje de MJ       |
| `dangerous(func)`       | Mezcla poderosa de decoradores (`@bad + @thriller`)   |
| `@bad_and_dangerous`    | Optimiza, perfila y maneja errores autom√°ticamente    |
| `profile_it(func)`      | Estad√≠sticas detalladas de rendimiento                |
| `analyze_ast(func)`     | An√°lisis est√°tico para detectar c√≥digo optimizable    |

---

## üß† Dashboard visual

Ejecuta el panel interactivo para ver m√©tricas de tus funciones decoradas:

```bash
python -m smooth_criminal.dashboard
```
O bien:

````bash
python scripts/example_flet_dashboard.py
````

- Tabla con tiempos, decoradores y puntuaciones

- Botones para exportar CSV/JSON/XLSX/MD, limpiar historial o ver gr√°fico

- Interfaz elegante con Flet (modo oscuro)

### üï∫ Animaci√≥n Moonwalk

Activa el interruptor **Moonwalk** para ver c√≥mo un √≠cono de MJ cruza la
pantalla y desaparece al finalizar.

Prueba manual:

1. Ejecuta `python -m smooth_criminal.dashboard` o `python scripts/example_flet_dashboard.py`.
2. Pulsa el interruptor **Moonwalk** en la fila de botones.
3. Observa al bailar√≠n deslizarse y liberarse autom√°ticamente.

### üé¨ Nuevas animaciones

El dashboard incorpora efectos como "Spin" y "Toe Stand" para dar m√°s ritmo a tus m√©tricas.
Act√≠valos desde la l√≠nea de comandos:

```bash
python -m smooth_criminal.dashboard --animation spin
```

## ‚öôÔ∏è Instalaci√≥n

````bash
pip install smooth-criminal
````

O para desarrollo local:

````bash
git clone https://github.com/Alphonsus411/smooth_criminal.git
cd smooth_criminal
pip install -e .
````


## üõ†Ô∏è Configuraci√≥n de entorno

Antes de ejecutar la librer√≠a copia el archivo de ejemplo y ajusta las variables:

````bash
cp .env.example .env
````

Dentro de `.env` puedes definir:

```
# Ruta donde se guardan las m√©tricas
LOG_PATH=.smooth_criminal_log.json

# Backend de almacenamiento: json (por defecto), sqlite o tinydb
SMOOTH_CRIMINAL_STORAGE=json
```

Para backend `tinydb` instala la dependencia opcional `tinydb` y para exportar a
`xlsx` instala `openpyxl`.


## üíÉ Ejemplo r√°pido

````python
from smooth_criminal import smooth, thriller

@thriller
@smooth
def square(n):
    return [i * i for i in range(n)]

print(square(10))
````

### üé∑ Paralelismo con `jam`

```python
from smooth_criminal.core import jam

@jam(workers=4, backend="process")
def cube(x):
    return x ** 3

print(cube([1, 2, 3]))

# Tambi√©n disponible backend="thread" (por defecto) o backend="async"
```

### ‚è±Ô∏è Benchmark de backends con `benchmark_jam`

```python
from smooth_criminal.benchmark import benchmark_jam, detect_fastest_backend

def cube(x):
    return x ** 3

data = benchmark_jam(cube, [1, 2, 3], ["thread", "process", "async"])
print(data["fastest"])            # backend m√°s veloz

best = detect_fastest_backend(cube, [1, 2, 3], ["thread", "process", "async"])
print(best)
```

### üé≤ Decorador aleatorio `mj_mode`

```python
import random
from smooth_criminal import mj_mode

random.seed(0)

@mj_mode
def identidad(x):
    return x

print(identidad([1, 2, 3]))
# Posible salida: "ü•Å Jam session with 4 workers!"
```

Mensajes posibles:

- üï∫ Hee-Hee! You're now smooth.
- üòé Who's bad? You're bad!
- üé¨ It's Thriller time!
- ü•Å Jam session with 4 workers!

## üöß Modo bad_and_dangerous

````python
from smooth_criminal import bad_and_dangerous

def fallback(_):
    return -1

@bad_and_dangerous(fallback=fallback)
def risky(n):
    total = 0
    for i in range(n):
        total += i
    return total

print(risky(5))
````

## üßÆ Vectorizaci√≥n segura

````python
import numpy as np
from smooth_criminal import vectorized, guvectorized


@vectorized(["float64(float64)"])
def doble(x):
    return x * 2


@guvectorized(["void(float64[:], float64[:], float64[:])"], "(n),(n)->(n)")
def suma(a, b, res):
    for i in range(a.shape[0]):
        res[i] = a[i] + b[i]


print(doble(np.array([1.0, 2.0])))
print(suma(np.array([1.0, 2.0]), np.array([3.0, 4.0])))
````

## üß™ CLI interactiva

````bash
smooth-criminal analyze my_script.py
````

Esto analizar√° tu c√≥digo buscando funciones lentas, bucles, range(), etc.

Para exportar el historial en distintos formatos:

````bash
smooth-criminal export history.xlsx --format xlsx
smooth-criminal export history.md --format md
smooth-criminal export history.json --format json
````

Tambi√©n puedes comparar r√°pidamente los backends de `jam` desde la l√≠nea de comandos:

````bash
smooth-criminal jam-test paquete.modulo:funcion --workers 4 --reps 3
````

Si prefieres un resultado en JSON sin mensajes adicionales, a√±ade `--silent`:

````bash
smooth-criminal jam-test paquete.modulo:funcion --workers 4 --reps 3 --silent
````

Esto mostrar√° una tabla comparativa de tiempos y, al finalizar sin errores, el mensaje especial:

```
üé∂ Just jammin' through those CPU cores! üß†üï∫
```

### üï∫ Flag --mj-mode

Activa efectos especiales al detectar mejoras de rendimiento:

```bash
smooth-criminal jam-test paquete.modulo:funcion --workers 4 --mj-mode
```

Cuando el modo est√° activo y el rendimiento mejora al menos un 10¬†%, se
reproducir√° un peque√±o efecto de Michael Jackson.  Si la dependencia
`playsound` no est√° disponible, se mostrar√° un mensaje o GIF/ASCII mediante
`rich`.  En ausencia de estas dependencias, solo se emitir√° una advertencia.

## üåê API

Lanza una API HTTP para consultar las estad√≠sticas desde otras aplicaciones:

```bash
smooth-criminal api --host 127.0.0.1 --port 8000
```

Despu√©s puedes obtener los datos con:

```bash
curl http://127.0.0.1:8000/history
```

## üîå Plugin

El directorio `vscode-extension` contiene un plugin para VS Code que integra los comandos de Smooth Criminal.
Inst√°lalo con:

```bash
cd vscode-extension
npm install
npm run build
```

En VS Code, carga la extensi√≥n desde esta carpeta y podr√°s ejecutar an√°lisis desde el editor.

## üíæ Backends de almacenamiento

El historial de ejecuciones se guarda usando un backend configurable.
Selecciona el backend con la variable de entorno `SMOOTH_CRIMINAL_STORAGE`:

````bash
export SMOOTH_CRIMINAL_STORAGE=sqlite  # json | sqlite | tinydb
smooth-criminal analyze my_script.py
````

El backend `sqlite` no requiere extras. Para `tinydb` instala `tinydb` y para
exportar a `xlsx` instala `openpyxl`.

## üìö Documentaci√≥n

Pr√≥ximamente en ReadTheDocs‚Ä¶

Consulta el [changelog](CHANGELOG.md) para conocer el historial completo de versiones.

## üì¶ Empaquetado

Para crear una distribuci√≥n local y verificar sus metadatos:

```bash
python -m build
twine check dist/*
```

## üìù Licencia

MIT ¬© Adolfo Gonz√°lez

Este proyecto incluye bibliotecas de terceros con licencias permisivas, como
Flet (Apache 2.0), Numba y NumPy (BSD-3-Clause) o Rich (MIT). Consulta
[THIRD_PARTY_LICENSES.md](THIRD_PARTY_LICENSES.md) para el listado completo.

## üôè Agradecimientos

| Colaborador / Tecnolog√≠a | Rol / Licencia |
|--------------------------|----------------|
| [Adolfo Gonz√°lez](https://github.com/Alphonsus411) | Autor principal |
| Michael Jackson | Inspiraci√≥n musical |
| [Flet](https://flet.dev) (Apache 2.0) | Dashboard visual |
| [Numba](https://numba.pydata.org) (BSD-3-Clause) | Aceleraci√≥n JIT |
| [NumPy](https://numpy.org) (BSD-3-Clause) | Operaciones vectoriales |
| [Rich](https://rich.readthedocs.io) (MIT) | Salida de consola |

