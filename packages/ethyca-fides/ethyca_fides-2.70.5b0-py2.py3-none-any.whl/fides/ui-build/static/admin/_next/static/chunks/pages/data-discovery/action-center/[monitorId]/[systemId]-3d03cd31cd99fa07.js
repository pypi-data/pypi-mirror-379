(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4154],{58095:function(e,t,s){var n=s(8817);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},21796:function(e){e.exports=function(e,t,s){for(var n=-1,a=null==e?0:e.length;++n<a;)if(s(t,e[n]))return!0;return!1}},8817:function(e,t,s){var n=s(95372),a=s(1129),o=s(58263);e.exports=function(e,t,s){return t==t?o(e,t,s):n(e,a,s)}},1129:function(e){e.exports=function(e){return e!=e}},92198:function(e,t,s){var n=s(52485),a=s(58095),o=s(21796),l=s(65581),i=s(47111),r=s(43735);e.exports=function(e,t,s){var d=-1,c=a,u=e.length,m=!0,g=[],h=g;if(s)m=!1,c=o;else if(u>=200){var p=t?null:i(e);if(p)return r(p);m=!1,c=l,h=new n}else h=t?[]:g;e:for(;++d<u;){var y=e[d],v=t?t(y):y;if(y=s||0!==y?y:0,m&&v==v){for(var f=h.length;f--;)if(h[f]===v)continue e;t&&h.push(v),g.push(y)}else c(h,v,s)||(h!==g&&h.push(v),g.push(y))}return g}},47111:function(e,t,s){var n=s(46151),a=s(50344),o=s(43735),l=n&&1/o(new n([,-0]))[1]==1/0?function(e){return new n(e)}:a;e.exports=l},58263:function(e){e.exports=function(e,t,s){for(var n=s-1,a=e.length;++n<a;)if(e[n]===t)return n;return -1}},50344:function(e){e.exports=function(){}},83766:function(e,t,s){var n=s(92198);e.exports=function(e){return e&&e.length?n(e):[]}},25654:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/[monitorId]/[systemId]",function(){return s(74473)}])},79283:function(e,t,s){"use strict";s.d(t,{l:function(){return r}});var n=s(24246),a=s(96306),o=s(72707),l=s.n(o);let i=e=>{let{data:{formattedTitle:t,description:s,name:o,primaryName:l}}=e;return(0,n.jsxs)(a.jqI,{gap:12,title:"".concat(t," - ").concat(s),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:l||o}),l&&": ".concat(o)]}),(0,n.jsx)("em",{children:s})]})},r=e=>{let{options:t,...s}=e,o=null==t?void 0:t.map(e=>({...e,className:l().option,formattedTitle:[e.primaryName,e.name].filter(e=>e).join(": ")}));return(0,n.jsx)(a.WPr,{options:o,filterOption:(e,t)=>(null==t?void 0:t.formattedTitle.toLowerCase().includes(e.toLowerCase()))||(null==t?void 0:t.value.toLowerCase().includes(e.toLowerCase()))||!1,optionFilterProp:"label",autoFocus:!0,variant:"borderless",optionRender:i,styles:{popup:{root:{minWidth:"500px"}}},className:"w-full p-0","data-testid":"taxonomy-select",...s})}},45938:function(e,t,s){"use strict";s.d(t,{Gt:function(){return m},eB:function(){return g},oI:function(){return u}});var n=s(24246),a=s(34090),o=s(27378),l=s(16134),i=s(38602),r=s(58452);let d=(0,o.createRef)(),c=(0,o.createRef)(),u=()=>{let e=(0,l.T)(),t=(0,l.C)(i.DB),s=(0,o.useCallback)(()=>{c.current=void 0,d.current=void 0},[]),n=(0,o.useCallback)(()=>{e((0,i.Mr)()),c.current&&(c.current(!0),s())},[e,s]),a=(0,o.useCallback)(()=>{e((0,i.Mr)()),c.current&&(c.current(!1),s())},[e,s]);return{attemptAction:(0,o.useCallback)(()=>t?(e((0,i.h7)()),d.current||(d.current=new Promise(e=>{c.current=e})),d.current):Promise.resolve(!0),[t,e]),onConfirm:n,onClose:a}},m=e=>{let{id:t,name:s}=e,{dirty:n}=(0,a.u6)(),r=(0,l.T)();return(0,o.useEffect)(()=>(r((0,i.Zu)({id:t,name:s})),()=>{r((0,i.dz)({id:t}))}),[r,t,s]),(0,o.useEffect)(()=>{r((0,i.$p)({id:t,isDirty:n}))},[n,r,t]),null},g=()=>{let{onConfirm:e,onClose:t}=u(),s=(0,l.C)(i.uv);return(0,n.jsx)(r.Z,{isOpen:s,onClose:t,onConfirm:e,isCentered:!0,title:"Unsaved Changes",message:"You have unsaved changes"})}},74473:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return en}});var n=s(24246),a=s(86677),o=s(27378),l=s(35287),i=s(77830),r=s(58754),d=s(96306),c=s(25415),u=s(21910),m=s(30952),g=s(8133),h=s(79283),p=s(34929),y=s(78238),v=e=>{let{selectedTaxonomies:t,...s}=e,{getDataUseDisplayNameProps:a,getDataUses:o}=(0,p.Z)(),l=o().filter(e=>e.active&&y.g.includes(e.fides_key)).map(e=>{let{name:t,primaryName:s}=a(e.fides_key);return{value:e.fides_key,name:t,primaryName:s,description:e.description||""}});return(0,n.jsx)(h.l,{options:l,...s})};let{Text:f}=d.AntTypography;var x=e=>{let{onSave:t,isSaving:s,onClose:a,...l}=e,[i,r]=(0,o.useState)([]),c=()=>{r([]),a()};return(0,n.jsxs)(g.Z,{title:"Add consent category",...l,onClose:c,children:[(0,n.jsxs)(d.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,n.jsx)(f,{children:"Assign consent categories to selected assets. This configures the system for consent management. Consent categories apply to both individual assets and the system."}),(0,n.jsx)(v,{mode:"tags",selectedTaxonomies:i,onSelect:(e,t)=>r([...i,t.value]),variant:"outlined"})]}),(0,n.jsxs)(d.jqI,{justify:"space-between",children:[(0,n.jsx)(d.wpx,{htmlType:"reset",onClick:c,"data-testid":"cancel-btn",children:"Cancel"}),(0,n.jsx)(d.wpx,{htmlType:"submit",type:"primary",disabled:!i.length,loading:s,onClick:()=>{t(i),c()},"data-testid":"save-btn",children:"Save"})]})]})},j=s(29850),_=s(77685);let{Text:C}=d.AntTypography,b=e=>{let{onSave:t,isSaving:s,...a}=e,[l,i]=(0,o.useState)(),[r,c]=(0,o.useState)(!1),u=(0,o.useCallback)(e=>{e.preventDefault(),c(!0)},[]),m=()=>{c(!1)},h=()=>{i(void 0),a.onClose()};return(0,n.jsxs)(g.Z,{title:"Assign system",...a,onClose:h,children:[(0,n.jsxs)(d.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,n.jsx)(C,{children:"Assign a system to the selected assets. If no system exists, select 'Add new system' to create one."}),(0,n.jsx)(j.R,{placeholder:"Search or select...",onSelect:(e,t)=>{i(t)},onAddSystem:u,value:l})]})," ",(0,n.jsxs)(d.jqI,{justify:"space-between",children:[(0,n.jsx)(d.wpx,{htmlType:"reset",onClick:h,"data-testid":"cancel-btn",children:"Cancel"}),(0,n.jsx)(d.wpx,{htmlType:"submit",type:"primary",disabled:!l,loading:s,onClick:()=>{t(l),h()},"data-testid":"save-btn",children:"Save"})]}),r&&(0,n.jsx)(_.i,{isOpen:!0,onClose:m,onSuccessfulSubmit:(e,t)=>{m(),i({label:t,value:e})},toastOnSuccess:!0})]})};var w=s(8411),k=s(32735),S=s(8125),E=s(37059),T=s(98145);let{Link:N}=d.AntTypography,A=e=>{let{stagedResource:t,status:s}=e,a=(0,S.o)({pagination:{defaultPageSize:10,pageSizeOptions:[10,...k.VZ]}}),{pageIndex:l,pageSize:i}=a,{data:r,isFetching:c,isError:u}=(0,E.mi)({stagedResourceUrn:t.urn,status:s,page:l,size:i}),{items:m,total:g}=(0,o.useMemo)(()=>r||{items:[],total:0,pages:0,filterOptions:{assigned_users:[],systems:[]}},[r]),h=(0,o.useMemo)(()=>({enableSelection:!1,getRowKey:e=>"".concat(e.location,"-").concat(e.page),isLoading:c,dataSource:m,totalRows:null!=g?g:0}),[c,m,g]),p=(0,S.V)(a,h);return{columns:(0,o.useMemo)(()=>[{title:"Location",dataIndex:T.EI.LOCATION,key:T.EI.LOCATION,render:e=>{var t;let s=(0,d.QCN)(e);return s?(0,d.c1K)({isoEntry:s,showFlag:!0}):null!==(t=null===w.Z8||void 0===w.Z8?void 0:w.Z8[e])&&void 0!==t?t:e}},{title:"Page",dataIndex:T.EI.PAGE,key:T.EI.PAGE,render:e=>(0,n.jsx)(N,{href:e,target:"_blank",rel:"noopener noreferrer",children:e})}],[]),data:r,isLoading:c,isError:u,totalRows:g,tableProps:p.tableProps,hasData:m.length>0}},{Paragraph:I,Text:O}=d.AntTypography,P=e=>{var t,s,a;let{isOpen:o,stagedResource:l,status:i,onCancel:r,onDownload:c}=e,{columns:u,tableProps:m,isError:g}=A({stagedResource:l,status:i});return(0,n.jsx)(d.$zI,{title:"Consent discovery",width:768,open:o,onCancel:r,footer:[(0,n.jsx)(d.wpx,{onClick:r,children:"Cancel"},"cancel"),!!c&&(0,n.jsx)(d.wpx,{type:"primary",onClick:c,children:"Download"},"download")],"data-testid":"consent-breakdown-modal",children:(0,n.jsxs)(d.jqI,{vertical:!0,className:"gap-6","data-testid":"consent-breakdown-modal-content",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(I,{children:"View all instances where this asset was detected without consent, organized by location and page. Use this to investigate potential compliance issues."}),(0,n.jsxs)(I,{children:[(0,n.jsx)(O,{strong:!0,children:"Asset name:"})," ",null!==(t=l.name)&&void 0!==t?t:(0,n.jsx)(O,{italic:!0,children:"Unknown"}),","," ",(0,n.jsx)(O,{strong:!0,children:"System:"})," ",null!==(s=l.system)&&void 0!==s?s:(0,n.jsx)(O,{italic:!0,children:"Unassigned"}),","," ",(0,n.jsx)(O,{strong:!0,children:"Domain:"})," ",null!==(a=l.domain)&&void 0!==a?a:(0,n.jsx)(O,{italic:!0,children:"Unknown"})]})]}),g?(0,n.jsx)(d.DUx,{type:"error",message:"Error fetching data",description:"Please try again later.",showIcon:!0}):(0,n.jsx)(d.V5H,{...m,columns:u,"data-testid":"consent-breakdown-modal-table"})]})})};var D=s(83766),R=s.n(D),L=s(62165),U=s(812),Z=s(26070),G=s(3110),M=s(46628),V=s(16394),X=s(54762),z=s(9320),B=s(88708);let K=e=>{let{asset:t,onTabChange:s}=e,[o,{isLoading:l}]=(0,E.EY)(),[r,{isLoading:c}]=(0,E.nS)(),[m,{isLoading:g}]=(0,E.Tj)(),h=(0,d.pmc)(),p=(0,a.useRouter)(),y=l||c||g,{urn:v,name:f,resource_type:x,diff_status:j,system_key:_,user_assigned_system_key:C}=t,b=async()=>{let e=await o({urnList:[v]});if((0,U.D4)(e))h((0,M.Vo)((0,U.e$)(e.error)));else{let e=C||_,t="".concat(i.So,"/configure/").concat(e,"#assets");h((0,M.t5)((0,z._)("".concat(x,' "').concat(f,'" has been added to the system inventory.'),e?()=>p.push(t):void 0)))}},w=async()=>{let e=await r({urnList:[v]});(0,U.D4)(e)?h((0,M.Vo)((0,U.e$)(e.error))):h((0,M.t5)((0,z._)("".concat(x,' "').concat(f,'" has been ignored and will not appear in future scans.'),async()=>{await s(B.A.IGNORED)})))},k=async()=>{let e=await m({urnList:[v]});(0,U.D4)(e)?h((0,M.Vo)((0,U.e$)(e.error))):h((0,M.t5)("".concat(x,' "').concat(f,'" is no longer ignored and will appear in future scans.')))};return(0,n.jsxs)(d.vyj,{children:[j!==u.LL.MUTED&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.esZ,{title:t.system?void 0:"This asset requires a system before you can add it to the inventory.",children:(0,n.jsx)(d.wpx,{"data-testid":"add-btn",size:"small",onClick:b,disabled:!t.system||y,loading:l,children:"Add"})}),(0,n.jsx)(d.wpx,{"data-testid":"ignore-btn",size:"small",onClick:w,disabled:y,loading:c,children:"Ignore"})]}),j===u.LL.MUTED&&(0,n.jsx)(d.wpx,{"data-testid":"restore-btn",size:"small",onClick:k,disabled:y,loading:g,children:"Restore"})]})};var W=s(17245),$=s(18992),Y=s.n($),q=s(2525),F=s(31883),H=e=>{var t,s,a;let{asset:l,readonly:i,columnState:r}=e,[c,u]=(0,o.useState)(!1),[m]=(0,E.Ak)(),{successAlert:g,errorAlert:h}=(0,W.VY)(),{getDataUseDisplayName:f}=(0,p.Z)(),x=(null===(t=l.user_assigned_data_uses)||void 0===t?void 0:t.length)?l.user_assigned_data_uses:(null===(s=l.data_uses)||void 0===s?void 0:s.length)?l.data_uses:[],j=async e=>{let t=await m({monitorId:l.monitor_config_id,urnList:[l.urn],dataUses:[...x,e]});(0,F.D4)(t)?h((0,U.e$)(t.error)):g("Consent category added to ".concat(l.resource_type,' "').concat(l.name,'" .'),"Confirmed"),u(!1)},_=async e=>{let t=await m({monitorId:l.monitor_config_id,urnList:[l.urn],dataUses:x.filter(t=>t!==e)});(0,F.D4)(t)?h((0,U.e$)(t.error)):g("Consent category removed from ".concat(l.resource_type,' "').concat(l.name,'".'),"Confirmed")},C=(null===(a=l.user_assigned_data_uses)||void 0===a?void 0:a.length)?l.user_assigned_data_uses:l.data_uses,b=null==C?void 0:C.filter(e=>(0,y.Z)(e));return i?(0,n.jsx)(q.Q,{values:null==b?void 0:b.map(e=>({label:f(e),key:e})),columnState:r}):(0,n.jsxs)(n.Fragment,{children:[!c&&(0,n.jsxs)(d.vyj,{align:"start",children:[(0,n.jsx)(d.j8w,{onClick:()=>u(!0),"data-testid":"taxonomy-add-btn",addable:!0,"aria-label":"Add data use"}),(0,n.jsx)(q.Q,{values:null==b?void 0:b.map(e=>({label:f(e),key:e})),columnState:r,tagProps:{closable:!0,closeButtonLabel:"Remove data use"},onTagClose:_})]}),c&&(0,n.jsx)("div",{className:Y().cellBleed,style:{backgroundColor:"var(--fides-color-white)"},children:(0,n.jsx)(v,{selectedTaxonomies:b||[],onSelect:j,onBlur:()=>u(!1),open:!0})})]})};let J=e=>{let{consentAggregated:t,stagedResource:s,onShowBreakdown:a}=e,o=()=>{null==a||a(s,t)};return(0,n.jsxs)(n.Fragment,{children:[t===u.lg.WITHOUT_CONSENT&&(0,n.jsx)(d.esZ,{title:"Asset was detected without any consent. Click the info icon for more details.",children:(0,n.jsx)(d.j8w,{color:"error",closeIcon:(0,n.jsx)(d.PJP.daM,{style:{width:12,height:12}}),closeButtonLabel:"View details",onClose:o,"data-testid":"status-badge_without-consent",children:T.X1.WITHOUT_CONSENT})}),t===u.lg.PRE_CONSENT&&(0,n.jsx)(d.esZ,{title:"Asset was detected before user gave consent. Click the info icon for more details.",children:(0,n.jsx)(d.j8w,{color:"error",closeIcon:(0,n.jsx)(d.PJP.daM,{style:{width:12,height:12}}),closeButtonLabel:"View details",onClose:o,"data-testid":"status-badge_pre-consent",children:T.X1.PRE_CONSENT})}),t===u.lg.WITH_CONSENT&&(0,n.jsx)(d.esZ,{title:"Asset was detected after the user gave consent",children:(0,n.jsx)(d.j8w,{color:"success","data-testid":"status-badge_with-consent",children:T.X1.WITH_CONSENT})}),t===u.lg.EXEMPT&&(0,n.jsx)(d.esZ,{title:"Asset is valid regardless of consent",children:(0,n.jsx)(d.j8w,{"data-testid":"status-badge_consent-exempt",children:T.X1.EXEMPT})}),t===u.lg.UNKNOWN&&(0,n.jsx)(d.esZ,{title:"Did not find consent information for this asset. You may need to re-run the monitor.",children:(0,n.jsx)(d.j8w,{"data-testid":"status-badge_unknown",children:T.X1.UNKNOWN})}),t===u.lg.NOT_APPLICABLE&&(0,n.jsx)(d.esZ,{title:"No privacy notices apply to this asset",children:(0,n.jsx)(d.j8w,{"data-testid":"status-badge_not-applicable",children:T.X1.NOT_APPLICABLE})})]})};var Q=s(70675);let ee=e=>{let{aggregateSystem:t,monitorConfigId:s,readonly:a}=e,{resource_type:l,name:i,urn:r,system:c,user_assigned_system_key:u,system_key:m}=t,[g,h]=(0,o.useState)(!1),[p,y]=(0,o.useState)(!1),[v,{isLoading:f}]=(0,Q.NA)(),{successAlert:x,errorAlert:C}=(0,W.VY)(),b=(0,o.useCallback)(e=>{e.preventDefault(),y(!0)},[]),w=async(e,t,n)=>{let a=await v({staged_resource_urn:r,monitor_config_id:s,user_assigned_system_key:e});(0,U.D4)(a)?C((0,U.e$)(a.error)):x(n?"".concat(t," has been added to your system inventory and the ").concat(l,' "').concat(i,'" has been assigned to that system.'):"".concat(l,' "').concat(i,'" has been assigned to ').concat(t,"."),"Confirmed"),h(!1)};return a?c?(0,n.jsx)(d.j8w,{"data-testid":"system-badge",color:"white",children:c}):null:(0,n.jsxs)(n.Fragment,{children:[!g&&(c?(0,n.jsxs)(d.j8w,{onClick:()=>h(!0),"data-testid":"system-badge",children:[c,(0,n.jsx)(d.PJP.I8b,{})]}):(0,n.jsx)(d.j8w,{onClick:()=>h(!0),"data-testid":"add-system-btn",addable:!0})),!!g&&(0,n.jsx)("div",{className:Y().cellBleed,children:(0,n.jsx)(j.R,{variant:"borderless",autoFocus:!0,defaultOpen:!0,defaultValue:u||m,onBlur:e=>{var t;(null===(t=e.relatedTarget)||void 0===t?void 0:t.getAttribute("id"))!=="add-new-system"&&h(!1)},onAddSystem:b,onSelect:(e,t)=>w(e,t.label),loading:f})}),p&&(0,n.jsx)(_.i,{isOpen:!0,onClose:()=>{y(!1)},onSuccessfulSubmit:(e,t)=>w(e,t,!0)})]})},et=e=>{let{monitorId:t,systemId:s,onSystemName:l,onShowBreakdown:r}=e,c=(0,a.useRouter)(),m=(0,d.pmc)(),[g,h]=(0,o.useState)(s),[p,v]=(0,o.useState)(),[f,x]=(0,o.useState)(!1),[j,_]=(0,o.useState)(!1),[C,b]=(0,o.useState)(!1),[k,N]=(0,o.useState)(0),[A,I]=(0,o.useState)(0),[O,P]=(0,o.useState)(0),{flags:D}=(0,L.hz)(),{assetConsentStatusLabels:W}=D,{filterTabs:$,activeTab:Y,onTabChange:q,activeParams:F,actionsDisabled:Q}=(0,B.Z)(s),et=(0,S.o)({sorting:{validColumns:Object.values(T.r6)}}),{columnFilters:es,pageIndex:en,pageSize:ea,resetState:eo,sortKey:el,sortOrder:ei,searchQuery:er,updateSearch:ed,updateFilters:ec,updateSorting:eu,updatePageIndex:em,updatePageSize:eg}=et,{data:eh,isLoading:ep,isFetching:ey}=(0,E.WJ)({key:t,page:en,size:ea,search:er,sort_by:el?[el]:[T.r6.CONSENT_AGGREGATED,"urn"],sort_asc:"descend"!==ei,...F,...es}),[ev,{isLoading:ef}]=(0,E.EY)(),[ex,{isLoading:ej}]=(0,E.nS)(),[e_,{isLoading:eC}]=(0,E.rs)(),[eb,{isLoading:ew}]=(0,E.sX)(),[ek,{isLoading:eS}]=(0,E.Vr)(),[eE,{isLoading:eT}]=(0,E.Tj)(),eN=ef||ej||eC||ew||eT||eS,eA=eN||s===i.Kl,{data:eI}=(0,E.ut)({monitor_config_id:t,resolved_system_id:s,diff_status:null==F?void 0:F.diff_status,search:er,...es}),eO=(0,o.useMemo)(()=>({enableSelection:Y!==B.A.ADDED,getRowKey:e=>e.urn,isLoading:ep,isFetching:ey,dataSource:(null==eh?void 0:eh.items)||[],totalRows:(null==eh?void 0:eh.total)||0,customTableProps:{locale:{emptyText:(0,n.jsx)("div",{children:(0,n.jsx)("div",{children:"All caught up!"})})}}}),[Y,ep,ey,null==eh?void 0:eh.items,null==eh?void 0:eh.total]),eP=(0,S.V)(et,eO),eD=(0,o.useMemo)(()=>{var e;let t=[{title:"Asset",dataIndex:T.r6.NAME,key:T.r6.NAME,sorter:!0,sortOrder:el===T.r6.NAME?ei:null,render:e=>(0,n.jsx)(d.lKn,{ellipsis:{tooltip:!0},style:{maxWidth:300},children:e}),fixed:"left"},{title:"Type",dataIndex:T.r6.RESOURCE_TYPE,key:T.r6.RESOURCE_TYPE,sorter:!0,sortOrder:el===T.r6.RESOURCE_TYPE?ei:null,filters:(0,V.nZ)(null==eI?void 0:eI.resource_type),filteredValue:(null==es?void 0:es.resource_type)||null},{title:"System",dataIndex:T.r6.SYSTEM,key:T.r6.SYSTEM,render:(e,t)=>!!t.monitor_config_id&&(0,n.jsx)(ee,{aggregateSystem:t,monitorConfigId:t.monitor_config_id,readonly:Q||Y===B.A.IGNORED})},{title:"Categories of consent",key:T.r6.DATA_USES,menu:{items:G.DI,onClick:e=>{e.domEvent.stopPropagation(),"expand-all"===e.key?(b(!0),P(e=>e+1)):"collapse-all"===e.key&&(b(!1),P(e=>e+1))}},filters:(0,V.nZ)(null==eI?void 0:null===(e=eI.data_uses)||void 0===e?void 0:e.filter(e=>(0,y.Z)(e))),filteredValue:(null==es?void 0:es.data_uses)||null,render:(e,t)=>(0,n.jsx)(H,{asset:t,readonly:Q||Y===B.A.IGNORED,columnState:{isExpanded:C,version:O}})},{title:"Locations",dataIndex:T.r6.LOCATIONS,key:T.r6.LOCATIONS,menu:{items:G.DI,onClick:e=>{e.domEvent.stopPropagation(),"expand-all"===e.key?(x(!0),N(e=>e+1)):"collapse-all"===e.key&&(x(!1),N(e=>e+1))}},filters:(0,V.nZ)(null==eI?void 0:eI.locations,e=>{var t;let s=(0,d.QCN)(e);return s?(0,d.c1K)({isoEntry:s}):null!==(t=w.Z8[e])&&void 0!==t?t:e}),filteredValue:(null==es?void 0:es.locations)||null,render:e=>{var t;return(0,n.jsx)(Z.Q,{values:null!==(t=null==e?void 0:e.map(e=>{var t;let s=(0,d.QCN)(e);return{label:s?(0,d.c1K)({isoEntry:s}):null!==(t=w.Z8[e])&&void 0!==t?t:e,key:e}}))&&void 0!==t?t:[],columnState:{isExpanded:f,version:k}})}},{title:"Domain",dataIndex:T.r6.DOMAIN,key:T.r6.DOMAIN},{title:"Detected on",dataIndex:T.r6.PAGE,menu:{items:G.DI,onClick:e=>{e.domEvent.stopPropagation(),"expand-all"===e.key?(_(!0),I(e=>e+1)):"collapse-all"===e.key&&(_(!1),I(e=>e+1))}},key:T.r6.PAGE,render:e=>(0,n.jsx)(Z.v,{values:e,valueSuffix:"pages",columnState:{isExpanded:j,version:A}})}];return W&&t.push({title:()=>(0,n.jsxs)(d.vyj,{children:[(0,n.jsx)("div",{children:"Compliance"}),p===u.lg.WITHOUT_CONSENT&&(0,n.jsx)(X.l,{consentStatus:{status:u.pF.ALERT,message:"One or more assets were detected without consent"}})]}),dataIndex:T.r6.CONSENT_AGGREGATED,key:T.r6.CONSENT_AGGREGATED,sorter:!0,sortOrder:el===T.r6.CONSENT_AGGREGATED?ei:null,filters:(0,V.nZ)(null==eI?void 0:eI[T.r6.CONSENT_AGGREGATED],e=>{var t;return null!==(t=({with_consent:T.X1.WITH_CONSENT,without_consent:T.X1.WITHOUT_CONSENT,exempt:T.X1.EXEMPT,unknown:T.X1.UNKNOWN,pre_consent:T.X1.PRE_CONSENT,cmp_error:T.X1.CMP_ERROR})[e])&&void 0!==t?t:e}),filteredValue:(null==es?void 0:es[T.r6.CONSENT_AGGREGATED])||null,render:(e,t)=>(0,n.jsx)(J,{consentAggregated:null!=e?e:u.lg.UNKNOWN,stagedResource:t,onShowBreakdown:r})}),Q||t.push({title:"Actions",key:T.r6.ACTIONS,fixed:"right",render:(e,t)=>(0,n.jsx)(K,{asset:t,onTabChange:q})}),t},[el,ei,eI,es,W,Q,Y,C,f,j,O,k,A,p,r,q]);(0,o.useEffect)(()=>{if(eh){var e;let t=(null===(e=eh.items[0])||void 0===e?void 0:e.system)||g||s||"";h(t),null==l||l(t)}},[eh,s,l,g]),(0,o.useEffect)(()=>{if((null==eh?void 0:eh.items)&&!p){var e;v(null===(e=eh.items.find(e=>e.consent_aggregated===u.lg.WITHOUT_CONSENT))||void 0===e?void 0:e.consent_aggregated)}},[eh,p]);let{selectedKeys:eR,selectedRows:eL,resetSelections:eU}=eP,eZ=(0,o.useCallback)(async()=>{var e,t;let s=await ev({urnList:eR}),n=(null===(e=eL[0])||void 0===e?void 0:e.user_assigned_system_key)||(null===(t=eL[0])||void 0===t?void 0:t.system_key),a=eL.every(e=>(e.user_assigned_system_key||e.system_key)===n)?n:void 0;(0,U.D4)(s)?m((0,M.Vo)((0,U.e$)(s.error))):(m((0,M.t5)((0,z._)("".concat(eR.length," assets from ").concat(g," have been added to the system inventory."),a?()=>c.push("".concat(i.So,"/configure/").concat(a,"#assets")):()=>c.push(i.So)))),eU())},[ev,eR,eL,g,m,c,eU]),eG=(0,o.useCallback)(async e=>{if("string"==typeof(null==e?void 0:e.value)){let s=await eb({monitorId:t,urnList:eR,systemKey:e.value});(0,U.D4)(s)?m((0,M.Vo)((0,U.e$)(s.error))):m((0,M.t5)("".concat(eR.length," assets have been assigned to ").concat(e.label,"."),"Confirmed"))}},[eb,t,eR,m]),eM=(0,o.useCallback)(async e=>{if(!eL.length)return;let s=eL.map(t=>{let s=R()([...t.user_assigned_data_uses||t.data_uses||[],...e]);return{urn:t.urn,user_assigned_data_uses:s}}),n=await ek({monitorId:t,assets:s});(0,U.D4)(n)?m((0,M.Vo)((0,U.e$)(n.error))):m((0,M.t5)("Consent categories added to ".concat(eR.length," assets").concat(g?" from ".concat(g):"","."),"Confirmed"))},[eL,ek,t,eR,g,m]),eV=(0,o.useCallback)(async()=>{let e=await ex({urnList:eR});(0,U.D4)(e)?m((0,M.Vo)((0,U.e$)(e.error))):(m((0,M.t5)(g===i.Kl?"".concat(eR.length," uncategorized assets have been ignored and will not appear in future scans."):"".concat(eR.length," assets from ").concat(g," have been ignored and will not appear in future scans."),"Confirmed")),eU())},[ex,eR,g,m,eU]),eX=(0,o.useCallback)(async()=>{let e=await eE({urnList:eR});(0,U.D4)(e)?m((0,M.Vo)((0,U.e$)(e.error))):(m((0,M.t5)("".concat(eR.length," assets have been restored and will appear in future scans."),"Confirmed")),eU())},[eE,eR,m,eU]),ez=(0,o.useCallback)(async()=>{let e=(null==eh?void 0:eh.items.length)||0,n=await e_({monitor_config_key:t,resolved_system_ids:[s]});(0,U.D4)(n)?m((0,M.Vo)((0,U.e$)(n.error))):(c.push("".concat(i.vi,"/").concat(t)),m((0,M.t5)("".concat(e," assets from ").concat(g," have been added to the system inventory."),"Confirmed")),eU())},[null==eh?void 0:eh.items.length,e_,t,s,c,m,g,eU]),eB=(0,o.useCallback)(async e=>{await q(e),eo(),eU()},[q,eo,eU]);return{columns:eD,data:eh,isLoading:ep,isFetching:ey,tableState:et,searchQuery:er,updateSearch:ed,updateFilters:ec,updateSorting:eu,updatePageIndex:em,updatePageSize:eg,resetState:eo,tableProps:eP.tableProps,selectionProps:eP.selectionProps,filterTabs:$,activeTab:Y,handleTabChange:eB,activeParams:F,actionsDisabled:Q,selectedRows:eL,selectedUrns:eR,hasSelectedRows:eP.hasSelectedRows,resetSelections:eU,systemName:g,firstItemConsentStatus:p,handleBulkAdd:eZ,handleBulkAssignSystem:eG,handleBulkAddDataUse:eM,handleBulkIgnore:eV,handleBulkRestore:eX,handleAddAll:ez,anyBulkActionIsLoading:eN,isAddingResults:ef,isIgnoringResults:ej,isAddingAllResults:eC,isBulkUpdatingSystem:ew,isBulkAddingDataUses:eS,isRestoringResults:eT,disableAddAll:eA}},es=e=>{var t;let{monitorId:s,systemId:a,onSystemName:l}=e,[i,r]=(0,o.useState)(!1),[g,h]=(0,o.useState)(!1),[p,y]=(0,o.useState)(null),{columns:v,searchQuery:f,updateSearch:j,resetState:_,tableProps:C,selectionProps:w,filterTabs:k,activeTab:S,handleTabChange:E,activeParams:T,actionsDisabled:N,selectedUrns:A,hasSelectedRows:I,resetSelections:O,handleBulkAdd:D,handleBulkAssignSystem:R,handleBulkAddDataUse:L,handleBulkIgnore:U,handleBulkRestore:Z,handleAddAll:G,anyBulkActionIsLoading:M,isAddingAllResults:V,isBulkUpdatingSystem:X,isBulkAddingDataUses:z,disableAddAll:B}=et({monitorId:s,systemId:a,onSystemName:l,onShowBreakdown:(e,t)=>{y({stagedResource:e,status:t})}}),K=async e=>{await R(e),r(!1)},W=async e=>{await L(e),h(!1)};return s&&a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Niu,{"aria-label":"Asset state filter",mode:"horizontal",items:k.map(e=>({key:e.hash,label:e.label})),selectedKeys:[S],onClick:async e=>{await E(e.key)},className:"mb-4","data-testid":"asset-state-filter"}),(0,n.jsxs)(d.jqI,{justify:"space-between",align:"center",className:"mb-4",children:[(0,n.jsx)(m.f,{value:f,onChange:j,placeholder:"Search by asset name..."}),(0,n.jsxs)(d.vyj,{size:"large",children:[I&&(0,n.jsx)(c.a,{count:A.length}),(0,n.jsxs)(d.vyj,{size:"small",children:[(0,n.jsx)(d.wpx,{onClick:()=>{_(),O()},"data-testid":"clear-filters",children:"Clear filters"}),(0,n.jsx)(d.S0p,{overlayClassName:"bulk-actions-menu-dropdown",menu:{items:[...(null==T?void 0:null===(t=T.diff_status)||void 0===t?void 0:t.includes(u.LL.MUTED))?[{key:"restore",label:"Restore",onClick:Z}]:[{key:"add",label:"Add",onClick:D},{key:"add-data-use",label:"Add consent category",onClick:()=>h(!0)},{key:"assign-system",label:"Assign system",onClick:()=>r(!0)},{type:"divider"},{key:"ignore",label:"Ignore",onClick:U}]]},trigger:["click"],children:(0,n.jsx)(d.wpx,{icon:(0,n.jsx)(d.PJP._ME,{}),iconPosition:"end",loading:M,"data-testid":"bulk-actions-menu",disabled:!I||M||N,type:"primary",children:"Actions"})}),(0,n.jsx)(d.esZ,{title:B?"These assets require a system before you can add them to the inventory.":void 0,children:(0,n.jsx)(d.wpx,{onClick:G,disabled:B,loading:V,type:"primary",icon:(0,n.jsx)(d.PJP.MCw,{}),iconPosition:"end","data-testid":"add-all",children:"Add all"})})]})]})]}),(0,n.jsx)(d.V5H,{...C,columns:v,rowSelection:w,locale:{emptyText:(0,n.jsx)(d.oj8,{image:d.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})},"aria-labelledby":"breadcrumb-current-page"}),(0,n.jsx)(b,{isOpen:i,onClose:()=>{r(!1)},onSave:K,isSaving:X}),(0,n.jsx)(x,{isOpen:g,onClose:()=>{h(!1)},onSave:W,isSaving:z}),p&&(0,n.jsx)(P,{isOpen:!!p,stagedResource:p.stagedResource,status:p.status,onCancel:()=>{y(null)}})]}):null};var en=()=>{let e=(0,a.useRouter)(),t=decodeURIComponent(e.query.monitorId),s=decodeURIComponent(e.query.systemId),[d,c]=(0,o.useState)(s===i.Kl?"Uncategorized assets":s);return(0,n.jsxs)(l.Z,{title:"Action center - Discovered assets",children:[(0,n.jsx)(r.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:i.vi},{title:t,href:"".concat(i.vi,"/").concat(t)},{title:s===i.Kl?"Uncategorized assets":d}]}),(0,n.jsx)(es,{monitorId:t,systemId:s,onSystemName:c})]})}},31883:function(e,t,s){"use strict";s.d(t,{Bw:function(){return n.Bw},D4:function(){return n.D4}});var n=s(19043)},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}},18992:function(e){e.exports={cellBleed:"Cells_cellBleed__dik43"}}},function(e){e.O(0,[431,8765,9278,5163,7045,401,3585,7725,7929,2888,9774,179],function(){return e(e.s=25654)}),_N_E=e.O()}]);