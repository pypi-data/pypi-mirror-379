<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=Shift_JIS">
<title>FIEライブラリ: 画像ファイルアクセス</title>
<link href="fvalg-prod.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- 作成： Doxygen 1.5.6-FASTSP-p2 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="contents">
<h1>画像ファイルアクセス<br>
<small>
[<a class="el" href="group__FIE.html">FIE module</a>]</small>
</h1><hr><a name="_details"></a><h2>説明</h2>
本ライブラリは、画像ファイルの読込と保存を行うライブラリです。 ファイル形式は BMP, RAW, TIFF, PNG, JPEG の５種類が扱えます。 ただし、このうち TIFF, PNG, JPEG の３種はOSSを利用したライブラリとなっています。<p>
<dl class="user" compact><dt><b>関数の命名則</b></dt><dd>画像ファイルアクセスライブラリは、以下の関数命名則で構成されています。 <ul>
<li><b>fnFIE_load_xxx()</b> </li>
<li><b>fnFIE_save_xxx()</b> </li>
<li><b>fnFIE_check_xxx_info()</b> </li>
<li><b>fnFIE_load_core_xxx()</b> </li>
<li><b>fnFIE_save_core_xxx()</b> </li>
</ul>
xxxの部分には、画像ファイルの種類名(bmp, raw, ...)が入ります。 このうち <b>fnFIE_check_xxx_info()</b>, <b>fnFIE_load_core_xxx()</b>, <b>fnFIE_save_core_xxx()</b> は TIFF, PNG, JPEG 形式でのみ定義されている関数で、低レベル関数となります。</dd></dl>
<dl class="user" compact><dt><b>読み込み用関数</b></dt><dd>読み込みには <b>fnFIE_load_xxx()</b> を使用します。 <b>fnFIE_check_xxx_info()</b>, <b>fnFIE_load_core_xxx()</b> は、その内部に組み込まれています。 <b>fnFIE_load_xxx()</b> は、画像ファイルに応じて適切なFIE画像オブジェクトのメモリを内部で確保し、画像ファイルを読み込みます。 <b>fnFIE_check_xxx_info()</b> は、適切なFIE画像オブジェクトを確保するための情報を画像ファイルから取得します。 <b>fnFIE_load_core_xxx()</b> は、画像ファイルの読み込みをします。 <b>fnFIE_load_xxx()</b> を使用する場合、ユーザーは <b>fnFIE_check_xxx_info()</b> と <b>fnFIE_load_core_xxx()</b> を直接使用しません。 ユーザーが画像メモリの確保部分を、読み込み用の関数と切り離した実装を行いたいなどに、 <b>fnFIE_check_xxx_info()</b> と <b>fnFIE_load_core_xxx()</b> を直接使用します。 <b>fnFIE_load_core_xxx()</b> は、関数の内部で、画像ファイルに応じて適切なFIE画像オブジェクトを確保しません。 ユーザーが、適切なFIE画像オブジェクトを渡す必要があります。 <br>
<br>
 低レベル関数は、より多くのパラメータを指定することができます。 指定できるパラメータは、TIFF、PNG、JPEGで異なりますので、詳細は各ファイル形式毎の関数の説明を参照してください。 共通のパラメータとしては、コールバック関数を指定できます。 コールバック関数の詳細は後述します。 <br>
<br>
 なお、FIE画像オブジェクトの画素タイプがF_IMG_RGBQUADであった場合、rgbReserved は 0 となります。</dd></dl>
<dl class="user" compact><dt><b>書き込み用関数</b></dt><dd>書き込みには <b>fnFIE_save_xxx()</b> を使用します。 <b>fnFIE_save_core_xxx()</b> は、その内部に組み込まれています。 <b>fnFIE_save_xxx()</b> を使用した場合、保存される画像の１ピクセルあたりのビット深度は FIE画像オブジェクトの画素タイプから以下のように決定します。 <br>
<br>
 <table class="pretable">
<tr>
<th>&nbsp;</th><th>グレー</th><th>カラー </th></tr>
<tr>
<th>F_IMG_BIN</th><td>1（※1）</td><td>− </td></tr>
<tr>
<th>F_IMG_UC8</th><td>8</td><td>8×3 </td></tr>
<tr>
<th>F_IMG_RGBQUAD</th><td>−</td><td>raw以外:8×3,raw:8×4 </td></tr>
<tr>
<th>F_IMG_RGBTRIPLE</th><td>−</td><td>8×3 </td></tr>
<tr>
<th>F_IMG_US16</th><td>16</td><td>16×3 </td></tr>
<tr>
<th>F_IMG_S16</th><td>16</td><td>16×3 </td></tr>
<tr>
<th>F_IMG_UI32</th><td>32</td><td>32×3 </td></tr>
<tr>
<th>F_IMG_I32</th><td>32</td><td>32×3 </td></tr>
<tr>
<th>F_IMG_I64</th><td>64</td><td>64×3 </td></tr>
<tr>
<th>F_IMG_FLOAT</th><td>32</td><td>32×3 </td></tr>
<tr>
<th>F_IMG_DOUBLE</th><td>64</td><td>64×3 </td></tr>
</table>
<br>
 ※1 白黒画像 <br>
 ※2 F_IMG_UC8 以外の画像型は、関数によっては非対応となっているものがあります <br>
<br>
 FIE画像オブジェクトの画素タイプによりビット深度が決定された場合、 保存した画像ファイルを一般的な画像ビューワーでは、実際より暗い画像が表示されることがあります。 画像ファイルによっては、例えばグレー画像で、ビット深度を２ビットや４ビットなどを指定することも可能です。 <b>fnFIE_save_core_xxx()</b> を使用すると、FIE画像オブジェクトの画素タイプによらない真のビット深度を指定することができます。 この指定により、画像ビューワーで、適切な画像を表示できます。 ただし、すべての画像ビューワーが対応している訳ではありませんので、注意してください。 また、実際に保存された画像ファイルのビット深度は変更されません。 あくまで、見かけの値が変わるだけです。 指定可能な画像ファイルは、TIFFとPNGです。<br>
</dd></dl>
<dl class="user" compact><dt><b>コールバック関数</b></dt><dd>処理の進行状況を取得するためのコールバック関数を指定することができます。 コールバック関数は、低レベル関数 <b>fnFIE_load_core_xxx()</b> と <b>fnFIE_save_core_xxx()</b> で指定できます。 <b>fnFIE_load_xxx()</b> と <b>fnFIE_save_xxx()</b> では、指定できません。 進行状況は、１ラインを処理する毎に更新をされます。 １ライン毎の処理ができない画像ファイルは、コールバック関数が無効になります。 例えば、PNGファイルがインターレス形式で保存されている場合やTIFFファイルがタイル形式で保存されている場合などです。 コールバック関数の型ついては <a class="el" href="group__fie__file__image.html#gfeb8a40b07ac72e0e0dadb7ecbc39942">F_IMG_CALLBACK</a> を参照ください。 </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>モジュール</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image__core.html">低レベル関数</a></td></tr>

<tr><td colspan="2"><br><h2>データ構造</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structF__IMG__INFO.html">F_IMG_INFO</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">FIEイメージ用ヘッダー構造体  <a href="structF__IMG__INFO.html#_details">[詳細]</a><br></td></tr>
<tr><td colspan="2"><br><h2>型定義</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef BOOL(FVALGAPI *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#gfeb8a40b07ac72e0e0dadb7ecbc39942">F_IMG_CALLBACK</a> )(VOID *vpData, DOUBLE percentage)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">コールバック関数のポインタ型  <a href="#gfeb8a40b07ac72e0e0dadb7ecbc39942"></a><br></td></tr>
<tr><td colspan="2"><br><h2>列挙型</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__fie__file__image.html#gge1ca4e0484c0d907a215a44931bbcc9adb9994a1f48569964f60a6dd2eb91234">F_COLOR_IMG_TYPE_UC8</a> =  1, 
<a class="el" href="group__fie__file__image.html#gge1ca4e0484c0d907a215a44931bbcc9a07e38d9ea89596d3161c15fb9dbaa9d7">F_COLOR_IMG_TYPE_RGBQ</a> =  2, 
<br>
&nbsp;&nbsp;<a class="el" href="group__fie__file__image.html#gge1ca4e0484c0d907a215a44931bbcc9a98a63a07612d5bec92b9290778f42e06">F_COLOR_IMG_TYPE_RGBTRI</a> =  3
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">8ビットカラー画像読込用FIE画像の種別  <a href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">[詳細]</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g98a63859040944c066304c985dae4be6">f_png_strategy</a> { <a class="el" href="group__fie__file__image.html#gg98a63859040944c066304c985dae4be68d0aee8423af2a2447ad464a9578f84b">F_PNG_STRATEGY_DEFAULT</a> =  0, 
<a class="el" href="group__fie__file__image.html#gg98a63859040944c066304c985dae4be6a6d735456b518ad66e881017b1afbbed">F_PNG_STRATEGY_RLE</a> =  3
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PNGの圧縮戦略  <a href="group__fie__file__image.html#g98a63859040944c066304c985dae4be6">[詳細]</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g08757b1bde2d3153230704d33384db94">f_png_filter</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__fie__file__image.html#gg08757b1bde2d3153230704d33384db94f80fb0ff6c52da1827aef4bd6a024a4b">F_PNG_FILTER_NONE</a> =  0x08, 
<a class="el" href="group__fie__file__image.html#gg08757b1bde2d3153230704d33384db94a54c08a436445cef62c69709e690f396">F_PNG_FILTER_SUB</a> =  0x10, 
<br>
&nbsp;&nbsp;<a class="el" href="group__fie__file__image.html#gg08757b1bde2d3153230704d33384db9475ed2ba2bf8f6780f1ad5b5b0b10841d">F_PNG_FILTER_UP</a> =  0x20, 
<a class="el" href="group__fie__file__image.html#gg08757b1bde2d3153230704d33384db9461748835ff18e789f2b71ce266a5d599">F_PNG_FILTER_AVG</a> =  0x40, 
<br>
&nbsp;&nbsp;<a class="el" href="group__fie__file__image.html#gg08757b1bde2d3153230704d33384db9461ee7b1757ce33f5dda35da51682c2e5">F_PNG_FILTER_PAETH</a> =  0x80
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PNGのフィルタ種別  <a href="group__fie__file__image.html#g08757b1bde2d3153230704d33384db94">[詳細]</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g8d2609ff61f5bd24666e6c78d70c75ae">f_tiff_compression</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__fie__file__image.html#gg8d2609ff61f5bd24666e6c78d70c75ae6c29e09c3f33eace6d808c68a4af6b63">F_TIFF_COMPRESSION_NONE</a> =  1, 
<a class="el" href="group__fie__file__image.html#gg8d2609ff61f5bd24666e6c78d70c75ae14a33994a87cd6bfade852c9378581b7">F_TIFF_COMPRESSION_DEFLATE</a> =  2, 
<br>
&nbsp;&nbsp;<a class="el" href="group__fie__file__image.html#gg8d2609ff61f5bd24666e6c78d70c75aed9f323a393878a9e4989ef52365dbe45">F_TIFF_COMPRESSION_JPEG</a> =  3, 
<a class="el" href="group__fie__file__image.html#gg8d2609ff61f5bd24666e6c78d70c75aeee9ebcbe54b7241e5cd138a64f61e774">F_TIFF_COMPRESSION_CCITTFAX3</a> =  4, 
<br>
&nbsp;&nbsp;<a class="el" href="group__fie__file__image.html#gg8d2609ff61f5bd24666e6c78d70c75aeb39d435ec98827a4da5f05a5624c61c9">F_TIFF_COMPRESSION_CCITTFAX4</a> =  5
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">TIFFの圧縮形式  <a href="group__fie__file__image.html#g8d2609ff61f5bd24666e6c78d70c75ae">[詳細]</a><br></td></tr>
<tr><td colspan="2"><br><h2>関数</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#gd328309665f32a8897ef428299a0816a">fnFIE_load_bmp</a> (const CHAR *filename, FHANDLE *himg, enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a> type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ビットマップ読込  <a href="#gd328309665f32a8897ef428299a0816a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g9e2ba61427e7e6597ae83ce4b30f9c7a">fnFIE_save_bmp</a> (const CHAR *filename, FHANDLE himg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ビットマップ保存  <a href="#g9e2ba61427e7e6597ae83ce4b30f9c7a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g8be4f3da74066582498a00b10db65e32">fnFIE_load_raw</a> (const CHAR *filename, FHANDLE *himg, INT type, INT byte_order, INT byte_step, INT width, INT height, size_t header_sz)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">RAW画像読込  <a href="#g8be4f3da74066582498a00b10db65e32"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g2202b8d6370d73a83bc4eb9066bd486e">fnFIE_save_raw</a> (const CHAR *filename, FHANDLE himg, const VOID *header, size_t header_sz)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">画像をRAW形式で保存  <a href="#g2202b8d6370d73a83bc4eb9066bd486e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#ga735b6accb014c4d15eec6e422b6a7bb">fnFIE_load_img_file</a> (const CHAR *filename, FHANDLE *himg, enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a> type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  画像ファイルの読み込み  <a href="#ga735b6accb014c4d15eec6e422b6a7bb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#gd5c1cc62093a579719e1c775c04253bc">fnFIE_save_jpeg</a> (const CHAR *filename, const FHANDLE hImg, INT quality)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  JPEGファイルの保存  <a href="#gd5c1cc62093a579719e1c775c04253bc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g960ff9702e057177945348f75df537ec">fnFIE_load_jpeg</a> (const CHAR *filename, FHANDLE *hImg, enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a> type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  JPEGファイル読み込み  <a href="#g960ff9702e057177945348f75df537ec"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g5642cf383268870443617c385e28c18e">fnFIE_save_png</a> (const CHAR *filename, FHANDLE hImg, INT compression_level)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  PNGファイルの保存  <a href="#g5642cf383268870443617c385e28c18e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g4f78820e0502e03eae4157eadddf11fc">fnFIE_save_png_ex</a> (const CHAR *filename, FHANDLE hImg, INT compression_level, enum <a class="el" href="group__fie__file__image.html#g98a63859040944c066304c985dae4be6">f_png_strategy</a> compression_strategy, enum <a class="el" href="group__fie__file__image.html#g08757b1bde2d3153230704d33384db94">f_png_filter</a> filter_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  PNGファイルの保存（詳細設定付き）  <a href="#g4f78820e0502e03eae4157eadddf11fc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g03238db068bd08078fb1e29c1c31d8ac">fnFIE_load_png</a> (const CHAR *filename, FHANDLE *hImg, enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a> type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  PNGファイル読み込み  <a href="#g03238db068bd08078fb1e29c1c31d8ac"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#gca7a00987db232fc64f0093a1d11fa27">fnFIE_save_tiff</a> (const CHAR *filename, const FHANDLE hImg, enum <a class="el" href="group__fie__file__image.html#g8d2609ff61f5bd24666e6c78d70c75ae">f_tiff_compression</a> compression, INT quality)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  TIFFファイルの保存  <a href="#gca7a00987db232fc64f0093a1d11fa27"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#g5ee11eaf2aa5edb0d896d9259f983bec">fnFIE_load_tiff</a> (const CHAR *filename, FHANDLE *hImg, enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a> type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  TIFFファイル読み込み  <a href="#g5ee11eaf2aa5edb0d896d9259f983bec"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#gc86472dee6a8e0c41f108702efb5d53c">fnFIE_read_imgdata</a> (FHANDLE *himg, <a class="el" href="structfvstream.html">fvstream</a> *s, INT *size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  画像データ読込  <a href="#gc86472dee6a8e0c41f108702efb5d53c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">INT FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__file__image.html#gba7d5f45f8375a8842b6121c7ade9dbd">fnFIE_write_imgdata</a> (FHANDLE himg, <a class="el" href="structfvstream.html">fvstream</a> *s, INT comp_level, INT *size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  画像データ書込  <a href="#gba7d5f45f8375a8842b6121c7ade9dbd"></a><br></td></tr>
</table>
<hr><h2>型定義</h2>
<a class="anchor" name="gfeb8a40b07ac72e0e0dadb7ecbc39942"></a><!-- doxytag: member="fie.h::F_IMG_CALLBACK" ref="gfeb8a40b07ac72e0e0dadb7ecbc39942" args=")(VOID *vpData, DOUBLE percentage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef BOOL(FVALGAPI * <a class="el" href="group__fie__file__image.html#gfeb8a40b07ac72e0e0dadb7ecbc39942">F_IMG_CALLBACK</a>)(VOID *vpData, DOUBLE percentage)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
コールバック関数のポインタ型 
<p>
TIFF、JPEG、PNGファイル用のコールバック関数のポインタ型です。 ファイル入出力の進行状況などを確認するために使用します。 コールバック関数は、ユーザーが用途に合わせて作成してください。<p>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vpData</em>&nbsp;</td><td>コールバック関数の呼び出し時に渡される任意のポインタ </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>percentage</em>&nbsp;</td><td>ファイル入出力の進行状況[%]</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TURE</em>&nbsp;</td><td>処理を継続 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FALSE</em>&nbsp;</td><td>処理を中止 </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>列挙型</h2>
<a class="anchor" name="ge1ca4e0484c0d907a215a44931bbcc9a"></a><!-- doxytag: member="fie.h::f_color_img_type" ref="ge1ca4e0484c0d907a215a44931bbcc9a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
8ビットカラー画像読込用FIE画像の種別 
<p>
読み込む画像ファイルが8ビットカラー画像であり、読込先のFIE画像オブジェクトを<ol type=1>
<li>F_IMG_UC8の3チャネル画像</li><li>F_IMG_RGBQUADの1チャネル画像</li><li>F_IMG_RGBTRIPLEの1チャネル画像</li></ol>
<p>
のうち、どれでも構成可能な場合に どの形式で画像オブジェクトを生成するかを指定するための列挙子です。 <dl compact><dt><b>列挙型の値: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gge1ca4e0484c0d907a215a44931bbcc9adb9994a1f48569964f60a6dd2eb91234"></a><!-- doxytag: member="F_COLOR_IMG_TYPE_UC8" ref="gge1ca4e0484c0d907a215a44931bbcc9adb9994a1f48569964f60a6dd2eb91234" args="" -->F_COLOR_IMG_TYPE_UC8</em>&nbsp;</td><td>
F_IMG_UC8, 3chで読込 </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gge1ca4e0484c0d907a215a44931bbcc9a07e38d9ea89596d3161c15fb9dbaa9d7"></a><!-- doxytag: member="F_COLOR_IMG_TYPE_RGBQ" ref="gge1ca4e0484c0d907a215a44931bbcc9a07e38d9ea89596d3161c15fb9dbaa9d7" args="" -->F_COLOR_IMG_TYPE_RGBQ</em>&nbsp;</td><td>
F_IMG_RGBQUAD, 1chで保存 </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gge1ca4e0484c0d907a215a44931bbcc9a98a63a07612d5bec92b9290778f42e06"></a><!-- doxytag: member="F_COLOR_IMG_TYPE_RGBTRI" ref="gge1ca4e0484c0d907a215a44931bbcc9a98a63a07612d5bec92b9290778f42e06" args="" -->F_COLOR_IMG_TYPE_RGBTRI</em>&nbsp;</td><td>
F_IMG_RGBTRIPLE, 1chで保存 </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="g98a63859040944c066304c985dae4be6"></a><!-- doxytag: member="fie.h::f_png_strategy" ref="g98a63859040944c066304c985dae4be6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__fie__file__image.html#g98a63859040944c066304c985dae4be6">f_png_strategy</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
PNGの圧縮戦略 
<p>
PNGファイルの保存時に使用する圧縮戦略です。 圧縮率と圧縮速度に影響します。 <dl compact><dt><b>列挙型の値: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg98a63859040944c066304c985dae4be68d0aee8423af2a2447ad464a9578f84b"></a><!-- doxytag: member="F_PNG_STRATEGY_DEFAULT" ref="gg98a63859040944c066304c985dae4be68d0aee8423af2a2447ad464a9578f84b" args="" -->F_PNG_STRATEGY_DEFAULT</em>&nbsp;</td><td>
デフォルトの圧縮戦略（高圧縮） </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg98a63859040944c066304c985dae4be6a6d735456b518ad66e881017b1afbbed"></a><!-- doxytag: member="F_PNG_STRATEGY_RLE" ref="gg98a63859040944c066304c985dae4be6a6d735456b518ad66e881017b1afbbed" args="" -->F_PNG_STRATEGY_RLE</em>&nbsp;</td><td>
ランレングスを用いる圧縮戦略（高速） </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="g08757b1bde2d3153230704d33384db94"></a><!-- doxytag: member="fie.h::f_png_filter" ref="g08757b1bde2d3153230704d33384db94" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__fie__file__image.html#g08757b1bde2d3153230704d33384db94">f_png_filter</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
PNGのフィルタ種別 
<p>
PNGファイルの保存時に使用するフィルタ種別です。 圧縮率と圧縮速度に影響します。 <dl compact><dt><b>列挙型の値: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg08757b1bde2d3153230704d33384db94f80fb0ff6c52da1827aef4bd6a024a4b"></a><!-- doxytag: member="F_PNG_FILTER_NONE" ref="gg08757b1bde2d3153230704d33384db94f80fb0ff6c52da1827aef4bd6a024a4b" args="" -->F_PNG_FILTER_NONE</em>&nbsp;</td><td>
フィルタなし </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg08757b1bde2d3153230704d33384db94a54c08a436445cef62c69709e690f396"></a><!-- doxytag: member="F_PNG_FILTER_SUB" ref="gg08757b1bde2d3153230704d33384db94a54c08a436445cef62c69709e690f396" args="" -->F_PNG_FILTER_SUB</em>&nbsp;</td><td>
左側との差分 </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg08757b1bde2d3153230704d33384db9475ed2ba2bf8f6780f1ad5b5b0b10841d"></a><!-- doxytag: member="F_PNG_FILTER_UP" ref="gg08757b1bde2d3153230704d33384db9475ed2ba2bf8f6780f1ad5b5b0b10841d" args="" -->F_PNG_FILTER_UP</em>&nbsp;</td><td>
上側との差分 </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg08757b1bde2d3153230704d33384db9461748835ff18e789f2b71ce266a5d599"></a><!-- doxytag: member="F_PNG_FILTER_AVG" ref="gg08757b1bde2d3153230704d33384db9461748835ff18e789f2b71ce266a5d599" args="" -->F_PNG_FILTER_AVG</em>&nbsp;</td><td>
左側と上側の平均値との差分 </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg08757b1bde2d3153230704d33384db9461ee7b1757ce33f5dda35da51682c2e5"></a><!-- doxytag: member="F_PNG_FILTER_PAETH" ref="gg08757b1bde2d3153230704d33384db9461ee7b1757ce33f5dda35da51682c2e5" args="" -->F_PNG_FILTER_PAETH</em>&nbsp;</td><td>
Paeth値との差分 </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="g8d2609ff61f5bd24666e6c78d70c75ae"></a><!-- doxytag: member="fie.h::f_tiff_compression" ref="g8d2609ff61f5bd24666e6c78d70c75ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__fie__file__image.html#g8d2609ff61f5bd24666e6c78d70c75ae">f_tiff_compression</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
TIFFの圧縮形式 
<p>
TIFFファイルの保存時に選択する圧縮形式です。 JPEG圧縮は非可逆圧縮（情報損失あり）です。 それ以外の圧縮形式は、可逆圧縮（情報損失なし）です。 <dl compact><dt><b>列挙型の値: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg8d2609ff61f5bd24666e6c78d70c75ae6c29e09c3f33eace6d808c68a4af6b63"></a><!-- doxytag: member="F_TIFF_COMPRESSION_NONE" ref="gg8d2609ff61f5bd24666e6c78d70c75ae6c29e09c3f33eace6d808c68a4af6b63" args="" -->F_TIFF_COMPRESSION_NONE</em>&nbsp;</td><td>
圧縮なしで保存 </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg8d2609ff61f5bd24666e6c78d70c75ae14a33994a87cd6bfade852c9378581b7"></a><!-- doxytag: member="F_TIFF_COMPRESSION_DEFLATE" ref="gg8d2609ff61f5bd24666e6c78d70c75ae14a33994a87cd6bfade852c9378581b7" args="" -->F_TIFF_COMPRESSION_DEFLATE</em>&nbsp;</td><td>
gzipの圧縮アルゴリズムで保存 </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg8d2609ff61f5bd24666e6c78d70c75aed9f323a393878a9e4989ef52365dbe45"></a><!-- doxytag: member="F_TIFF_COMPRESSION_JPEG" ref="gg8d2609ff61f5bd24666e6c78d70c75aed9f323a393878a9e4989ef52365dbe45" args="" -->F_TIFF_COMPRESSION_JPEG</em>&nbsp;</td><td>
JPEG圧縮(非可逆圧縮)で保存(８ビット画像のみサポート) </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg8d2609ff61f5bd24666e6c78d70c75aeee9ebcbe54b7241e5cd138a64f61e774"></a><!-- doxytag: member="F_TIFF_COMPRESSION_CCITTFAX3" ref="gg8d2609ff61f5bd24666e6c78d70c75aeee9ebcbe54b7241e5cd138a64f61e774" args="" -->F_TIFF_COMPRESSION_CCITTFAX3</em>&nbsp;</td><td>
CCITTファックス（FAX3）で保存(白黒画像のみサポート) </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg8d2609ff61f5bd24666e6c78d70c75aeb39d435ec98827a4da5f05a5624c61c9"></a><!-- doxytag: member="F_TIFF_COMPRESSION_CCITTFAX4" ref="gg8d2609ff61f5bd24666e6c78d70c75aeb39d435ec98827a4da5f05a5624c61c9" args="" -->F_TIFF_COMPRESSION_CCITTFAX4</em>&nbsp;</td><td>
CCITTファックス（FAX4）で保存(白黒画像のみサポート) </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>関数</h2>
<a class="anchor" name="gd328309665f32a8897ef428299a0816a"></a><!-- doxytag: member="fie_bmpio.c::fnFIE_load_bmp" ref="gd328309665f32a8897ef428299a0816a" args="(const CHAR *filename, FHANDLE *himg, enum f_color_img_type type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_load_bmp           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FHANDLE *&nbsp;</td>
          <td class="paramname"> <em>himg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
ビットマップ読込 
<p>
BMP形式の画像ファイルをファイルからFIE画像オブジェクトに読込みます。<p>
読み込み可能なBMP形式は下記の通りです。<ul>
<li>bpp==1 の２値白黒 <br>
 F_IMG_BIN型の２値画像として読込む。</li><li>bpp==8 のパレットカラー <br>
 パレットの状態にかかわらず、 F_IMG_UC8型の濃淡画像として読込む。 <br>
 この時、パレット色から濃淡への変換は、(R+G+B)/3 で行う。</li><li>bpp==24 or bpp==32 のカラー画像 <br>
 F_IMG_RGBQUAD型のカラー画像、F_IMG_RGBTRIPLE型のカラー画像、 F_IMG_UC8 チャネル数３の画像のいずれかとして読み込む。 どの形式にするかは <em>type</em> パラメータにより指定する。</li></ul>
<p>
<em>himg</em> パラメータには読込先画像オブジェクトを指定します。 <em>*himg</em> へ既に確保された画像オブジェクトを指示した場合は、 その画像オブジェクトに対して画像を読み込みます。 この際 <em>*himg</em> へ指定する画像は必ずルート画像でなければなりません。 また、指定されたルート画像の幅や高さ等がBMPファイルと異なっている 場合には、本関数内部で自動的にリサイズが行われます。 <em>*himg</em> へNULLが指定された場合には、本関数内部で自動的に ルート画像を確保し <em>*himg</em> へ代入して返します。 この場合、ユーザーは <em>*himg</em> が不要になった後に <a class="el" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object()</a> を コールしてメモリを解放する必要があります。<p>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>読込む画像ファイル名 </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>himg</em>&nbsp;</td><td>読込み先ルート画像オブジェクトハンドル </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>出力するFIE画像オブジェクトの画像形式が F_IMG_UC8、F_IMG_RGBQUAD、 F_IMG_RGBTRIPLEのいずれかを選択可能な場合に、どの画素形式とするかを指定します。 その他の場合では無視されます。 <ul>
<li>F_COLOR_IMG_TYPE_UC8: F_IMG_UC8で出力する </li>
<li>F_COLOR_IMG_TYPE_RGBQ: F_IMG_RGBQUADで出力する </li>
<li>F_COLOR_IMG_TYPE_RGBTRI: F_IMG_RGBRIPLEで出力する</li>
</ul>
</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足で確保に失敗した </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_UNSUPPORTED_IMAGE_FILE</em>&nbsp;</td><td>サポートされていない形式のBMPファイル </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>BMPファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g9e2ba61427e7e6597ae83ce4b30f9c7a"></a><!-- doxytag: member="fie_bmpio.c::fnFIE_save_bmp" ref="g9e2ba61427e7e6597ae83ce4b30f9c7a" args="(const CHAR *filename, FHANDLE himg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_save_bmp           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FHANDLE&nbsp;</td>
          <td class="paramname"> <em>himg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
ビットマップ保存 
<p>
指定の画像をビットマップファイルとして保存します。<p>
<em>himg</em> パラメータにて指定される画像は、 下記の条件のいずれかを満たしていなければなりません。 <ul>
<li>F_IMG_BIN形式 かつ チャネル数１ </li>
<li>F_IMG_UC8形式 かつ チャネル数１ </li>
<li>F_IMG_UC8形式 かつ チャネル数３ </li>
<li>F_IMG_RGBQUAD形式 かつ チャネル数１ </li>
<li>F_IMG_RGBTRIPLE形式 かつ チャネル数１</li>
</ul>
なお <em>himg</em> パラメータにて指定される画像は、ルート画像でもチャイルド画像でも構いません。 チャイルド画像が指定された場合には、チャイルド画像のサイズと同じサイズの BMP画像ファイルが生成されます。<p>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>保存画像ファイル名 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>himg</em>&nbsp;</td><td>保存する画像( type: bin, uc8, rgbq, rgbtri )</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>BMPファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g8be4f3da74066582498a00b10db65e32"></a><!-- doxytag: member="fie_rawio.c::fnFIE_load_raw" ref="g8be4f3da74066582498a00b10db65e32" args="(const CHAR *filename, FHANDLE *himg, INT type, INT byte_order, INT byte_step, INT width, INT height, size_t header_sz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_load_raw           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FHANDLE *&nbsp;</td>
          <td class="paramname"> <em>himg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>byte_order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>byte_step</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>header_sz</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
RAW画像読込 
<p>
指定のRAW画像ファイルを、指定のFIE画像オブジェクトに読込みます。<p>
<em>*himg</em> パラメータには読込先画像オブジェクトを指定します。 <em>*himg</em> へ既に確保された画像オブジェクトを指示した場合は、その画像オブジェクトに対して画像を読み込みます。 この際 <em>himg</em> へ指定する画像は必ずルート画像でなければなりません。 指定されたルート画像は引数の <em>width</em>, <em>height</em> 及び <em>type</em> で指定された値に本関数内部で自動的にリサイズが行われます。<p>
<em>*himg</em> へNULLが指定された場合には、本関数内部で自動的にルート画像を確保し <em>*himg</em> へ代入して返します。 この場合、ユーザーは <em>*himg</em> が不要になった後に <a class="el" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object()</a> をコールしてメモリを解放する必要があります。<p>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>読み込む画像ファイル名 </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>himg</em>&nbsp;</td><td>読込先画像のハンドラ </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>RAW画像ファイルの画像タイプ <ul>
<li>F_IMG_BIN ２値画像(32bitパッキング) </li>
<li>F_IMG_UC8 濃淡8bit画像 </li>
<li>F_IMG_S16 濃淡符号付き16bit画像 </li>
<li>F_IMG_US16 濃淡16bit画像 </li>
<li>F_IMG_I32 濃淡符号付き32bit画像 </li>
<li>F_IMG_UI32 濃淡32bit画像 </li>
<li>F_IMG_I64 濃淡符号付き64bit画像 </li>
<li>F_IMG_FLOAT 濃淡単精度浮動小数点画像 </li>
<li>F_IMG_DOUBLE 濃淡倍精度浮動小数点画像 </li>
<li>F_IMG_RGBQUAD RGBQUADの配列で表される、8bitカラー画像 </li>
<li>F_IMG_RGBTRIPLE 24bitパッキングカラー画像 </li>
</ul>
</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>byte_order</em>&nbsp;</td><td>RAW画像のバイトオーダー <ul>
<li>0 Little Endian </li>
<li>1 Big Endian </li>
</ul>
</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>byte_step</em>&nbsp;</td><td>RAW画像ファイルの１行ステップ（バイト数） </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>width</em>&nbsp;</td><td>RAW画像ファイルの画像幅 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>height</em>&nbsp;</td><td>RAW画像ファイルの画像高さ </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>header_sz</em>&nbsp;</td><td>RAW画像のヘッダサイズ(byte単位)</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正な画像オブジェクトが指定されたため異常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが指定されたため異常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足のため異常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>ファイルI/Oエラー </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g2202b8d6370d73a83bc4eb9066bd486e"></a><!-- doxytag: member="fie_rawio.c::fnFIE_save_raw" ref="g2202b8d6370d73a83bc4eb9066bd486e" args="(const CHAR *filename, FHANDLE himg, const VOID *header, size_t header_sz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_save_raw           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FHANDLE&nbsp;</td>
          <td class="paramname"> <em>himg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const VOID *&nbsp;</td>
          <td class="paramname"> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>header_sz</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
画像をRAW形式で保存 
<p>
指定の画像をRAW形式で保存します。 本関数で保存した画像ファイルのエンディアンは使用するCPUのモードに依存し、 x86系の場合はLittleEndianになります。また、画像の１行ステップは下記の通りとなります <ul>
<li>F_IMG_BINの場合 ((画像幅) / 32) * 4 (※32での割算の余りは切り上げる。ex. 31/32*4 -&gt; 4 ) </li>
<li>F_IMG_UC8の場合 (画像幅) * 1 </li>
<li>F_IMG_S16の場合 (画像幅) * 2 </li>
<li>F_IMG_US16の場合 (画像幅) * 2 </li>
<li>F_IMG_I32の場合 (画像幅) * 4 </li>
<li>F_IMG_UI32の場合 (画像幅) * 4 </li>
<li>F_IMG_I64の場合 (画像幅) * 8 </li>
<li>F_IMG_FLOATの場合 (画像幅) * 4 </li>
<li>F_IMG_DOBULEの場合 (画像幅) * 8 </li>
<li>F_IMG_RGBQUADの場合 (画像幅) * 4 </li>
<li>F_IMG_RGBTRIPLEの場合 (画像幅) * 3</li>
</ul>
なお <em>himg</em> パラメータにて指定される画像は、ルート画像でもチャイルド画像でも構いません。 チャイルド画像が指定された場合には、チャイルド画像のサイズと同じサイズの RAW画像ファイルが生成されます。<p>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>保存画像ファイル名 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>himg</em>&nbsp;</td><td>保存する画像のハンドル </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>header</em>&nbsp;</td><td>RAW画像のヘッダデータ </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>header_sz</em>&nbsp;</td><td>RAW画像のヘッダサイズ(==headerのサイズ) (byte単位)</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正な画像オブジェクトが指定されたため異常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが指定されたため異常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>ファイルI/Oエラー </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="ga735b6accb014c4d15eec6e422b6a7bb"></a><!-- doxytag: member="fie_imgfile.c::fnFIE_load_img_file" ref="ga735b6accb014c4d15eec6e422b6a7bb" args="(const CHAR *filename, FHANDLE *himg, enum f_color_img_type type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_load_img_file           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FHANDLE *&nbsp;</td>
          <td class="paramname"> <em>himg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  画像ファイルの読み込み 
<p>
指定されたファイルの内容から種別を自動で判別し、 対応形式であった場合、それをFIE画像オブジェクトに読み込みます。 対応画像形式は BMP, PNG, JPEG, TIFF の４種類です。 非対応形式の画像ファイルが指定された場合には F_ERR_UNSUPPORTED_IMAGE_FILE を返します。<p>
<em>himg</em> パラメータには読込先画像オブジェクトを指定します。 <em>*himg</em> へ既に確保された画像オブジェクトを指示した場合は、 その画像オブジェクトに対して画像を読み込みます。 この際 <em>*himg</em> へ指定する画像は必ずルート画像でなければなりません。 また、指定されたルート画像の幅や高さ等が画像ファイルと異なっている 場合には、本関数内部で自動的にリサイズが行われます。 <em>*himg</em> へNULLが指定された場合には、本関数内部で自動的に ルート画像を確保し <em>*himg</em> へ代入して返します。 この場合、ユーザーは <em>*himg</em> が不要になった後に <a class="el" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object()</a> を コールしてメモリを解放する必要があります。<p>
BMP, PNG, JPEG, TIFF の各形式の読み込みは、下記の関数が内部で用いられます。 <ul>
<li>BMPファイル: <a class="el" href="group__fie__file__image.html#gd328309665f32a8897ef428299a0816a" title="ビットマップ読込">fnFIE_load_bmp()</a> </li>
<li>PNGファイル: <a class="el" href="group__fie__file__image.html#g03238db068bd08078fb1e29c1c31d8ac" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  PNGファイル読...">fnFIE_load_png()</a> </li>
<li>JPEGファイル: <a class="el" href="group__fie__file__image.html#g960ff9702e057177945348f75df537ec" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  JPEGファイル読...">fnFIE_load_jpeg()</a> </li>
<li>TIFFファイル: <a class="el" href="group__fie__file__image.html#g5ee11eaf2aa5edb0d896d9259f983bec" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  TIFFファイル読...">fnFIE_load_tiff()</a></li>
</ul>
それぞれの詳細仕様に関してはリンク先の各関数のドキュメントを参照してください。<p>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>読み込む画像ファイル名 </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>himg</em>&nbsp;</td><td>読み込み先ルート画像オブジェクトのハンドルのポインタ </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>出力するFIE画像オブジェクトの画像形式が F_IMG_UC8 または F_IMG_RGBQUAD を 選択可能な場合に、どちらの画素形式とするかを指定します。 その他の場合では無視されます。 <ul>
<li>F_COLOR_IMG_TYPE_UC8: F_IMG_UC8で出力する </li>
<li>F_COLOR_IMG_TYPE_RGBQ: F_IMG_RGBQUADで出力する</li>
</ul>
</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足で確保に失敗した </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>ファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_UNSUPPORTED_IMAGE_FILE</em>&nbsp;</td><td>不正なファイルを読み込んだ </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gd5c1cc62093a579719e1c775c04253bc"></a><!-- doxytag: member="fie_jpegio.c::fnFIE_save_jpeg" ref="gd5c1cc62093a579719e1c775c04253bc" args="(const CHAR *filename, const FHANDLE hImg, INT quality)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_save_jpeg           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FHANDLE&nbsp;</td>
          <td class="paramname"> <em>hImg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>quality</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  JPEGファイルの保存 
<p>
指定したFIE画像オブジェクトをJPEGファイルとして保存します。<p>
<dl class="user" compact><dt><b>FIE画像オブジェクトとの対応</b></dt><dd>保存されるFIE画像オブジェクトと対応するチャネル数は、以下の通りとなります。 なお、下記以外のFIE画像オブジェクトが渡された場合は、エラーとなります。 <ul>
<li>
F_IMG_UC8 （チャネル数 1、3） </li>
<li>
F_IMG_RGBQUAD （チャネル数 1） </li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd><em>hImg</em> パラメータにて指定される画像オブジェクトは、ルート画像でもチャイルド画像でも構いません。 チャイルド画像が指定された場合には、チャイルド画像のサイズと同じサイズのJPEGファイルが生成されます。</dd></dl>
<dl class="user" compact><dt><b>圧縮</b></dt><dd><em>quality</em> パラメータで、保存する JPEGファイルの品質を設定できます。 品質は 0〜100の範囲で指定できます。 範囲外の値を指定した場合にはエラーとなります。 値が小さいほど圧縮率は高くなり、品質が高ければ画像サイズは大きくなります。</dd></dl>
<dl class="user" compact><dt><b>使用例</b></dt><dd><a class="el" href="group__fie__file__image.html#g960ff9702e057177945348f75df537ec" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  JPEGファイル読...">fnFIE_load_jpeg()</a> の例を参照してください。</dd></dl>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>保存するJPEGファイル名 </td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>hImg</em>&nbsp;</td><td>保存するFIE画像 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>quality</em>&nbsp;</td><td>保存するJPEGファイルの品質[0,100]</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足で確保に失敗した </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>JPEGファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_UNSUPPORTED_IMAGE_FILE</em>&nbsp;</td><td>不正なJPEGファイルへ書き込んだ </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g960ff9702e057177945348f75df537ec"></a><!-- doxytag: member="fie_jpegio.c::fnFIE_load_jpeg" ref="g960ff9702e057177945348f75df537ec" args="(const CHAR *filename, FHANDLE *hImg, enum f_color_img_type type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_load_jpeg           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FHANDLE *&nbsp;</td>
          <td class="paramname"> <em>hImg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  JPEGファイル読み込み 
<p>
JPEGファイルをFIE画像オブジェクトに読み込みます。<p>
<dl class="user" compact><dt><b>FIE画像との対応</b></dt><dd>読み込み可能なJPEGファイルを以下に示します。 なお、JPEGファイル、FIE画像のパラメータが以下と異なる場合はエラーとなります。 <ul>
<li>
グレー画像 <ul>
<li>
F_IMG_UC8（ビット深度8） </li>
<li>
JPEGファイル、FIE画像共に、チャネル数は1とする。 </li>
</ul>
</li>
<li>
カラー画像 <ul>
<li>
F_IMG_RGBQUAD（ビット深度8 ※1 ※2） </li>
<li>
F_IMG_UC8（ビット深度8 ※1） </li>
<li>
JPEGファイルのチャネル数は3とする。 </li>
<li>
FIE画像のチャネル数はF_IMG_UC8は 3、F_IMG_RGBQUADは 1である。 </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd>※1 読み込み先がF_IMG_RGBQUADかF_IMG_UC8かの判断は、f_color_img_typeパラメータで決定されます。<br>
 ※2 rgbReserved は 0 となります。</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd><em>hImg</em> パラメータには読み込み先画像オブジェクトを指定します。 <em>*hImg</em> へ既に確保された画像オブジェクトを指定した場合は、その画像オブジェクトに対して画像を読み込みます。 この際 <em>*hImg</em> へ指定する画像オブジェクトは必ずルート画像でなければなりません。 また、指定されたルート画像の幅や高さ等が JPEGファイルと異なっている場合には、 本関数内部で自動的にリサイズを行います。 <em>*hImg</em> へNULLが指定された場合には、本関数内部で自動的にルート画像を確保し <em>*hImg</em> へ代入して返します。 この場合、ユーザーは <em>*hImg</em> が不要になった後に <a class="el" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object()</a> をコールしてメモリを解放することが必要となります。</dd></dl>
<dl class="user" compact><dt><b>使用例</b></dt><dd><div class="fragment"><pre class="fragment"><span class="comment">// エラー処理は省略しているので注意して下さい。</span>
<span class="preprocessor">#include "fie.h"</span>

VOID sample1()
{
    FHANDLE himg = NULL;

    <span class="comment">// JPEGファイルを読み込みます。</span>
    <span class="comment">// F_COLOR_IMG_TYPE_UC8 は、カラー画像を読み込む際に、FIEオブジェクトの画素タイプを指定します。</span>
    <span class="comment">// F_COLOR_IMG_TYPE_UC8 は、F_IMG_UC8 の ３チャネル</span>
    <span class="comment">// F_COLOR_IMG_TYPE_RGBQ は、F_IMG_RGBQUAD の１チャネルに対応しています。</span>
    <a class="code" href="group__fie__file__image.html#g960ff9702e057177945348f75df537ec" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  JPEGファイル読...">fnFIE_load_jpeg</a>( <span class="stringliteral">"test.jpeg"</span>, &amp;himg, <a class="code" href="group__fie__file__image.html#gge1ca4e0484c0d907a215a44931bbcc9adb9994a1f48569964f60a6dd2eb91234" title="F_IMG_UC8, 3chで読込">F_COLOR_IMG_TYPE_UC8</a> );

    <span class="comment">// JPEGファイルへ書き込みます。</span>
    <span class="comment">// 保存するファイルの品質を 100（画像サイズは最大）と指定します。</span>
    <a class="code" href="group__fie__file__image.html#gd5c1cc62093a579719e1c775c04253bc" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  JPEGファイルの...">fnFIE_save_jpeg</a>( <span class="stringliteral">"result.jpeg"</span>, himg, 100 );

    <a class="code" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object</a>( himg );

    <span class="keywordflow">return</span>;
}

<span class="comment">// コールバック関数の例</span>
<span class="comment">// 処理の進行状況をパーセンテージで取得します。</span>
BOOL callback( VOID *vpData, DOUBLE percentage )
{
    <span class="comment">// vpDataは、一つ前に呼び出されたときの、percentageの値を保持</span>
    <span class="keywordflow">if</span>( vpData ){
        <span class="keywordflow">if</span>( *( (DOUBLE* )vpData ) &gt; percentage )
            <span class="keywordflow">return</span> FALSE;

         *( (DOUBLE* )vpData ) = percentage;
    }
    <span class="keywordflow">return</span> TRUE;
}

<span class="comment">// 低レベル関数を使用した場合</span>
VOID sample2()
{
    FHANDLE himg = NULL;
    <a class="code" href="structF__IMG__INFO.html" title="FIEイメージ用ヘッダー構造体">F_IMG_INFO</a> jpeg_info;
    DOUBLE percentage;
    DOUBLE *p_percentage = NULL;    <span class="comment">// コールバック関数の呼び出し時に渡される任意のポインタ</span>

    <span class="comment">// 低レベル関数では、メモリ確保は自身で行う必要があります。</span>
    <span class="comment">// そのために、JPEGファイルの内容を確認します。</span>
    <a class="code" href="group__fie__file__image__core.html#g2a6e203e6502b73e5ad99d0df321deb1" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  JPEGファイルの...">fnFIE_check_jpeg_info</a>( <span class="stringliteral">"test.jpeg"</span>, <a class="code" href="group__fie__file__image.html#gge1ca4e0484c0d907a215a44931bbcc9adb9994a1f48569964f60a6dd2eb91234" title="F_IMG_UC8, 3chで読込">F_COLOR_IMG_TYPE_UC8</a>, &amp;jpeg_info );

    <span class="comment">// JPEGファイル読み込みのためのメモリを確保します。</span>
    himg = <a class="code" href="group__fie__image.html#ge1fb319dbc93c5bbaba49d39904ca491" title="ルート画像の確保">fnFIE_img_root_alloc</a>( jpeg_info.<a class="code" href="structF__IMG__INFO.html#355ed373ffb5b4318fd11457d0dfb5fc">type</a>, jpeg_info.<a class="code" href="structF__IMG__INFO.html#b751e6c3a4b654e8f414516119a75a97">channel</a>, jpeg_info.<a class="code" href="structF__IMG__INFO.html#5cc07dd4a38202802421fbb95853a640">width</a>, jpeg_info.<a class="code" href="structF__IMG__INFO.html#854057f200703039a99f26bd71d470dc">height</a> );
    percentage = 0;
    p_percentage = &amp;percentage;

    <span class="comment">// JPEGファイルを読み込みます。</span>
    <span class="comment">// 進行状況を確認するために、コールバック関数を指定します。</span>
    <span class="comment">// コールバック関数は、省略可能です。</span>
    <a class="code" href="group__fie__file__image__core.html#gcae8e70ee3caaccdddb8b71f544a533b" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  JPEGファイル読...">fnFIE_load_core_jpeg</a>( <span class="stringliteral">"test.jpeg"</span>, himg, (<a class="code" href="group__fie__file__image.html#gfeb8a40b07ac72e0e0dadb7ecbc39942" title="コールバック関数のポインタ型">F_IMG_CALLBACK</a>)callback, (VOID*)p_percentage );

    <span class="comment">// JPEGファイルへ書き込みます。</span>
    <span class="comment">// 品質は 0（圧縮率が最大となります） を指定します。</span>
    percentage = 0;
    <a class="code" href="group__fie__file__image__core.html#gffa8c7efdbd8cc22aa1fb10dec96cf4b" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  JPEGファイルの...">fnFIE_save_core_jpeg</a>( <span class="stringliteral">"result.jpeg"</span>, himg, 0, (<a class="code" href="group__fie__file__image.html#gfeb8a40b07ac72e0e0dadb7ecbc39942" title="コールバック関数のポインタ型">F_IMG_CALLBACK</a>)callback, (VOID*)p_percentage );

    <a class="code" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object</a>( himg );

    <span class="keywordflow">return</span>;
}

INT main()
{
    <span class="comment">// FIEライブラリの使用前に必ずコールする必要があります。</span>
    <a class="code" href="group__fie__libinit.html#g12250eabf0163ce206c4caa007b33a80" title="FIEライブラリの初期化">fnFIE_setup</a>();

    sample1();
    sample2();

    <span class="comment">// 終了処理</span>
    <a class="code" href="group__fie__libinit.html#gcf71693a1b50ed7ce9947ac8179cbfc3" title="FIEライブラリの終了処理">fnFIE_teardown</a>();

    <span class="keywordflow">return</span> 0;
}
</pre></div></dd></dl>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>読み込むJPEGファイル名 </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>hImg</em>&nbsp;</td><td>読み込み先ルート画像オブジェクトのハンドルのポインタ </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>FIE画像オブジェクトの、F_IMG_UC8、またはF_IMG_RGBQUADで保存可能な場合の画素タイプを指定する。 それ以外のタイプでは無視される。 <ul>
<li>F_IMG_UC8で保存する場合は、F_COLOR_IMG_TYPE_UC8を指定 </li>
<li>F_IMG_RGBQUADで保存する場合は、F_COLOR_IMG_TYPE_RGBQを指定</li>
</ul>
</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足で確保に失敗した </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>JPEGファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_UNSUPPORTED_IMAGE_FILE</em>&nbsp;</td><td>不正なJPEGファイルを読み込んだ </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g5642cf383268870443617c385e28c18e"></a><!-- doxytag: member="fie_pngio.c::fnFIE_save_png" ref="g5642cf383268870443617c385e28c18e" args="(const CHAR *filename, FHANDLE hImg, INT compression_level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_save_png           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FHANDLE&nbsp;</td>
          <td class="paramname"> <em>hImg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>compression_level</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  PNGファイルの保存 
<p>
指定したFIE画像オブジェクトをPNGファイルとして保存します。<p>
<dl class="user" compact><dt><b>FIE画像との対応</b></dt><dd>保存されるFIE画像オブジェクトと対応するチャネル数は、以下の通りとなります。 下記以外のチャネル数のFIE画像オブジェクトが渡された場合は、エラーとなります。 <ul>
<li>F_IMG_BIN （チャネル数 1） </li>
<li>F_IMG_UC8 （チャネル数 1、3） </li>
<li>F_IMG_US16 （チャネル数 1、3） </li>
<li>F_IMG_RGBQUAD （チャネル数 1）</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd>保存されるPNGファイルのカラータイプは、以下の通りです。 <ul>
<li>F_IMG_RGBQUAD以外のチャネル数が１の画像は、PNG_COLOR_TYPE_GRAY </li>
<li>F_IMG_RGBQUAD以外のチャネル数が３の画像は、PNG_COLOR_TYPE_RGB </li>
<li>F_IMG_RGBQUADは PNG_COLOR_TYPE_RGB</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd>なお <em>hImg</em> パラメータにて指定される画像は、ルート画像でもチャイルド画像でも構いません。 チャイルド画像が指定された場合には、チャイルド画像のサイズと同じサイズのPNGファイルが生成されます。</dd></dl>
<dl class="user" compact><dt><b>圧縮レベル</b></dt><dd><em>compression_level</em> にて保存されるPNGファイルの圧縮レベルを指定することができます。 範囲外の値を指定した場合は、エラーとなります。 <ul>
<li>-1 デフォルト（圧縮レベル 6） </li>
<li>0 圧縮なし </li>
<li>1（圧縮速度優先） 〜 9（圧縮率優先）</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b>αチャネル</b></dt><dd>FIE画像オブジェクトの画素タイプが F_IMG_RGBQUAD の場合、αチャネルは保存するPNGファイルに反映されません。 何らかの値をαチャネルに設定していても無視されますので、注意してください。</dd></dl>
<dl class="user" compact><dt><b>使用例</b></dt><dd><a class="el" href="group__fie__file__image.html#g03238db068bd08078fb1e29c1c31d8ac" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  PNGファイル読...">fnFIE_load_png()</a> の例を参照してください。</dd></dl>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>保存するPNGファイル名 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hImg</em>&nbsp;</td><td>保存するFIE画像 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>compression_level</em>&nbsp;</td><td>圧縮レベル[-1〜9]</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足で確保に失敗した </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>PNGファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_UNSUPPORTED_IMAGE_FILE</em>&nbsp;</td><td>不正なPNGファイルへ書き込んだ </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g4f78820e0502e03eae4157eadddf11fc"></a><!-- doxytag: member="fie_pngio.c::fnFIE_save_png_ex" ref="g4f78820e0502e03eae4157eadddf11fc" args="(const CHAR *filename, FHANDLE hImg, INT compression_level, enum f_png_strategy compression_strategy, enum f_png_filter filter_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_save_png_ex           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FHANDLE&nbsp;</td>
          <td class="paramname"> <em>hImg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>compression_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__fie__file__image.html#g98a63859040944c066304c985dae4be6">f_png_strategy</a>&nbsp;</td>
          <td class="paramname"> <em>compression_strategy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__fie__file__image.html#g08757b1bde2d3153230704d33384db94">f_png_filter</a>&nbsp;</td>
          <td class="paramname"> <em>filter_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  PNGファイルの保存（詳細設定付き） 
<p>
指定したFIE画像オブジェクトをPNGファイルとして保存します。 <a class="el" href="group__fie__file__image.html#g5642cf383268870443617c385e28c18e" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  PNGファイルの...">fnFIE_save_png()</a> との違いは、圧縮戦略とフィルタ種別を指定できることです。<p>
<dl class="user" compact><dt><b>FIE画像との対応</b></dt><dd>保存されるFIE画像オブジェクトと対応するチャネル数は、以下の通りとなります。 下記以外のチャネル数のFIE画像オブジェクトが渡された場合は、エラーとなります。 <ul>
<li>F_IMG_BIN （チャネル数 1） </li>
<li>F_IMG_UC8 （チャネル数 1、3） </li>
<li>F_IMG_US16 （チャネル数 1、3） </li>
<li>F_IMG_RGBQUAD （チャネル数 1）</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd>保存されるPNGファイルのカラータイプは、以下の通りです。 <ul>
<li>F_IMG_RGBQUAD以外のチャネル数が１の画像は、PNG_COLOR_TYPE_GRAY </li>
<li>F_IMG_RGBQUAD以外のチャネル数が３の画像は、PNG_COLOR_TYPE_RGB </li>
<li>F_IMG_RGBQUADは PNG_COLOR_TYPE_RGB</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b>圧縮レベル</b></dt><dd><em>compression_level</em> にて保存されるPNGファイルの圧縮レベルを指定することができます。 範囲外の値を指定した場合は、エラーとなります。 <ul>
<li>-1 デフォルト（圧縮レベル 6） </li>
<li>0 圧縮なし </li>
<li>1（圧縮速度優先） 〜 9（圧縮率優先）</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b>圧縮戦略</b></dt><dd><em>compression_strategy</em> にてPNGファイル保存に用いる圧縮戦略を指定することができます。 <ul>
<li>F_PNG_STRATEGY_DEFAULT <br>
 標準の圧縮戦略です。高い圧縮率を期待できます。 <a class="el" href="group__fie__file__image.html#g5642cf383268870443617c385e28c18e" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  PNGファイルの...">fnFIE_save_png()</a> で使用されます。 </li>
<li>F_PNG_STRATEGY_RLE <br>
 ランレングスを用いる圧縮戦略です。高速な圧縮を期待できます。</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b>フィルタ種別</b></dt><dd><em>filter_type</em> にてPNGファイル保存に用いるフィルタ処理を指定することができます。 フィルタ処理は近接画素との差分を取るものであり、なだらかな画像において圧縮効率を高める効果があります。 <ul>
<li>F_PNG_FILTER_NONE <br>
 フィルタ処理を行いません。変化の多い画像や、二値画像のような同じ値が多く含まれる画像で高い圧縮率を期待できます。 <a class="el" href="group__fie__file__image.html#g5642cf383268870443617c385e28c18e" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  PNGファイルの...">fnFIE_save_png()</a> で使用されます。 </li>
<li>F_PNG_FILTER_SUB <br>
 左側との差分を使用します。横方向に変化の少ない画像で高い圧縮率を期待できます。また、高速な圧縮を期待できます。 </li>
<li>F_PNG_FILTER_UP <br>
 上側との差分を使用します。縦方向に変化の少ない画像で高い圧縮率を期待できます。 </li>
<li>F_PNG_FILTER_AVG <br>
 左側と上側の平均値との差分を使用します。斜め方向に変化の少ない画像で高い圧縮率を期待できます。 </li>
<li>F_PNG_FILTER_PAETH <br>
 Paeth値と呼ばれる値との差分を使用します。多くの画像で安定した圧縮率を期待できます。</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b>αチャネル</b></dt><dd>FIE画像オブジェクトの画素タイプが F_IMG_RGBQUAD の場合、αチャネルは保存するPNGファイルに反映されません。 何らかの値をαチャネルに設定していても無視されますので、注意してください。</dd></dl>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>保存するPNGファイル名 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hImg</em>&nbsp;</td><td>保存するFIE画像 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>compression_level</em>&nbsp;</td><td>圧縮レベル[-1〜9] </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>compression_strategy</em>&nbsp;</td><td>圧縮戦略 <ul>
<li>F_PNG_STRATEGY_DEFAULT </li>
<li>F_PNG_STRATEGY_RLE </li>
</ul>
</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filter_type</em>&nbsp;</td><td>フィルタ種別 <ul>
<li>F_PNG_FILTER_NONE </li>
<li>F_PNG_FILTER_SUB </li>
<li>F_PNG_FILTER_UP </li>
<li>F_PNG_FILTER_AVG </li>
<li>F_PNG_FILTER_PAETH</li>
</ul>
</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足で確保に失敗した </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>PNGファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_UNSUPPORTED_IMAGE_FILE</em>&nbsp;</td><td>不正なPNGファイルへ書き込んだ </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g03238db068bd08078fb1e29c1c31d8ac"></a><!-- doxytag: member="fie_pngio.c::fnFIE_load_png" ref="g03238db068bd08078fb1e29c1c31d8ac" args="(const CHAR *filename, FHANDLE *hImg, enum f_color_img_type type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_load_png           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FHANDLE *&nbsp;</td>
          <td class="paramname"> <em>hImg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  PNGファイル読み込み 
<p>
PNGファイルをFIE画像オブジェクトに読み込みます。<p>
<dl class="user" compact><dt><b>FIE画像との対応</b></dt><dd>読み込み可能なPNGファイルを以下に示します。 PNGファイル、FIE画像のパラメータが以下と異なる場合はエラーとなります。 <ul>
<li>
２値白黒画像 <ul>
<li>
F_IMG_BIN </li>
<li>
PNGファイル、FIE画像共に、チャネル数は1とする。 </li>
</ul>
</li>
<li>
グレー画像 <ul>
<li>
F_IMG_UC8（ビット深度2〜8） </li>
<li>
F_IMG_US16（ビット深度9〜16） </li>
<li>
PNGファイルのチャネル数は1とする。ただしαチャネルがある場合は2となる。(※1) </li>
<li>
FIE画像のチャネル数は1とする。 </li>
</ul>
</li>
<li>
カラー画像 <ul>
<li>
F_IMG_RGBQUAD（ビット深度2〜8 ※2 ※3） </li>
<li>
F_IMG_UC8（ビット深度2〜8 ※2） </li>
<li>
F_IMG_US16（ビット深度9〜16） </li>
<li>
PNGファイルのチャネル数は3とする。ただしαチャネルがある場合は4となる。(※3) </li>
<li>
FIE画像のチャネル数は3とする。ただし、F_IMG_RGBQUADのみ、チャネル数は1である。 </li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd>※1 FIE画像に読み込む際に、αチャネルは無視されます。<br>
 ※2 読み込み先がF_IMG_RGBQUADかF_IMG_UC8かの判断は、f_color_img_typeパラメータで決定されます。 <br>
 ※3 rgbReserved は 0 となります。</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd><em>hImg</em> パラメータには読み込み先画像オブジェクトを指定します。 <em>*hImg</em> へ既に確保された画像オブジェクトを指示した場合は、その画像オブジェクトに対して画像を読み込みます。 この際 <em>*hImg</em> へ指定する画像は必ずルート画像でなければなりません。 また、指定されたルート画像の幅や高さ等がPNGファイルと異なっている場合には、本関数内部で自動的にリサイズを行います。 <em>*hImg</em> へNULLが指定された場合には、本関数内部で自動的にルート画像を確保し <em>*hImg</em> へ代入して返します。 この場合、ユーザーは <em>*hImg</em> が不要になった後に <a class="el" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object()</a> をコールしてメモリを解放する必要があります。</dd></dl>
<dl class="user" compact><dt><b>使用例</b></dt><dd><div class="fragment"><pre class="fragment"><span class="comment">// エラー処理は省略しているので注意して下さい。</span>
<span class="preprocessor">#include "fie.h"</span>

VOID sample1()
{
    FHANDLE himg = NULL;

    <span class="comment">// PNGファイルを読み込みます。</span>
    <span class="comment">// F_COLOR_IMG_TYPE_UC8 は、カラー画像を読み込む際に、FIEオブジェクトの画素タイプを指定します。</span>
    <span class="comment">// F_COLOR_IMG_TYPE_UC8 は、F_IMG_UC8 の ３チャネル</span>
    <span class="comment">// F_COLOR_IMG_TYPE_RGBQ は、F_IMG_RGBQUAD の１チャネルに対応しています。</span>
    <a class="code" href="group__fie__file__image.html#g03238db068bd08078fb1e29c1c31d8ac" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  PNGファイル読...">fnFIE_load_png</a>( <span class="stringliteral">"test.png"</span>, &amp;himg, <a class="code" href="group__fie__file__image.html#gge1ca4e0484c0d907a215a44931bbcc9adb9994a1f48569964f60a6dd2eb91234" title="F_IMG_UC8, 3chで読込">F_COLOR_IMG_TYPE_UC8</a> );

    <span class="comment">// PNGファイルへ書き込みます。</span>
    <span class="comment">// デフォルトの圧縮レベルを指定します。</span>
    <a class="code" href="group__fie__file__image.html#g5642cf383268870443617c385e28c18e" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  PNGファイルの...">fnFIE_save_png</a>( <span class="stringliteral">"result.png"</span>, himg, -1 );

    <a class="code" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object</a>( himg );

    <span class="keywordflow">return</span>;
}

<span class="comment">// コールバック関数の例</span>
<span class="comment">// 処理の進行状況をパーセンテージで取得します。</span>
BOOL callback( VOID *vpData, DOUBLE percentage )
{
    <span class="comment">// vpDataは、一つ前に呼び出されたときの、percentageの値を保持</span>
    <span class="keywordflow">if</span>( vpData ){
        <span class="keywordflow">if</span>( *( (DOUBLE* )vpData ) &gt; percentage )
            <span class="keywordflow">return</span> FALSE;

         *( (DOUBLE* )vpData ) = percentage;
    }
    <span class="keywordflow">return</span> TRUE;
}

<span class="comment">// 低レベル関数を使用した場合</span>
VOID sample2()
{
    FHANDLE himg = NULL;
    <a class="code" href="structF__IMG__INFO.html" title="FIEイメージ用ヘッダー構造体">F_IMG_INFO</a> png_info;
    DOUBLE percentage;
    DOUBLE *p_percentage = NULL;    <span class="comment">// コールバック関数の呼び出し時に渡される任意のポインタ</span>
    INT depth;                      <span class="comment">// 真のビット深度</span>

    <span class="comment">// 低レベル関数では、メモリ確保は自身で行う必要があります。</span>
    <span class="comment">// そのために、PNGファイルの内容を確認します。</span>
    <a class="code" href="group__fie__file__image__core.html#g4502fc2689136ac4ea68c575bd036d90" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  PNGファイルの...">fnFIE_check_png_info</a>( <span class="stringliteral">"test.png"</span>, <a class="code" href="group__fie__file__image.html#gge1ca4e0484c0d907a215a44931bbcc9adb9994a1f48569964f60a6dd2eb91234" title="F_IMG_UC8, 3chで読込">F_COLOR_IMG_TYPE_UC8</a>, &amp;png_info );

    <span class="comment">// PNGファイル読み込みのためのメモリを確保します。</span>
    himg = <a class="code" href="group__fie__image.html#ge1fb319dbc93c5bbaba49d39904ca491" title="ルート画像の確保">fnFIE_img_root_alloc</a>( png_info.<a class="code" href="structF__IMG__INFO.html#355ed373ffb5b4318fd11457d0dfb5fc">type</a>, png_info.<a class="code" href="structF__IMG__INFO.html#b751e6c3a4b654e8f414516119a75a97">channel</a>, png_info.<a class="code" href="structF__IMG__INFO.html#5cc07dd4a38202802421fbb95853a640">width</a>, png_info.<a class="code" href="structF__IMG__INFO.html#854057f200703039a99f26bd71d470dc">height</a> );
    percentage = 0;
    p_percentage = &amp;percentage;

    <span class="comment">// PNGファイルを読み込みます。</span>
    <span class="comment">// 真のビット深度を取得します。</span>
    <span class="comment">// 真のビット深度の取得は、省略可能です。</span>
    <span class="comment">// 進行状況を確認するために、コールバック関数を指定します。</span>
    <span class="comment">// コールバック関数は、省略可能です。</span>
    <a class="code" href="group__fie__file__image__core.html#g8d5eeb394e32144e645e575a48173cb7" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  PNGファイル読...">fnFIE_load_core_png</a>( <span class="stringliteral">"test.png"</span>, himg, &amp;depth, (<a class="code" href="group__fie__file__image.html#gfeb8a40b07ac72e0e0dadb7ecbc39942" title="コールバック関数のポインタ型">F_IMG_CALLBACK</a>)callback, (VOID*)p_percentage );

    <span class="comment">// PNGファイルへ書き込みます。</span>
    <span class="comment">// 圧縮レベルは最大を指定します。</span>
    percentage = 0;
    <a class="code" href="group__fie__file__image__core.html#gcb77fcb74fd25aa5c10c66fff966c6df" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  PNGファイルの...">fnFIE_save_core_png</a>( <span class="stringliteral">"result.png"</span>, himg, 9, depth, (<a class="code" href="group__fie__file__image.html#gfeb8a40b07ac72e0e0dadb7ecbc39942" title="コールバック関数のポインタ型">F_IMG_CALLBACK</a>)callback, (VOID*)p_percentage );

    <a class="code" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object</a>( himg );

    <span class="keywordflow">return</span>;
}

INT main()
{
    <span class="comment">// FIEライブラリの使用前に必ずコールする必要があります。</span>
    <a class="code" href="group__fie__libinit.html#g12250eabf0163ce206c4caa007b33a80" title="FIEライブラリの初期化">fnFIE_setup</a>();

    sample1();
    sample2();

    <span class="comment">// 終了処理</span>
    <a class="code" href="group__fie__libinit.html#gcf71693a1b50ed7ce9947ac8179cbfc3" title="FIEライブラリの終了処理">fnFIE_teardown</a>();

    <span class="keywordflow">return</span> 0;
}
</pre></div></dd></dl>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>読み込むPNGファイル名 </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>hImg</em>&nbsp;</td><td>読み込み先ルート画像オブジェクトのハンドルのポインタ </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>出力するFIE画像オブジェクトの画像形式が F_IMG_UC8 または F_IMG_RGBQUAD を 選択可能な場合に、どちらの画素形式とするかを指定します。 その他の場合では無視されます。 <ul>
<li>F_COLOR_IMG_TYPE_UC8: F_IMG_UC8で出力する </li>
<li>F_COLOR_IMG_TYPE_RGBQ: F_IMG_RGBQUADで出力する</li>
</ul>
</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足で確保に失敗した </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>PNGファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_UNSUPPORTED_IMAGE_FILE</em>&nbsp;</td><td>不正なPNGファイルを読み込んだ </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gca7a00987db232fc64f0093a1d11fa27"></a><!-- doxytag: member="fie_tiffio.c::fnFIE_save_tiff" ref="gca7a00987db232fc64f0093a1d11fa27" args="(const CHAR *filename, const FHANDLE hImg, enum f_tiff_compression compression, INT quality)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_save_tiff           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const FHANDLE&nbsp;</td>
          <td class="paramname"> <em>hImg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__fie__file__image.html#g8d2609ff61f5bd24666e6c78d70c75ae">f_tiff_compression</a>&nbsp;</td>
          <td class="paramname"> <em>compression</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>quality</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  TIFFファイルの保存 
<p>
指定したFIE画像オブジェクトをTIFFファイルとして保存します。<p>
<dl class="user" compact><dt><b>FIE画像オブジェクトとの対応</b></dt><dd>保存されるFIE画像オブジェクトと対応するチャネル数は、以下の表の通りとなります。 下記以外のFIE画像オブジェクトが渡された場合は、エラーとなります。 なお <em>hImg</em> パラメータにて指定される画像は、ルート画像でもチャイルド画像でも構いません。 チャイルド画像が指定された場合には、チャイルド画像のサイズと同じサイズのTIFFファイルが生成されます。 <br>
<br>
 <table class="pretable">
<tr align="center">
<th rowspan="2>">&nbsp; </th><th colspan="2>">TIFF </th><th colspan="2>">FIE  </th></tr>
<tr align="center">
<th>TIFFTAQ_PHOTOMETRIC </th><th>TIFFTAQ_SAMPLEFOMAT </th><th>画像タイプ </th><th>チャネル数  </th></tr>
<tr align="center">
<th>白黒 </th><td>MINISBLACK </td><td>× </td><td>bin </td><td>1  </td></tr>
<tr align="center">
<th rowspan="2>">グレースケール </th><td rowspan="2>">MINISBLACK </td><td rowspan="2>">× </td><td>uc8 </td><td>1  </td></tr>
<tr align="center">
<td>us16 </td><td>1  </td></tr>
<tr align="center">
<th rowspan="3>">カラー </th><td rowspan="3>">RGB </td><td rowspan="3>">× </td><td>rgbq </td><td>1  </td></tr>
<tr align="center">
<td>uc8 </td><td>3  </td></tr>
<tr align="center">
<td>us16 </td><td>3  </td></tr>
<tr align="center">
<th rowspan="4>">その他 </th><td>MINISBLACK </td><td rowspan="2>">INT </td><td rowspan="2>">s16 </td><td>1  </td></tr>
<tr align="center">
<td>RGB </td><td>3  </td></tr>
<tr align="center">
<td>MINISBLACK </td><td rowspan="2>">IEEEFP </td><td rowspan="2>">double </td><td>1  </td></tr>
<tr align="center">
<td>RGB </td><td>3  </td></tr>
</table>
</dd></dl>
<dl class="user" compact><dt><b>圧縮</b></dt><dd>本関数では <em>compression</em> パラメータによって圧縮形式を指定できます。 指定可能な圧縮形式は、以下の通りです。 なお、JPEG圧縮は非可逆圧縮（ F_TIFF_COMPRESSION_JPEG: 情報損失あり）です。 それ以外の圧縮形式は、可逆圧縮（情報損失なし）です。 <ul>
<li>圧縮なしで保存する場合は、F_TIFF_COMPRESSION_NONEを指定 </li>
<li>gzipの圧縮アルゴリズムで保存する場合は、F_TIFF_COMPRESSION_DEFLATEを指定 </li>
<li>JPEG圧縮で保存する場合は、F_TIFF_COMPRESSION_JPEGを指定（※1） </li>
<li>CCITTファックス（FAX3）で保存する場合は、F_TIFF_COMPRESSION_CCITTFAX3を指定（※2） </li>
<li>CCITTファックス（FAX4）で保存する場合は、F_TIFF_COMPRESSION_CCITTFAX4を指定（※2） <br>
<br>
 ※1 ８ビット画像のみでサポートされている。<br>
 ※2 白黒画像のみサポートされている。<br>
</li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd>対応していない画像ファイルで、これらの圧縮形式を指定した場合には、圧縮なしで保存されます。 不正な圧縮形式を指定した場合はエラーとなります。</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd><em>compression</em> パラメータに F_TIFF_COMPRESSION_DEFLATE 又は F_TIFF_COMPRESSION_JPEG を指定した場合は、<em>quality</em> パラメータにより圧縮レベルを指定できます。 指定できる圧縮レベルの範囲は以下の通りです。 <ul>
<li>
F_TIFF_COMPRESSION_DEFLATE [-1〜9] <ul>
<li>
-1 デフォルト（圧縮レベル 6） </li>
<li>
0 圧縮なし </li>
<li>
1 圧縮速度優先 </li>
<li>
9 圧縮率優先 </li>
</ul>
</li>
<li>
F_TIFF_COMPRESSION_JPEG [0〜100] </li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd><em>compression</em> パラメータに F_TIFF_COMPRESSION_JPEG を指定した場合には、 <em>quality</em> パラメータに指定する値が小さいほど圧縮率が高くなります。 なお、パラメータが上記の範囲外の場合はエラーが返されます。</dd></dl>
<dl class="user" compact><dt><b>使用例</b></dt><dd><a class="el" href="group__fie__file__image.html#g5ee11eaf2aa5edb0d896d9259f983bec" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  TIFFファイル読...">fnFIE_load_tiff()</a> の例を参照してください。</dd></dl>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>保存するTIFFファイル名 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hImg</em>&nbsp;</td><td>保存するFIE画像オブジェクトのハンドル </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>compression</em>&nbsp;</td><td>圧縮形式 <ul>
<li>F_TIFF_COMPRESSION_NONE </li>
<li>F_TIFF_COMPRESSION_DEFLATE </li>
<li>F_TIFF_COMPRESSION_JPEG </li>
<li>F_TIFF_COMPRESSION_CCITTFAX3 </li>
<li>F_TIFF_COMPRESSION_CCITTFAX4 </li>
</ul>
</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>quality</em>&nbsp;</td><td>圧縮レベル <ul>
<li>F_TIFF_COMPRESSION_DEFLATE [-1〜9] </li>
<li>F_TIFF_COMPRESSION_JPEG [0〜100]</li>
</ul>
</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足で確保に失敗した </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>TIFFファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_UNSUPPORTED_IMAGE_FILE</em>&nbsp;</td><td>不正なTIFFファイルへ書き込んだ </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g5ee11eaf2aa5edb0d896d9259f983bec"></a><!-- doxytag: member="fie_tiffio.c::fnFIE_load_tiff" ref="g5ee11eaf2aa5edb0d896d9259f983bec" args="(const CHAR *filename, FHANDLE *hImg, enum f_color_img_type type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_load_tiff           </td>
          <td>(</td>
          <td class="paramtype">const CHAR *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FHANDLE *&nbsp;</td>
          <td class="paramname"> <em>hImg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__fie__file__image.html#ge1ca4e0484c0d907a215a44931bbcc9a">f_color_img_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  TIFFファイル読み込み 
<p>
TIFFファイルをFIE画像オブジェクトに読み込みます。<p>
<dl class="user" compact><dt><b>FIE画像との対応</b></dt><dd>読み込み可能なTIFFファイルを以下に示します TIFFファイル、FIE画像オブジェクトのパラメータが以下と異なる場合はエラーとなります。</dd></dl>
<dl class="user" compact><dt><b>FIE画像オブジェクトとTIFFファイルのPHOTOMETRICとの対応関係</b></dt><dd><table class="pretable">
<tr bgcolor="#cccccc" align="center">
<th rowspan="2" colspan="2>">&nbsp; </th><th colspan="6>">FIEオブジェクトの画素タイプ  </th></tr>
<tr bgcolor="#cccccc" align="center">
<th>bin </th><th>uc8 </th><th>us16 </th><th>s16 </th><th>double </th><th>rgbq  </th></tr>
<tr align="center">
<th rowspan="12" bgcolor="#cccccc">TIFFTAG_PHOTOMETRIC </th><th bgcolor="#cccccc">MINISWHITE </th><td>○ </td><td>○ </td><td>○ </td><td>○ </td><td>○ </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">MINISBLACK </th><td>○ </td><td>○ </td><td>○ </td><td>○ </td><td>○ </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">RGB </th><td>&nbsp; </td><td>○ </td><td>○ </td><td>○ </td><td>○ </td><td>○  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">PALETTE </th><td>&nbsp; </td><td>○ </td><td>○ </td><td>&nbsp; </td><td>&nbsp; </td><td>○  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">MASK </th><td>&nbsp; </td><td>○ </td><td>○ </td><td>&nbsp; </td><td>&nbsp; </td><td>○  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">SEPARATED </th><td>&nbsp; </td><td>○ </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>○  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">YCBCR </th><td>&nbsp; </td><td>○ </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>○  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">CIELAB </th><td>&nbsp; </td><td>○ </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>○  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">ICCLAB </th><td>&nbsp; </td><td>○ </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>○  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">ITULAB </th><td>&nbsp; </td><td>○ </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>○  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">LOGL </th><td>&nbsp; </td><td>○ </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">LOGLUV </th><td>&nbsp; </td><td>○ </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>○  </td></tr>
</table>
<br>
</dd></dl>
<dl class="user" compact><dt><b>FIE画像オブジェクトのチャネル数</b></dt><dd><table class="pretable">
<tr bgcolor="#cccccc" align="center">
<th rowspan="2" colspan="2>">&nbsp; </th><th colspan="6>">FIEオブジェクトの画素タイプ  </th></tr>
<tr bgcolor="#cccccc" align="center">
<th>bin </th><th>uc8 </th><th>us16 </th><th>s16 </th><th>double </th><th>rgbq  </th></tr>
<tr align="center">
<th rowspan="12" bgcolor="#cccccc">TIFFTAG_PHOTOMETRIC </th><th bgcolor="#cccccc">MINISWHITE </th><td>1 </td><td>1 </td><td>1 </td><td>1 </td><td>1 </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">MINISBLACK </th><td>1 </td><td>1 </td><td>1 </td><td>1 </td><td>1 </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">RGB </th><td>&nbsp; </td><td>3 </td><td>3 </td><td>3 </td><td>3 </td><td>1  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">PALETTE </th><td>&nbsp; </td><td>3 </td><td>3 </td><td>&nbsp; </td><td>&nbsp; </td><td>1  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">MASK </th><td>&nbsp; </td><td>3 </td><td>3 </td><td>&nbsp; </td><td>&nbsp; </td><td>1  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">SEPARATED </th><td>&nbsp; </td><td>3 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>1  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">YCBCR </th><td>&nbsp; </td><td>3 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>1  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">CIELAB </th><td>&nbsp; </td><td>3 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>1  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">ICCLAB </th><td>&nbsp; </td><td>3 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>1  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">ITULAB </th><td>&nbsp; </td><td>3 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>1  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">LOGL </th><td>&nbsp; </td><td>1 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">LOGLUV </th><td>&nbsp; </td><td>3 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>1  </td></tr>
</table>
<br>
</dd></dl>
<dl class="user" compact><dt><b>TIFFファイルのチャネル数</b></dt><dd><table class="pretable">
<tr bgcolor="#cccccc" align="center">
<th rowspan="2" colspan="2>">&nbsp; </th><th colspan="6>">FIEオブジェクトの画素タイプ  </th></tr>
<tr bgcolor="#cccccc" align="center">
<th>bin </th><th>uc8 </th><th>us16 </th><th>s16 </th><th>double </th><th>rgbq  </th></tr>
<tr align="center">
<th rowspan="12" bgcolor="#cccccc">TIFFTAG_PHOTOMETRIC </th><th bgcolor="#cccccc">MINISWHITE </th><td>1or2 </td><td>1or2 </td><td>1or2 </td><td>1or2 </td><td>1or2 </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">MINISBLACK </th><td>1or2 </td><td>1or2 </td><td>1or2 </td><td>1or2 </td><td>1or2 </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">RGB </th><td>&nbsp; </td><td>3or4 </td><td>3or4 </td><td>3or4 </td><td>3or4 </td><td>3or4  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">PALETTE </th><td>&nbsp; </td><td>1or2 </td><td>1or2 </td><td>&nbsp; </td><td>&nbsp; </td><td>1or2  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">MASK </th><td>&nbsp; </td><td>1or2 </td><td>1or2 </td><td>&nbsp; </td><td>&nbsp; </td><td>1or2  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">SEPARATED </th><td>&nbsp; </td><td>4or5 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>4or5  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">YCBCR </th><td>&nbsp; </td><td>3or4 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>3or4  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">CIELAB </th><td>&nbsp; </td><td>3or4 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>3or4  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">ICCLAB </th><td>&nbsp; </td><td>3or4 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>3or4  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">ITULAB </th><td>&nbsp; </td><td>3or4 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>3or4  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">LOGL </th><td>&nbsp; </td><td>1or2 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">LOGLUV </th><td>&nbsp; </td><td>3or4 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>3or4  </td></tr>
</table>
<br>
</dd></dl>
<dl class="user" compact><dt><b>FIE画像オブジェクトのビット深度</b></dt><dd><table class="pretable">
<tr bgcolor="#cccccc" align="center">
<th rowspan="2" colspan="2>">&nbsp; </th><th colspan="6>">FIEオブジェクトの画素タイプ  </th></tr>
<tr bgcolor="#cccccc" align="center">
<th>bin </th><th>uc8 </th><th>us16 </th><th>s16 </th><th>double </th><th>rgbq  </th></tr>
<tr align="center">
<th rowspan="12" bgcolor="#cccccc">TIFFTAG_PHOTOMETRIC </th><th bgcolor="#cccccc">MINISWHITE </th><td>1 </td><td>8 </td><td>16 </td><td>16 </td><td>64 </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">MINISBLACK </th><td>1 </td><td>8 </td><td>16 </td><td>16 </td><td>64 </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">RGB </th><td>&nbsp; </td><td>8 </td><td>16 </td><td>16 </td><td>64 </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">PALETTE </th><td>&nbsp; </td><td>8 </td><td>16 </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">MASK </th><td>&nbsp; </td><td>8 </td><td>16 </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">SEPARATED </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">YCBCR </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">CIELAB </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">ICCLAB </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">ITULAB </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">LOGL </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">LOGLUV </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
</table>
<br>
</dd></dl>
<dl class="user" compact><dt><b>TIFFファイルのビット深度</b></dt><dd><table class="pretable">
<tr bgcolor="#cccccc" align="center">
<th rowspan="2" colspan="2>">&nbsp; </th><th colspan="6>">FIEオブジェクトの画素タイプ  </th></tr>
<tr bgcolor="#cccccc" align="center">
<th>bin </th><th>uc8 </th><th>us16 </th><th>s16 </th><th>double </th><th>rgbq  </th></tr>
<tr align="center">
<th rowspan="12" bgcolor="#cccccc">TIFFTAG_PHOTOMETRIC </th><th bgcolor="#cccccc">MINISWHITE </th><td>1 </td><td>2〜8 </td><td>9〜16 </td><td>16 </td><td>64 </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">MINISBLACK </th><td>1 </td><td>2〜8 </td><td>9〜16 </td><td>16 </td><td>64 </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">RGB </th><td>&nbsp; </td><td>2〜8 </td><td>9〜16 </td><td>16 </td><td>64 </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">PALETTE </th><td>&nbsp; </td><td>8 </td><td>16 </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">MASK </th><td>&nbsp; </td><td>8 </td><td>16 </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">SEPARATED </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">YCBCR </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">CIELAB </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">ICCLAB </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">ITULAB </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">LOGL </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp;  </td></tr>
<tr align="center">
<th bgcolor="#cccccc">LOGLUV </th><td>&nbsp; </td><td>8 </td><td>&nbsp; </td><td>&nbsp; </td><td>&nbsp; </td><td>8  </td></tr>
</table>
</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd>TIFFファイルの読み込みでは、上記した対応表に当てはまらない条件があります。 以下に、それらの条件をまとめます。 <ul>
<li>
CMYK、YCbCr、L*a*b* 、L*u*v*などの各色空間は、RGB色空間に変換後、FIE画像オブジェクトに格納されます。 対応するビット深度は８ビットのみとなります。 </li>
<li>
RGBのそれぞれのデータが、個々にまとめて保存されています。 対応するビット深度は８ビットのみとなります。 </li>
<li>
TIFFファイルは、白黒のピクセル値の０が黒か白かを自由に設定することができます。 対象となるのは、２値白黒画像とグレー画像です。 F_IMG_BIN、F_IMG_UC8、F_IMG_US16においては、黒が０となるように変換後、FIE画像オブジェクトに読み込まれます。 ただし、TIFFTAG_SAMPLEFORMATとして指定されているF_IMG_S16、F_IMG_DOUBLEは、 変換せずそのままの値がFIE画像オブジェクトに読み込まれます。 <br>
 </li>
<li>
TIFFファイルが複数ページの場合、最初のページのみが読み込まれます。 2ページ以降は無視されます。 </li>
</ul>
</dd></dl>
<dl class="user" compact><dt><b></b></dt><dd><em>hImg</em> パラメータには読み込み先画像オブジェクトを指定します。 <em>*hImg</em> へ既に確保された画像オブジェクトを指示した場合は、その画像オブジェクトに対して画像を読み込みます。 この際 <em>*hImg</em> へ指定する画像は必ずルート画像でなければなりません。 また、指定されたルート画像の幅や高さ等がTIFFファイルと異なっている場合には、本関数内部で自動的にリサイズを行います。 <em>*hImg</em> へNULLが指定された場合には、本関数内部で自動的にルート画像を確保し <em>*hImg</em> へ代入して返します この場合、ユーザーは <em>*hImg</em> が不要になった後に <a class="el" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object()</a> をコールしてメモリを解放してください。</dd></dl>
<dl class="user" compact><dt><b>使用例</b></dt><dd><div class="fragment"><pre class="fragment"><span class="comment">// エラー処理は省略しているので注意して下さい。</span>
<span class="preprocessor">#include "fie.h"</span>

VOID sample1()
{
    FHANDLE himg = NULL;

    <span class="comment">// TIFFファイルを読み込みます。</span>
    <span class="comment">// F_COLOR_IMG_TYPE_UC8 は、カラー画像を読み込む際に、FIEオブジェクトの画素タイプを指定します。</span>
    <span class="comment">// F_COLOR_IMG_TYPE_UC8 は、F_IMG_UC8 の ３チャネル</span>
    <span class="comment">// F_COLOR_IMG_TYPE_RGBQ は、F_IMG_RGBQUAD の１チャネルに対応しています。</span>
    <a class="code" href="group__fie__file__image.html#g5ee11eaf2aa5edb0d896d9259f983bec" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  TIFFファイル読...">fnFIE_load_tiff</a>( <span class="stringliteral">"test.tiff"</span>, &amp;himg, <a class="code" href="group__fie__file__image.html#gge1ca4e0484c0d907a215a44931bbcc9adb9994a1f48569964f60a6dd2eb91234" title="F_IMG_UC8, 3chで読込">F_COLOR_IMG_TYPE_UC8</a> );

    <span class="comment">// TIFFファイルへ書き込みます。</span>
    <span class="comment">// 圧縮には、F_TIFF_COMPRESSION_DEFLATE を指定します。</span>
    <span class="comment">// F_TIFF_COMPRESSION_DEFLATE は、gzipの圧縮アルゴリズムで保存します。</span>
    <span class="comment">// TIFFは、複数の圧縮アルゴリズムを選択することができます。</span>
    <span class="comment">// デフォルトの圧縮レベルを指定します。</span>
    <a class="code" href="group__fie__file__image.html#gca7a00987db232fc64f0093a1d11fa27" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  TIFFファイルの...">fnFIE_save_tiff</a>( <span class="stringliteral">"result.tiff"</span>, himg, <a class="code" href="group__fie__file__image.html#gg8d2609ff61f5bd24666e6c78d70c75ae14a33994a87cd6bfade852c9378581b7" title="gzipの圧縮アルゴリズムで保存">F_TIFF_COMPRESSION_DEFLATE</a>, -1 );

    <a class="code" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object</a>( himg );

    <span class="keywordflow">return</span>;
}

<span class="comment">// コールバック関数の例</span>
<span class="comment">// 処理の進行状況をパーセンテージで取得します。</span>
BOOL callback( VOID *vpData, DOUBLE percentage )
{
    <span class="comment">// vpDataは、一つ前に呼び出されたときの、percentageの値を保持</span>
    <span class="keywordflow">if</span>( vpData ){
        <span class="keywordflow">if</span>( *( (DOUBLE* )vpData ) &gt; percentage )
            <span class="keywordflow">return</span> FALSE;

         *( (DOUBLE* )vpData ) = percentage;
    }
    <span class="keywordflow">return</span> TRUE;
}

<span class="comment">// 低レベル関数を使用した場合</span>
VOID sample2()
{
    FHANDLE himg = NULL;
    <a class="code" href="structF__IMG__INFO.html" title="FIEイメージ用ヘッダー構造体">F_IMG_INFO</a> tiff_info;
    DOUBLE percentage;
    DOUBLE *p_percentage = NULL;    <span class="comment">// コールバック関数の呼び出し時に渡される任意のポインタ</span>
    INT depth;                      <span class="comment">// TIFFファイルのビット深度</span>

    <span class="comment">// 低レベル関数では、メモリ確保は自身で行う必要があります。</span>
    <span class="comment">// そのために、TIFFファイルの内容を確認します。</span>
    <a class="code" href="group__fie__file__image__core.html#ge15f3ab9599a50c73081bc12f56f4216" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  TIFFファイルの...">fnFIE_check_tiff_info</a>( <span class="stringliteral">"test.tiff"</span>, <a class="code" href="group__fie__file__image.html#gge1ca4e0484c0d907a215a44931bbcc9adb9994a1f48569964f60a6dd2eb91234" title="F_IMG_UC8, 3chで読込">F_COLOR_IMG_TYPE_UC8</a>, &amp;tiff_info );

    <span class="comment">// TIFFファイル読み込みのためのメモリを確保します。</span>
    himg = <a class="code" href="group__fie__image.html#ge1fb319dbc93c5bbaba49d39904ca491" title="ルート画像の確保">fnFIE_img_root_alloc</a>( tiff_info.<a class="code" href="structF__IMG__INFO.html#355ed373ffb5b4318fd11457d0dfb5fc">type</a>, tiff_info.<a class="code" href="structF__IMG__INFO.html#b751e6c3a4b654e8f414516119a75a97">channel</a>, tiff_info.<a class="code" href="structF__IMG__INFO.html#5cc07dd4a38202802421fbb95853a640">width</a>, tiff_info.<a class="code" href="structF__IMG__INFO.html#854057f200703039a99f26bd71d470dc">height</a> );
    percentage = 0;
    p_percentage = &amp;percentage;

    <span class="comment">// TIFFファイルを読み込みます。</span>
    <span class="comment">// TIFFファイルとFIE画像オブジェクトのビット深度は、必ずしも同じではない場合があるため、必要に応じて取得します。</span>
    <span class="comment">// 進行状況を確認するために、コールバック関数を指定します。</span>
    <span class="comment">// コールバック関数は、省略可能です。</span>
    <a class="code" href="group__fie__file__image__core.html#g7a625e4849f0d2f1866f2f8200018864" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  TIFFファイル読...">fnFIE_load_core_tiff</a>( <span class="stringliteral">"test.tiff"</span>, himg, &amp;depth, (<a class="code" href="group__fie__file__image.html#gfeb8a40b07ac72e0e0dadb7ecbc39942" title="コールバック関数のポインタ型">F_IMG_CALLBACK</a>)callback, (VOID*)p_percentage );

    <span class="comment">// TIFFファイルへ書き込みます。</span>
    <span class="comment">// FIE画像オブジェクトは、白黒画像（FIE_IMG_BIN）であるとして F_TIFF_COMPRESSION_CCITTFAX4 を指定します。</span>
    <span class="comment">// F_TIFF_COMPRESSION_CCITTFAX は圧縮レベルを指定できないため、-1 は無視されます。</span>
    percentage = 0;
    <a class="code" href="group__fie__file__image__core.html#g1423806dec62bbaf2ac7054088575231" title=" &amp;lt;img class= inline-img src=&amp;quot;oss.png&amp;quot; alt=&amp;quot;[[OSS]]&amp;quot;&amp;gt;  TIFFファイルの...">fnFIE_save_core_tiff</a>( <span class="stringliteral">"result.tiff"</span>, himg, <a class="code" href="group__fie__file__image.html#gg8d2609ff61f5bd24666e6c78d70c75aeb39d435ec98827a4da5f05a5624c61c9" title="CCITTファックス（FAX4）で保存(白黒画像のみサポート)">F_TIFF_COMPRESSION_CCITTFAX4</a>, -1, depth,
                          (<a class="code" href="group__fie__file__image.html#gfeb8a40b07ac72e0e0dadb7ecbc39942" title="コールバック関数のポインタ型">F_IMG_CALLBACK</a>)callback, (VOID*)p_percentage );

    <a class="code" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object</a>( himg );

    <span class="keywordflow">return</span>;
}

INT main()
{
    <span class="comment">// FIEライブラリの使用前に必ずコールする必要があります。</span>
    <a class="code" href="group__fie__libinit.html#g12250eabf0163ce206c4caa007b33a80" title="FIEライブラリの初期化">fnFIE_setup</a>();

    sample1();
    sample2();

    <span class="comment">// 終了処理</span>
    <a class="code" href="group__fie__libinit.html#gcf71693a1b50ed7ce9947ac8179cbfc3" title="FIEライブラリの終了処理">fnFIE_teardown</a>();

    <span class="keywordflow">return</span> 0;
}
</pre></div></dd></dl>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>filename</em>&nbsp;</td><td>読み込むTIFFファイル名 </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>hImg</em>&nbsp;</td><td>読み込み先ルート画像オブジェクトハンドルのポインタ </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type</em>&nbsp;</td><td>FIE画像オブジェクトの、F_IMG_UC8、またはF_IMG_RGBQUADで保存可能な場合の画素タイプを指定する。 それ以外のタイプでは無視される。 <ul>
<li>F_IMG_UC8で保存する場合は、F_COLOR_IMG_TYPE_UC8を指定 </li>
<li>F_IMG_RGBQUADで保存する場合は、F_COLOR_IMG_TYPE_RGBQを指定</li>
</ul>
</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足で確保に失敗した </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>TIFFファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_UNSUPPORTED_IMAGE_FILE</em>&nbsp;</td><td>不正なTIFFファイルを読み込んだ </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gc86472dee6a8e0c41f108702efb5d53c"></a><!-- doxytag: member="oss_fie_imgdata.c::fnFIE_read_imgdata" ref="gc86472dee6a8e0c41f108702efb5d53c" args="(FHANDLE *himg, fvstream *s, INT *size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_read_imgdata           </td>
          <td>(</td>
          <td class="paramtype">FHANDLE *&nbsp;</td>
          <td class="paramname"> <em>himg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfvstream.html">fvstream</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT *&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  画像データ読込 
<p>
独自形式の画像データをストリームからFIE画像オブジェクトに読込みます。<p>
<em>himg</em> パラメータには読込先画像オブジェクトを指定します。 <em>*himg</em> へ既に確保された画像オブジェクトを指示した場合は、 その画像オブジェクトに対して画像を読み込みます。 この際 <em>*himg</em> へ指定する画像は必ずルート画像でなければなりません。 また、指定されたルート画像の幅や高さ等が画像データと異なっている 場合には、本関数内部で自動的にリサイズが行われます。 <em>*himg</em> へNULLが指定された場合には、本関数内部で自動的に ルート画像を確保し <em>*himg</em> へ代入して返します。 この場合、ユーザーは <em>*himg</em> が不要になった後に <a class="el" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object()</a> を コールしてメモリを解放する必要があります。<p>
NULL ハンドルを <a class="el" href="group__fie__file__image.html#gba7d5f45f8375a8842b6121c7ade9dbd" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  画像データ書...">fnFIE_write_imgdata()</a> にて保存していた場合は <em>*himg</em> には NULL が代入されます。このとき、本関数へのエントリー時に <em>*himg!=NULL</em> であれば本関数内部で <a class="el" href="group__fie__object.html#g5255bfc98226503d087b8614fcbb240c" title="オブジェクトを解放">fnFIE_free_object()</a> により この画像は解放されます。<p>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>himg</em>&nbsp;</td><td>読込み先ルート画像オブジェクトハンドル </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>s</em>&nbsp;</td><td>読込むストリーム </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>size</em>&nbsp;</td><td>ストリームから読み込まれたサイズ（バイト単位）。<br>
 不要な場合はNULLを指定可能です。</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NOMEMORY</em>&nbsp;</td><td>メモリ不足で確保に失敗した </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>BMPファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gba7d5f45f8375a8842b6121c7ade9dbd"></a><!-- doxytag: member="oss_fie_imgdata.c::fnFIE_write_imgdata" ref="gba7d5f45f8375a8842b6121c7ade9dbd" args="(FHANDLE himg, fvstream *s, INT comp_level, INT *size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INT FVALGAPI fnFIE_write_imgdata           </td>
          <td>(</td>
          <td class="paramtype">FHANDLE&nbsp;</td>
          <td class="paramname"> <em>himg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfvstream.html">fvstream</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>comp_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT *&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  画像データ書込 
<p>
指定の画像を独自形式の画像データにてストリームへ書き込みます。 本関数はFIEライブラリで確保出来る全ての画像形式に対応しています。<p>
なお <em>himg</em> パラメータにて指定される画像は ルート画像でもチャイルド画像でも構いません。 チャイルド画像が指定された場合には、チャイルド画像のサイズと 同じサイズの画像データが生成されます。ただし読込関数の <a class="el" href="group__fie__file__image.html#gc86472dee6a8e0c41f108702efb5d53c" title=" &lt;img class= inline-img src=&quot;oss.png&quot; alt=&quot;[[OSS]]&quot;&gt;  画像データ読...">fnFIE_read_imgdata()</a> はルート画像への読込しか行えない事に注意してください。<p>
<em>himg</em> に NULL が指定された場合は、NULLハンドルである という情報が保存されます。この場合は正常終了となり、F_ERR_NONE が返されます。<p>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>himg</em>&nbsp;</td><td>出力する画像( type: 全形式 ) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>s</em>&nbsp;</td><td>出力先ストリーム </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>comp_level</em>&nbsp;</td><td>圧縮レベル(-1〜9)<ul>
<li>-1: 標準圧縮(6を指定したのと同じ)</li><li>0: 圧縮無し</li><li>1: 圧縮弱・高速 〜 9: 圧縮強・低速 </li></ul>
</td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>size</em>&nbsp;</td><td>ストリームへ書き込まれたサイズ（バイト単位）。<br>
 不要な場合はNULLを指定可能です。</td></tr>
  </table>
</dl>
<dl compact><dt><b>戻り値:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NONE</em>&nbsp;</td><td>正常終了 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_IMAGE</em>&nbsp;</td><td>不正なFIE画像オブジェクトが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_INVALID_PARAM</em>&nbsp;</td><td>不正なパラメータが渡された </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_FILE_IO</em>&nbsp;</td><td>BMPファイルのオープン失敗 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>F_ERR_NO_LICENCE</em>&nbsp;</td><td>ライセンスエラー、または未初期化エラー </td></tr>
  </table>
</dl>

</div>
</div><p>
</div>
<hr size="1">
<address style="align: right; color: #cccccc;">
	<small>
	Documentation copyright &copy; 2009-2025 TOKYO ELECTRON DEVICE LIMITED. <br>
	Generated on Tue Sep 16 09:08:41 2025 for FIEライブラリ by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.5.6-FASTSP-p2
	</small>
</address>
</body>
</html>
