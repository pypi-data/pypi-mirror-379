<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=Shift_JIS">
<title>FIEライブラリ: 実行</title>
<link href="fvalg-prod.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- 作成： Doxygen 1.5.6-FASTSP-p2 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="contents">
<h1>実行<br>
<small>
[<a class="el" href="group__fie__ml__dtree.html">決定木</a>]</small>
</h1>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>列挙型</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__ml__dtree__train.html#g53dc40bcca3b09a8f12f15af04427cce">f_ml_dtree_pruning_type</a> { <br>
&nbsp;&nbsp;<a class="el" href="group__fie__ml__dtree__train.html#gg53dc40bcca3b09a8f12f15af04427ccecaf9261a1b539b456a85d173f6e6772b">F_ML_DTREE_NO_PRUNING</a> =  0, 
<a class="el" href="group__fie__ml__dtree__train.html#gg53dc40bcca3b09a8f12f15af04427ccee616fbee08b43e05256e6f78be4caf8d">F_ML_DTREE_REDUCED_ERROR</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="group__fie__ml__dtree__train.html#gg53dc40bcca3b09a8f12f15af04427cce34387c24031179ef009715c867365cb7">F_ML_DTREE_COST_COMPLEXITY</a>, 
<a class="el" href="group__fie__ml__dtree__train.html#gg53dc40bcca3b09a8f12f15af04427cce3183910a9265f8a28827086c411c23e5">F_ML_DTREE_COST_COMPLEXITY_1SE</a>
<br>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">決定木の枝刈りのタイプ  <a href="group__fie__ml__dtree__train.html#g53dc40bcca3b09a8f12f15af04427cce">[詳細]</a><br></td></tr>
<tr><td colspan="2"><br><h2>関数</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">FHANDLE FVALGAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fie__ml__dtree__train.html#g2477de9e39b1a73097df24a3c851b436">fnFIE_ml_do_train_dtree</a> (FHANDLE hMl_sample, INT max_depth, INT min_node_sample, INT k_fold, INT pruning_type, INT var_type, INT preprocess, INT train_time_sec, INT *error_code)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"> <img class= inline-img src="oss.png" alt="[[OSS]]">  決定木による機械学習  <a href="#g2477de9e39b1a73097df24a3c851b436"></a><br></td></tr>
</table>
<hr><h2>列挙型</h2>
<a class="anchor" name="g53dc40bcca3b09a8f12f15af04427cce"></a><!-- doxytag: member="fie.h::f_ml_dtree_pruning_type" ref="g53dc40bcca3b09a8f12f15af04427cce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__fie__ml__dtree__train.html#g53dc40bcca3b09a8f12f15af04427cce">f_ml_dtree_pruning_type</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
決定木の枝刈りのタイプ 
<p>
決定木において、木の枝狩りの方法の指定する定数です <dl compact><dt><b>列挙型の値: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg53dc40bcca3b09a8f12f15af04427ccecaf9261a1b539b456a85d173f6e6772b"></a><!-- doxytag: member="F_ML_DTREE_NO_PRUNING" ref="gg53dc40bcca3b09a8f12f15af04427ccecaf9261a1b539b456a85d173f6e6772b" args="" -->F_ML_DTREE_NO_PRUNING</em>&nbsp;</td><td>
枝刈り無し 学習で構成された決定木がそのまま出力されます </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg53dc40bcca3b09a8f12f15af04427ccee616fbee08b43e05256e6f78be4caf8d"></a><!-- doxytag: member="F_ML_DTREE_REDUCED_ERROR" ref="gg53dc40bcca3b09a8f12f15af04427ccee616fbee08b43e05256e6f78be4caf8d" args="" -->F_ML_DTREE_REDUCED_ERROR</em>&nbsp;</td><td>
エラー減少枝刈り 交差検定を用いて、テストデータでの誤識別率が低下する限り枝刈りを行います </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg53dc40bcca3b09a8f12f15af04427cce34387c24031179ef009715c867365cb7"></a><!-- doxytag: member="F_ML_DTREE_COST_COMPLEXITY" ref="gg53dc40bcca3b09a8f12f15af04427cce34387c24031179ef009715c867365cb7" args="" -->F_ML_DTREE_COST_COMPLEXITY</em>&nbsp;</td><td>
コスト複雑度枝刈り 交差検定を用いて、木の複雑さと誤識別とのトレードオフを考慮した枝刈りを行う </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg53dc40bcca3b09a8f12f15af04427cce3183910a9265f8a28827086c411c23e5"></a><!-- doxytag: member="F_ML_DTREE_COST_COMPLEXITY_1SE" ref="gg53dc40bcca3b09a8f12f15af04427cce3183910a9265f8a28827086c411c23e5" args="" -->F_ML_DTREE_COST_COMPLEXITY_1SE</em>&nbsp;</td><td>
1-SE(Standard Error)ルールによる枝刈り コスト複雑度枝刈りと、誤識別率の標準誤差を用いた枝刈りを行う </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>関数</h2>
<a class="anchor" name="g2477de9e39b1a73097df24a3c851b436"></a><!-- doxytag: member="oss_fie_ml_dtree.c::fnFIE_ml_do_train_dtree" ref="g2477de9e39b1a73097df24a3c851b436" args="(FHANDLE hMl_sample, INT max_depth, INT min_node_sample, INT k_fold, INT pruning_type, INT var_type, INT preprocess, INT train_time_sec, INT *error_code)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FHANDLE FVALGAPI fnFIE_ml_do_train_dtree           </td>
          <td>(</td>
          <td class="paramtype">FHANDLE&nbsp;</td>
          <td class="paramname"> <em>hMl_sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>max_depth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>min_node_sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>k_fold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>pruning_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>var_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>preprocess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT&nbsp;</td>
          <td class="paramname"> <em>train_time_sec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">INT *&nbsp;</td>
          <td class="paramname"> <em>error_code</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
 <img class= inline-img src="oss.png" alt="[[OSS]]">  決定木による機械学習 
<p>
<em>hMl_sample</em> で指定された教師データを用いて決定木による学習を行い、 その結果を保持した学習オブジェクトのハンドルを返します。<br>
<p>
<em>hMl_sample</em> には、学習で用いる教師データを設定した教師データオブジェクトを 設定します。<em>hMl_sample</em> には2クラス以上の教師データが設定されている必要があります。 <em>hMl_sample</em> に2クラス以上の教師データが設定されていない場合は、返却されるハンドルはNULLとなり、 後述の <em>error_code</em> が設定されていた場合は、F_ERR_CALC_IMPOSSIBLE が出力されます。<br>
 また、学習において枝刈りを行う場合、<em>hMl_sample</em> のサンプル数は <em>k_fold</em> 以上で ある必要があります。<br>
<p>
<em>max_depth</em> は木を生長させたときの、最大の深さを指定します。成長中の木のノードが この深さまで達した場合、そのノードの成長を終了し、葉ノードとします。<br>
 <em>max_depth</em> を0に指定した場合、木の深さに関しては無制限となります。つまり、 他の終了条件を満たすまで、無制限に成長を続けます。<br>
<p>
<em>min_node_sample</em> は、木の各ノードに割り振られる教師データの最小数を指定します。 成長中のノードに割り振られたデータが、この値以下になった場合、そのノードの成長を 終了し、葉ノードとします。<br>
<p>
<em>k_fold</em> は、後述の <em>pruning_type</em> で枝刈りを指定した際の交差検証数を指定します。 枝刈りを行う場合、この値は2以上でなければいけません。また、枝刈りを指定しない場合は、 この値は無視されます。<br>
<p>
<em>pruning_type</em> は、決定木の学習で用いる枝刈りのタイプを指定します。以下の値にて指定してください。<br>
<p>
<ul>
<li><a class="el" href="group__fie__ml__dtree__train.html#gg53dc40bcca3b09a8f12f15af04427ccecaf9261a1b539b456a85d173f6e6772b">F_ML_DTREE_NO_PRUNING</a> <br>
 枝刈り未使用。このパラメータを指定されたときは枝刈りを行わず、停止条件を満たした最大の決定木がそのまま出力されます。</li></ul>
<p>
<ul>
<li><a class="el" href="group__fie__ml__dtree__train.html#gg53dc40bcca3b09a8f12f15af04427ccee616fbee08b43e05256e6f78be4caf8d">F_ML_DTREE_REDUCED_ERROR</a><br>
 エラー減少枝刈りによる枝刈りを行います。</li></ul>
<p>
<ul>
<li><a class="el" href="group__fie__ml__dtree__train.html#gg53dc40bcca3b09a8f12f15af04427cce34387c24031179ef009715c867365cb7">F_ML_DTREE_COST_COMPLEXITY</a><br>
 コスト複雑度枝刈りを行います。</li></ul>
<p>
<ul>
<li><a class="el" href="group__fie__ml__dtree__train.html#gg53dc40bcca3b09a8f12f15af04427cce3183910a9265f8a28827086c411c23e5">F_ML_DTREE_COST_COMPLEXITY_1SE</a><br>
 1-SEルールを使用したコスト複雑度枝刈りを行います。</li></ul>
<p>
枝刈りの詳細と、交差検証については、 <a class="el" href="group__fie__ml__dtree__doc.html#Pruning">こちら</a>を参照してください。<br>
<p>
<em>var_type</em> は、 <em>hMl_sample</em> で指定した教師データの特徴ベクトルが 数値属性であるか、カテゴリ属性であるかを指定します。以下の値にて指定してください<br>
<p>
<ul>
<li><a class="el" href="group__fie__machine__leaning.html#gg22c435c4313b27a0f350465bcc9e53f8186f8e3047ed296805f266ca2505ac1b">F_ML_SAMPLE_NUMERICAL</a><br>
 教師データの特徴ベクトルが数値属性</li></ul>
<p>
<ul>
<li><a class="el" href="group__fie__machine__leaning.html#gg22c435c4313b27a0f350465bcc9e53f866f72d5228d6161ecc0f90f92039a956">F_ML_SAMPLE_CATEGORICAL</a><br>
 教師データの特徴ベクトルがカテゴリ属性</li></ul>
<p>
教師データの属性については、 <a class="el" href="group__fie__ml__dtree__doc.html#Categocical_and_Numerical">こちら</a>を参照してください。 なお、特徴ベクトルの属性にカテゴリ属性を指定した場合、特徴ベクトルの値は全て整数値である必要があります。 そのため、特徴ベクトルに小数点以下の値が含まれていた場合、小数点以下の値は切り捨てられ、 整数値のベクトルとして扱われます。<br>
 その際、内部で教師データオブジェクトのコピーを作成し、そのデータに対して処理を行います。 そのため、入力の <em>hMl_sample</em> は変更されません。<br>
<p>
<em>preprocess</em> は学習を開始する前に、与えられた教師データに行う前処理を指定します。<br>
 値は以下のdefineをORで指定します。それ以外の値は無視されるので注意してください。 また、前処理が不要な場合は0を指定してください。<br>
<p>
<ul>
<li><a class="el" href="group__fie__machine__leaning.html#g3e0bbb57e553eeb76abf8ad22203cf48">F_ML_PRE_TRIM_VECTOR</a> : 重複した教師データの削除 <br>
</li><li><a class="el" href="group__fie__machine__leaning.html#g3de91d3be70c2e2d58b68d261b5def11">F_ML_PRE_SCALE_VECTOR</a> : 特徴ベクトルの各成分の正規化 <br>
</li></ul>
<p>
決定木の学習では、まずは事前処理を指定せずに学習を行い、パラメータの調整で精度を上げていく事を推奨します。 教師データの特徴ベクトルがカテゴリ属性で合った場合は、事前処理の指定は無視されます。<br>
 なお、教師データに対する前処理を行う際は、内部で教師データオブジェクトのコピーを 作成し、そのデータに対して処理を行います。そのため、入力の <em>hMl_sample</em> は変更されません。<p>
<em>train_time_sec</em> は 学習時間の上限値を秒単位で設定します。この値が設定されていた場合、 内部で学習開始からの経過時間の監視を行います。指定された時間を経過した場合、 学習を打ち切り、処理を終了します。学習の打ち切りが発生した場合、 返却されるハンドルはNULLとなります。また、後述の <em>error_code</em> が設定されていた場合は、 F_ERR_TIMEOUT が設定されます。<p>
<em>pruning_type</em> にて枝刈りが指定されていた場合、各交差検証木や、出力用の木の学習ごとに この時間が適応されます。そのため、エラー減少枝刈りの場合は、最大で <em>train_time_sec</em> * <em>k_fold</em> 、 コスト複雑度枝刈り(1-SEルールも含む)の場合は、最大で <em>train_time_sec</em> * ( <em>k_fold</em> + 1 ) だけ 学習時間がかかります（枝刈りに関する試行錯誤の時間は含まれません)。 なお、学習中タイムアウトが1回でも発生した場合は、エラー扱いとなります。<br>
<p>
学習時間の監視が不要な場合は <em>train_time_sec</em> に0を設定します。このときは、 終了条件が成立するまで、無制限に学習を続けます。<br>
<p>
<em>error_code</em> には、学習を行った際のエラーコードを設定されます。学習が正常終了した場合は F_ERR_NONE が 設定されます。なお、エラーコードを受け取る必要が無い場合はNULLを指定してください。<p>
<dl compact><dt><b>引数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hMl_sample</em>&nbsp;</td><td>学習に用いる教師データ教師データオブジェクトのハンドル </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>max_depth</em>&nbsp;</td><td>決定木の最大の深さ(0 &lt;= <em>max_depth</em> 0で深さ無制限) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>min_node_sample</em>&nbsp;</td><td>ノードに割り振られる最小サンプル数 (1 &lt;= <em>min_node_sample</em> ) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>k_fold</em>&nbsp;</td><td>枝刈りの交差検証数 (2 &lt;= <em>k_fold</em> 枝刈りを行わない場合は未使用) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pruning_type</em>&nbsp;</td><td>枝刈りのタイプ </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>var_type</em>&nbsp;</td><td>教師データの特徴ベクトルの属性 </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>preprocess</em>&nbsp;</td><td>学習の前処理指定パラメータ </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>train_time_sec</em>&nbsp;</td><td>学習時間の上限値(単位：秒) 指定しない場合は0 </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>error_code</em>&nbsp;</td><td>エラー発生時のエラーコード エラーコードを受け取る必要の無い場合は、NULLを指定します。<ul>
<li>F_ERR_NONE 正常終了</li><li>F_ERR_INVALID_PARAM 入力されたパラメータが不正</li><li>F_ERR_INVALID_OBJECT 入力された教師データオブジェクトが不正</li><li>F_ERR_TIMEOUT 指定された学習時間内で学習が終了しなかった</li><li>F_ERR_NOMEMORY メモリ不足による領域確保エラー</li><li>F_ERR_CALC_IMPOSSIBLE 計算不能エラー</li><li>F_ERR_NO_LICENCE ライセンスエラー、または未初期化エラー</li></ul>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>戻り値:</b></dt><dd>確保された機械学習オブジェクトのハンドル エラーにより学習に失敗した場合はNULLを返します</dd></dl>
<dl class="see" compact><dt><b>参照:</b></dt><dd><a class="el" href="group__fie__ml.html#g8a2df349dd2fb1029049337851d06be8" title="機械学習に基づいた、入力データの判別">fnFIE_ml_predict()</a> </dd></dl>

</div>
</div><p>
</div>
<hr size="1">
<address style="align: right; color: #cccccc;">
	<small>
	Documentation copyright &copy; 2009-2025 TOKYO ELECTRON DEVICE LIMITED. <br>
	Generated on Tue Sep 16 09:08:54 2025 for FIEライブラリ by&nbsp;<a href="http://www.doxygen.org/index.html">doxygen</a> 1.5.6-FASTSP-p2
	</small>
</address>
</body>
</html>
