{% load payments_tags %}

<!-- Payment Progress Bar Component -->
<div>
    <!-- Progress Steps (Hidden on mobile) -->
    <div class="hidden md:flex justify-between items-center mb-4">
        {% for step in payment|payment_progress_steps %}
            <div class="flex flex-col items-center text-center">
                <div class="w-8 h-8 flex items-center justify-center rounded-full border-2 mb-2
                    {% if step.completed %}border-green-500 bg-green-500 text-white
                    {% elif step.active %}border-blue-500 bg-blue-500 text-white
                    {% else %}border-gray-300 dark:border-gray-600{% endif %}">
                    {% if step.completed %}
                        <span class="material-icons text-sm">check</span>
                    {% elif step.active %}
                        <div class="w-3 h-3 bg-blue-500 rounded-full animate-pulse"></div>
                    {% else %}
                        <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                    {% endif %}
                </div>
                <div class="text-xs text-gray-500 dark:text-gray-400 mt-1">{{ step.label }}</div>
            </div>
        {% endfor %}
    </div>
    
    <!-- Progress Bar -->
    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-4 md:mt-0">
        <div class="h-2 rounded-full transition-all duration-500 ease-out
            {% if payment.status == 'completed' %}bg-green-600
            {% elif payment.status == 'failed' %}bg-red-600
            {% elif payment.status == 'pending' %}bg-yellow-600
            {% else %}bg-blue-600{% endif %}" 
             style="width: {{ payment|payment_progress_percentage }}%"
             data-percentage="{{ payment|payment_progress_percentage }}">
        </div>
    </div>
    
    <!-- Progress Text -->
    <div class="flex justify-between items-center mt-2 text-xs text-gray-500 dark:text-gray-400">
        <span>{{ payment|payment_progress_percentage }}% Complete</span>
        <span>{{ payment.get_status_display }}</span>
    </div>
</div>
