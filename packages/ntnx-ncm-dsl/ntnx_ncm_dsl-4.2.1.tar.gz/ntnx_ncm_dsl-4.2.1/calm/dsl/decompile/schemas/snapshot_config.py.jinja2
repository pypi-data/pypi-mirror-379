{%- macro snapshot_config(obj) %}
{% if obj.policy %}
{% if obj.rule %}
AppProtection.SnapshotConfig{% if obj.provider %}.{{obj.provider}}{% endif %}(name='{{obj.name}}', target=ref({{obj.target}}), num_of_replicas="{{obj.num_of_replicas}}", restore_config=ref({{obj.restore_config}}), policy=AppProtection.ProtectionPolicy('{{obj.policy}}', rule='{{obj.rule}}'){% if obj.snapshot_location_type %}, snapshot_location_type="{{obj.snapshot_location_type}}"{% endif %}{% if obj.description %}, description="{{obj.description}}"{% endif %})
{% else %}
AppProtection.SnapshotConfig{% if obj.provider %}.{{obj.provider}}{% endif %}(name='{{obj.name}}', target=ref({{obj.target}}), num_of_replicas="{{obj.num_of_replicas}}", restore_config=ref({{obj.restore_config}}), policy=AppProtection.ProtectionPolicy('{{obj.policy}}'){% if obj.snapshot_location_type %}, snapshot_location_type="{{obj.snapshot_location_type}}"{% endif %}{% if obj.description %}, description="{{obj.description}}"{% endif %})
{% endif %}
{% else %}
AppProtection.SnapshotConfig{% if obj.provider %}.{{obj.provider}}{% endif %}(name='{{obj.name}}', target=ref({{obj.target}}), num_of_replicas="{{obj.num_of_replicas}}", restore_config=ref({{obj.restore_config}}){% if obj.snapshot_location_type %}, snapshot_location_type="{{obj.snapshot_location_type}}"{% endif %}{% if obj.description %}, description="{{obj.description}}"{% endif %})
{% endif %}
{%- endmacro %}

{{ snapshot_config(obj) }}
