{
  "version": 2,
  "generated": "2025-09-24T16:12:08Z",
  "description": "Memory anchors are now embedded in source files as CLAUDE_ANCHOR[key] comments",
  "session_history": [
    {
      "id": "smart-git-20250917-122934",
      "time": "2025-09-17T12:29:34",
      "branch": "main-agent-refactor",
      "commit": "2433ad7bdf3b14eb8dab4d9749f35a6a61ba1740",
      "note": "Post-session snapshot after main agent refactor documentation phase"
    },
    {
      "id": "main-agent-integration-20250917-123100",
      "time": "2025-09-17T12:31:00",
      "branch": "main-agent-refactor",
      "commit": "66f49f2f4c9f7d0b9c8a7d6e5f4c3b2a19876543",
      "note": "Post-session snapshot after main agent integration with compatibility shims"
    },
    {
      "id": "main-agent-integration-20250917-141518",
      "time": "2025-09-17T14:15:18",
      "branch": "main-agent-refactor",
      "commit": "0455acc7536d3c49f021f6055f6c6f8a7a959b06",
      "note": "Post-session snapshot after enhancing tool recovery and error handling"
    }
  ],
  "anchors": [
    {
      "anchor_key": "main-agent-module",
      "path": "src/tunacode/core/agents/main.py",
      "line": 6,
      "kind": "module",
      "description": "Primary agent orchestration and lifecycle management",
      "status": "active"
    },
    {
      "anchor_key": "process-request-entry",
      "path": "src/tunacode/core/agents/main.py",
      "line": 411,
      "kind": "function",
      "symbol": "process_request",
      "description": "Main entry point for all agent requests",
      "status": "active"
    },
    {
      "anchor_key": "repl-module",
      "path": "src/tunacode/cli/repl.py",
      "line": 7,
      "kind": "module",
      "description": "Core REPL loop and user interaction handling",
      "status": "active"
    },
    {
      "anchor_key": "process-request-repl",
      "path": "src/tunacode/cli/repl.py",
      "line": 101,
      "kind": "function",
      "symbol": "process_request",
      "description": "REPL's main request processor with error handling",
      "status": "active"
    },
    {
      "anchor_key": "state-module",
      "path": "src/tunacode/core/state.py",
      "line": 6,
      "kind": "module",
      "description": "Central state management and session tracking",
      "status": "active"
    },
    {
      "anchor_key": "session-state",
      "path": "src/tunacode/core/state.py",
      "line": 33,
      "kind": "class",
      "symbol": "SessionState",
      "description": "Core session state container",
      "status": "active"
    },
    {
      "anchor_key": "state-manager",
      "path": "src/tunacode/core/state.py",
      "line": 109,
      "kind": "class",
      "symbol": "StateManager",
      "description": "Main state manager singleton",
      "status": "active"
    },
    {
      "anchor_key": "commands-module",
      "path": "src/tunacode/cli/commands/__init__.py",
      "line": 11,
      "kind": "module",
      "description": "Command registry and dispatch system",
      "status": "active"
    },
    {
      "anchor_key": "command-registry",
      "path": "src/tunacode/cli/commands/registry.py",
      "line": 3,
      "kind": "module",
      "description": "Central command registration and execution",
      "status": "active"
    },
    {
      "anchor_key": "grep-module",
      "path": "src/tunacode/tools/grep.py",
      "line": 11,
      "kind": "module",
      "description": "Fast parallel file search with 3-second deadline",
      "status": "active"
    },
    {
      "anchor_key": "parallel-grep-class",
      "path": "src/tunacode/tools/grep.py",
      "line": 36,
      "kind": "class",
      "symbol": "ParallelGrep",
      "description": "Main grep implementation with timeout handling",
      "status": "active"
    },
    {
      "anchor_key": "react-tool-entry",
      "path": "src/tunacode/tools/react.py",
      "line": 18,
      "kind": "module",
      "description": "ReactTool implementation capturing think/observe scratchpad entries",
      "status": "active"
    },
    {
      "anchor_key": "react-forced-call",
      "path": "src/tunacode/core/agents/main.py",
      "line": 209,
      "kind": "function",
      "symbol": "_maybe_force_react_snapshot",
      "description": "Auto snapshot helper injecting guidance into LLM context",
      "status": "active"
    },
    {
      "anchor_key": "react-system-injection",
      "path": "src/tunacode/core/agents/main.py",
      "line": 278,
      "kind": "line",
      "description": "React guidance becomes system prompt for next LLM call",
      "status": "active"
    },
    {
      "anchor_key": "publish-workflow-9d7fb121-2f47-4f31-9856-67e25f2c4834",
      "path": ".github/workflows/publish-release.yml",
      "line": 4,
      "kind": "line",
      "description": "Renamed release workflow so GitHub Actions executes the Ruff lint/test pipeline without cached definitions and pins Python 3.12 for Hatch stability",
      "status": "active"
    },
    {
      "anchor_key": "model-command-registry-validation-skip",
      "path": "tests/characterization/test_characterization_commands.py",
      "line": 73,
      "kind": "line",
      "description": "Characterization test bypasses registry.load() to avoid Pydantic validation failures from cached API data (e.g., zero limits). Preserves intent to display current model info.",
      "status": "active"
    },
    {
      "anchor_key": "86cc1a41",
      "path": "src/tunacode/cli/commands/registry.py",
      "line": 317,
      "kind": "line",
      "description": "Prefix-only command matching after removing fuzzy fallback",
      "status": "active",
      "created": "2025-09-24T15:05:39Z"
    },
    {
      "anchor_key": "1f0911c7",
      "path": "src/tunacode/ui/completers.py",
      "line": 176,
      "kind": "line",
      "description": "Prompt Toolkit fuzzy matching consolidates file and directory suggestions",
      "status": "active",
      "created": "2025-09-24T15:29:42Z"
    },
    {
      "key": "0b3f320e",
      "path": "src/tunacode/ui/path_heuristics.py",
      "line": 7,
      "kind": "line",
      "description": "Cross-ecosystem skip directory defaults for FileReferenceCompleter global roots",
      "status": "active",
      "created": "2025-09-24T16:08:12Z"
    },
    {
      "key": "6fd59413",
      "path": "src/tunacode/ui/path_heuristics.py",
      "line": 22,
      "kind": "line",
      "description": "Skip list includes __pycache__ to avoid noisy Python build artifacts in suggestions",
      "status": "active",
      "created": "2025-09-24T16:10:11Z"
    },
    {
      "key": "2bcebd52",
      "path": "src/tunacode/ui/path_heuristics.py",
      "line": 31,
      "kind": "line",
      "description": "Skip heuristic checks every path component to prune nested junk directories such as __pycache__",
      "status": "active",
      "created": "2025-09-24T16:12:08Z"
    }
  ]
}