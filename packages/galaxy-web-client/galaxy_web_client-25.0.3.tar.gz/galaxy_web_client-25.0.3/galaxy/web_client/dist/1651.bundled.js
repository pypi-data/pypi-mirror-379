(()=>{"use strict";let e=[],t="",r=[];self.addEventListener("message",(s=>{const i=s.data;if("setArray"===i.type?e=i.array:"setFields"===i.type?r=i.fields:"setFilter"===i.type&&(t=i.filter),e.length>0&&r.length>0){const s=function(e,t,r){return""===e?t:t.filter((t=>{const s=e.toLocaleLowerCase();for(const e of r){let r;if("string"==typeof e?r=t[e]:Array.isArray(e)&&(r=e.reduce(((e,t)=>{if(e&&"object"==typeof e)return e[t]}),t)),"string"==typeof r){if(r.toLowerCase().includes(s))return!0}else if(Array.isArray(r))return r.find((e=>"string"==typeof e&&e.toLowerCase().includes(s)))}return!1}))}(t,e,r);self.postMessage({type:"result",filtered:s})}}))})();