#########################
# Research Collaboration preset
# Tips:
# - Add/replace advisors for style, safety, or pedagogy feedback.
# - Use TOPIC to seed objective, and pin via context_defaults.
# - Reorder the scheduler to change cadence (e.g., put summarizer at the end).
#########################

version: "1.0.0"
id: research_team
name: Research Collaboration
description: Scientists explore a research problem with light-touch moderation.

# Optional user seed topic (pinned when enabled)
objective: ${TOPIC:Investigate a curious scientific question together.}

# Seed content to avoid circular conversations
user_messages:
  - "Let's explore the fascinating question: How do quantum effects influence biological processes at the molecular level? This could revolutionize our understanding of life itself."

runtime:
  max_rounds: 6
  trace: { enabled: false }
  scheduler:
    impl: agentrylab.runtime.schedulers.every_n.EveryNScheduler
    params:
      schedule:
        scientistA: 1
        scientistB: 1
        style_coach: 2
        summarizer:
          every_n: 2
          run_on_last: true
  message_contract:
    require_metadata: false
  context_defaults:
    pin_objective: true

providers:
  - id: openai_gpt4o_mini
    impl: agentrylab.runtime.providers.openai.OpenAIProvider
    model: "gpt-4o-mini"
    api_key: ${OPENAI_API_KEY}
    temperature: 0.2
    timeout: 30

tools:
  - id: search_ddg
    impl: agentrylab.runtime.tools.ddg.DuckDuckGoSearchTool
    params:
      max_results: 5

agents:
  - id: scientistA
    role: agent
    provider: openai_gpt4o_mini
    tools: [search_ddg]
    description: Focused on theory
    system_prompt: |
      You are a theoretical physicist exploring quantum biology. Start with a specific hypothesis about quantum effects in biological systems. Be concrete and scientific. Always provide a detailed response - never leave your response empty.
      
      TOOL USAGE:
      - Search for relevant research using the search tool:
        ```json
        {"tool": "search_ddg", "args": {"query": "quantum biology research"}}
        ```
      - Use search results to support your hypothesis with real sources
      - DO NOT generate fake URLs - only use URLs from tool results
  - id: scientistB
    role: agent
    provider: openai_gpt4o_mini
    tools: [search_ddg]
    description: Focused on experiments
    system_prompt: |
      You are an experimental biologist designing tests for quantum effects in living systems. Propose specific, measurable experiments. Always provide detailed, substantive responses. Never give empty responses - always contribute meaningful content.
      
      TOOL USAGE:
      - Search for relevant research using the search tool:
        ```json
        {"tool": "search_ddg", "args": {"query": "quantum biology experiments"}}
        ```
      - Use search results to support your experimental proposals with real sources
      - DO NOT generate fake URLs - only use URLs from tool results
  - id: summarizer
    role: summarizer
    provider: openai_gpt4o_mini
    description: Summarizes scientific progress
    system_prompt: "Summarize the scientific discussion neutrally with a light, readable tone. Always provide a summary - never leave your response empty."
    max_summary_chars: 600

advisors:
  - id: style_coach
    role: advisor
    provider: openai_gpt4o_mini
    description: Non-blocking style feedback
    system_prompt: |
      You are a style coach. Provide 2-3 specific suggestions to improve clarity and structure.
      Focus on readability and organization. Give direct feedback, not questions.
      Always provide suggestions - never ask what the user wants.
