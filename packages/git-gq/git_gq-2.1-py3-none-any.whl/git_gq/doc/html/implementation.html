

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Implementation &mdash; git-gq 2.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=c4a36953"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Conflicts and conflict resolution" href="conflicts.html" />
    <link rel="prev" title="Prerequisites" href="prerequisites.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            git-gq
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#patches-vs-commits">Patches vs. Commits</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#the-patch-queue">The patch queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#advantages-of-the-patch-queue">Advantages of the patch queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#disadvantages-of-the-patch-queue">Disadvantages of the patch queue</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Implementation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#directory-structure">Directory structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#files-in-the-patch-queue-directory">Files in the patch queue directory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#series">series</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parent">parent</a></li>
<li class="toctree-l3"><a class="reference internal" href="#patch-files-patch">patch files ‘*.patch’</a></li>
<li class="toctree-l3"><a class="reference internal" href="#applied">applied</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="conflicts.html">Conflicts and conflict resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="backups.html">Backups</a><ul>
<li class="toctree-l2"><a class="reference internal" href="backups.html#implementation">Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="backups.html#how-to-create-a-backup">How to create  a backup</a></li>
<li class="toctree-l2"><a class="reference internal" href="backups.html#how-to-restore-a-backup">How to restore a backup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example Workflows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples.html#local-development">Local development</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#updates-from-a-remote-repository">Updates from a remote repository</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="commandline.html">Command line interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="commandline.html#documentation-conventions">Documentation conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="commandline.html#help-and-documentation">Help and documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="commandline.html#bash-completion-commands">Bash completion commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="commandline.html#queue-management-commands">Queue management commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="commandline.html#patch-management-commands">Patch management commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="commandline.html#miscellaneous-commands">Miscellaneous commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="commandline.html#options">OPTIONS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">How to install git-gq</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#install-from-pypi-with-pip-recommended">Install from pypi with pip (recommended)</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#install-from-distribution-tar-file">Install from distribution tar file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#system-wide-installation">System wide installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#local-installation-in-directory">Local installation in DIRECTORY</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#how-to-uninstall">How to uninstall</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install.html#install-from-source">Install from source</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">git-gq</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Implementation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/implementation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="implementation">
<h1>Implementation<a class="headerlink" href="#implementation" title="Link to this heading"></a></h1>
<section id="directory-structure">
<h2>Directory structure<a class="headerlink" href="#directory-structure" title="Link to this heading"></a></h2>
<p>All files git-gq uses are in directory ‘.gqpatches’. You may want to add this
to your .gitignore file.</p>
<p>‘.gqpatches/tmp’ is the directory for temporary files git-gq creates.</p>
<p>The program can manage more than one patch queue. Each patch queue has a name
and all files of the queue are in a directory with the same name, e.g.
‘.gqpatches/MYQUEUE’. The default name for the first patch queue is ‘default’.</p>
<p>The file ‘.gqpatches/queue’ contains the name of the currently selected patch
queue.</p>
</section>
<section id="files-in-the-patch-queue-directory">
<h2>Files in the patch queue directory<a class="headerlink" href="#files-in-the-patch-queue-directory" title="Link to this heading"></a></h2>
<p>In the patch queue directory, e.g. ‘.gqpatches/default’, you find the following
files or directories:</p>
<section id="series">
<h3>series<a class="headerlink" href="#series" title="Link to this heading"></a></h3>
<p>The order of patches is kept in a file named ‘series’ that just contains all
the filenames of all unapplied patches. <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">gq</span> <span class="pre">push</span></code> takes and applies the
patch from the first line in this file.</p>
</section>
<section id="parent">
<h3>parent<a class="headerlink" href="#parent" title="Link to this heading"></a></h3>
<p>The parent revision is stored in a file ‘parent’. This is the most recent
commit that is not allowed to be modified. This file is created when you start
your work with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">gq</span> <span class="pre">init</span></code>. It can be changed with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">gq</span> <span class="pre">parent</span></code>.</p>
<p>A special revision is <cite>NULL</cite>. This is the very first revision in the repository
where no files are committed. git doesn’t have a concept of a <cite>NULL</cite> revision,
this is emulated by git-gq by creating a revision with no files in it. When the
parent is set to <cite>NULL</cite> this means that you can put the very first revision on
the patch queue and by this have the ability to modify the very first revision.
Of course, you should never do this with a published repository, since <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">gq</span>
<span class="pre">pop</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">gq</span> <span class="pre">push</span></code> always modify revision hash keys.</p>
</section>
<section id="patch-files-patch">
<h3>patch files ‘*.patch’<a class="headerlink" href="#patch-files-patch" title="Link to this heading"></a></h3>
<p>A <em>patch file</em> is basically a file with recipes for changes in files. Each
recipe is called a <em>hunk</em>. A <em>hunk</em> contains line numbers, context lines, lines
to remove and lines to add.</p>
<p>git-gq uses standard git commands to move patches between the
repository and the patch queue. In the patch queue, each patch is a file
created from the difference of a commit and it’s predecessor in the repository
with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">format-patch</span></code>. Among the changes between two commits this file also
contains all the metadata of the second commit. The name of the patch file is
computed from the first line of the log message where spaces are replaced with
dashes and end with the extension ‘.patch’.</p>
<p>A patch file is re-applied to the repository with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">am</span></code>.</p>
<p>Here is an example of a patch file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">From</span> <span class="mi">273</span><span class="n">c3709f7da0fe0e11369ea0d9a26053f78e3ee</span> <span class="n">Mon</span> <span class="n">Sep</span> <span class="mi">17</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="mi">2001</span>
<span class="n">From</span><span class="p">:</span> <span class="n">Goetz</span> <span class="n">Pfeiffer</span> <span class="o">&lt;</span><span class="n">goetzpf</span><span class="nd">@googlemail</span><span class="o">.</span><span class="n">com</span><span class="o">&gt;</span>
<span class="n">Date</span><span class="p">:</span> <span class="n">Tue</span><span class="p">,</span> <span class="mi">3</span> <span class="n">Jun</span> <span class="mi">2025</span> <span class="mi">18</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">57</span> <span class="o">+</span><span class="mi">0200</span>
<span class="n">Subject</span><span class="p">:</span> <span class="p">[</span><span class="n">PATCH</span><span class="p">]</span> <span class="n">sample</span><span class="o">-</span><span class="n">comment</span>

<span class="o">---</span>
 <span class="n">sample</span><span class="o">.</span><span class="n">c</span> <span class="o">|</span> <span class="mi">2</span> <span class="o">+-</span>
 <span class="mi">1</span> <span class="n">file</span> <span class="n">changed</span><span class="p">,</span> <span class="mi">1</span> <span class="n">insertion</span><span class="p">(</span><span class="o">+</span><span class="p">),</span> <span class="mi">1</span> <span class="n">deletion</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>

<span class="n">diff</span> <span class="o">--</span><span class="n">git</span> <span class="n">a</span><span class="o">/</span><span class="n">sample</span><span class="o">.</span><span class="n">c</span> <span class="n">b</span><span class="o">/</span><span class="n">sample</span><span class="o">.</span><span class="n">c</span>
<span class="n">index</span> <span class="n">e5cf2b0</span><span class="o">.</span><span class="mf">.350</span><span class="n">c29b</span> <span class="mi">100644</span>
<span class="o">---</span> <span class="n">a</span><span class="o">/</span><span class="n">sample</span><span class="o">.</span><span class="n">c</span>
<span class="o">+++</span> <span class="n">b</span><span class="o">/</span><span class="n">sample</span><span class="o">.</span><span class="n">c</span>
<span class="o">@@</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span> <span class="o">+</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span> <span class="o">@@</span> <span class="nb">int</span> <span class="n">main</span><span class="p">(</span><span class="nb">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
   <span class="p">{</span>
     <span class="nb">int</span> <span class="n">i</span><span class="p">;</span>

<span class="o">-</span>    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;number of arguments: </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">argc</span><span class="p">);</span>
     <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;program name: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="o">+</span>    <span class="o">/*</span> <span class="n">iterate</span> <span class="n">over</span> <span class="nb">all</span> <span class="n">command</span> <span class="n">line</span> <span class="n">arguments</span><span class="p">:</span> <span class="o">*/</span>
     <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">argc</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
       <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;arg no </span><span class="si">%2d</span><span class="s2">: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
     <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="o">--</span>
<span class="mf">2.49.0</span>
</pre></div>
</div>
</section>
<section id="applied">
<h3>applied<a class="headerlink" href="#applied" title="Link to this heading"></a></h3>
<p>Directory ‘applied’ is created by <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">gq</span> <span class="pre">backup</span></code>. It contains the <em>applied</em>
patches from the time this command is issued. Note that files in this directory
are not changed by <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">gq</span> <span class="pre">push</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">gq</span> <span class="pre">pop</span></code>, only by <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">gq</span> <span class="pre">backup</span></code>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="prerequisites.html" class="btn btn-neutral float-left" title="Prerequisites" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="conflicts.html" class="btn btn-neutral float-right" title="Conflicts and conflict resolution" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Goetz Pfeiffer &lt;goetzpf@googlemail.com&gt;.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>