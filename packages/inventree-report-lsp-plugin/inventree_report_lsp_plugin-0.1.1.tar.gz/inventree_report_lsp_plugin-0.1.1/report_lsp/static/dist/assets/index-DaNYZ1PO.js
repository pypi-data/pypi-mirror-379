import{bV as te,D as $,bT as nn,bO as Y,cK as Pn,cL as Mt,cM as y,cN as on,cO as ze,cP as Mn,E as C,F as rn,cQ as q,cR as xn,cS as Vn,cT as rt,t as mt,cU as N,bB as Bn,bC as P,bF as ne,bG as v,cV as Je,bL as Dt,cW as st,cX as pi,cY as re,cZ as wi,c_ as oe,Z as x,c$ as pt,p as St,bw as an,g as M,u as g,bE as ht,bQ as Et,bP as k,d0 as bs,d1 as ps,i as E,j as d,q as ws,b6 as z,bs as ee,bt as j,d2 as gt,d3 as Ln,d4 as Ss,d5 as cn,d6 as ti,d7 as xe,d8 as kn,d9 as On,bi as Ve,da as ei,db as $t,dc as F,dd as wt,de as X,df as Mi,U as Si,dg as Hn,dh as Fn,bY as L,di as Ii,dj as ln,dk as vs,dl as As,dm as zn,dn as bt,dp as Gn,dq as ie,dr as Cs,ds as hn,dt as Wn,du as K,dv as Ie,dw as qt,l as Qt,dx as dn,dy as Jt,dz as ot,dA as un,dB as Un,dC as Yn,dD as Kn,cm as h,bk as S,bU as it,bp as et,dE as vt,ce as Tt,dF as Zn,dG as U,dH as At,dI as jn,a8 as ye,dJ as Xn,dK as $n,dL as qn,a7 as ii,dM as we,dN as fn,dO as Qn,dP as yi,dQ as T,dR as Ns,bn as Ge,cj as vi,bm as at,ck as Jn,bl as to,W as mn,dS as eo,bN as Se,cg as io,ch as so,dT as Es,dU as se,bo as no,dV as si,dW as xi,dX as be,dY as Ps,dZ as oo,d_ as fe,d$ as Be,H as nt,e0 as xt,e1 as Vi,e2 as _t,e3 as gn,e4 as Ms,cn as I,e5 as ro,e6 as ao,e7 as co,e8 as Ue,e9 as lo,cy as ho,aw as A,cr as w,cx as uo,ct as Ee,cu as Ti,cv as We,cw as Te,cp as B,cq as fo,cs as xs,ea as Ye,eb as mo,ec as go,ed as Ai,ee as Bi,ef as O,eg as Vs,eh as G,ei as bo,ej as po,ek as wo,cB as So,cA as vo,el as Bs,em as Ao,en as Ls,eo as ct,co as le,ep as Ke,eq as Co,er as Eo,ax as R,es as ks,bd as bn,et as Os,eu as Io,ev as yo,ew as To,B as Ze,ex as pn,ey as _o,by as Do,ez as Ro,eA as No,eB as je,eC as Po,eD as _i,eE as Mo,eF as xo,eG as Vo,eH as Bo,eI as Lo,eJ as ko,eK as Oo,eL as Ho,eM as Fo,eN as zo,eO as Go,eP as wn,eQ as Wo,eR as Is,eS as Hs,eT as Uo,eU as Sn,bX as vn,eV as Li,eW as An,bz as ys,bA as Ts,eX as Yo,bD as _s,eY as Xe,eZ as Ko,e_ as Zo,e$ as jo,f0 as Xo,f1 as $o,f2 as qo,bZ as J,f3 as Fs,f4 as Qo,f5 as Jo,f6 as Ds,f7 as tr,f8 as zs,f9 as er,fa as Gs,fb as Ws,fc as ir,fd as sr,fe as nr,ff as or,fg as rr,fh as ar,fi as cr,fj as lr,fk as hr,fl as dr,Q as ur,fm as fr,fn as mr,fo as gr,fp as Cn,fq as br,fr as Us,fs as pr,ft as wr,fu as Sr,fv as Ys,fw as Rs,a3 as Vt,fx as En,fy as ve,fz as $e,fA as In,fB as yn,fC as ae,fD as vr,fE as Di,fF as Ks,fG as Ar,fH as Cr,fI as Er,fJ as Ir,fK as Zs,fL as yr,fM as Tr,fN as _r,fO as Dr,fP as Rr,fQ as Nr,fR as Pr,bK as Mr,fS as js,fT as xr,fU as Vr,fV as Br,fW as Lr,fX as kr,fY as Or,fZ as Hr,f_ as Fr,f$ as zr,w as Gr,g0 as Wr,g1 as Ur,s as Yr,g2 as Tn,a0 as Kr,a1 as Zr,g3 as jr,g4 as Xr,g5 as $r,g6 as qr,g7 as Qr,g8 as Jr,g9 as ta,ga as ea,gb as Ci,aS as ia,gc as sa,gd as na,at as oa,ge as ra,cd as aa,gf as ca,gg as la,gh as ha,gi as da,gj as ua,cf as fa}from"./main-BY5dYOjU.js";import{cF as Bc,cG as Lc,cD as kc,cJ as Oc,cH as Hc,cE as Fc,cI as zc,cC as Gc}from"./main-BY5dYOjU.js";import{S as ma,P as ga,A as ba,c as pa,d as Ce,D as W,g as wa,a as Sa,E as va,B as Aa}from"./views-CaYyEkrT.js";import{E as Ca}from"./files.contribution._fileEditorFactory-Bj2Ckw7Y.js";var Ea=".monaco-workbench>.notifications-center{border-radius:4px;bottom:33px;display:none;overflow:hidden;position:absolute;right:11px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-center{bottom:11px}.monaco-workbench>.notifications-center.visible{display:block}.monaco-workbench>.notifications-center>.notifications-center-header{align-items:center;display:flex;height:35px;padding-left:8px;padding-right:5px}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-title{font-size:11px;text-transform:uppercase}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar{flex:1}.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .actions-container{justify-content:flex-end}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row:not(:last-child)>.notification-list-item{border-bottom:1px solid var(--vscode-notifications-border)}.monaco-workbench>.notifications-center .notifications-list-container .monaco-list-row:last-child{border-radius:0 0 4px 4px}.monaco-workbench>.notifications-center .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-center .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}";te(Ea,{});var Ia=".monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item{margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container .action-item:first-child,.monaco-workbench>.notifications-center>.notifications-center-header>.notifications-center-header-toolbar .action-item:first-child{margin-left:4px}";te(Ia,{});var Z;(function(u){u[u.ADD=0]="ADD",u[u.CHANGE=1]="CHANGE",u[u.EXPAND_COLLAPSE=2]="EXPAND_COLLAPSE",u[u.REMOVE=3]="REMOVE"})(Z||(Z={}));var pe;(function(u){u[u.ADD=0]="ADD",u[u.REMOVE=1]="REMOVE"})(pe||(pe={}));class ya extends ${constructor(t,e){super(),this.item=t,this.onClose=e,this._onDidClose=this._register(new C),this.onDidClose=this._onDidClose.event,this._onDidChangeVisibility=this._register(new C),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.registerListeners()}registerListeners(){this._register(this.item.onDidChangeVisibility(t=>this._onDidChangeVisibility.fire(t))),rt.once(this.item.onDidClose)(()=>{this._onDidClose.fire(),this.dispose()})}get progress(){return this.item.progress}updateSeverity(t){this.item.updateSeverity(t)}updateMessage(t){this.item.updateMessage(t)}updateActions(t){this.item.updateActions(t)}close(){this.onClose(this.item),this.dispose()}}const mi=class mi extends ${constructor(){super(...arguments),this._onDidChangeNotification=this._register(new C),this.onDidChangeNotification=this._onDidChangeNotification.event,this._onDidChangeStatusMessage=this._register(new C),this.onDidChangeStatusMessage=this._onDidChangeStatusMessage.event,this._onDidChangeFilter=this._register(new C),this.onDidChangeFilter=this._onDidChangeFilter.event,this._notifications=[],this.filter={global:y.OFF,sources:new Map}}get notifications(){return this._notifications}get statusMessage(){return this._statusMessage}setFilter(t){let e=!1;typeof t.global=="number"&&(e=this.filter.global!==t.global,this.filter.global=t.global);let i=!1;t.sources&&(i=!Vn(this.filter.sources,t.sources),this.filter.sources=t.sources),(e||i)&&this._onDidChangeFilter.fire({global:e?t.global:void 0,sources:i?t.sources:void 0})}addNotification(t){const e=this.createViewItem(t);if(!e)return mi.NO_OP_NOTIFICATION;const i=this.findNotification(e);return i==null||i.close(),this._notifications.splice(0,0,e),this._onDidChangeNotification.fire({item:e,index:0,kind:Z.ADD}),new ya(e,s=>this.onClose(s))}onClose(t){const e=this.findNotification(t);e&&e!==t?e.close():t.close()}findNotification(t){return this._notifications.find(e=>e.equals(t))}createViewItem(t){const e=Le.create(t,this.filter);if(!e)return;const i=(o,r)=>{const a=this._notifications.indexOf(e);a>=0&&this._onDidChangeNotification.fire({item:e,index:a,kind:o,detail:r})},s=e.onDidChangeExpansion(()=>i(Z.EXPAND_COLLAPSE)),n=e.onDidChangeContent(o=>i(Z.CHANGE,o.kind));return rt.once(e.onDidClose)(()=>{s.dispose(),n.dispose();const o=this._notifications.indexOf(e);o>=0&&(this._notifications.splice(o,1),this._onDidChangeNotification.fire({item:e,index:o,kind:Z.REMOVE}))}),e}showStatusMessage(t,e){const i=_a.create(t,e);return i?(this._statusMessage=i,this._onDidChangeStatusMessage.fire({kind:pe.ADD,item:i}),mt(()=>{this._statusMessage===i&&(this._statusMessage=void 0,this._onDidChangeStatusMessage.fire({kind:pe.REMOVE,item:i}))})):$.None}};mi.NO_OP_NOTIFICATION=new xn;let Xs=mi;function Ri(u){return u instanceof Le}var tt;(function(u){u[u.SEVERITY=0]="SEVERITY",u[u.MESSAGE=1]="MESSAGE",u[u.ACTIONS=2]="ACTIONS",u[u.PROGRESS=3]="PROGRESS"})(tt||(tt={}));class Ta extends ${constructor(){super(),this._onDidChange=this._register(new C),this.onDidChange=this._onDidChange.event,this._state=Object.create(null)}get state(){return this._state}infinite(){this._state.infinite||(this._state.infinite=!0,this._state.total=void 0,this._state.worked=void 0,this._state.done=void 0,this._onDidChange.fire())}done(){this._state.done||(this._state.done=!0,this._state.infinite=void 0,this._state.total=void 0,this._state.worked=void 0,this._onDidChange.fire())}total(t){this._state.total!==t&&(this._state.total=t,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire())}worked(t){typeof this._state.worked=="number"?this._state.worked+=t:this._state.worked=t,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire()}}const It=class It extends ${static create(t,e){if(!t||!t.message||nn(t.message))return;let i;typeof t.severity=="number"?i=t.severity:i=Y.Info;const s=It.parseNotificationMessage(t.message);if(!s)return;let n;t.actions?n=t.actions:Pn(t.message)&&(n={primary:t.message.actions});let o=t.priority??Mt.DEFAULT;return o===Mt.DEFAULT&&i!==Y.Error&&(e.global===y.ERROR?o=Mt.SILENT:on(t.source)&&e.sources.get(t.source.id)===y.ERROR&&(o=Mt.SILENT)),new It(t.id,i,t.sticky,o,s,t.source,t.progress,n)}static parseNotificationMessage(t){let e;if(t instanceof Error?e=ze(t,!1):typeof t=="string"&&(e=t),!e)return;const i=e;e.length>It.MAX_MESSAGE_LENGTH&&(e=`${e.substr(0,It.MAX_MESSAGE_LENGTH)}...`),e=e.replace(/(\r\n|\n|\r)/gm," ").trim();const s=Mn(e);return{raw:i,linkedText:s,original:t}}constructor(t,e,i,s,n,o,r,a){super(),this.id=t,this._severity=e,this._sticky=i,this._priority=s,this._message=n,this._source=o,this._visible=!1,this._onDidChangeExpansion=this._register(new C),this.onDidChangeExpansion=this._onDidChangeExpansion.event,this._onDidClose=this._register(new C),this.onDidClose=this._onDidClose.event,this._onDidChangeContent=this._register(new C),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeVisibility=this._register(new C),this.onDidChangeVisibility=this._onDidChangeVisibility.event,r&&this.setProgress(r),this.setActions(a)}setProgress(t){t.infinite?this.progress.infinite():t.total&&(this.progress.total(t.total),t.worked&&this.progress.worked(t.worked))}setActions(t={primary:[],secondary:[]}){this._actions={primary:Array.isArray(t.primary)?t.primary:[],secondary:Array.isArray(t.secondary)?t.secondary:[]},this._expanded=t.primary&&t.primary.length>0}get canCollapse(){return!this.hasActions}get expanded(){return!!this._expanded}get severity(){return this._severity}get sticky(){if(this._sticky)return!0;const t=this.hasActions;return!!(t&&this._severity===Y.Error||!t&&this._expanded||this._progress&&!this._progress.state.done)}get priority(){return this._priority}get hasActions(){return!this._actions||!this._actions.primary?!1:this._actions.primary.length>0}get hasProgress(){return!!this._progress}get progress(){return this._progress||(this._progress=this._register(new Ta),this._register(this._progress.onDidChange(()=>this._onDidChangeContent.fire({kind:tt.PROGRESS})))),this._progress}get message(){return this._message}get source(){return typeof this._source=="string"?this._source:this._source?this._source.label:void 0}get sourceId(){return this._source&&typeof this._source!="string"&&"id"in this._source?this._source.id:void 0}get actions(){return this._actions}get visible(){return this._visible}updateSeverity(t){t!==this._severity&&(this._severity=t,this._onDidChangeContent.fire({kind:tt.SEVERITY}))}updateMessage(t){const e=It.parseNotificationMessage(t);!e||e.raw===this._message.raw||(this._message=e,this._onDidChangeContent.fire({kind:tt.MESSAGE}))}updateActions(t){this.setActions(t),this._onDidChangeContent.fire({kind:tt.ACTIONS})}updateVisibility(t){this._visible!==t&&(this._visible=t,this._onDidChangeVisibility.fire(t))}expand(){this._expanded||!this.canCollapse||(this._expanded=!0,this._onDidChangeExpansion.fire())}collapse(t){!this._expanded||!this.canCollapse||(this._expanded=!1,t||this._onDidChangeExpansion.fire())}toggle(){this._expanded?this.collapse():this.expand()}close(){this._onDidClose.fire(),this.dispose()}equals(t){if(this.hasProgress||t.hasProgress)return!1;if(typeof this.id=="string"||typeof t.id=="string")return this.id===t.id;if(typeof this._source=="object"){if(this._source.label!==t.source||this._source.id!==t.sourceId)return!1}else if(this._source!==t.source)return!1;if(this._message.raw!==t.message.raw)return!1;const e=this._actions&&this._actions.primary||[],i=t.actions&&t.actions.primary||[];return rn(e,i,(s,n)=>s.id+s.label===n.id+n.label)}};It.MAX_MESSAGE_LENGTH=1e3;let Le=It;class ni extends q{constructor(t,e){super(t,e.label,void 0,!0,async()=>{e.run(),this._onDidRun.fire()}),this._onDidRun=this._register(new C),this.onDidRun=this._onDidRun.event,this._keepOpen=!!e.keepOpen,this._menu=!e.isSecondary&&e.menu?e.menu.map((i,s)=>new ni(`${t}.${s}`,i)):void 0}get menu(){return this._menu}get keepOpen(){return this._keepOpen}}class _a{static create(t,e){if(!t||nn(t))return;let i;if(t instanceof Error?i=ze(t,!1):typeof t=="string"&&(i=t),!!i)return{message:i,options:e}}}const ki="notifications.showList",ke="notifications.hideList",Da="notifications.toggleList",Ni="notifications.hideToasts",$s="notifications.focusToasts",Ra="notifications.focusNextToast",Na="notifications.focusPreviousToast",Pa="notifications.focusFirstToast",Ma="notifications.focusLastToast",Oi="notification.collapse",Hi="notification.expand",qs="notification.acceptPrimaryAction",xa="notification.toggle",Fi="notification.clear",oi="notifications.clearAll",ri="notifications.toggleDoNotDisturbMode",ai="notifications.toggleDoNotDisturbModeBySource";function Nt(u,t){if(Ri(t))return t;const e=u.lastFocusedList;if(e instanceof ps){let i=e.getFocusedElements()[0];if(Ri(i)||e.isDOMFocused()&&(i=e.element(0)),Ri(i))return i}}function Va(u,t,e){N.registerCommandAndKeybindingRule({id:ki,weight:P.WorkbenchContrib,primary:Bn(ne.CtrlCmd|v.KeyK,ne.CtrlCmd|ne.Shift|v.KeyN),handler:()=>{t.hide(),u.show()}}),N.registerCommandAndKeybindingRule({id:ke,weight:P.WorkbenchContrib+50,when:Je,primary:v.Escape,handler:()=>u.hide()}),Dt.registerCommand(Da,()=>{u.isVisible?u.hide():(t.hide(),u.show())}),N.registerCommandAndKeybindingRule({id:Fi,weight:P.WorkbenchContrib,when:st,primary:v.Delete,mac:{primary:ne.CtrlCmd|v.Backspace},handler:(s,n)=>{const o=s.get(pi),r=Nt(s.get(re),n);r&&!r.hasProgress&&(r.close(),o.playSignal(wi.clear))}}),N.registerCommandAndKeybindingRule({id:Hi,weight:P.WorkbenchContrib,when:st,primary:v.RightArrow,handler:(s,n)=>{const o=Nt(s.get(re),n);o==null||o.expand()}}),N.registerCommandAndKeybindingRule({id:qs,weight:P.WorkbenchContrib,when:oe.or(st,pt),primary:ne.CtrlCmd|ne.Shift|v.KeyA,handler:s=>{var a;const n=s.get(x).createInstance(Oe),o=Nt(s.get(re))||e.notifications.at(0);if(!o)return;const r=(a=o.actions)!=null&&a.primary?o.actions.primary.at(0):void 0;r&&(n.run(r,o),o.close(),n.dispose())}}),N.registerCommandAndKeybindingRule({id:Oi,weight:P.WorkbenchContrib,when:st,primary:v.LeftArrow,handler:(s,n)=>{const o=Nt(s.get(re),n);o==null||o.collapse()}}),N.registerCommandAndKeybindingRule({id:xa,weight:P.WorkbenchContrib,when:st,primary:v.Space,secondary:[v.Enter],handler:s=>{const n=Nt(s.get(re));n==null||n.toggle()}}),Dt.registerCommand(Ni,s=>{t.hide()}),N.registerKeybindingRule({id:Ni,weight:P.WorkbenchContrib-50,when:pt,primary:v.Escape}),N.registerKeybindingRule({id:Ni,weight:P.WorkbenchContrib+100,when:oe.and(pt,st),primary:v.Escape}),Dt.registerCommand($s,()=>t.focus()),N.registerCommandAndKeybindingRule({id:Ra,weight:P.WorkbenchContrib,when:oe.and(st,pt),primary:v.DownArrow,handler:()=>{t.focusNext()}}),N.registerCommandAndKeybindingRule({id:Na,weight:P.WorkbenchContrib,when:oe.and(st,pt),primary:v.UpArrow,handler:()=>{t.focusPrevious()}}),N.registerCommandAndKeybindingRule({id:Pa,weight:P.WorkbenchContrib,when:oe.and(st,pt),primary:v.PageUp,secondary:[v.Home],handler:()=>{t.focusFirst()}}),N.registerCommandAndKeybindingRule({id:Ma,weight:P.WorkbenchContrib,when:oe.and(st,pt),primary:v.PageDown,secondary:[v.End],handler:()=>{t.focusLast()}}),Dt.registerCommand(oi,()=>u.clearAll()),Dt.registerCommand(ri,s=>{const n=s.get(St);n.setFilter(n.getFilter()===y.ERROR?y.OFF:y.ERROR)}),Dt.registerCommand(ai,s=>{const n=s.get(St),o=s.get(an),r=n.getFilters().sort((l,m)=>l.label.localeCompare(m.label)),a=new M,c=a.add(o.createQuickPick());c.items=r.map(l=>({id:l.id,label:l.label,tooltip:`${l.label} (${l.id})`,filter:l.filter})),c.canSelectMany=!0,c.placeholder=g(3307,"Select sources to enable all notifications from"),c.selectedItems=c.items.filter(l=>l.filter===y.OFF),c.show(),a.add(c.onDidAccept(async()=>{for(const l of c.items)n.setFilter({id:l.id,label:l.label,filter:c.selectedItems.includes(l)?y.OFF:y.ERROR});c.hide()})),a.add(c.onDidHide(()=>a.dispose()))});const i=ht(3308,"Notifications");Et.appendMenuItem(k.CommandPalette,{command:{id:ki,title:ht(3309,"Show Notifications"),category:i}}),Et.appendMenuItem(k.CommandPalette,{command:{id:ke,title:ht(3310,"Hide Notifications"),category:i},when:Je}),Et.appendMenuItem(k.CommandPalette,{command:{id:oi,title:ht(3311,"Clear All Notifications"),category:i}}),Et.appendMenuItem(k.CommandPalette,{command:{id:qs,title:ht(3312,"Accept Notification Primary Action"),category:i}}),Et.appendMenuItem(k.CommandPalette,{command:{id:ri,title:ht(3313,"Toggle Do Not Disturb Mode"),category:i}}),Et.appendMenuItem(k.CommandPalette,{command:{id:ai,title:ht(3314,"Toggle Do Not Disturb Mode By Source..."),category:i}}),Et.appendMenuItem(k.CommandPalette,{command:{id:$s,title:ht(3315,"Focus Notification Toast"),category:i},when:pt})}let Oe=class extends bs{constructor(t,e){super(),this.telemetryService=t,this.notificationService=e}async runAction(t,e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:t.id,from:"message"});try{await super.runAction(t,e)}catch(i){this.notificationService.error(i)}}};Oe=E([d(0,ws),d(1,St)],Oe);var Ba=".monaco-workbench .notifications-list-container{background:var(--vscode-notifications-background);color:var(--vscode-notifications-foreground);outline-color:var(--vscode-contrastBorder)}.monaco-workbench .notifications-list-container .notification-list-item{box-sizing:border-box;display:flex;flex-direction:column;flex-direction:column-reverse;height:100%;padding:10px 5px}.monaco-workbench .notifications-list-container .notification-offset-helper{word-wrap:break-word;line-height:22px;opacity:0;position:absolute}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-main-row{display:flex;flex-grow:1}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-icon{align-items:center;background-position:50%;background-repeat:no-repeat;display:flex;flex:0 0 16px;font-size:18px;height:22px;margin-left:4px;margin-right:4px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message{flex:1;line-height:22px;overflow:hidden;text-overflow:ellipsis;user-select:text;-webkit-user-select:text}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a{color:var(--vscode-notificationLink-foreground)}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-message a:focus{outline-color:var(--vscode-focusBorder);outline-style:solid;outline-width:1px}.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-message{word-wrap:break-word;white-space:normal}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-toolbar-container{display:none;height:22px}.monaco-workbench .notifications-list-container .monaco-list-row.focused .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .monaco-list:focus-within .notification-list-item .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item.expanded .notification-list-item-toolbar-container,.monaco-workbench .notifications-list-container .notification-list-item:hover .notification-list-item-toolbar-container{display:block}.monaco-workbench .notifications-list-container .notification-list-item>.notification-list-item-details-row{align-items:center;display:none;overflow:hidden;padding-left:5px}.monaco-workbench .notifications-list-container .notification-list-item.expanded>.notification-list-item-details-row{display:flex}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-source{flex:1;font-size:12px;overflow:hidden;text-overflow:ellipsis}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container{display:flex;overflow:hidden}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button,.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container>.monaco-button-dropdown{margin:4px 5px}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-button{outline-offset:2px!important}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-text-button{display:inline-block;font-size:12px;overflow:hidden;padding:4px 10px;text-overflow:ellipsis;width:fit-content}.monaco-workbench .notifications-list-container .notification-list-item .notification-list-item-buttons-container .monaco-dropdown-button{padding:5px}.monaco-workbench .notifications-list-container .progress-bit{bottom:0}";te(Ba,{});const La=ee("notifications-clear",j.close,g(3280,"Icon for the clear action in notifications.")),ka=ee("notifications-clear-all",j.clearAll,g(3281,"Icon for the clear all action in notifications.")),Oa=ee("notifications-hide",j.chevronDown,g(3282,"Icon for the hide action in notifications.")),Ha=ee("notifications-expand",j.chevronUp,g(3283,"Icon for the expand action in notifications.")),Fa=ee("notifications-collapse",j.chevronDown,g(3284,"Icon for the collapse action in notifications.")),za=ee("notifications-configure",j.gear,g(3285,"Icon for the configure action in notifications.")),_n=ee("notifications-do-not-disturb",j.bellSlash,g(3286,"Icon for the mute all action in notifications."));var Bt;let _e=(Bt=class extends q{constructor(t,e,i){super(t,e,z.asClassName(La)),this.commandService=i}async run(t){this.commandService.executeCommand(Fi,t)}},Bt.ID=Fi,Bt.LABEL=g(3287,"Clear Notification"),Bt);_e=E([d(2,gt)],_e);var Lt;let De=(Lt=class extends q{constructor(t,e,i){super(t,e,z.asClassName(ka)),this.commandService=i}async run(){this.commandService.executeCommand(oi)}},Lt.ID=oi,Lt.LABEL=g(3288,"Clear All Notifications"),Lt);De=E([d(2,gt)],De);var kt;let ci=(kt=class extends q{constructor(t,e,i){super(t,e,z.asClassName(_n)),this.commandService=i}async run(){this.commandService.executeCommand(ri)}},kt.ID=ri,kt.LABEL=g(3289,"Toggle Do Not Disturb Mode"),kt);ci=E([d(2,gt)],ci);var Ot;let li=(Ot=class extends q{constructor(t,e,i){super(t,e),this.commandService=i}async run(){this.commandService.executeCommand(ai)}},Ot.ID=ai,Ot.LABEL=g(3290,"Toggle Do Not Disturb Mode By Source..."),Ot);li=E([d(2,gt)],li);const gi=class gi extends q{constructor(t,e){super(t,e,z.asClassName(_n))}};gi.ID="workbench.action.configureDoNotDisturbMode",gi.LABEL=g(3291,"Configure Do Not Disturb...");let he=gi;var Ht;let Re=(Ht=class extends q{constructor(t,e,i){super(t,e,z.asClassName(Oa)),this.commandService=i}async run(){this.commandService.executeCommand(ke)}},Ht.ID=ke,Ht.LABEL=g(3292,"Hide Notifications"),Ht);Re=E([d(2,gt)],Re);var Ft;let Ne=(Ft=class extends q{constructor(t,e,i){super(t,e,z.asClassName(Ha)),this.commandService=i}async run(t){this.commandService.executeCommand(Hi,t)}},Ft.ID=Hi,Ft.LABEL=g(3293,"Expand Notification"),Ft);Ne=E([d(2,gt)],Ne);var zt;let Pe=(zt=class extends q{constructor(t,e,i){super(t,e,z.asClassName(Fa)),this.commandService=i}async run(t){this.commandService.executeCommand(Oi,t)}},zt.ID=Oi,zt.LABEL=g(3294,"Collapse Notification"),zt);Pe=E([d(2,gt)],Pe);const bi=class bi extends q{constructor(t,e,i){super(t,e,z.asClassName(za)),this.notification=i}};bi.ID="workbench.action.configureNotification",bi.LABEL=g(3295,"More Actions...");let me=bi;var Gt;let Me=(Gt=class extends q{constructor(t,e,i){super(t,e),this.clipboardService=i}run(t){return this.clipboardService.writeText(t.message.raw)}},Gt.ID="workbench.action.copyNotificationMessage",Gt.LABEL=g(3296,"Copy Text"),Gt);Me=E([d(2,Ln)],Me);var zi,ut;const ft=class ft{constructor(t){this.offsetHelper=this.createOffsetHelper(t)}createOffsetHelper(t){const e=document.createElement("div");return e.classList.add("notification-offset-helper"),t.appendChild(e),e}getHeight(t){if(!t.expanded)return ft.ROW_HEIGHT;let e=ft.ROW_HEIGHT;const i=this.computePreferredHeight(t);if(ft.LINE_HEIGHT<i){const n=i-ft.LINE_HEIGHT;e+=n}return(t.source||ei(t.actions&&t.actions.primary))&&(e+=ft.ROW_HEIGHT),e===ft.ROW_HEIGHT&&t.collapse(!0),e}computePreferredHeight(t){let e=0;t.hasProgress||e++,t.canCollapse&&e++,ei(t.actions&&t.actions.secondary)&&e++,this.offsetHelper.style.width=`${450-(40+e*30-Math.max(e-1,0)*4)}px`;const i=Dn.render(t.message);this.offsetHelper.appendChild(i);const s=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);return $t(this.offsetHelper),s}getTemplateId(t){if(t instanceof Le)return hi.TEMPLATE_ID;throw new Error("unknown element type: "+t)}};ft.ROW_HEIGHT=42,ft.LINE_HEIGHT=22;let Gi=ft;class Dn{static render(t,e){const i=document.createElement("span");for(const s of t.linkedText.nodes)if(typeof s=="string")i.appendChild(document.createTextNode(s));else{let n=s.title;!n&&s.href.startsWith("command:")?n=g(3337,"Click to execute command '{0}'",s.href.substr(8)):n||(n=s.href);const o=L("a",{href:s.href,title:n,tabIndex:0},s.label);if(e){const r=b=>{zn(b)&&wt.stop(b,!0),e.callback(s.href)},a=e.toDispose.add(new Ii(o,X.CLICK)).event,c=e.toDispose.add(new Ii(o,X.KEY_DOWN)).event,l=rt.chain(c,b=>b.filter(p=>{const _=new ln(p);return _.equals(v.Space)||_.equals(v.Enter)}));e.toDispose.add(vs.addTarget(o));const m=e.toDispose.add(new Ii(o,As.Tap)).event;rt.any(a,m,l)(r,null,e.toDispose)}i.appendChild(o)}return i}}var Wt;let hi=(Wt=class{constructor(t,e,i,s){this.actionRunner=t,this.contextMenuService=e,this.instantiationService=i,this.notificationService=s}get templateId(){return zi.TEMPLATE_ID}renderTemplate(t){const e=Object.create(null);e.toDispose=new M,e.container=document.createElement("div"),e.container.classList.add("notification-list-item"),e.mainRow=document.createElement("div"),e.mainRow.classList.add("notification-list-item-main-row"),e.icon=document.createElement("div"),e.icon.classList.add("notification-list-item-icon","codicon"),e.message=document.createElement("div"),e.message.classList.add("notification-list-item-message");const i=this,s=document.createElement("div");return s.classList.add("notification-list-item-toolbar-container"),e.toolbar=new Ss(s,{ariaLabel:g(3338,"Notification Actions"),actionViewItemProvider:(n,o)=>{if(n instanceof me)return e.toDispose.add(new cn(n,{getActions(){var c,l,m;const r=[],a={id:n.notification.sourceId,label:n.notification.source};if(on(a)){const b=i.notificationService.getFilter(a)===y.ERROR;r.push(ti({id:a.id,label:b?g(3339,"Turn On All Notifications from '{0}'",a.label):g(3340,"Turn Off Info and Warning Notifications from '{0}'",a.label),run:()=>i.notificationService.setFilter({...a,filter:b?y.OFF:y.ERROR})})),(l=(c=n.notification.actions)==null?void 0:c.secondary)!=null&&l.length&&r.push(new xe)}return Array.isArray((m=n.notification.actions)==null?void 0:m.secondary)&&r.push(...n.notification.actions.secondary),r}},this.contextMenuService,{...o,actionRunner:this.actionRunner,classNames:n.class}))},actionRunner:this.actionRunner}),e.toDispose.add(e.toolbar),e.detailsRow=document.createElement("div"),e.detailsRow.classList.add("notification-list-item-details-row"),e.source=document.createElement("div"),e.source.classList.add("notification-list-item-source"),e.buttonsContainer=document.createElement("div"),e.buttonsContainer.classList.add("notification-list-item-buttons-container"),t.appendChild(e.container),e.container.appendChild(e.detailsRow),e.detailsRow.appendChild(e.source),e.detailsRow.appendChild(e.buttonsContainer),e.container.appendChild(e.mainRow),e.mainRow.appendChild(e.icon),e.mainRow.appendChild(e.message),e.mainRow.appendChild(s),e.progress=new kn(t,On),e.toDispose.add(e.progress),e.renderer=this.instantiationService.createInstance(Wi,e,this.actionRunner),e.toDispose.add(e.renderer),e}renderElement(t,e,i){i.renderer.setInput(t)}disposeTemplate(t){Ve(t.toDispose)}},zi=Wt,Wt.TEMPLATE_ID="notification",Wt);hi=zi=E([d(1,bt),d(2,x),d(3,St)],hi);var Ut;let Wi=(Ut=class extends ${constructor(t,e,i,s,n,o,r){super(),this.template=t,this.actionRunner=e,this.openerService=i,this.instantiationService=s,this.keybindingService=n,this.contextMenuService=o,this.hoverService=r,this.inputDisposables=this._register(new M),ut.closeNotificationAction||(ut.closeNotificationAction=s.createInstance(_e,_e.ID,_e.LABEL),ut.expandNotificationAction=s.createInstance(Ne,Ne.ID,Ne.LABEL),ut.collapseNotificationAction=s.createInstance(Pe,Pe.ID,Pe.LABEL))}setInput(t){this.inputDisposables.clear(),this.render(t)}render(t){this.template.container.classList.toggle("expanded",t.expanded),this.inputDisposables.add(F(this.template.container,X.MOUSE_UP,n=>{n.button===1&&wt.stop(n,!0)})),this.inputDisposables.add(F(this.template.container,X.AUXCLICK,n=>{!t.hasProgress&&n.button===1&&(wt.stop(n,!0),t.close())})),this.renderSeverity(t);const e=this.inputDisposables.add(this.hoverService.setupManagedHover(Mi("mouse"),this.template.message,"")),i=this.renderMessage(t,e);this.renderSecondaryActions(t,i);const s=this.inputDisposables.add(this.hoverService.setupManagedHover(Mi("mouse"),this.template.source,""));this.renderSource(t,s),this.renderButtons(t),this.renderProgress(t),this.inputDisposables.add(t.onDidChangeContent(n=>{switch(n.kind){case tt.SEVERITY:this.renderSeverity(t);break;case tt.PROGRESS:this.renderProgress(t);break;case tt.MESSAGE:this.renderMessage(t,e);break}}))}renderSeverity(t){ut.SEVERITIES.forEach(e=>{t.severity!==e&&this.template.icon.classList.remove(...z.asClassNameArray(this.toSeverityIcon(e)))}),this.template.icon.classList.add(...z.asClassNameArray(this.toSeverityIcon(t.severity)))}renderMessage(t,e){$t(this.template.message),this.template.message.appendChild(Dn.render(t.message,{callback:s=>this.openerService.open(Si.parse(s),{allowCommands:!0}),toDispose:this.inputDisposables}));const i=t.canCollapse&&!t.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;return e.update(i?this.template.message.textContent+"":""),i}renderSecondaryActions(t,e){var n;const i=[];if(ei((n=t.actions)==null?void 0:n.secondary)){const o=this.instantiationService.createInstance(me,me.ID,me.LABEL,t);i.push(o),this.inputDisposables.add(o)}let s=!1;t.canCollapse&&(t.expanded||t.source||e)&&(s=!0),s&&i.push(t.expanded?ut.collapseNotificationAction:ut.expandNotificationAction),t.hasProgress||i.push(ut.closeNotificationAction),this.template.toolbar.clear(),this.template.toolbar.context=t,i.forEach(o=>this.template.toolbar.push(o,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(o)}))}renderSource(t,e){t.expanded&&t.source?(this.template.source.textContent=g(3341,"Source: {0}",t.source),e.update(t.source)):(this.template.source.textContent="",e.update(""))}renderButtons(t){$t(this.template.buttonsContainer);const e=t.actions?t.actions.primary:void 0;if(t.expanded&&ei(e)){const i=this,s=this.inputDisposables.add(new class extends bs{async runAction(o){i.actionRunner.run(o,t),(!(o instanceof ni)||!o.keepOpen)&&t.close()}}),n=this.inputDisposables.add(new Hn(this.template.buttonsContainer));for(let o=0;o<e.length;o++){const r=e[o],a={title:!0,secondary:o>0,...Fn},c=r instanceof ni?r.menu:void 0,l=this.inputDisposables.add(c?n.addButtonWithDropdown({...a,contextMenuProvider:this.contextMenuService,actions:c,actionRunner:s}):n.addButton(a));l.label=r.label,this.inputDisposables.add(l.onDidClick(m=>{m&&wt.stop(m,!0),s.run(r)}))}}}renderProgress(t){if(!t.hasProgress){this.template.progress.stop().hide();return}const e=t.progress.state;e.infinite?this.template.progress.infinite().show():typeof e.total=="number"||typeof e.worked=="number"?(typeof e.total=="number"&&!this.template.progress.hasTotal()&&this.template.progress.total(e.total),typeof e.worked=="number"&&this.template.progress.setWorked(e.worked).show()):this.template.progress.done().hide()}toSeverityIcon(t){switch(t){case Y.Warning:return j.warning;case Y.Error:return j.error}return j.info}getKeybindingLabel(t){const e=this.keybindingService.lookupKeybinding(t.id);return e?e.getLabel():null}},ut=Ut,Ut.SEVERITIES=[Y.Info,Y.Warning,Y.Error],Ut);Wi=ut=E([d(2,Gn),d(3,x),d(4,ie),d(5,bt),d(6,Cs)],Wi);let di=class extends ${constructor(t,e,i,s){super(),this.container=t,this.options=e,this.instantiationService=i,this.contextMenuService=s,this.viewModel=[]}show(){this.isVisible||(this.list||this.createNotificationsList(),this.isVisible=!0)}createNotificationsList(){this.listContainer=document.createElement("div"),this.listContainer.classList.add("notifications-list-container");const t=this._register(this.instantiationService.createInstance(Oe)),e=this.instantiationService.createInstance(hi,t),i=this.listDelegate=new Gi(this.listContainer),s=this.options,n=this.list=this._register(this.instantiationService.createInstance(ps,"NotificationsList",this.listContainer,i,[e],{...s,setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:hn},accessibilityProvider:this.instantiationService.createInstance(Ui,s)})),o=this._register(this.instantiationService.createInstance(Me,Me.ID,Me.LABEL));this._register(n.onContextMenu(a=>{a.element&&this.contextMenuService.showContextMenu({getAnchor:()=>a.anchor,getActions:()=>[o],getActionsContext:()=>a.element,actionRunner:t})})),this._register(n.onMouseDblClick(a=>a.element.toggle()));const r=this._register(Wn(n.getHTMLElement()));this._register(r.onDidBlur(()=>{K(this.listContainer).document.hasFocus()&&n.setFocus([])})),st.bindTo(n.contextKeyService),this._register(n.onDidChangeSelection(a=>{a.indexes.length>0&&n.setSelection([])})),this.container.appendChild(this.listContainer)}updateNotificationsList(t,e,i=[]){const[s,n]=Ie(this.list,this.listContainer),o=qt(n),r=s.getFocus()[0],a=this.viewModel[r];let c=null;if(typeof r=="number"&&(c=s.getRelativeTop(r)),this.viewModel.splice(t,e,...i),s.splice(t,e,i),s.layout(),this.viewModel.length===0)this.hide();else if(typeof r=="number"){let l=0;if(a){let m=this.viewModel.indexOf(a);m===-1&&(m=r-1),m<this.viewModel.length&&m>=0&&(l=m)}typeof c=="number"&&s.reveal(l,c),s.setFocus([l])}this.isVisible&&o&&s.domFocus()}updateNotificationHeight(t){const e=this.viewModel.indexOf(t);if(e===-1)return;const[i,s]=Ie(this.list,this.listDelegate);i.updateElementHeight(e,s.getHeight(t)),i.layout()}hide(){!this.isVisible||!this.list||(this.isVisible=!1,this.list.splice(0,this.viewModel.length),this.viewModel=[])}focusFirst(){this.list&&(this.list.focusFirst(),this.list.domFocus())}hasFocus(){return this.listContainer?qt(this.listContainer):!1}layout(t,e){this.listContainer&&this.list&&(this.listContainer.style.width=`${t}px`,typeof e=="number"&&(this.list.getHTMLElement().style.maxHeight=`${e}px`),this.list.layout())}dispose(){this.hide(),super.dispose()}};di=E([d(2,x),d(3,bt)],di);let Ui=class{constructor(t,e,i){this._options=t,this._keybindingService=e,this._configurationService=i}getAriaLabel(t){var s;let e;const i=(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:s.getAriaLabel();return this._configurationService.getValue("accessibility.verbosity.notification")&&(e=i?g(3316,"Inspect the response in the accessible view with {0}",i):g(3317,"Inspect the response in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding")),t.source?e?g(3320,"{0}, source: {1}, notification, {2}",t.message.raw,t.source,e):g(3321,"{0}, source: {1}, notification",t.message.raw,t.source):e?g(3318,"{0}, notification, {1}",t.message.raw,e):g(3319,"{0}, notification",t.message.raw)}getWidgetAriaLabel(){return this._options.widgetAriaLabel??g(3322,"Notifications List")}getRole(){return"dialog"}};Ui=E([d(1,ie),d(2,Qt)],Ui);var ce,yt;let Yi=(yt=class extends dn{constructor(t,e,i,s,n,o,r,a,c,l,m){super(i),this.container=t,this.model=e,this.instantiationService=s,this.layoutService=n,this.contextKeyService=o,this.editorGroupService=r,this.keybindingService=a,this.notificationService=c,this.accessibilitySignalService=l,this.contextMenuService=m,this._onDidChangeVisibility=this._register(new C),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.notificationsCenterVisibleContextKey=Je.bindTo(this.contextKeyService),this.notificationsCenterVisibleContextKey=Je.bindTo(o),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t))),this._register(this.layoutService.onDidLayoutMainContainer(t=>this.layout(Jt.lift(t)))),this._register(this.notificationService.onDidChangeFilter(()=>this.onDidChangeFilter()))}onDidChangeFilter(){this.notificationService.getFilter()===y.ERROR&&this.hide()}get isVisible(){return!!this._isVisible}show(){if(this._isVisible){const i=ot(this.notificationsList);i.show(),i.focusFirst();return}this.notificationsCenterContainer||this.create(),this.updateTitle();const[t,e]=Ie(this.notificationsList,this.notificationsCenterContainer);this._isVisible=!0,e.classList.add("visible"),t.show(),this.layout(this.workbenchDimensions),t.updateNotificationsList(0,0,this.model.notifications),t.focusFirst(),this.updateStyles(),this.model.notifications.forEach(i=>i.updateVisibility(!0)),this.notificationsCenterVisibleContextKey.set(!0),this._onDidChangeVisibility.fire()}updateTitle(){const[t,e]=Ie(this.notificationsCenterTitle,this.clearAllAction);this.model.notifications.length===0?(t.textContent=g(3300,"No new notifications"),e.enabled=!1):(t.textContent=g(3301,"Notifications"),e.enabled=this.model.notifications.some(i=>!i.hasProgress))}create(){this.notificationsCenterContainer=document.createElement("div"),this.notificationsCenterContainer.classList.add("notifications-center"),this.notificationsCenterHeader=document.createElement("div"),this.notificationsCenterHeader.classList.add("notifications-center-header"),this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader),this.notificationsCenterTitle=document.createElement("span"),this.notificationsCenterTitle.classList.add("notifications-center-header-title"),this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);const t=document.createElement("div");t.classList.add("notifications-center-header-toolbar"),this.notificationsCenterHeader.appendChild(t);const e=this._register(this.instantiationService.createInstance(Oe)),i=this,s=this._register(new Ss(t,{ariaLabel:g(3302,"Notification Center Actions"),actionRunner:e,actionViewItemProvider:(o,r)=>{if(o.id===he.ID)return this._register(this.instantiationService.createInstance(cn,o,{getActions(){const a=[ti({id:ci.ID,label:i.notificationService.getFilter()===y.OFF?g(3303,"Enable Do Not Disturb Mode"):g(3304,"Disable Do Not Disturb Mode"),run:()=>i.notificationService.setFilter(i.notificationService.getFilter()===y.OFF?y.ERROR:y.OFF)})],c=i.notificationService.getFilters().sort((l,m)=>l.label.localeCompare(m.label));for(const l of c.slice(0,ce.MAX_NOTIFICATION_SOURCES))a.length===1&&a.push(new xe),a.push(ti({id:`${ci.ID}.${l.id}`,label:l.label,checked:l.filter!==y.ERROR,run:()=>i.notificationService.setFilter({...l,filter:l.filter===y.ERROR?y.OFF:y.ERROR})}));return c.length>ce.MAX_NOTIFICATION_SOURCES&&(a.push(new xe),a.push(i._register(i.instantiationService.createInstance(li,li.ID,g(3305,"More…"))))),a}},this.contextMenuService,{...r,actionRunner:e,classNames:o.class,keybindingProvider:a=>this.keybindingService.lookupKeybinding(a.id)}))}}));this.clearAllAction=this._register(this.instantiationService.createInstance(De,De.ID,De.LABEL)),s.push(this.clearAllAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.clearAllAction)}),this.configureDoNotDisturbAction=this._register(this.instantiationService.createInstance(he,he.ID,he.LABEL)),s.push(this.configureDoNotDisturbAction,{icon:!0,label:!1});const n=this._register(this.instantiationService.createInstance(Re,Re.ID,Re.LABEL));s.push(n,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(n)}),this.notificationsList=this.instantiationService.createInstance(di,this.notificationsCenterContainer,{widgetAriaLabel:g(3306,"Notifications Center")}),this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(t){const e=this.keybindingService.lookupKeybinding(t.id);return e?e.getLabel():null}onDidChangeNotification(t){if(!this._isVisible)return;let e=!1;const[i,s]=Ie(this.notificationsList,this.notificationsCenterContainer);switch(t.kind){case Z.ADD:i.updateNotificationsList(t.index,0,[t.item]),t.item.updateVisibility(!0);break;case Z.CHANGE:switch(t.detail){case tt.ACTIONS:i.updateNotificationsList(t.index,1,[t.item]);break;case tt.MESSAGE:t.item.expanded&&i.updateNotificationHeight(t.item);break}break;case Z.EXPAND_COLLAPSE:i.updateNotificationsList(t.index,1,[t.item]);break;case Z.REMOVE:e=qt(s),i.updateNotificationsList(t.index,1),t.item.updateVisibility(!1);break}this.updateTitle(),this.model.notifications.length===0&&(this.hide(),e&&this.editorGroupService.activeGroup.focus())}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList)return;const t=qt(this.notificationsCenterContainer);this._isVisible=!1,this.notificationsCenterContainer.classList.remove("visible"),this.notificationsList.hide(),this.model.notifications.forEach(e=>e.updateVisibility(!1)),this.notificationsCenterVisibleContextKey.set(!1),this._onDidChangeVisibility.fire(),t&&this.editorGroupService.activeGroup.focus()}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){const t=this.getColor(un);this.notificationsCenterContainer.style.boxShadow=t?`0 0 8px 2px ${t}`:"";const e=this.getColor(Un);this.notificationsCenterContainer.style.border=e?`1px solid ${e}`:"";const i=this.getColor(Yn);this.notificationsCenterHeader.style.color=i??"";const s=this.getColor(Kn);this.notificationsCenterHeader.style.background=s??""}}layout(t){if(this.workbenchDimensions=t,this._isVisible&&this.notificationsCenterContainer){const e=ce.MAX_DIMENSIONS.width,i=ce.MAX_DIMENSIONS.height;let s=e,n=i;this.workbenchDimensions&&(s=this.workbenchDimensions.width,s-=2*8,n=this.workbenchDimensions.height-35,this.layoutService.isVisible(h.STATUSBAR_PART,S)&&(n-=22),this.layoutService.isVisible(h.TITLEBAR_PART,S)&&(n-=22),n-=2*12),ot(this.notificationsList).layout(Math.min(e,s),Math.min(i,n))}}clearAll(){this.hide();for(const t of[...this.model.notifications])t.hasProgress||t.close(),this.accessibilitySignalService.playSignal(wi.clear)}},ce=yt,yt.MAX_DIMENSIONS=new Jt(450,400),yt.MAX_NOTIFICATION_SOURCES=10,yt);Yi=ce=E([d(2,it),d(3,x),d(4,et),d(5,vt),d(6,Tt),d(7,ie),d(8,St),d(9,pi),d(10,bt)],Yi);class Ga extends ${constructor(t){super(),this.model=t;for(const e of t.notifications)this.triggerAriaAlert(e);this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)))}onDidChangeNotification(t){t.kind===Z.ADD&&(this.triggerAriaAlert(t.item),t.item.severity===Y.Error&&(t.item.message.original instanceof Error?console.error(t.item.message.original):console.error(ze(t.item.message.linkedText.toString(),!0))))}triggerAriaAlert(t){if(t.priority===Mt.SILENT)return;const e=t.onDidChangeContent(i=>{i.kind===tt.MESSAGE&&this.doTriggerAriaAlert(t)});rt.once(t.onDidClose)(()=>e.dispose()),this.doTriggerAriaAlert(t)}doTriggerAriaAlert(t){let e;t.severity===Y.Error?e=g(3297,"Error: {0}",t.message.linkedText.toString()):t.severity===Y.Warning?e=g(3298,"Warning: {0}",t.message.linkedText.toString()):e=g(3299,"Info: {0}",t.message.linkedText.toString()),Zn(e)}}let Ki=class extends ${constructor(t,e,i){super(),this.model=t,this.statusbarService=e,this.notificationService=i,this.newNotificationsCount=0,this.isNotificationsCenterVisible=!1,this.isNotificationsToastsVisible=!1,this.updateNotificationsCenterStatusItem(),t.statusMessage&&this.doSetStatusMessage(t.statusMessage),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t))),this._register(this.model.onDidChangeStatusMessage(t=>this.onDidChangeStatusMessage(t))),this._register(this.notificationService.onDidChangeFilter(()=>this.updateNotificationsCenterStatusItem()))}onDidChangeNotification(t){this.isNotificationsCenterVisible||(t.kind===Z.ADD?this.newNotificationsCount++:t.kind===Z.REMOVE&&this.newNotificationsCount>0&&this.newNotificationsCount--),this.updateNotificationsCenterStatusItem()}updateNotificationsCenterStatusItem(){let t=0;if(!this.isNotificationsCenterVisible&&!this.isNotificationsToastsVisible)for(const i of this.model.notifications)i.hasProgress&&t++;let e={name:g(3323,"Notifications"),text:`${t>0||this.newNotificationsCount>0?"$(bell-dot)":"$(bell)"}`,ariaLabel:g(3323,"Notifications"),command:this.isNotificationsCenterVisible?ke:ki,tooltip:this.getTooltip(t),showBeak:this.isNotificationsCenterVisible};this.notificationService.getFilter()===y.ERROR&&(e={...e,text:`${t>0||this.newNotificationsCount>0?"$(bell-slash-dot)":"$(bell-slash)"}`,ariaLabel:g(3324,"Do Not Disturb"),tooltip:g(3325,"Do Not Disturb Mode is Enabled")}),this.notificationsCenterStatusItem?this.notificationsCenterStatusItem.update(e):this.notificationsCenterStatusItem=this.statusbarService.addEntry(e,"status.notifications",U.RIGHT,Number.NEGATIVE_INFINITY)}getTooltip(t){return this.isNotificationsCenterVisible?g(3326,"Hide Notifications"):this.model.notifications.length===0?g(3327,"No Notifications"):t===0?this.newNotificationsCount===0?g(3328,"No New Notifications"):this.newNotificationsCount===1?g(3329,"1 New Notification"):g(3330,"{0} New Notifications",this.newNotificationsCount):this.newNotificationsCount===0?g(3331,"No New Notifications ({0} in progress)",t):this.newNotificationsCount===1?g(3332,"1 New Notification ({0} in progress)",t):g(3333,"{0} New Notifications ({1} in progress)",this.newNotificationsCount,t)}update(t,e){let i=!1;this.isNotificationsCenterVisible!==t&&(this.isNotificationsCenterVisible=t,this.newNotificationsCount=0,i=!0),this.isNotificationsToastsVisible!==e&&(this.isNotificationsToastsVisible=e,i=!0),i&&this.updateNotificationsCenterStatusItem()}onDidChangeStatusMessage(t){const e=t.item;switch(t.kind){case pe.ADD:this.doSetStatusMessage(e);break;case pe.REMOVE:this.currentStatusMessage&&this.currentStatusMessage[0]===e&&(Ve(this.currentStatusMessage[1]),this.currentStatusMessage=void 0);break}}doSetStatusMessage(t){const e=t.message,i=t.options&&typeof t.options.showAfter=="number"?t.options.showAfter:0,s=t.options&&typeof t.options.hideAfter=="number"?t.options.hideAfter:-1;this.currentStatusMessage&&Ve(this.currentStatusMessage[1]);let n,o=setTimeout(()=>{n=this.statusbarService.addEntry({name:g(3334,"Status Message"),text:e,ariaLabel:e},"status.message",U.LEFT,Number.NEGATIVE_INFINITY),o=null},i),r;const a={dispose:()=>{o&&clearTimeout(o),r&&clearTimeout(r),n==null||n.dispose()}};s>0&&(r=setTimeout(()=>a.dispose(),s)),this.currentStatusMessage=[t,a]}};Ki=E([d(1,At),d(2,St)],Ki);var Wa=".monaco-workbench>.notifications-toasts{bottom:25px;display:none;overflow:hidden;position:absolute;right:3px;z-index:1000}.monaco-workbench.nostatusbar>.notifications-toasts{bottom:3px}.monaco-workbench>.notifications-toasts.visible{display:flex;flex-direction:column}.monaco-workbench>.notifications-toasts .notification-toast-container{overflow:hidden}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast{margin:8px;opacity:0;transform:translate3d(0,100%,0);transition:transform .3s ease-out,opacity .3s ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-list-row,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-list:not(.element-focused):focus:before,.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast .monaco-scrollable-element,.monaco-workbench>.notifications-toasts .notifications-list-container{border-radius:4px}.monaco-workbench.reduce-motion>.notifications-toasts .notification-toast-container>.notification-toast{transition:transform 0ms ease-out,opacity 0ms ease-out}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in{opacity:1;transform:none}.monaco-workbench>.notifications-toasts .notification-toast-container>.notification-toast.notification-fade-in-done{opacity:1;transform:none;transition:none}.monaco-workbench>.notifications-toasts .codicon.codicon-error{color:var(--vscode-notificationsErrorIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-warning{color:var(--vscode-notificationsWarningIcon-foreground)!important}.monaco-workbench>.notifications-toasts .codicon.codicon-info{color:var(--vscode-notificationsInfoIcon-foreground)!important}";te(Wa,{});var Rt,lt;(function(u){u[u.HIDDEN_OR_VISIBLE=0]="HIDDEN_OR_VISIBLE",u[u.HIDDEN=1]="HIDDEN",u[u.VISIBLE=2]="VISIBLE"})(lt||(lt={}));var dt;let Zi=(dt=class extends dn{get isVisible(){return!!this._isVisible}constructor(t,e,i,s,n,o,r,a,c){super(n),this.container=t,this.model=e,this.instantiationService=i,this.layoutService=s,this.editorGroupService=o,this.contextKeyService=r,this.lifecycleService=a,this.hostService=c,this._onDidChangeVisibility=this._register(new C),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._isVisible=!1,this.mapNotificationToToast=new Map,this.mapNotificationToDisposable=new Map,this.notificationsToastsVisibleContextKey=pt.bindTo(this.contextKeyService),this.addedToastsIntervalCounter=new jn(Rt.SPAM_PROTECTION.interval),this.registerListeners()}registerListeners(){this._register(this.layoutService.onDidLayoutMainContainer(t=>this.layout(Jt.lift(t)))),this.lifecycleService.when(ye.Restored).then(()=>{this.model.notifications.forEach(t=>this.addToast(t)),this._register(this.model.onDidChangeNotification(t=>this.onDidChangeNotification(t)))}),this._register(this.model.onDidChangeFilter(({global:t,sources:e})=>{if(t===y.ERROR)this.hide();else if(e)for(const[i]of this.mapNotificationToToast)typeof i.sourceId=="string"&&e.get(i.sourceId)===y.ERROR&&i.severity!==Y.Error&&i.priority!==Mt.URGENT&&this.removeToast(i)}))}onDidChangeNotification(t){switch(t.kind){case Z.ADD:return this.addToast(t.item);case Z.REMOVE:return this.removeToast(t.item)}}addToast(t){if(this.isNotificationsCenterVisible||t.priority===Mt.SILENT||this.addedToastsIntervalCounter.increment()>Rt.SPAM_PROTECTION.limit)return;const e=new M;this.mapNotificationToDisposable.set(t,e),e.add(Xn(K(this.container),()=>this.doAddToast(t,e)))}doAddToast(t,e){let i=this.notificationsToastsContainer;i||(i=this.notificationsToastsContainer=document.createElement("div"),i.classList.add("notifications-toasts"),this.container.appendChild(i)),i.classList.add("visible");const s=document.createElement("div");s.classList.add("notification-toast-container");const n=i.firstChild;n?i.insertBefore(s,n):i.appendChild(s);const o=document.createElement("div");o.classList.add("notification-toast"),s.appendChild(o);const r=this.instantiationService.createInstance(di,o,{verticalScrollMode:$n.Hidden,widgetAriaLabel:t.source?g(3336,"{0}, source: {1}, notification",t.message.raw,t.source):g(3335,"{0}, notification",t.message.raw)});e.add(r);const a={item:t,list:r,container:s,toast:o};this.mapNotificationToToast.set(t,a),e.add(mt(()=>this.updateToastVisibility(a,!1))),r.show();const c=this.computeMaxDimensions();this.layoutLists(c.width),r.updateNotificationsList(0,0,[t]),this.layoutContainer(c.height),e.add(t.onDidChangeExpansion(()=>{r.updateNotificationsList(0,1,[t])})),e.add(t.onDidChangeContent(l=>{switch(l.kind){case tt.ACTIONS:r.updateNotificationsList(0,1,[t]);break;case tt.MESSAGE:t.expanded&&r.updateNotificationHeight(t);break}})),rt.once(t.onDidClose)(()=>{this.removeToast(t)}),this.purgeNotification(t,s,r,e),this.updateStyles(),this.notificationsToastsVisibleContextKey.set(!0),o.classList.add("notification-fade-in"),e.add(F(o,"transitionend",()=>{o.classList.remove("notification-fade-in"),o.classList.add("notification-fade-in-done")})),t.updateVisibility(!0),this._isVisible||(this._isVisible=!0,this._onDidChangeVisibility.fire())}purgeNotification(t,e,i,s){let n=!1;s.add(F(e,X.MOUSE_OVER,()=>n=!0)),s.add(F(e,X.MOUSE_OUT,()=>n=!1));let o,r;const a=()=>{o=setTimeout(()=>{this.hostService.hasFocus?t.sticky||i.hasFocus()||n?a():this.removeToast(t):r||(r=this.hostService.onDidChangeFocus(c=>{c&&a()}),s.add(r))},Rt.PURGE_TIMEOUT[t.severity])};a(),s.add(mt(()=>clearTimeout(o)))}removeToast(t){let e=!1;const i=this.mapNotificationToToast.get(t);i&&(qt(i.container)&&(e=!(this.focusNext()||this.focusPrevious())),this.mapNotificationToToast.delete(t));const s=this.mapNotificationToDisposable.get(t);s&&(Ve(s),this.mapNotificationToDisposable.delete(t)),this.mapNotificationToToast.size>0?this.layout(this.workbenchDimensions):(this.doHide(),e&&this.editorGroupService.activeGroup.focus())}removeToasts(){this.mapNotificationToToast.clear(),this.mapNotificationToDisposable.forEach(t=>Ve(t)),this.mapNotificationToDisposable.clear(),this.doHide()}doHide(){var t;(t=this.notificationsToastsContainer)==null||t.classList.remove("visible"),this.notificationsToastsVisibleContextKey.set(!1),this._isVisible&&(this._isVisible=!1,this._onDidChangeVisibility.fire())}hide(){const t=this.notificationsToastsContainer?qt(this.notificationsToastsContainer):!1;this.removeToasts(),t&&this.editorGroupService.activeGroup.focus()}focus(){const t=this.getToasts(lt.VISIBLE);return t.length>0?(t[0].list.focusFirst(),!0):!1}focusNext(){const t=this.getToasts(lt.VISIBLE);for(let e=0;e<t.length;e++)if(t[e].list.hasFocus()){const s=t[e+1];if(s)return s.list.focusFirst(),!0;break}return!1}focusPrevious(){const t=this.getToasts(lt.VISIBLE);for(let e=0;e<t.length;e++)if(t[e].list.hasFocus()){const s=t[e-1];if(s)return s.list.focusFirst(),!0;break}return!1}focusFirst(){const t=this.getToasts(lt.VISIBLE)[0];return t?(t.list.focusFirst(),!0):!1}focusLast(){const t=this.getToasts(lt.VISIBLE);return t.length>0?(t[t.length-1].list.focusFirst(),!0):!1}update(t){this.isNotificationsCenterVisible!==t&&(this.isNotificationsCenterVisible=t,this.isNotificationsCenterVisible&&this.removeToasts())}updateStyles(){this.mapNotificationToToast.forEach(({toast:t})=>{const e=this.getColor(hn);t.style.background=e||"";const i=this.getColor(un);t.style.boxShadow=i?`0 0 8px 2px ${i}`:"";const s=this.getColor(qn);t.style.border=s?`1px solid ${s}`:""})}getToasts(t){const e=[];return this.mapNotificationToToast.forEach(i=>{switch(t){case lt.HIDDEN_OR_VISIBLE:e.push(i);break;case lt.HIDDEN:this.isToastInDOM(i)||e.push(i);break;case lt.VISIBLE:this.isToastInDOM(i)&&e.push(i);break}}),e.reverse()}layout(t){this.workbenchDimensions=t;const e=this.computeMaxDimensions();e.height&&this.layoutContainer(e.height),this.layoutLists(e.width)}computeMaxDimensions(){const t=Rt.MAX_WIDTH;let e=t,i;return this.workbenchDimensions&&(e=this.workbenchDimensions.width,e-=2*8,i=this.workbenchDimensions.height,this.layoutService.isVisible(h.STATUSBAR_PART,S)&&(i-=22),this.layoutService.isVisible(h.TITLEBAR_PART,S)&&(i-=22),i-=2*12),i=typeof i=="number"?Math.round(i*.618):0,new Jt(Math.min(t,e),i)}layoutLists(t){this.mapNotificationToToast.forEach(({list:e})=>e.layout(t))}layoutContainer(t){let e=0;for(const i of this.getToasts(lt.HIDDEN_OR_VISIBLE)){i.container.style.opacity="0",this.updateToastVisibility(i,!0),t-=i.container.offsetHeight;let s=!1;e===Rt.MAX_NOTIFICATIONS?s=!1:t>=0&&(s=!0),this.updateToastVisibility(i,s),i.container.style.opacity="",s&&e++}}updateToastVisibility(t,e){if(this.isToastInDOM(t)===e)return;const i=ot(this.notificationsToastsContainer);e?i.appendChild(t.container):t.container.remove(),t.item.updateVisibility(e)}isToastInDOM(t){return!!t.container.parentElement}},Rt=dt,dt.MAX_WIDTH=450,dt.MAX_NOTIFICATIONS=3,dt.PURGE_TIMEOUT={[Y.Info]:15e3,[Y.Warning]:18e3,[Y.Error]:2e4},dt.SPAM_PROTECTION={interval:800,limit:dt.MAX_NOTIFICATIONS},dt);Zi=Rt=E([d(2,x),d(3,et),d(4,it),d(5,Tt),d(6,vt),d(7,ii),d(8,we)],Zi);var D;(function(u){u.SIDEBAR_HIDDEN="nosidebar",u.MAIN_EDITOR_AREA_HIDDEN="nomaineditorarea",u.PANEL_HIDDEN="nopanel",u.AUXILIARYBAR_HIDDEN="noauxiliarybar",u.STATUSBAR_HIDDEN="nostatusbar",u.FULLSCREEN="fullscreen",u.MAXIMIZED="maximized",u.WINDOW_BORDER="border"})(D||(D={}));const Ua=["chat.commandCenter.enabled","workbench.navigationControl.enabled","workbench.experimental.share.enabled"],Ya=[T.ACTIVITY_BAR_LOCATION,T.COMMAND_CENTER,...Ua,T.EDITOR_ACTIONS_LOCATION,T.LAYOUT_ACTIONS,"window.menuBarVisibility",si.TITLE_BAR_STYLE,si.CUSTOM_TITLE_BAR_VISIBILITY],Qs=new Jt(ks.width,ks.height);class Ka extends ${get activeContainer(){return this.getContainerFromDocument(fn())}get containers(){const t=[];for(const{window:e}of Qn())t.push(this.getContainerFromDocument(e.document));return t}getContainerFromDocument(t){return t===this.mainContainer.ownerDocument?this.mainContainer:t.body.getElementsByClassName("monaco-workbench")[0]}whenContainerStylesLoaded(t){return this.containerStylesLoaded.get(t.vscodeWindowId)}get mainContainerDimension(){return this._mainContainerDimension}get activeContainerDimension(){return this.getContainerDimension(this.activeContainer)}getContainerDimension(t){return t===this.mainContainer?this.mainContainerDimension:yi(t)}get mainContainerOffset(){return this.computeContainerOffset(S)}get activeContainerOffset(){return this.computeContainerOffset(K(this.activeContainer))}computeContainerOffset(t){let e=0,i=0;this.isVisible(h.BANNER_PART)&&(e=this.getPart(h.BANNER_PART).maximumHeight,i=e);const s=this.isVisible(h.TITLEBAR_PART,t);return s&&(e+=this.getPart(h.TITLEBAR_PART).maximumHeight,i=e),s&&this.configurationService.getValue(T.COMMAND_CENTER)!==!1&&(i=6),{top:e,quickPickTop:i}}constructor(t){super(),this.parent=t,this._onDidChangeZenMode=this._register(new C),this.onDidChangeZenMode=this._onDidChangeZenMode.event,this._onDidChangeMainEditorCenteredLayout=this._register(new C),this.onDidChangeMainEditorCenteredLayout=this._onDidChangeMainEditorCenteredLayout.event,this._onDidChangePanelAlignment=this._register(new C),this.onDidChangePanelAlignment=this._onDidChangePanelAlignment.event,this._onDidChangeWindowMaximized=this._register(new C),this.onDidChangeWindowMaximized=this._onDidChangeWindowMaximized.event,this._onDidChangePanelPosition=this._register(new C),this.onDidChangePanelPosition=this._onDidChangePanelPosition.event,this._onDidChangePartVisibility=this._register(new C),this.onDidChangePartVisibility=this._onDidChangePartVisibility.event,this._onDidChangeNotificationsVisibility=this._register(new C),this.onDidChangeNotificationsVisibility=this._onDidChangeNotificationsVisibility.event,this._onDidLayoutMainContainer=this._register(new C),this.onDidLayoutMainContainer=this._onDidLayoutMainContainer.event,this._onDidLayoutActiveContainer=this._register(new C),this.onDidLayoutActiveContainer=this._onDidLayoutActiveContainer.event,this._onDidLayoutContainer=this._register(new C),this.onDidLayoutContainer=this._onDidLayoutContainer.event,this._onDidAddContainer=this._register(new C),this.onDidAddContainer=this._onDidAddContainer.event,this._onDidChangeActiveContainer=this._register(new C),this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event,this.mainContainer=document.createElement("div"),this.containerStylesLoaded=new Map,this.parts=new Map,this.initialized=!1,this.disposed=!1,this._openedDefaultEditors=!1,this.whenReadyPromise=new Ns,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new Ns,this.whenRestored=this.whenRestoredPromise.p,this.restored=!1}initLayout(t){this.environmentService=t.get(Ge),this.configurationService=t.get(Qt),this.hostService=t.get(we),this.contextService=t.get(vi),this.storageService=t.get(at),this.workingCopyBackupService=t.get(Jn),this.themeService=t.get(it),this.extensionService=t.get(to),this.logService=t.get(mn),this.telemetryService=t.get(ws),this.auxiliaryWindowService=t.get(eo),this.editorService=t.get(Se),this.mainPartEditorService=this.editorService.createScoped("main",this._store),this.editorGroupService=t.get(Tt),this.paneCompositeService=t.get(io),this.viewDescriptorService=t.get(so),this.titleService=t.get(Es),this.notificationService=t.get(St),this.statusBarService=t.get(At),t.get(se),this.registerLayoutListeners(),this.initLayoutState(t.get(ii),t.get(no))}registerLayoutListeners(){const t=()=>{this.isVisible(h.EDITOR_PART,S)||this.toggleMaximizedPanel()};this.editorGroupService.whenRestored.then(()=>{this._register(this.mainPartEditorService.onDidVisibleEditorsChange(t)),this._register(this.editorGroupService.mainPart.onDidActivateGroup(t)),this._register(this.mainPartEditorService.onDidActiveEditorChange(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(f.MAIN_EDITOR_CENTERED))))}),this._register(this.configurationService.onDidChangeConfiguration(i=>{if([...Ya,Q.SIDEBAR_POSITION,Q.STATUSBAR_VISIBLE].some(s=>i.affectsConfiguration(s))){const s=i.affectsConfiguration("workbench.experimental.share.enabled")&&this.configurationService.getValue("workbench.experimental.share.enabled"),n=i.affectsConfiguration("workbench.navigationControl.enabled")&&this.configurationService.getValue("workbench.navigationControl.enabled");if((s||n)&&this.configurationService.getValue(T.COMMAND_CENTER)===!1){this.configurationService.updateValue(T.COMMAND_CENTER,!0);return}const o=i.affectsConfiguration(T.EDITOR_ACTIONS_LOCATION)&&this.configurationService.getValue(T.EDITOR_ACTIONS_LOCATION)===xi.TITLEBAR,r=i.affectsConfiguration(T.COMMAND_CENTER)&&this.configurationService.getValue(T.COMMAND_CENTER),a=i.affectsConfiguration(T.LAYOUT_ACTIONS)&&this.configurationService.getValue(T.LAYOUT_ACTIONS);if((i.affectsConfiguration(T.ACTIVITY_BAR_LOCATION)&&[be.TOP,be.BOTTOM].includes(this.configurationService.getValue(T.ACTIVITY_BAR_LOCATION))||o||r||a)&&this.configurationService.getValue(si.CUSTOM_TITLE_BAR_VISIBILITY)===Ps.NEVER){this.configurationService.updateValue(si.CUSTOM_TITLE_BAR_VISIBILITY,Ps.AUTO);return}this.doUpdateLayoutConfiguration()}})),this._register(oo(i=>this.onFullscreenChanged(i))),this._register(this.editorGroupService.mainPart.onDidAddGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(f.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidRemoveGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(f.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidChangeGroupMaximized(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(f.MAIN_EDITOR_CENTERED)))),this._register(F(this.mainContainer,X.SCROLL,()=>this.mainContainer.scrollTop=0)),(fe||Be||nt)&&!xt(this.configurationService)&&this._register(this.titleService.onMenubarVisibilityChange(i=>this.onMenubarToggled(i))),this._register(this.themeService.onDidColorThemeChange(()=>this.updateWindowsBorder())),this._register(this.hostService.onDidChangeFocus(i=>this.onWindowFocusChanged(i))),this._register(this.hostService.onDidChangeActiveWindow(()=>this.onActiveWindowChanged())),nt&&typeof navigator.windowControlsOverlay=="object"&&this._register(F(navigator.windowControlsOverlay,"geometrychange",()=>this.onDidChangeWCO())),this._register(this.auxiliaryWindowService.onDidOpenAuxiliaryWindow(({window:i,disposables:s})=>{const n=i.window.vscodeWindowId;this.containerStylesLoaded.set(n,i.whenStylesHaveLoaded),i.whenStylesHaveLoaded.then(()=>this.containerStylesLoaded.delete(n)),s.add(mt(()=>this.containerStylesLoaded.delete(n)));const o=s.add(new M);this._onDidAddContainer.fire({container:i.container,disposables:o}),s.add(i.onDidLayout(r=>this.handleContainerDidLayout(i.container,r)))}))}onMenubarToggled(t){if(t!==this.state.runtime.menuBar.toggled){this.state.runtime.menuBar.toggled=t;const e=Vi(this.configurationService);nt&&e==="toggle"?this.workbenchGrid.setViewVisible(this.titleBarPartView,_t(this.configurationService,S,this.state.runtime.menuBar.toggled)):this.state.runtime.mainWindowFullscreen&&(e==="toggle"||e==="classic")&&this.workbenchGrid.setViewVisible(this.titleBarPartView,_t(this.configurationService,S,this.state.runtime.menuBar.toggled)),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}}handleContainerDidLayout(t,e){t===this.mainContainer&&this._onDidLayoutMainContainer.fire(e),gn(t)&&this._onDidLayoutActiveContainer.fire(e),this._onDidLayoutContainer.fire({container:t,dimension:e})}onFullscreenChanged(t){t===S.vscodeWindowId&&(this.state.runtime.mainWindowFullscreen=Ms(S),this.state.runtime.mainWindowFullscreen?this.mainContainer.classList.add(D.FULLSCREEN):(this.mainContainer.classList.remove(D.FULLSCREEN),this.stateModel.getRuntimeValue(f.ZEN_MODE_EXIT_INFO).transitionedToFullScreen&&this.isZenModeActive()&&this.toggleZenMode()),this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen,this.workbenchGrid.setViewVisible(this.titleBarPartView,_t(this.configurationService,S,this.state.runtime.menuBar.toggled)),this.updateWindowsBorder(!0))}onActiveWindowChanged(){const t=this.getActiveContainerId();this.state.runtime.activeContainerId!==t&&(this.state.runtime.activeContainerId=t,this.updateWindowsBorder(),this._onDidChangeActiveContainer.fire())}onWindowFocusChanged(t){this.state.runtime.hasFocus!==t&&(this.state.runtime.hasFocus=t,this.updateWindowsBorder())}getActiveContainerId(){const t=this.activeContainer;return K(t).vscodeWindowId}doUpdateLayoutConfiguration(t){this.updateCustomTitleBarVisibility(),this.updateMenubarVisibility(!!t),this.editorGroupService.whenRestored.then(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue(f.MAIN_EDITOR_CENTERED),t))}setSideBarPosition(t){const e=this.getPart(h.ACTIVITYBAR_PART),i=this.getPart(h.SIDEBAR_PART),s=this.getPart(h.AUXILIARYBAR_PART),n=t===I.LEFT?"left":"right",o=t===I.RIGHT?"left":"right",r=this.getPanelAlignment(),a=this.getPanelPosition();this.stateModel.setRuntimeValue(f.SIDEBAR_POSITON,t);const c=ot(e.getContainer()),l=ot(i.getContainer()),m=ot(s.getContainer());c.classList.remove(o),l.classList.remove(o),c.classList.add(n),l.classList.add(n),m.classList.remove(n),m.classList.add(o),e.updateStyles(),i.updateStyles(),s.updateStyles(),this.adjustPartPositions(t,r,a)}updateWindowsBorder(t=!1){if(nt||fe||(fe||Be)&&ro(this.configurationService)||xt(this.configurationService))return;const e=this.themeService.getColorTheme(),i=e.getColor(ao),s=e.getColor(co),n=this.hasMainWindowBorder();for(const o of this.containers){const r=o===this.mainContainer,a=this.activeContainer===o,c=Ue(K(o));let l=!1;if(!this.state.runtime.mainWindowFullscreen&&!this.state.runtime.maximized.has(c)&&(i||s)){l=!0;const m=a&&this.state.runtime.hasFocus?i:s??i;o.style.setProperty("--window-border-color",(m==null?void 0:m.toString())??"transparent")}r&&(this.state.runtime.mainWindowBorder=l),o.classList.toggle(D.WINDOW_BORDER,l)}!t&&n!==this.hasMainWindowBorder()&&this.layout()}initLayoutState(t,e){var o,r,a,c;this._mainContainerDimension=yi(this.parent,Qs),this.stateModel=new ji(this.storageService,this.configurationService,this.contextService),this.stateModel.load(this._mainContainerDimension),this.stateModel.getRuntimeValue(f.PANEL_HIDDEN)&&this.stateModel.getRuntimeValue(f.EDITOR_HIDDEN)&&this.stateModel.setRuntimeValue(f.EDITOR_HIDDEN,!1),this._register(this.stateModel.onDidChangeState(l=>{l.key===f.ACTIVITYBAR_HIDDEN&&this.setActivityBarHidden(l.value),l.key===f.STATUSBAR_HIDDEN&&this.setStatusBarHidden(l.value),l.key===f.SIDEBAR_POSITON&&this.setSideBarPosition(l.value),l.key===f.PANEL_POSITION&&this.setPanelPosition(l.value),l.key===f.PANEL_ALIGNMENT&&this.setPanelAlignment(l.value),this.doUpdateLayoutConfiguration()}));const i=this.getInitialEditorsState();i&&this.logService.trace("Initial editor state",i);const s={layout:{editors:i==null?void 0:i.layout},editor:{restoreEditors:this.shouldRestoreEditors(this.contextService,i),editorsToOpen:this.resolveEditorsToOpen(e,i)},views:{defaults:this.getDefaultLayoutViews(this.environmentService,this.storageService),containerToRestore:{}}},n={activeContainerId:this.getActiveContainerId(),mainWindowFullscreen:Ms(S),hasFocus:this.hostService.hasFocus,maximized:new Set,mainWindowBorder:!1,menuBar:{toggled:!1},zenMode:{transitionDisposables:new lo}};if(this.state={initialization:s,runtime:n},this.isVisible(h.SIDEBAR_PART)){let l;!this.environmentService.isBuilt||t.startupKind===ho.ReloadedWindow||this.environmentService.isExtensionDevelopment&&!this.environmentService.extensionTestsLocationURI?l=this.storageService.get(ma.activeViewletSettingsKey,A.WORKSPACE,(o=this.viewDescriptorService.getDefaultViewContainer(w.Sidebar))==null?void 0:o.id):l=(r=this.viewDescriptorService.getDefaultViewContainer(w.Sidebar))==null?void 0:r.id,l?this.state.initialization.views.containerToRestore.sideBar=l:this.stateModel.setRuntimeValue(f.SIDEBAR_HIDDEN,!0)}if(this.isVisible(h.PANEL_PART)){const l=this.storageService.get(ga.activePanelSettingsKey,A.WORKSPACE,(a=this.viewDescriptorService.getDefaultViewContainer(w.Panel))==null?void 0:a.id);l?this.state.initialization.views.containerToRestore.panel=l:this.stateModel.setRuntimeValue(f.PANEL_HIDDEN,!0)}if(this.isVisible(h.AUXILIARYBAR_PART)){const l=this.storageService.get(ba.activeViewSettingsKey,A.WORKSPACE,(c=this.viewDescriptorService.getDefaultViewContainer(w.AuxiliaryBar))==null?void 0:c.id);l?this.state.initialization.views.containerToRestore.auxiliaryBar=l:this.stateModel.setRuntimeValue(f.AUXILIARYBAR_HIDDEN,!0)}this.updateWindowsBorder(!0)}getDefaultLayoutViews(t,e){var n;const i=(n=t.options)==null?void 0:n.defaultLayout;if(!i||!i.force&&!e.isNew(A.WORKSPACE))return;const{views:s}=i;if(s!=null&&s.length)return s.map(o=>o.id)}shouldRestoreEditors(t,e){return uo(t.getWorkspace())?!1:!!(this.configurationService.getValue("window.restoreWindows")==="preserve")||e===void 0}willRestoreEditors(){return this.state.initialization.editor.restoreEditors}async resolveEditorsToOpen(t,e){var i;if(e){const s=Ee(await Ti(e.filesToMerge,t,this.logService));if(s.length===4&&We(s[0])&&We(s[1])&&We(s[2])&&We(s[3]))return[{editor:{input1:{resource:s[0].resource},input2:{resource:s[1].resource},base:{resource:s[2].resource},result:{resource:s[3].resource},options:{pinned:!0}}}];const n=Ee(await Ti(e.filesToDiff,t,this.logService));if(n.length===2)return[{editor:{original:{resource:n[0].resource},modified:{resource:n[1].resource},options:{pinned:!0}}}];const o=[],r=await Ti(e.filesToOpenOrCreate,t,this.logService);for(let a=0;a<r.length;a++){const c=r[a];c&&o.push({editor:c,viewColumn:(i=e.filesToOpenOrCreate)==null?void 0:i[a].viewColumn})}return o}else if(this.contextService.getWorkbenchState()===Te.EMPTY&&this.configurationService.getValue("workbench.startupEditor")==="newUntitledFile")return this.editorGroupService.hasRestorableState?[]:await this.workingCopyBackupService.hasBackups()?[]:[{editor:{resource:void 0}}];return[]}get openedDefaultEditors(){return this._openedDefaultEditors}getInitialEditorsState(){var n,o,r,a,c;const t=(n=this.environmentService.options)==null?void 0:n.defaultLayout;if(((o=t==null?void 0:t.editors)!=null&&o.length||(r=t==null?void 0:t.layout)!=null&&r.editors)&&(t.force||this.storageService.isNew(A.WORKSPACE)))return this._openedDefaultEditors=!0,{layout:(a=t.layout)==null?void 0:a.editors,filesToOpenOrCreate:(c=t==null?void 0:t.editors)==null?void 0:c.map(l=>({viewColumn:l.viewColumn,fileUri:Si.revive(l.uri),openOnlyIfExists:l.openOnlyIfExists,options:l.options}))};const{filesToOpenOrCreate:e,filesToDiff:i,filesToMerge:s}=this.environmentService;if(e||i||s)return{filesToOpenOrCreate:e,filesToDiff:i,filesToMerge:s}}isRestored(){return this.restored}restoreParts(){const t=[],e=[];t.push((async()=>{var a;B("code/willRestoreEditors"),await this.editorGroupService.whenReady,B("code/restoreEditors/editorGroupsReady"),(a=this.state.initialization.layout)!=null&&a.editors&&this.editorGroupService.mainPart.applyLayout(this.state.initialization.layout.editors);const o=await this.state.initialization.editor.editorsToOpen;B("code/restoreEditors/editorsToOpenResolved");let r;if(o.length){const c=this.editorGroupService.mainPart.getGroups(fo.GRID_APPEARANCE),l=new Map;for(const m of o){const b=c[(m.viewColumn??1)-1];let p=l.get(b.id);p||(p=new Set,l.set(b.id,p)),p.add(m.editor)}r=Promise.all(Array.from(l).map(async([m,b])=>{try{await this.editorService.openEditors(Array.from(b),m,{validateTrust:!0})}catch(p){this.logService.error(p)}}))}e.push(Promise.all([r==null?void 0:r.finally(()=>B("code/restoreEditors/editorsOpened")),this.editorGroupService.whenRestored.finally(()=>B("code/restoreEditors/editorGroupsRestored"))]).finally(()=>{B("code/didRestoreEditors")}))})());const i=(async()=>{var o;if((o=this.state.initialization.views.defaults)!=null&&o.length){B("code/willOpenDefaultViews");const r=[],a=m=>{var p;const b=this.viewDescriptorService.getViewLocationById(m.id);if(b!==null){const _=this.viewDescriptorService.getViewContainerByViewId(m.id);if(_){m.order>=(((p=r==null?void 0:r[b])==null?void 0:p.order)??0)&&(r[b]={id:_.id,order:m.order});const V=this.viewDescriptorService.getViewContainerModel(_);return V.setCollapsed(m.id,!1),V.setVisible(m.id,!0),!0}}return!1},c=[...this.state.initialization.views.defaults].reverse().map((m,b)=>({id:m,order:b}));let l=c.length;for(;l;)l--,a(c[l])&&c.splice(l,1);if(c.length){await this.extensionService.whenInstalledExtensionsRegistered();let m=c.length;for(;m;)m--,a(c[m])&&c.splice(m,1)}r[w.Sidebar]&&(this.state.initialization.views.containerToRestore.sideBar=r[w.Sidebar].id),r[w.Panel]&&(this.state.initialization.views.containerToRestore.panel=r[w.Panel].id),r[w.AuxiliaryBar]&&(this.state.initialization.views.containerToRestore.auxiliaryBar=r[w.AuxiliaryBar].id),B("code/didOpenDefaultViews")}})();t.push(i),t.push((async()=>{var r;if(await i,!this.state.initialization.views.containerToRestore.sideBar)return;B("code/willRestoreViewlet"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.sideBar,w.Sidebar)||await this.paneCompositeService.openPaneComposite((r=this.viewDescriptorService.getDefaultViewContainer(w.Sidebar))==null?void 0:r.id,w.Sidebar),B("code/didRestoreViewlet")})()),t.push((async()=>{var r;if(await i,!this.state.initialization.views.containerToRestore.panel)return;B("code/willRestorePanel"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.panel,w.Panel)||await this.paneCompositeService.openPaneComposite((r=this.viewDescriptorService.getDefaultViewContainer(w.Panel))==null?void 0:r.id,w.Panel),B("code/didRestorePanel")})()),t.push((async()=>{var r;if(await i,!this.state.initialization.views.containerToRestore.auxiliaryBar)return;B("code/willRestoreAuxiliaryBar"),await this.paneCompositeService.openPaneComposite(this.state.initialization.views.containerToRestore.auxiliaryBar,w.AuxiliaryBar)||await this.paneCompositeService.openPaneComposite((r=this.viewDescriptorService.getDefaultViewContainer(w.AuxiliaryBar))==null?void 0:r.id,w.AuxiliaryBar),B("code/didRestoreAuxiliaryBar")})());const s=this.isZenModeActive(),n=Js(this.configurationService).restore;s&&(this.setZenModeActive(!n),this.toggleZenMode(!1,!0)),this.stateModel.getRuntimeValue(f.MAIN_EDITOR_CENTERED)&&this.centerMainEditorLayout(!0,!0),xs.settled(t).finally(()=>{this.whenReadyPromise.complete(),xs.settled(e).finally(()=>{this.restored=!0,this.whenRestoredPromise.complete()})})}registerPart(t){const e=t.getId();return this.parts.set(e,t),mt(()=>this.parts.delete(e))}getPart(t){const e=this.parts.get(t);if(!e)throw new Error(`Unknown part ${t}`);return e}registerNotifications(t){this._register(t.onDidChangeNotificationsVisibility(e=>this._onDidChangeNotificationsVisibility.fire(e)))}hasFocus(t){const e=this.getContainer(Ye(),t);if(!e)return!1;const i=mo();return i?go(i,e):!1}focusPart(t,e=S){var s,n,o;const i=this.getContainer(e,t)??this.mainContainer;switch(t){case h.EDITOR_PART:this.editorGroupService.getPart(i).activeGroup.focus();break;case h.PANEL_PART:{(s=this.paneCompositeService.getActivePaneComposite(w.Panel))==null||s.focus();break}case h.SIDEBAR_PART:{(n=this.paneCompositeService.getActivePaneComposite(w.Sidebar))==null||n.focus();break}case h.AUXILIARYBAR_PART:{(o=this.paneCompositeService.getActivePaneComposite(w.AuxiliaryBar))==null||o.focus();break}case h.ACTIVITYBAR_PART:this.getPart(h.SIDEBAR_PART).focusActivityBar();break;case h.STATUSBAR_PART:this.statusBarService.getPart(i).focus();break;default:i==null||i.focus()}}getContainer(t,e){if(typeof e>"u")return this.getContainerFromDocument(t.document);if(t===S)return this.getPart(e).getContainer();let i;if(e===h.EDITOR_PART?i=this.editorGroupService.getPart(this.getContainerFromDocument(t.document)):e===h.STATUSBAR_PART?i=this.statusBarService.getPart(this.getContainerFromDocument(t.document)):e===h.TITLEBAR_PART&&(i=this.titleService.getPart(this.getContainerFromDocument(t.document))),i instanceof Ai)return i.getContainer()}isVisible(t,e=S){if(e!==S&&t===h.EDITOR_PART)return!0;if(this.initialized)switch(t){case h.TITLEBAR_PART:return this.workbenchGrid.isViewVisible(this.titleBarPartView);case h.SIDEBAR_PART:return!this.stateModel.getRuntimeValue(f.SIDEBAR_HIDDEN);case h.PANEL_PART:return!this.stateModel.getRuntimeValue(f.PANEL_HIDDEN);case h.AUXILIARYBAR_PART:return!this.stateModel.getRuntimeValue(f.AUXILIARYBAR_HIDDEN);case h.STATUSBAR_PART:return!this.stateModel.getRuntimeValue(f.STATUSBAR_HIDDEN);case h.ACTIVITYBAR_PART:return!this.stateModel.getRuntimeValue(f.ACTIVITYBAR_HIDDEN);case h.EDITOR_PART:return!this.stateModel.getRuntimeValue(f.EDITOR_HIDDEN);case h.BANNER_PART:return this.workbenchGrid.isViewVisible(this.bannerPartView);default:return!1}switch(t){case h.TITLEBAR_PART:return _t(this.configurationService,S,this.state.runtime.menuBar.toggled);case h.SIDEBAR_PART:return!this.stateModel.getRuntimeValue(f.SIDEBAR_HIDDEN);case h.PANEL_PART:return!this.stateModel.getRuntimeValue(f.PANEL_HIDDEN);case h.AUXILIARYBAR_PART:return!this.stateModel.getRuntimeValue(f.AUXILIARYBAR_HIDDEN);case h.STATUSBAR_PART:return!this.stateModel.getRuntimeValue(f.STATUSBAR_HIDDEN);case h.ACTIVITYBAR_PART:return!this.stateModel.getRuntimeValue(f.ACTIVITYBAR_HIDDEN);case h.EDITOR_PART:return!this.stateModel.getRuntimeValue(f.EDITOR_HIDDEN);default:return!1}}shouldShowBannerFirst(){return nt&&!Bi()}focus(){this.isPanelMaximized()&&this.mainContainer===this.activeContainer?this.focusPart(h.PANEL_PART):this.focusPart(h.EDITOR_PART,K(this.activeContainer))}focusPanelOrEditor(){const t=this.paneCompositeService.getActivePaneComposite(w.Panel);(this.hasFocus(h.PANEL_PART)||!this.isVisible(h.EDITOR_PART))&&t?t.focus():this.focus()}getMaximumEditorDimensions(t){const e=K(t),i=this.getContainerDimension(t);if(t===this.mainContainer){const s=O(this.getPanelPosition()),n=(this.isVisible(h.ACTIVITYBAR_PART)?this.activityBarPartView.minimumWidth:0)+(this.isVisible(h.SIDEBAR_PART)?this.sideBarPartView.minimumWidth:0)+(this.isVisible(h.PANEL_PART)&&!s?this.panelPartView.minimumWidth:0)+(this.isVisible(h.AUXILIARYBAR_PART)?this.auxiliaryBarPartView.minimumWidth:0),o=(this.isVisible(h.TITLEBAR_PART,e)?this.titleBarPartView.minimumHeight:0)+(this.isVisible(h.STATUSBAR_PART,e)?this.statusBarPartView.minimumHeight:0)+(this.isVisible(h.PANEL_PART)&&s?this.panelPartView.minimumHeight:0),r=i.width-n,a=i.height-o;return{width:r,height:a}}else{const s=(this.isVisible(h.TITLEBAR_PART,e)?this.titleBarPartView.minimumHeight:0)+(this.isVisible(h.STATUSBAR_PART,e)?this.statusBarPartView.minimumHeight:0);return{width:i.width,height:i.height-s}}}isZenModeActive(){return this.stateModel.getRuntimeValue(f.ZEN_MODE_ACTIVE)}setZenModeActive(t){this.stateModel.setRuntimeValue(f.ZEN_MODE_ACTIVE,t)}toggleZenMode(t,e=!1){this.setZenModeActive(!this.isZenModeActive()),this.state.runtime.zenMode.transitionDisposables.clearAndDisposeAll();const i=r=>{for(const a of this.mainPartEditorService.visibleTextEditorControls){if(!r&&Eo(a)&&a.hasModel()){const c=a.getModel();r=this.configurationService.getValue("editor.lineNumbers",{resource:c.uri,overrideIdentifier:c.getLanguageId()})}r||(r=this.configurationService.getValue("editor.lineNumbers")),a.updateOptions({lineNumbers:r})}};let s=!1;const n=Js(this.configurationService),o=this.stateModel.getRuntimeValue(f.ZEN_MODE_EXIT_INFO);this.isZenModeActive()?(s=!this.state.runtime.mainWindowFullscreen&&n.fullScreen&&!Vs,e||(o.transitionedToFullScreen=s,o.transitionedToCenteredEditorLayout=!this.isMainEditorLayoutCentered()&&n.centerLayout,o.handleNotificationsDoNotDisturbMode=this.notificationService.getFilter()===y.OFF,o.wasVisible.sideBar=this.isVisible(h.SIDEBAR_PART),o.wasVisible.panel=this.isVisible(h.PANEL_PART),o.wasVisible.auxiliaryBar=this.isVisible(h.AUXILIARYBAR_PART),this.stateModel.setRuntimeValue(f.ZEN_MODE_EXIT_INFO,o)),this.setPanelHidden(!0,!0),this.setAuxiliaryBarHidden(!0,!0),this.setSideBarHidden(!0,!0),n.hideActivityBar&&this.setActivityBarHidden(!0,!0),n.hideStatusBar&&this.setStatusBarHidden(!0,!0),n.hideLineNumbers&&(i("off"),this.state.runtime.zenMode.transitionDisposables.set(G.HIDE_LINENUMBERS,this.mainPartEditorService.onDidVisibleEditorsChange(()=>i("off")))),n.showTabs!==this.editorGroupService.partOptions.showTabs&&this.state.runtime.zenMode.transitionDisposables.set(G.SHOW_TABS,this.editorGroupService.mainPart.enforcePartOptions({showTabs:n.showTabs})),n.silentNotifications&&o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(y.ERROR),n.centerLayout&&this.centerMainEditorLayout(!0,!0),this.state.runtime.zenMode.transitionDisposables.set("configurationChange",this.configurationService.onDidChangeConfiguration(r=>{if(r.affectsConfiguration(G.HIDE_ACTIVITYBAR)){const a=this.configurationService.getValue(G.HIDE_ACTIVITYBAR);this.setActivityBarHidden(a,!0)}if(r.affectsConfiguration(G.HIDE_STATUSBAR)){const a=this.configurationService.getValue(G.HIDE_STATUSBAR);this.setStatusBarHidden(a,!0)}if(r.affectsConfiguration(G.CENTER_LAYOUT)){const a=this.configurationService.getValue(G.CENTER_LAYOUT);this.centerMainEditorLayout(a,!0)}if(r.affectsConfiguration(G.SHOW_TABS)){const a=this.configurationService.getValue(G.SHOW_TABS)??"multiple";this.state.runtime.zenMode.transitionDisposables.set(G.SHOW_TABS,this.editorGroupService.mainPart.enforcePartOptions({showTabs:a}))}if(r.affectsConfiguration(G.SILENT_NOTIFICATIONS)){const a=!!this.configurationService.getValue(G.SILENT_NOTIFICATIONS);o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(a?y.ERROR:y.OFF)}if(r.affectsConfiguration(G.HIDE_LINENUMBERS)){const a=this.configurationService.getValue(G.HIDE_LINENUMBERS)?"off":void 0;i(a),this.state.runtime.zenMode.transitionDisposables.set(G.HIDE_LINENUMBERS,this.mainPartEditorService.onDidVisibleEditorsChange(()=>i(a)))}}))):(o.wasVisible.panel&&this.setPanelHidden(!1,!0),o.wasVisible.auxiliaryBar&&this.setAuxiliaryBarHidden(!1,!0),o.wasVisible.sideBar&&this.setSideBarHidden(!1,!0),this.stateModel.getRuntimeValue(f.ACTIVITYBAR_HIDDEN,!0)||this.setActivityBarHidden(!1,!0),this.stateModel.getRuntimeValue(f.STATUSBAR_HIDDEN,!0)||this.setStatusBarHidden(!1,!0),o.transitionedToCenteredEditorLayout&&this.centerMainEditorLayout(!1,!0),o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(y.OFF),i(),this.focus(),s=o.transitionedToFullScreen&&this.state.runtime.mainWindowFullscreen),t||this.layout(),s&&this.hostService.toggleFullScreen(S),this._onDidChangeZenMode.fire(this.isZenModeActive())}setStatusBarHidden(t,e){this.stateModel.setRuntimeValue(f.STATUSBAR_HIDDEN,t),t?this.mainContainer.classList.add(D.STATUSBAR_HIDDEN):this.mainContainer.classList.remove(D.STATUSBAR_HIDDEN),this.workbenchGrid.setViewVisible(this.statusBarPartView,!t)}createWorkbenchLayout(){const t=this.getPart(h.TITLEBAR_PART),e=this.getPart(h.BANNER_PART),i=this.getPart(h.EDITOR_PART),s=this.getPart(h.ACTIVITYBAR_PART),n=this.getPart(h.PANEL_PART),o=this.getPart(h.AUXILIARYBAR_PART),r=this.getPart(h.SIDEBAR_PART),a=this.getPart(h.STATUSBAR_PART);this.titleBarPartView=t,this.bannerPartView=e,this.sideBarPartView=r,this.activityBarPartView=s,this.editorPartView=i,this.panelPartView=n,this.auxiliaryBarPartView=o,this.statusBarPartView=a;const c={[h.ACTIVITYBAR_PART]:this.activityBarPartView,[h.BANNER_PART]:this.bannerPartView,[h.TITLEBAR_PART]:this.titleBarPartView,[h.EDITOR_PART]:this.editorPartView,[h.PANEL_PART]:this.panelPartView,[h.SIDEBAR_PART]:this.sideBarPartView,[h.STATUSBAR_PART]:this.statusBarPartView,[h.AUXILIARYBAR_PART]:this.auxiliaryBarPartView},l=({type:b})=>c[b],m=pa.deserialize(this.createGridDescriptor(),{fromJSON:l},{proportionalLayout:!1});this.mainContainer.prepend(m.element),this.mainContainer.setAttribute("role","application"),this.workbenchGrid=m,this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen;for(const b of[t,i,s,n,r,a,o,e])this._register(b.onDidVisibilityChange(p=>{b===r?this.setSideBarHidden(!p,!0):b===n?this.setPanelHidden(!p,!0):b===o?this.setAuxiliaryBarHidden(!p,!0):b===i&&this.setEditorHidden(!p,!0),this._onDidChangePartVisibility.fire(),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}));this._register(this.storageService.onWillSaveState(b=>{const p=this.stateModel.getRuntimeValue(f.SIDEBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView):this.workbenchGrid.getViewSize(this.sideBarPartView).width;this.stateModel.setInitializationValue(f.SIDEBAR_SIZE,p);const _=this.stateModel.getRuntimeValue(f.PANEL_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView):O(this.stateModel.getRuntimeValue(f.PANEL_POSITION))?this.workbenchGrid.getViewSize(this.panelPartView).height:this.workbenchGrid.getViewSize(this.panelPartView).width;this.stateModel.setInitializationValue(f.PANEL_SIZE,_);const V=this.stateModel.getRuntimeValue(f.AUXILIARYBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView):this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;this.stateModel.setInitializationValue(f.AUXILIARYBAR_SIZE,V),this.stateModel.save(!0,!0)}))}layout(){this.disposed||(this._mainContainerDimension=yi(this.state.runtime.mainWindowFullscreen?S.document.body:this.parent,Qs),this.logService.trace(`Layout#layout, height: ${this._mainContainerDimension.height}, width: ${this._mainContainerDimension.width}`),bo(this.mainContainer,0,0,0,0,"relative"),po(this.mainContainer,this._mainContainerDimension.width,this._mainContainerDimension.height),this.workbenchGrid.layout(this._mainContainerDimension.width,this._mainContainerDimension.height),this.initialized=!0,this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension))}isMainEditorLayoutCentered(){return this.stateModel.getRuntimeValue(f.MAIN_EDITOR_CENTERED)}centerMainEditorLayout(t,e){this.stateModel.setRuntimeValue(f.MAIN_EDITOR_CENTERED,t);const s=Ee(this.editorGroupService.mainPart.groups.map(a=>a.activeEditor)).some(a=>a instanceof wo?this.configurationService.getValue("diffEditor.renderSideBySide"):!!(a!=null&&a.hasCapability(So.MultipleEditors))),n=this.editorGroupService.getLayout();let o=!1;n.orientation===vo.HORIZONTAL?o=n.groups.length>1:o=n.groups.some(a=>a.groups&&a.groups.length>1),this.configurationService.getValue("workbench.editor.centeredLayoutAutoResize")&&(o&&!this.editorGroupService.mainPart.hasMaximizedGroup()||s)&&(t=!1),this.editorGroupService.mainPart.isLayoutCentered()!==t&&(this.editorGroupService.mainPart.centerLayout(t),e||this.layout()),this._onDidChangeMainEditorCenteredLayout.fire(this.stateModel.getRuntimeValue(f.MAIN_EDITOR_CENTERED))}getSize(t){return this.workbenchGrid.getViewSize(this.getPart(t))}setSize(t,e){this.workbenchGrid.resizeView(this.getPart(t),e)}resizePart(t,e,i){const s=Math.sign(e)*Bs(Ye(),Math.abs(e)),n=Math.sign(i)*Bs(Ye(),Math.abs(i));let o;switch(t){case h.SIDEBAR_PART:o=this.workbenchGrid.getViewSize(this.sideBarPartView),this.workbenchGrid.resizeView(this.sideBarPartView,{width:o.width+s,height:o.height});break;case h.PANEL_PART:o=this.workbenchGrid.getViewSize(this.panelPartView),this.workbenchGrid.resizeView(this.panelPartView,{width:o.width+(O(this.getPanelPosition())?0:s),height:o.height+(O(this.getPanelPosition())?n:0)});break;case h.AUXILIARYBAR_PART:o=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{width:o.width+s,height:o.height});break;case h.EDITOR_PART:if(o=this.workbenchGrid.getViewSize(this.editorPartView),this.editorGroupService.mainPart.count===1)this.workbenchGrid.resizeView(this.editorPartView,{width:o.width+s,height:o.height+n});else{const r=this.editorGroupService.mainPart.activeGroup,{width:a,height:c}=this.editorGroupService.mainPart.getSize(r);this.editorGroupService.mainPart.setSize(r,{width:a+s,height:c+n});const{width:l,height:m}=this.editorGroupService.mainPart.getSize(r);(n&&c===m||s&&a===l)&&this.workbenchGrid.resizeView(this.editorPartView,{width:o.width+(s&&a===l?s:0),height:o.height+(n&&c===m?n:0)})}break;default:return}}setActivityBarHidden(t,e){this.stateModel.setRuntimeValue(f.ACTIVITYBAR_HIDDEN,t),this.workbenchGrid.setViewVisible(this.activityBarPartView,!t)}setBannerHidden(t){this.workbenchGrid.setViewVisible(this.bannerPartView,!t)}setEditorHidden(t,e){this.stateModel.setRuntimeValue(f.EDITOR_HIDDEN,t),t?this.mainContainer.classList.add(D.MAIN_EDITOR_AREA_HIDDEN):this.mainContainer.classList.remove(D.MAIN_EDITOR_AREA_HIDDEN),this.workbenchGrid.setViewVisible(this.editorPartView,!t),t&&!this.isVisible(h.PANEL_PART)&&this.setPanelHidden(!1,!0)}getLayoutClasses(){return Ee([this.isVisible(h.SIDEBAR_PART)?void 0:D.SIDEBAR_HIDDEN,this.isVisible(h.EDITOR_PART,S)?void 0:D.MAIN_EDITOR_AREA_HIDDEN,this.isVisible(h.PANEL_PART)?void 0:D.PANEL_HIDDEN,this.isVisible(h.AUXILIARYBAR_PART)?void 0:D.AUXILIARYBAR_HIDDEN,this.isVisible(h.STATUSBAR_PART)?void 0:D.STATUSBAR_HIDDEN,this.state.runtime.mainWindowFullscreen?D.FULLSCREEN:void 0])}setSideBarHidden(t,e){var i;if(this.stateModel.setRuntimeValue(f.SIDEBAR_HIDDEN,t),t?this.mainContainer.classList.add(D.SIDEBAR_HIDDEN):this.mainContainer.classList.remove(D.SIDEBAR_HIDDEN),t&&this.paneCompositeService.getActivePaneComposite(w.Sidebar))this.paneCompositeService.hideActivePaneComposite(w.Sidebar),this.focusPanelOrEditor();else if(!t&&!this.paneCompositeService.getActivePaneComposite(w.Sidebar)){const s=this.paneCompositeService.getLastActivePaneCompositeId(w.Sidebar);s&&(this.paneCompositeService.openPaneComposite(s,w.Sidebar,!0)||this.paneCompositeService.openPaneComposite((i=this.viewDescriptorService.getDefaultViewContainer(w.Sidebar))==null?void 0:i.id,w.Sidebar,!0))}this.workbenchGrid.setViewVisible(this.sideBarPartView,!t)}hasViews(t){const e=this.viewDescriptorService.getViewContainerById(t);if(!e)return!1;const i=this.viewDescriptorService.getViewContainerModel(e);return i?i.activeViewDescriptors.length>=1:!1}adjustPartPositions(t,e,i){const s=!O(i),n=s||!(e==="center"||t===I.LEFT&&e==="right"||t===I.RIGHT&&e==="left"),o=s||!(e==="center"||t===I.RIGHT&&e==="right"||t===I.LEFT&&e==="left"),r=this.isVisible(h.PANEL_PART)?this.workbenchGrid.getViewSize(this.panelPartView).width:Ce.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumWidth),a=this.isVisible(h.PANEL_PART)?this.workbenchGrid.getViewSize(this.panelPartView).height:Ce.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumHeight),c=this.isVisible(h.SIDEBAR_PART)?this.workbenchGrid.getViewSize(this.sideBarPartView).width:Ce.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView)??this.sideBarPartView.minimumWidth),l=this.isVisible(h.AUXILIARYBAR_PART)?this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width:Ce.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView)??this.auxiliaryBarPartView.minimumWidth),m=[h.PANEL_PART,h.SIDEBAR_PART,h.AUXILIARYBAR_PART].find(b=>this.hasFocus(b));t===I.LEFT?(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,0]),this.workbenchGrid.moveView(this.sideBarPartView,c,n?this.editorPartView:this.activityBarPartView,n?W.Left:W.Right),o?this.workbenchGrid.moveView(this.auxiliaryBarPartView,l,this.editorPartView,W.Right):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,-1])):(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,-1]),this.workbenchGrid.moveView(this.sideBarPartView,c,n?this.editorPartView:this.activityBarPartView,n?W.Right:W.Left),o?this.workbenchGrid.moveView(this.auxiliaryBarPartView,l,this.editorPartView,W.Left):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,0])),m&&this.focusPart(m),s&&(this.workbenchGrid.moveView(this.panelPartView,r,this.editorPartView,i===I.LEFT?W.Left:W.Right),this.workbenchGrid.resizeView(this.panelPartView,{height:a,width:r})),this.isVisible(h.SIDEBAR_PART)&&this.workbenchGrid.resizeView(this.sideBarPartView,{height:this.workbenchGrid.getViewSize(this.sideBarPartView).height,width:c}),this.isVisible(h.AUXILIARYBAR_PART)&&this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{height:this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).height,width:l})}setPanelAlignment(t,e){O(this.getPanelPosition())||this.setPanelPosition(I.BOTTOM),t!=="center"&&this.isPanelMaximized()&&this.toggleMaximizedPanel(),this.stateModel.setRuntimeValue(f.PANEL_ALIGNMENT,t),this.adjustPartPositions(this.getSideBarPosition(),t,this.getPanelPosition()),this._onDidChangePanelAlignment.fire(t)}setPanelHidden(t,e){var r,a;if(!this.workbenchGrid)return;const i=!this.isVisible(h.PANEL_PART);this.stateModel.setRuntimeValue(f.PANEL_HIDDEN,t);const s=this.isPanelMaximized(),n=this.panelOpensMaximized();t?this.mainContainer.classList.add(D.PANEL_HIDDEN):this.mainContainer.classList.remove(D.PANEL_HIDDEN);let o=!1;if(t&&this.paneCompositeService.getActivePaneComposite(w.Panel))this.paneCompositeService.hideActivePaneComposite(w.Panel),o=!Vs;else if(!t&&!this.paneCompositeService.getActivePaneComposite(w.Panel)){let c=this.paneCompositeService.getLastActivePaneCompositeId(w.Panel);if((!c||!this.hasViews(c))&&(c=(r=this.viewDescriptorService.getViewContainersByLocation(w.Panel).find(l=>this.hasViews(l.id)))==null?void 0:r.id),c){const l=!e;this.paneCompositeService.openPaneComposite(c,w.Panel,l)||this.paneCompositeService.openPaneComposite((a=this.viewDescriptorService.getDefaultViewContainer(w.Panel))==null?void 0:a.id,w.Panel,l)}}t&&s&&this.toggleMaximizedPanel(),i!==t&&(this.workbenchGrid.setViewVisible(this.panelPartView,!t),t?this.stateModel.setRuntimeValue(f.PANEL_WAS_LAST_MAXIMIZED,s):!e&&s!==n&&this.toggleMaximizedPanel(),o&&this.editorGroupService.mainPart.activeGroup.focus())}toggleMaximizedPanel(){const t=this.workbenchGrid.getViewSize(this.panelPartView),e=this.getPanelPosition(),i=this.isPanelMaximized();i?(this.setEditorHidden(!1),this.workbenchGrid.resizeView(this.panelPartView,{width:O(e)?t.width:this.stateModel.getRuntimeValue(f.PANEL_LAST_NON_MAXIMIZED_WIDTH),height:O(e)?this.stateModel.getRuntimeValue(f.PANEL_LAST_NON_MAXIMIZED_HEIGHT):t.height})):(this.isVisible(h.PANEL_PART)&&(O(e)?this.stateModel.setRuntimeValue(f.PANEL_LAST_NON_MAXIMIZED_HEIGHT,t.height):this.stateModel.setRuntimeValue(f.PANEL_LAST_NON_MAXIMIZED_WIDTH,t.width)),this.setEditorHidden(!0)),this.stateModel.setRuntimeValue(f.PANEL_WAS_LAST_MAXIMIZED,!i)}panelOpensMaximized(){if(this.getPanelAlignment()!=="center"&&O(this.getPanelPosition()))return!1;const t=Ao(this.configurationService.getValue(He.PANEL_OPENS_MAXIMIZED)),e=this.stateModel.getRuntimeValue(f.PANEL_WAS_LAST_MAXIMIZED);return t===Ls.ALWAYS||t===Ls.REMEMBER_LAST&&e}setAuxiliaryBarHidden(t,e){var i,s;if(this.stateModel.setRuntimeValue(f.AUXILIARYBAR_HIDDEN,t),t?this.mainContainer.classList.add(D.AUXILIARYBAR_HIDDEN):this.mainContainer.classList.remove(D.AUXILIARYBAR_HIDDEN),t&&this.paneCompositeService.getActivePaneComposite(w.AuxiliaryBar))this.paneCompositeService.hideActivePaneComposite(w.AuxiliaryBar),this.focusPanelOrEditor();else if(!t&&!this.paneCompositeService.getActivePaneComposite(w.AuxiliaryBar)){let n=this.paneCompositeService.getLastActivePaneCompositeId(w.AuxiliaryBar);if((!n||!this.hasViews(n))&&(n=(i=this.viewDescriptorService.getViewContainersByLocation(w.AuxiliaryBar).find(o=>this.hasViews(o.id)))==null?void 0:i.id),n){const o=!e;this.paneCompositeService.openPaneComposite(n,w.AuxiliaryBar,o)||this.paneCompositeService.openPaneComposite((s=this.viewDescriptorService.getDefaultViewContainer(w.AuxiliaryBar))==null?void 0:s.id,w.AuxiliaryBar,o)}}this.workbenchGrid.setViewVisible(this.auxiliaryBarPartView,!t)}setPartHidden(t,e,i=S){switch(e){case h.ACTIVITYBAR_PART:return this.setActivityBarHidden(t);case h.SIDEBAR_PART:return this.setSideBarHidden(t);case h.EDITOR_PART:return this.setEditorHidden(t);case h.BANNER_PART:return this.setBannerHidden(t);case h.AUXILIARYBAR_PART:return this.setAuxiliaryBarHidden(t);case h.PANEL_PART:return this.setPanelHidden(t)}}hasMainWindowBorder(){return this.state.runtime.mainWindowBorder}getMainWindowBorderRadius(){return this.state.runtime.mainWindowBorder&&ct?"5px":void 0}isPanelMaximized(){return(this.getPanelAlignment()==="center"||!O(this.getPanelPosition()))&&!this.isVisible(h.EDITOR_PART,S)}getSideBarPosition(){return this.stateModel.getRuntimeValue(f.SIDEBAR_POSITON)}getPanelAlignment(){return this.stateModel.getRuntimeValue(f.PANEL_ALIGNMENT)}updateMenubarVisibility(t){const e=_t(this.configurationService,S,this.state.runtime.menuBar.toggled);!t&&this.workbenchGrid&&e!==this.isVisible(h.TITLEBAR_PART,S)&&this.workbenchGrid.setViewVisible(this.titleBarPartView,e)}updateCustomTitleBarVisibility(){const t=_t(this.configurationService,S,this.state.runtime.menuBar.toggled),e=this.isVisible(h.TITLEBAR_PART);t!==e&&this.workbenchGrid.setViewVisible(this.titleBarPartView,t)}toggleMenuBar(){let t=Vi(this.configurationService);typeof t!="string"&&(t="classic");let e;t==="visible"||t==="classic"?e=xt(this.configurationService)?"toggle":"compact":e="classic",this.configurationService.updateValue("window.menuBarVisibility",e)}getPanelPosition(){return this.stateModel.getRuntimeValue(f.PANEL_POSITION)}setPanelPosition(t){this.isVisible(h.PANEL_PART)||this.setPanelHidden(!1);const e=this.getPart(h.PANEL_PART),i=le(this.getPanelPosition()),s=le(t),n=ot(e.getContainer());n.classList.remove(i),n.classList.add(s),e.updateStyles();const o=this.workbenchGrid.getViewSize(this.panelPartView),r=this.workbenchGrid.getViewSize(this.sideBarPartView),a=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView);let c=!this.isVisible(h.EDITOR_PART,S);s!==i&&!c&&(O(t)?this.stateModel.setRuntimeValue(f.PANEL_LAST_NON_MAXIMIZED_WIDTH,o.width):O(Ke(i))&&this.stateModel.setRuntimeValue(f.PANEL_LAST_NON_MAXIMIZED_HEIGHT,o.height)),O(t)&&this.getPanelAlignment()!=="center"&&c&&(this.toggleMaximizedPanel(),c=!1),this.stateModel.setRuntimeValue(f.PANEL_POSITION,t);const l=this.isVisible(h.SIDEBAR_PART),m=this.isVisible(h.AUXILIARYBAR_PART),b=this.hasFocus(h.PANEL_PART);t===I.BOTTOM?this.workbenchGrid.moveView(this.panelPartView,c?o.height:this.stateModel.getRuntimeValue(f.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,W.Down):t===I.TOP?this.workbenchGrid.moveView(this.panelPartView,c?o.height:this.stateModel.getRuntimeValue(f.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,W.Up):t===I.RIGHT?this.workbenchGrid.moveView(this.panelPartView,c?o.width:this.stateModel.getRuntimeValue(f.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,W.Right):this.workbenchGrid.moveView(this.panelPartView,c?o.width:this.stateModel.getRuntimeValue(f.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,W.Left),b&&this.focusPart(h.PANEL_PART),this.workbenchGrid.resizeView(this.sideBarPartView,r),l||this.setSideBarHidden(!0),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,a),m||this.setAuxiliaryBarHidden(!0),O(t)&&this.adjustPartPositions(this.getSideBarPosition(),this.getPanelAlignment(),t),this._onDidChangePanelPosition.fire(s)}isWindowMaximized(t){return this.state.runtime.maximized.has(Ue(t))}updateWindowMaximizedState(t,e){this.mainContainer.classList.toggle(D.MAXIMIZED,e);const i=Ue(t);e!==this.state.runtime.maximized.has(i)&&(e?this.state.runtime.maximized.add(i):this.state.runtime.maximized.delete(i),this.updateWindowsBorder(),this._onDidChangeWindowMaximized.fire({windowId:i,maximized:e}))}getVisibleNeighborPart(t,e){if(!this.workbenchGrid||!this.isVisible(t,S))return;const i=this.workbenchGrid.getNeighborViews(this.getPart(t),e,!1);if(i)for(const s of i){const n=[h.ACTIVITYBAR_PART,h.EDITOR_PART,h.PANEL_PART,h.AUXILIARYBAR_PART,h.SIDEBAR_PART,h.STATUSBAR_PART,h.TITLEBAR_PART].find(o=>this.getPart(o)===s&&this.isVisible(o,S));if(n!==void 0)return n}}onDidChangeWCO(){const t=this.workbenchGrid.getNeighborViews(this.titleBarPartView,W.Up,!1).length>0,e=this.shouldShowBannerFirst();t!==e&&this.workbenchGrid.moveView(this.bannerPartView,Ce.Distribute,this.titleBarPartView,e?W.Up:W.Down),this.workbenchGrid.setViewVisible(this.titleBarPartView,_t(this.configurationService,S,this.state.runtime.menuBar.toggled))}arrangeEditorNodes(t,e,i){if(!t.sideBar&&!t.auxiliaryBar)return t.editor.size=e,t.editor;const s=[t.editor];return t.editor.size=i,t.sideBar&&(this.stateModel.getRuntimeValue(f.SIDEBAR_POSITON)===I.LEFT?s.splice(0,0,t.sideBar):s.push(t.sideBar),t.editor.size-=this.stateModel.getRuntimeValue(f.SIDEBAR_HIDDEN)?0:t.sideBar.size),t.auxiliaryBar&&(this.stateModel.getRuntimeValue(f.SIDEBAR_POSITON)===I.RIGHT?s.splice(0,0,t.auxiliaryBar):s.push(t.auxiliaryBar),t.editor.size-=this.stateModel.getRuntimeValue(f.AUXILIARYBAR_HIDDEN)?0:t.auxiliaryBar.size),{type:"branch",data:s,size:e}}arrangeMiddleSectionNodes(t,e,i){const s=this.stateModel.getRuntimeValue(f.ACTIVITYBAR_HIDDEN)?0:t.activityBar.size,n=this.stateModel.getRuntimeValue(f.SIDEBAR_HIDDEN)?0:t.sideBar.size,o=this.stateModel.getRuntimeValue(f.AUXILIARYBAR_HIDDEN)?0:t.auxiliaryBar.size,r=this.stateModel.getInitializationValue(f.PANEL_SIZE)?0:t.panel.size,a=this.stateModel.getRuntimeValue(f.PANEL_POSITION),c=this.stateModel.getRuntimeValue(f.SIDEBAR_POSITON),l=[];if(!O(a))l.push(t.editor),t.editor.size=e-s-n-r-o,a===I.RIGHT?l.push(t.panel):l.splice(0,0,t.panel),c===I.LEFT?(l.push(t.auxiliaryBar),l.splice(0,0,t.sideBar),l.splice(0,0,t.activityBar)):(l.splice(0,0,t.auxiliaryBar),l.push(t.sideBar),l.push(t.activityBar));else{const m=this.stateModel.getRuntimeValue(f.PANEL_ALIGNMENT),b=!(m==="center"||c===I.LEFT&&m==="right"||c===I.RIGHT&&m==="left"),p=!(m==="center"||c===I.RIGHT&&m==="right"||c===I.LEFT&&m==="left"),_=e-s-(b?0:n)-(p?0:o),V=this.arrangeEditorNodes({editor:t.editor,sideBar:b?t.sideBar:void 0,auxiliaryBar:p?t.auxiliaryBar:void 0},i-r,_);l.push({type:"branch",data:a===I.BOTTOM?[V,t.panel]:[t.panel,V],size:_}),b||(c===I.LEFT?l.splice(0,0,t.sideBar):l.push(t.sideBar)),p||(c===I.RIGHT?l.splice(0,0,t.auxiliaryBar):l.push(t.auxiliaryBar)),c===I.LEFT?l.splice(0,0,t.activityBar):l.push(t.activityBar)}return l}createGridDescriptor(){const{width:t,height:e}=this._mainContainerDimension,i=this.stateModel.getInitializationValue(f.SIDEBAR_SIZE),s=this.stateModel.getInitializationValue(f.AUXILIARYBAR_SIZE),n=this.stateModel.getInitializationValue(f.PANEL_SIZE),o=this.titleBarPartView.minimumHeight,r=this.bannerPartView.minimumHeight,a=this.statusBarPartView.minimumHeight,c=this.activityBarPartView.minimumWidth,l=e-o-a,m=[{type:"leaf",data:{type:h.TITLEBAR_PART},size:o,visible:this.isVisible(h.TITLEBAR_PART,S)},{type:"leaf",data:{type:h.BANNER_PART},size:r,visible:!1}],b={type:"leaf",data:{type:h.ACTIVITYBAR_PART},size:c,visible:!this.stateModel.getRuntimeValue(f.ACTIVITYBAR_HIDDEN)},p={type:"leaf",data:{type:h.SIDEBAR_PART},size:i,visible:!this.stateModel.getRuntimeValue(f.SIDEBAR_HIDDEN)},_={type:"leaf",data:{type:h.AUXILIARYBAR_PART},size:s,visible:this.isVisible(h.AUXILIARYBAR_PART)},V={type:"leaf",data:{type:h.EDITOR_PART},size:0,visible:!this.stateModel.getRuntimeValue(f.EDITOR_HIDDEN)},Ct={type:"leaf",data:{type:h.PANEL_PART},size:n,visible:!this.stateModel.getRuntimeValue(f.PANEL_HIDDEN)},Ae=this.arrangeMiddleSectionNodes({activityBar:b,auxiliaryBar:_,editor:V,panel:Ct,sideBar:p},t,l),Ei={root:{type:"branch",size:t,data:[...this.shouldShowBannerFirst()?m.reverse():m,{type:"branch",data:Ae,size:l},{type:"leaf",data:{type:h.STATUSBAR_PART},size:a,visible:!this.stateModel.getRuntimeValue(f.STATUSBAR_HIDDEN)}]},orientation:Co.VERTICAL,width:t,height:e},Nn={activityBarVisible:!this.stateModel.getRuntimeValue(f.ACTIVITYBAR_HIDDEN),sideBarVisible:!this.stateModel.getRuntimeValue(f.SIDEBAR_HIDDEN),auxiliaryBarVisible:!this.stateModel.getRuntimeValue(f.AUXILIARYBAR_HIDDEN),panelVisible:!this.stateModel.getRuntimeValue(f.PANEL_HIDDEN),statusbarVisible:!this.stateModel.getRuntimeValue(f.STATUSBAR_HIDDEN),sideBarPosition:le(this.stateModel.getRuntimeValue(f.SIDEBAR_POSITON)),panelPosition:le(this.stateModel.getRuntimeValue(f.PANEL_POSITION))};return this.telemetryService.publicLog2("startupLayout",Nn),Ei}dispose(){super.dispose(),this.disposed=!0}}function Js(u){return u.getValue(He.ZEN_MODE_CONFIG)}class Rn{constructor(t,e,i,s){this.name=t,this.scope=e,this.target=i,this.defaultValue=s}}class H extends Rn{constructor(t,e,i,s,n){super(t,e,i,s),this.zenModeIgnore=n,this.runtime=!0}}class Pi extends Rn{constructor(){super(...arguments),this.runtime=!1}}const f={MAIN_EDITOR_CENTERED:new H("editor.centered",A.WORKSPACE,R.MACHINE,!1),ZEN_MODE_ACTIVE:new H("zenMode.active",A.WORKSPACE,R.MACHINE,!1),ZEN_MODE_EXIT_INFO:new H("zenMode.exitInfo",A.WORKSPACE,R.MACHINE,{transitionedToCenteredEditorLayout:!1,transitionedToFullScreen:!1,handleNotificationsDoNotDisturbMode:!1,wasVisible:{auxiliaryBar:!1,panel:!1,sideBar:!1}}),SIDEBAR_SIZE:new Pi("sideBar.size",A.PROFILE,R.MACHINE,200),AUXILIARYBAR_SIZE:new Pi("auxiliaryBar.size",A.PROFILE,R.MACHINE,200),PANEL_SIZE:new Pi("panel.size",A.PROFILE,R.MACHINE,300),PANEL_LAST_NON_MAXIMIZED_HEIGHT:new H("panel.lastNonMaximizedHeight",A.PROFILE,R.MACHINE,300),PANEL_LAST_NON_MAXIMIZED_WIDTH:new H("panel.lastNonMaximizedWidth",A.PROFILE,R.MACHINE,300),PANEL_WAS_LAST_MAXIMIZED:new H("panel.wasLastMaximized",A.WORKSPACE,R.MACHINE,!1),SIDEBAR_POSITON:new H("sideBar.position",A.WORKSPACE,R.MACHINE,I.LEFT),PANEL_POSITION:new H("panel.position",A.WORKSPACE,R.MACHINE,I.BOTTOM),PANEL_ALIGNMENT:new H("panel.alignment",A.PROFILE,R.USER,"center"),ACTIVITYBAR_HIDDEN:new H("activityBar.hidden",A.WORKSPACE,R.MACHINE,!1,!0),SIDEBAR_HIDDEN:new H("sideBar.hidden",A.WORKSPACE,R.MACHINE,!1),EDITOR_HIDDEN:new H("editor.hidden",A.WORKSPACE,R.MACHINE,!1),PANEL_HIDDEN:new H("panel.hidden",A.WORKSPACE,R.MACHINE,!0),AUXILIARYBAR_HIDDEN:new H("auxiliaryBar.hidden",A.WORKSPACE,R.MACHINE,!0),STATUSBAR_HIDDEN:new H("statusBar.hidden",A.WORKSPACE,R.MACHINE,!1,!0)};var He;(function(u){u.PANEL_POSITION="workbench.panel.defaultLocation",u.PANEL_OPENS_MAXIMIZED="workbench.panel.opensMaximized",u.ZEN_MODE_CONFIG="zenMode",u.EDITOR_CENTERED_LAYOUT_AUTO_RESIZE="workbench.editor.centeredLayoutAutoResize"})(He||(He={}));var Q;(function(u){u.STATUSBAR_VISIBLE="workbench.statusBar.visible",u.SIDEBAR_POSITION="workbench.sideBar.location"})(Q||(Q={}));const de=class de extends ${constructor(t,e,i){super(),this.storageService=t,this.configurationService=e,this.contextService=i,this._onDidChangeState=this._register(new C),this.onDidChangeState=this._onDidChangeState.event,this.stateCache=new Map,this._register(this.configurationService.onDidChangeConfiguration(s=>this.updateStateFromLegacySettings(s)))}updateStateFromLegacySettings(t){t.affectsConfiguration(T.ACTIVITY_BAR_LOCATION)&&this.setRuntimeValueAndFire(f.ACTIVITYBAR_HIDDEN,this.isActivityBarHidden()),t.affectsConfiguration(Q.STATUSBAR_VISIBLE)&&this.setRuntimeValueAndFire(f.STATUSBAR_HIDDEN,!this.configurationService.getValue(Q.STATUSBAR_VISIBLE)),t.affectsConfiguration(Q.SIDEBAR_POSITION)&&this.setRuntimeValueAndFire(f.SIDEBAR_POSITON,Ke(this.configurationService.getValue(Q.SIDEBAR_POSITION)??"left"))}updateLegacySettingsFromState(t,e){const i=this.getRuntimeValue(f.ZEN_MODE_ACTIVE);t.zenModeIgnore&&i||(t===f.ACTIVITYBAR_HIDDEN?this.configurationService.updateValue(T.ACTIVITY_BAR_LOCATION,e?be.HIDDEN:void 0):t===f.STATUSBAR_HIDDEN?this.configurationService.updateValue(Q.STATUSBAR_VISIBLE,!e):t===f.SIDEBAR_POSITON&&this.configurationService.updateValue(Q.SIDEBAR_POSITION,le(e)))}load(t){let e;for(e in f){const i=f[e],s=this.loadKeyFromStorage(i);s!==void 0&&this.stateCache.set(i.name,s)}this.stateCache.set(f.ACTIVITYBAR_HIDDEN.name,this.isActivityBarHidden()),this.stateCache.set(f.STATUSBAR_HIDDEN.name,!this.configurationService.getValue(Q.STATUSBAR_VISIBLE)),this.stateCache.set(f.SIDEBAR_POSITON.name,Ke(this.configurationService.getValue(Q.SIDEBAR_POSITION)??"left")),f.PANEL_POSITION.defaultValue=Ke(this.configurationService.getValue(He.PANEL_POSITION)??"bottom"),f.SIDEBAR_SIZE.defaultValue=Math.min(300,t.width/4),f.AUXILIARYBAR_SIZE.defaultValue=Math.min(300,t.width/4),f.PANEL_SIZE.defaultValue=this.stateCache.get(f.PANEL_POSITION.name)??O(f.PANEL_POSITION.defaultValue)?t.height/3:t.width/4,f.SIDEBAR_HIDDEN.defaultValue=this.contextService.getWorkbenchState()===Te.EMPTY;for(e in f){const i=f[e];this.stateCache.get(i.name)===void 0&&this.stateCache.set(i.name,i.defaultValue)}this._register(this.storageService.onDidChangeValue(A.PROFILE,void 0,this._store)(i=>{let s;for(s in f){const n=f[s];if(n instanceof H&&n.scope===A.PROFILE&&n.target===R.USER&&`${de.STORAGE_PREFIX}${n.name}`===i.key){const o=this.loadKeyFromStorage(n)??n.defaultValue;this.stateCache.get(n.name)!==o&&(this.stateCache.set(n.name,o),this._onDidChangeState.fire({key:n,value:o}))}}}))}save(t,e){let i;const s=this.getRuntimeValue(f.ZEN_MODE_ACTIVE);for(i in f){const n=f[i];if(t&&n.scope===A.WORKSPACE||e&&n.scope===A.PROFILE){if(s&&n instanceof H&&n.zenModeIgnore)continue;this.saveKeyToStorage(n)}}}getInitializationValue(t){return this.stateCache.get(t.name)}setInitializationValue(t,e){this.stateCache.set(t.name,e)}getRuntimeValue(t,e){if(e)switch(t){case f.ACTIVITYBAR_HIDDEN:this.stateCache.set(t.name,this.isActivityBarHidden());break;case f.STATUSBAR_HIDDEN:this.stateCache.set(t.name,!this.configurationService.getValue(Q.STATUSBAR_VISIBLE));break;case f.SIDEBAR_POSITON:this.stateCache.set(t.name,this.configurationService.getValue(Q.SIDEBAR_POSITION)??"left");break}return this.stateCache.get(t.name)}setRuntimeValue(t,e){this.stateCache.set(t.name,e);const i=this.getRuntimeValue(f.ZEN_MODE_ACTIVE);t.scope===A.PROFILE&&(!i||!t.zenModeIgnore)&&(this.saveKeyToStorage(t),this.updateLegacySettingsFromState(t,e))}isActivityBarHidden(){const t=this.configurationService.getValue("workbench.activityBar.visible");return t!==void 0?!t:this.configurationService.getValue(T.ACTIVITY_BAR_LOCATION)!==be.DEFAULT}setRuntimeValueAndFire(t,e){this.stateCache.get(t.name)!==e&&(this.setRuntimeValue(t,e),this._onDidChangeState.fire({key:t,value:e}))}saveKeyToStorage(t){const e=this.stateCache.get(t.name);this.storageService.store(`${de.STORAGE_PREFIX}${t.name}`,typeof e=="object"?JSON.stringify(e):e,t.scope,t.target)}loadKeyFromStorage(t){let e=this.storageService.get(`${de.STORAGE_PREFIX}${t.name}`,t.scope);if(e!==void 0)switch(typeof t.defaultValue){case"boolean":e=e==="true";break;case"number":e=parseInt(e);break;case"object":e=JSON.parse(e);break}return e}};de.STORAGE_PREFIX="workbench.";let ji=de;const Za=5e3;let Xi=class extends ${constructor(t,e,i){super(),this._accessibilitySignalService=i,this._scheduler=new bn(()=>{this._signalLoop=this._accessibilitySignalService.playSignalLoop(wi.progress,e??Za)},t),this._scheduler.schedule()}dispose(){var t;super.dispose(),(t=this._signalLoop)==null||t.dispose(),this._scheduler.dispose()}};Xi=E([d(2,pi)],Xi);class ja{constructor(){this.priority=90,this.name="notifications",this.when=st,this.type=Os.View}getProvider(t){const e=t.get(Io),i=t.get(re),s=t.get(gt),n=t.get(pi);function o(){const r=Nt(i);if(!r)return;s.executeCommand("notifications.showList");let a;const c=i.lastFocusedList;if(c instanceof ps&&(a=c.indexOf(r)),a===void 0)return;function l(){if(s.executeCommand("notifications.showList"),c&&a!==void 0){c.domFocus();try{c.setFocus([a])}catch{}}}function m(){const p=Nt(i),_=p==null?void 0:p.message.original.toString();if(p)return p.source?g(3277,"{0} Source: {1}",_,p.source):g(3278,"{0}",_)}const b=m();if(b)return r.onDidClose(()=>e.next()),new yo(To.Notification,{type:Os.View},()=>b,()=>l(),"accessibility.verbosity.notification",void 0,Xa(r,n),()=>{if(c)return l(),c.focusNext(),m()},()=>{if(c)return l(),c.focusPrevious(),m()})}return o()}}function Xa(u,t){let e;if(u.actions&&(e=[],u.actions.primary&&e.push(...u.actions.primary),u.actions.secondary&&e.push(...u.actions.secondary)),e)for(const s of e){s.class=z.asClassName(j.bell);const n=s.run;s.run=()=>{n(),u.close()}}const i=e==null?void 0:e.find(s=>s.label.includes("Manage Extension"));return i&&(i.class=z.asClassName(j.gear)),e&&e.push({id:"clearNotification",label:g(3279,"Clear Notification"),tooltip:g(3279,"Clear Notification"),run:()=>{u.close(),t.playSignal(wi.clear)},enabled:!0,class:z.asClassName(j.clearAll)}),e}class $a extends Ka{constructor(t,e,i,s){super(t),this.options=e,this.serviceCollection=i,this._onWillShutdown=this._register(new C),this.onWillShutdown=this._onWillShutdown.event,this._onDidShutdown=this._register(new C),this.onDidShutdown=this._onDidShutdown.event,this.previousUnexpectedError={message:void 0,time:0},B("code/willStartWorkbench"),this.registerErrorHandler(s)}registerErrorHandler(t){S.addEventListener("unhandledrejection",e=>{Ze(e.reason),e.preventDefault()}),pn(e=>this.handleUnexpectedError(e,t))}handleUnexpectedError(t,e){const i=ze(t,!0);if(!i)return;const s=Date.now();i===this.previousUnexpectedError.message&&s-this.previousUnexpectedError.time<=1e3||(this.previousUnexpectedError.time=s,this.previousUnexpectedError.message=i,e.error(i))}startup(){try{this._register(_o(175));const t=this.initServices(this.serviceCollection);return t.invokeFunction(e=>{const i=e.get(ii),s=e.get(at),n=e.get(Qt),o=e.get(we),r=e.get(Do),a=e.get(St);this.initLayout(e),this.registerListeners(i,s,n,o,r),this.renderWorkbench(t,a,s,n),this.createWorkbenchLayout(),this.layout(),this.restore(i)}),t}catch(t){throw Ze(t),t}}initServices(t){t.set(et,this);const e=Ro();for(const[s,n]of e)t.set(s,n);const i=new No(t,!0);return i.invokeFunction(s=>{const n=s.get(ii),o=s.get(Qt);typeof o.acquireInstantiationService=="function"&&o.acquireInstantiationService(i),n.phase=ye.Ready}),i}registerListeners(t,e,i,s,n){this._register(i.onDidChangeConfiguration(o=>this.updateFontAliasing(o,i))),je?this._register(e.onWillSaveState(o=>{o.reason===Po.SHUTDOWN&&this.storeFontInfo(e)})):this._register(t.onWillShutdown(()=>this.storeFontInfo(e))),this._register(t.onWillShutdown(o=>this._onWillShutdown.fire(o))),this._register(t.onDidShutdown(()=>{this._onDidShutdown.fire(),this.dispose()})),this._register(s.onDidChangeFocus(o=>{o||e.flush()})),this._register(n.onWillShowDialog(()=>this.mainContainer.classList.add("modal-dialog-visible"))),this._register(n.onDidShowDialog(()=>this.mainContainer.classList.remove("modal-dialog-visible")))}updateFontAliasing(t,e){if(!ct||t&&!t.affectsConfiguration("workbench.fontAliasing"))return;const i=e.getValue("workbench.fontAliasing");if(this.fontAliasing===i)return;this.fontAliasing=i;const s=["antialiased","none","auto"];this.mainContainer.classList.remove(...s.map(n=>`monaco-font-aliasing-${n}`)),s.some(n=>n===i)&&this.mainContainer.classList.add(`monaco-font-aliasing-${i}`)}restoreFontInfo(t,e){const i=t.get("editorFontInfo",A.APPLICATION);if(i)try{const s=JSON.parse(i);Array.isArray(s)&&_i.restoreFontInfo(S,s)}catch{}_i.readFontInfo(S,Mo.createFromRawSettings(e.getValue("editor"),xo.getInstance(S).value))}storeFontInfo(t){const e=_i.serializeFontInfo(S);e&&t.store("editorFontInfo",JSON.stringify(e),A.APPLICATION,R.MACHINE)}renderWorkbench(t,e,i,s){var r;Vo(this.mainContainer),Bo((a,c)=>t.createInstance(Xi,a,c));const o=Ee(["monaco-workbench",fe?"windows":Be?"linux":"mac",nt?"web":void 0,Lo?"chromium":ko?"firefox":Oo?"safari":void 0,...this.getLayoutClasses(),...(r=this.options)!=null&&r.extraClasses?this.options.extraClasses:[]]);this.mainContainer.classList.add(...o),this.updateFontAliasing(void 0,s),this.restoreFontInfo(i,s);for(const{id:a,role:c,classes:l,options:m}of[{id:h.TITLEBAR_PART,role:"none",classes:["titlebar"]},{id:h.BANNER_PART,role:"banner",classes:["banner"]},{id:h.ACTIVITYBAR_PART,role:"none",classes:["activitybar",this.getSideBarPosition()===I.LEFT?"left":"right"]},{id:h.SIDEBAR_PART,role:"none",classes:["sidebar",this.getSideBarPosition()===I.LEFT?"left":"right"]},{id:h.EDITOR_PART,role:"main",classes:["editor"],options:{restorePreviousState:this.willRestoreEditors()}},{id:h.PANEL_PART,role:"none",classes:["panel","basepanel",le(this.getPanelPosition())]},{id:h.AUXILIARYBAR_PART,role:"none",classes:["auxiliarybar","basepanel",this.getSideBarPosition()===I.LEFT?"right":"left"]},{id:h.STATUSBAR_PART,role:"status",classes:["statusbar"]}]){const b=this.createPart(a,c,l);B(`code/willCreatePart/${a}`),this.getPart(a).create(b,m),B(`code/didCreatePart/${a}`)}this.createNotificationsHandlers(t,e),this.parent.appendChild(this.mainContainer)}createPart(t,e,i){const s=document.createElement(e==="status"?"footer":"div");return s.classList.add("part",...i),s.id=t,s.setAttribute("role",e),e==="status"&&s.setAttribute("aria-live","off"),s}createNotificationsHandlers(t,e){const i=this._register(t.createInstance(Yi,this.mainContainer,e.model)),s=this._register(t.createInstance(Zi,this.mainContainer,e.model));this._register(t.createInstance(Ga,e.model));const n=t.createInstance(Ki,e.model);this._register(i.onDidChangeVisibility(()=>{n.update(i.isVisible,s.isVisible),s.update(i.isVisible)})),this._register(s.onDidChangeVisibility(()=>{n.update(i.isVisible,s.isVisible)})),Va(i,s,e.model),Ho.register(new ja),this.registerNotifications({onDidChangeNotificationsVisibility:rt.map(rt.any(s.onDidChangeVisibility,i.onDidChangeVisibility),()=>s.isVisible||i.isVisible)})}restore(t){try{this.restoreParts()}catch(e){Ze(e)}this.whenReady.finally(()=>Promise.race([this.whenRestored,Fo(2e3)]).finally(()=>{function e(){B("code/didStartWorkbench"),performance.measure("perf: workbench create & restore","code/didLoadWorkbenchMain","code/didStartWorkbench")}this.isRestored()?e():this.whenRestored.finally(()=>e()),t.phase=ye.Restored,this._register(new bn(()=>{this._register(zo(S,()=>t.phase=ye.Eventually,2500))},2500)).schedule()}))}}var qa='.monaco-workbench .part.titlebar{display:flex;flex-direction:row}.monaco-workbench.mac .part.titlebar{flex-direction:row-reverse}.monaco-workbench .part.titlebar>.titlebar-container{align-items:center;box-sizing:border-box;display:flex;flex-grow:1;flex-shrink:1;height:100%;justify-content:space-between;overflow:hidden;user-select:none;-webkit-user-select:none;width:100%}.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom{zoom:calc(1/var(--zoom-factor))}.monaco-workbench.mac .part.titlebar>.titlebar-container{line-height:22px}.monaco-workbench.linux .part.titlebar>.titlebar-container,.monaco-workbench.web .part.titlebar>.titlebar-container,.monaco-workbench.windows .part.titlebar>.titlebar-container{justify-content:left;line-height:22px}.monaco-workbench.web.safari .part.titlebar,.monaco-workbench.web.safari .part.titlebar>.titlebar-container{overflow:visible}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-drag-region{-webkit-app-region:drag;display:block;height:100%;left:0;position:absolute;top:0;width:100%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right{align-items:center;display:flex;height:100%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left{flex-grow:2;justify-content:flex-start;order:0;width:20%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center{justify-content:center;margin:0 10px;max-width:fit-content;min-width:0;order:1;width:60%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right{flex-grow:2;justify-content:flex-end;min-width:min-content;order:2;width:20%}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title{flex:0 1 auto;font-size:12px;margin-left:auto;margin-right:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench.linux .part.titlebar>.titlebar-container>.titlebar-center>.window-title,.monaco-workbench.web .part.titlebar>.titlebar-container>.titlebar-center>.window-title,.monaco-workbench.windows .part.titlebar>.titlebar-container>.titlebar-center>.window-title{cursor:default}.monaco-workbench.linux .part.titlebar>.titlebar-container>.titlebar-center>.window-title{font-size:inherit}.monaco-workbench .part.titlebar>.titlebar-container .monaco-toolbar .actions-container{gap:4px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center{-webkit-app-region:no-drag;z-index:2500}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center.hide{visibility:hidden}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item.monaco-dropdown-with-primary .action-label,.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:var(--vscode-titleBar-activeForeground)}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item.monaco-dropdown-with-primary .action-label,.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center>.monaco-toolbar>.monaco-action-bar>.actions-container>.action-item>.action-label{color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center{align-items:stretch;background-color:var(--vscode-commandCenter-background);border:1px solid var(--vscode-commandCenter-border);border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:6px;border-top-right-radius:6px;color:var(--vscode-commandCenter-foreground);display:flex;height:22px;margin:0 6px;max-width:600px;overflow:hidden;width:38vw}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick{display:flex;justify-content:start;margin:auto;max-width:600px;overflow:hidden}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-icon{color:var(--vscode-commandCenter-foreground);font-size:14px;margin:auto 3px;opacity:.8}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-icon{color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center .action-item.command-center-quick-pick .search-label{overflow:hidden;text-overflow:ellipsis}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center.multiple{justify-content:flex-start;padding:0 12px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center.multiple.active .action-label{background-color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center:only-child{margin-left:0}.monaco-workbench .part.titlebar.inactive>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center{border-color:var(--vscode-commandCenter-inactiveBorder)!important;color:var(--vscode-titleBar-inactiveForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-center>.window-title>.command-center .action-item.command-center-center:HOVER{background-color:var(--vscode-commandCenter-activeBackground);border-color:var(--vscode-commandCenter-activeBorder);color:var(--vscode-commandCenter-activeForeground)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.menubar{flex-wrap:nowrap;min-width:36px;order:2;z-index:2500}.monaco-workbench.web .part.titlebar>.titlebar-container>.titlebar-left>.menubar{margin-left:4px}.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom .menubar .menubar-menu-button>.menubar-menu-items-holder.monaco-menu-container,.monaco-workbench .part.titlebar>.titlebar-container.counter-zoom .monaco-toolbar .dropdown-action-container{zoom:var(--zoom-factor)}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon{flex-shrink:0;height:100%;order:1;position:relative;width:35px;z-index:2500}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon:not(.codicon){background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:16px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon.codicon{line-height:30px}.monaco-workbench.fullscreen .part.titlebar>.titlebar-container>.titlebar-left>.window-appicon{display:none}.monaco-workbench .part.titlebar .window-controls-container{-webkit-app-region:no-drag;display:flex;flex-grow:0;flex-shrink:0;height:100%;text-align:center;width:0;z-index:3000}.monaco-workbench.fullscreen .part.titlebar .window-controls-container{background-color:transparent;display:none}.monaco-workbench.web .part.titlebar .titlebar-right .window-controls-container{height:env(titlebar-area-height,35px);width:calc(100vw - env(titlebar-area-width, 100vw) - env(titlebar-area-x, 0px))}.monaco-workbench.web .part.titlebar .titlebar-left .window-controls-container{height:env(titlebar-area-height,35px);width:env(titlebar-area-x,0)}.monaco-workbench.web.mac .part.titlebar .titlebar-left .window-controls-container{order:0}.monaco-workbench.web.mac .part.titlebar .titlebar-right .window-controls-container{order:1}.monaco-workbench:not(.web):not(.mac) .part.titlebar .window-controls-container{width:calc(138px/var(--zoom-factor, 1))}.monaco-workbench:not(.web):not(.mac) .part.titlebar .titlebar-container.counter-zoom .window-controls-container{width:138px}.monaco-workbench.linux:not(.web) .part.titlebar .window-controls-container.wco-enabled{width:calc(100vw - env(titlebar-area-width, 100vw) - env(titlebar-area-x, 0px))}.monaco-workbench:not(.web):not(.mac) .part.titlebar .titlebar-container:not(.counter-zoom) .window-controls-container *{zoom:calc(1/var(--zoom-factor, 1))}.monaco-workbench:not(.web).mac .part.titlebar .window-controls-container{width:70px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container{-webkit-app-region:no-drag;display:none;flex-grow:0;flex-shrink:0;height:100%;margin-left:auto;padding-right:4px;position:relative;text-align:center;z-index:2500}.monaco-workbench.mac:not(.web) .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container{right:8px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container:not(.has-no-actions){display:flex;justify-content:center}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .codicon{color:inherit}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item{display:flex}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .badge{align-items:center;display:flex;margin-left:8px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge{margin-left:0}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .badge .badge-content{border-radius:11px;box-sizing:border-box;display:inline-block;font-size:9px;font-weight:400;height:16px;line-height:11px;min-width:11px;padding:3px 5px;position:relative;text-align:center}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact{bottom:0;height:100%;left:0;margin:auto;overflow:hidden;position:absolute;top:0;width:100%;z-index:2}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact .badge-content:before{mask-size:12px;-webkit-mask-size:12px;top:2px}.monaco-workbench .part.titlebar>.titlebar-container>.titlebar-right>.action-toolbar-container .monaco-action-bar .action-item.icon .badge.compact .badge-content{border-radius:16px;font-size:9px;font-weight:600;height:12px;line-height:12px;min-width:12px;padding:0 2px;position:absolute;right:0;text-align:center;top:10px}';te(qa,{});var $i;let qi=class{constructor(t,e,i,s){this._disposables=new M,this._onDidChangeVisibility=this._disposables.add(new C),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.element=document.createElement("div"),this.element.classList.add("command-center");const n=i.createInstance(Go,this.element,k.CommandCenter,{contextMenu:k.TitleBarContext,hiddenItemStrategy:wn.NoHide,toolbarOptions:{primaryGroup:()=>!0},telemetrySource:"commandCenter",actionViewItemProvider:(o,r)=>o instanceof Wo&&o.item.submenu===k.CommandCenterCenter?i.createInstance(Qi,o,t,{...r,hoverDelegate:e}):Is(i,o,{...r,hoverDelegate:e})});this._disposables.add(rt.filter(s.onShow,()=>gn(this.element),this._disposables)(this._setVisibility.bind(this,!1))),this._disposables.add(s.onHide(this._setVisibility.bind(this,!0))),this._disposables.add(n)}_setVisibility(t){this.element.classList.toggle("hide",!t),this._onDidChangeVisibility.fire()}dispose(){this._disposables.dispose()}};qi=E([d(2,x),d(3,an)],qi);var Yt;let Qi=(Yt=class extends Hs{constructor(t,e,i,s,n,o,r){super(void 0,t.actions.find(a=>a.id==="workbench.action.quickOpenWithModes")??t.actions[0],i),this._submenu=t,this._windowTitle=e,this._hoverService=s,this._keybindingService=n,this._instaService=o,this._editorGroupService=r,this._hoverDelegate=i.hoverDelegate??Mi("mouse")}render(t){super.render(t),t.classList.add("command-center-center"),t.classList.toggle("multiple",this._submenu.actions.length>1);const e=this._store.add(this._hoverService.setupManagedHover(this._hoverDelegate,t,this.getTooltip()));this._store.add(this._windowTitle.onDidChange(()=>{e.update(this.getTooltip())}));const i=[];for(const s of this._submenu.actions)s instanceof Uo?i.push(s.actions):i.push([s]);for(let s=0;s<i.length;s++){const n=i[s],o=this._instaService.createInstance(Sn,t,{hiddenItemStrategy:wn.NoHide,telemetrySource:"commandCenterCenter",actionViewItemProvider:(r,a)=>{if(a={...a,hoverDelegate:this._hoverDelegate},r.id!==$i._quickOpenCommandId)return Is(this._instaService,r,a);const c=this;return this._instaService.createInstance(class extends Hs{constructor(){super(void 0,r,a)}render(m){super.render(m),m.classList.toggle("command-center-quick-pick"),m.role="button";const b=this.action,p=document.createElement("span");p.ariaHidden="true",p.className=b.class??"",p.classList.add("search-icon");const _=this._getLabel(),V=document.createElement("span");V.classList.add("search-label"),V.innerText=_,vn(m,p,V);const Ct=this._store.add(c._hoverService.setupManagedHover(c._hoverDelegate,m,this.getTooltip()));this._store.add(c._windowTitle.onDidChange(()=>{Ct.update(this.getTooltip()),V.innerText=this._getLabel()})),this._store.add(c._editorGroupService.onDidChangeEditorPartOptions(({newPartOptions:Ae,oldPartOptions:Ei})=>{Ae.showTabs!==Ei.showTabs&&(Ct.update(this.getTooltip()),V.innerText=this._getLabel())}))}getTooltip(){return c.getTooltip()}_getLabel(){const{prefix:m,suffix:b}=c._windowTitle.getTitleDecorations();let p=c._windowTitle.workspaceName;return c._windowTitle.isCustomTitleFormat()?p=c._windowTitle.getWindowTitle():c._editorGroupService.partOptions.showTabs==="none"&&(p=c._windowTitle.fileName??p),p||(p=g(3399,"Search")),m&&(p=g(3400,"{0} {1}",m,p)),b&&(p=g(3401,"{0} {1}",p,b)),p.replaceAll(/\r\n|\r|\n/g,"⏎")}})}});if(o.setActions(n),this._store.add(o),s<i.length-1){const r=Li(j.circleSmallFilled);r.style.padding="0 12px",r.style.height="100%",r.style.opacity="0.5",t.appendChild(r)}}}getTooltip(){var i;const t=(i=this._keybindingService.lookupKeybinding(this.action.id))==null?void 0:i.getLabel();return t?g(3402,"Search {0} ({1}) — {2}",this._windowTitle.workspaceName,t,this._windowTitle.value):g(3403,"Search {0} — {1}",this._windowTitle.workspaceName,this._windowTitle.value)}},$i=Yt,Yt._quickOpenCommandId="workbench.action.quickOpenWithModes",Yt);Qi=$i=E([d(3,Cs),d(4,ie),d(5,x),d(6,Tt)],Qi);Et.appendMenuItem(k.CommandCenter,{submenu:k.CommandCenterCenter,title:g(3404,"Command Center"),icon:j.shield,order:101});var Ji;let ts=class extends An{constructor(t,e,i){super("workbench.titleService",i,e),this.instantiationService=t,this.mainPart=this._register(this.createMainTitlebarPart()),this.onMenubarVisibilityChange=this.mainPart.onMenubarVisibilityChange,this.properties=void 0,this.variables=new Map,this._register(this.registerPart(this.mainPart)),this.registerActions(),this.registerAPICommands()}createMainTitlebarPart(){return this.instantiationService.createInstance(es)}registerActions(){const t=this;this._register(ys(class extends Ts{constructor(){super({id:"workbench.action.focusTitleBar",title:ht(3439,"Focus Title Bar"),category:_s.View,f1:!0,precondition:Yo})}run(){var i;(i=t.getPartByDocument(fn()))==null||i.focus()}}))}registerAPICommands(){this._register(Dt.registerCommand({id:"registerWindowTitleVariable",handler:(t,e,i)=>{this.registerVariables([{name:e,contextKey:i}])},metadata:{description:"Registers a new title variable",args:[{name:"name",schema:{type:"string"},description:"The name of the variable to register"},{name:"contextKey",schema:{type:"string"},description:"The context key to use for the value of the variable"}]}}))}createAuxiliaryTitlebarPart(t,e){const i=document.createElement("div");i.classList.add("part","titlebar"),i.setAttribute("role","none"),i.style.position="relative",t.insertBefore(i,t.firstChild);const s=new M,n=this.doCreateAuxiliaryTitlebarPart(i,e);return s.add(this.registerPart(n)),s.add(rt.runAndSubscribe(n.onDidChange,()=>i.style.height=`${n.height}px`)),n.create(i),this.properties&&n.updateProperties(this.properties),this.variables.size&&n.registerVariables(Array.from(this.variables.values())),rt.once(n.onWillDispose)(()=>s.dispose()),n}doCreateAuxiliaryTitlebarPart(t,e){return this.instantiationService.createInstance(is,t,e,this.mainPart)}updateProperties(t){this.properties=t;for(const e of this.parts)e.updateProperties(t)}registerVariables(t){const e=[];for(const i of t)this.variables.has(i.name)||(this.variables.set(i.name,i),e.push(i));for(const i of this.parts)i.registerVariables(e)}};ts=E([d(0,x),d(1,at),d(2,it)],ts);let ui=class extends Ai{get minimumHeight(){var i;const t=nt&&Bi();let e=this.isCommandCenterVisible||t?Ko:30;return t&&(e=Math.max(e,((i=Zo(K(this.element)))==null?void 0:i.height)??0)),e/(this.preventZoom?Xe(K(this.element)):1)}get maximumHeight(){return this.minimumHeight}constructor(t,e,i,s,n,o,r,a,c,l,m,b,p,_,V,Ct){super(t,{hasTitle:!1},a,c,l),this.contextMenuService=s,this.configurationService=n,this.environmentService=o,this.instantiationService=r,this.storageService=c,this.contextKeyService=m,this.hostService=b,this.editorGroupService=p,this.menuService=V,this.keybindingService=Ct,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this._onMenubarVisibilityChange=this._register(new C),this.onMenubarVisibilityChange=this._onMenubarVisibilityChange.event,this._onWillDispose=this._register(new C),this.onWillDispose=this._onWillDispose.event,this.actionToolBarDisposable=this._register(new M),this.editorActionsChangeDisposable=this._register(new M),this.globalToolbarMenu=this._register(this.menuService.createMenu(k.TitleBar,this.contextKeyService)),this.hasGlobalToolbarEntries=!1,this.globalToolbarMenuDisposables=this._register(new M),this.editorToolbarMenuDisposables=this._register(new M),this.layoutToolbarMenuDisposables=this._register(new M),this.activityToolbarDisposables=this._register(new M),this.titleDisposables=this._register(new M),this.titleBarStyle=jo(this.configurationService),this.isInactive=!1,this.isAuxiliary=i!=="main",this.editorService=_.createScoped(i,this._store),this.editorGroupsContainer=i==="main"?p.mainPart:i,this.windowTitle=this._register(r.createInstance(Xo,e,i)),this.hoverDelegate=this._register($o()),this.registerListeners(Ue(e))}registerListeners(t){this._register(this.hostService.onDidChangeFocus(e=>e?this.onFocus():this.onBlur())),this._register(this.hostService.onDidChangeActiveWindow(e=>e===t?this.onFocus():this.onBlur())),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationChanged(e))),this._register(this.editorGroupService.onDidChangeEditorPartOptions(e=>this.onEditorPartConfigurationChange(e)))}onBlur(){this.isInactive=!0,this.updateStyles()}onFocus(){this.isInactive=!1,this.updateStyles()}onEditorPartConfigurationChange({oldPartOptions:t,newPartOptions:e}){(t.editorActionsLocation!==e.editorActionsLocation||t.showTabs!==e.showTabs)&&this.actionToolBar&&(this.createActionToolBar(),this.createActionToolBarMenus({editorActions:!0}),this._onDidChange.fire(void 0))}onConfigurationChanged(t){if(!this.isAuxiliary&&!xt(this.configurationService,this.titleBarStyle)&&(!ct||nt)&&t.affectsConfiguration("window.menuBarVisibility")&&(this.currentMenubarVisibility==="compact"?this.uninstallMenubar():this.installMenubar()),this.actionToolBar){const e=t.affectsConfiguration(T.LAYOUT_ACTIONS),i=t.affectsConfiguration(T.ACTIVITY_BAR_LOCATION);(e||i)&&(this.createActionToolBarMenus({layoutActions:e,activityActions:i}),this._onDidChange.fire(void 0))}t.affectsConfiguration(T.COMMAND_CENTER)&&(this.createTitle(),this._onDidChange.fire(void 0))}installMenubar(){this.menubar||(this.customMenubar=this._register(this.instantiationService.createInstance(qo)),this.menubar=J(this.leftContent,L("div.menubar")),this.menubar.setAttribute("role","menubar"),this._register(this.customMenubar.onVisibilityChange(t=>this.onMenubarVisibilityChanged(t))),this.customMenubar.create(this.menubar))}uninstallMenubar(){var t,e;(t=this.customMenubar)==null||t.dispose(),this.customMenubar=void 0,(e=this.menubar)==null||e.remove(),this.menubar=void 0,this.onMenubarVisibilityChanged(!1)}onMenubarVisibilityChanged(t){(nt||fe||Be)&&(this.lastLayoutDimensions&&this.layout(this.lastLayoutDimensions.width,this.lastLayoutDimensions.height),this._onMenubarVisibilityChange.fire(t))}updateProperties(t){this.windowTitle.updateProperties(t)}registerVariables(t){this.windowTitle.registerVariables(t)}createContentArea(t){var e;if(this.element=t,this.rootContainer=J(t,L(".titlebar-container")),this.leftContent=J(this.rootContainer,L(".titlebar-left")),this.centerContent=J(this.rootContainer,L(".titlebar-center")),this.rightContent=J(this.rootContainer,L(".titlebar-right")),(fe||Be)&&!xt(this.configurationService,this.titleBarStyle)&&(this.appIcon=Fs(this.leftContent,L("a.window-appicon"))),this.dragRegion=Fs(this.rootContainer,L("div.titlebar-drag-region")),!this.isAuxiliary&&!xt(this.configurationService,this.titleBarStyle)&&(!ct||nt)&&this.currentMenubarVisibility!=="compact"&&this.installMenubar(),this.title=J(this.centerContent,L("div.window-title")),this.createTitle(),this.actionToolBarElement=J(this.rightContent,L("div.action-toolbar-container")),this.createActionToolBar(),this.createActionToolBarMenus(),!xt(this.configurationService,this.titleBarStyle)){let i=ct?"left":"right";if(ct&&je){const s=Qo.Locale(Jo);((e=s==null?void 0:s.textInfo)==null?void 0:e.direction)==="rtl"&&(i="right")}if(!(ct&&je&&i==="left")){const s=J(i==="left"?this.leftContent:this.rightContent,L("div.window-controls-container"));nt&&J(i==="left"?this.rightContent:this.leftContent,L("div.window-controls-container")),Bi()&&s.classList.add("wco-enabled")}}return this._register(F(this.rootContainer,X.CONTEXT_MENU,i=>{wt.stop(i);let s;ct&&Ds(i.target)&&tr(i.target,this.title)?s=k.TitleBarTitleContext:s=k.TitleBarContext,this.onContextMenu(i,s)})),ct&&this._register(F(this.title,X.MOUSE_DOWN,i=>{i.metaKey&&(wt.stop(i,!0),this.onContextMenu(i,k.TitleBarTitleContext))},!0)),this.updateStyles(),this.element}createTitle(){if(this.titleDisposables.clear(),!this.isCommandCenterVisible)this.title.innerText=this.windowTitle.value,this.titleDisposables.add(this.windowTitle.onDidChange(()=>{this.title.innerText=this.windowTitle.value,this.lastLayoutDimensions&&this.updateLayout(this.lastLayoutDimensions)}));else{const t=this.instantiationService.createInstance(qi,this.windowTitle,this.hoverDelegate);vn(this.title,t.element),this.titleDisposables.add(t)}}actionViewItemProvider(t,e){var s;if(!this.isAuxiliary){if(t.id===zs)return this.instantiationService.createInstance(er,{position:()=>Gs.BELOW},e);if(t.id===Ws)return this.instantiationService.createInstance(ir,{position:()=>Gs.BELOW},e)}const i=(s=this.editorGroupsContainer.activeGroup)==null?void 0:s.activeEditorPane;if(i&&i instanceof sr){const n=i.getActionViewItem(t,e);if(n)return n}return Is(this.instantiationService,t,{...e,menuAsChild:!1})}getKeybinding(t){var i,s;const e=((s=(i=this.editorGroupsContainer.activeGroup)==null?void 0:i.activeEditorPane)==null?void 0:s.scopedContextKeyService)??this.contextKeyService;return this.keybindingService.lookupKeybinding(t.id,e)}createActionToolBar(){this.actionToolBarDisposable.clear(),this.actionToolBar=this.actionToolBarDisposable.add(this.instantiationService.createInstance(Sn,this.actionToolBarElement,{contextMenu:k.TitleBarContext,orientation:rr.HORIZONTAL,ariaLabel:g(3440,"Title actions"),getKeyBinding:t=>this.getKeybinding(t),overflowBehavior:{maxItems:9,exempted:[Ws,zs,...or]},anchorAlignmentProvider:()=>nr.RIGHT,telemetrySource:"titlePart",highlightToggledItems:this.editorActionsEnabled,actionViewItemProvider:(t,e)=>this.actionViewItemProvider(t,e),hoverDelegate:this.hoverDelegate})),this.editorActionsEnabled&&this.actionToolBarDisposable.add(this.editorGroupsContainer.onDidChangeActiveGroup(()=>this.createActionToolBarMenus({editorActions:!0})))}createActionToolBarMenus(t=!0){t===!0&&(t={editorActions:!0,layoutActions:!0,activityActions:!0});const e=()=>{const i={primary:[],secondary:[]};if(this.editorActionsEnabled){this.editorActionsChangeDisposable.clear();const n=this.editorGroupsContainer.activeGroup;if(n){const o=n.createEditorActions(this.editorActionsChangeDisposable);i.primary.push(...o.actions.primary),i.secondary.push(...o.actions.secondary),this.editorActionsChangeDisposable.add(o.onDidChange(()=>e()))}}const s=this.globalToolbarMenu.getActions();this.hasGlobalToolbarEntries=s.length>0,Us(s,i),this.layoutToolbarMenu&&Us(this.layoutToolbarMenu.getActions(),i,()=>!this.editorActionsEnabled),this.activityActionsEnabled&&(pr(this.storageService)&&i.primary.push(wr),i.primary.push(Sr)),this.actionToolBar.setActions(Ys(i.primary),Ys(i.secondary))};if(t.editorActions)if(this.editorToolbarMenuDisposables.clear(),this.editorActionsEnabled&&this.editorService.activeEditor!==void 0){const i={groupId:this.editorGroupsContainer.activeGroup.id};this.actionToolBar.actionRunner=this.editorToolbarMenuDisposables.add(new ar(i)),this.actionToolBar.context=i}else this.actionToolBar.actionRunner=this.editorToolbarMenuDisposables.add(new bs),this.actionToolBar.context=void 0;t.layoutActions&&(this.layoutToolbarMenuDisposables.clear(),this.layoutControlEnabled?(this.layoutToolbarMenu=this.menuService.createMenu(k.LayoutControlMenu,this.contextKeyService),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu.onDidChange(()=>e()))):this.layoutToolbarMenu=void 0),this.globalToolbarMenuDisposables.clear(),this.globalToolbarMenuDisposables.add(this.globalToolbarMenu.onDidChange(()=>e())),t.activityActions&&(this.activityToolbarDisposables.clear(),this.activityActionsEnabled&&this.activityToolbarDisposables.add(this.storageService.onDidChangeValue(A.PROFILE,cr.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)(()=>e()))),e()}updateStyles(){if(super.updateStyles(),this.element){this.isInactive?this.element.classList.add("inactive"):this.element.classList.remove("inactive");const t=this.getColor(this.isInactive?lr:hr,(s,n)=>s.isOpaque()?s:s.makeOpaque(dr(n)))||"";this.element.style.backgroundColor=t,this.appIconBadge&&(this.appIconBadge.style.backgroundColor=t),t&&ur.fromHex(t).isLighter()?this.element.classList.add("light"):this.element.classList.remove("light");const e=this.getColor(this.isInactive?fr:mr);this.element.style.color=e||"";const i=this.getColor(gr);this.element.style.borderBottom=i?`1px solid ${i}`:""}}onContextMenu(t,e){const i=new Cn(K(this.element),t);this.contextMenuService.showContextMenu({getAnchor:()=>i,menuId:e,contextKeyService:this.contextKeyService,domForShadowRoot:ct&&je?i.target:void 0})}get currentMenubarVisibility(){return this.isAuxiliary?"hidden":Vi(this.configurationService)}get layoutControlEnabled(){return!this.isAuxiliary&&this.configurationService.getValue(T.LAYOUT_ACTIONS)!==!1}get isCommandCenterVisible(){return this.configurationService.getValue(T.COMMAND_CENTER)!==!1}get editorActionsEnabled(){return this.editorGroupService.partOptions.editorActionsLocation===xi.TITLEBAR||this.editorGroupService.partOptions.editorActionsLocation===xi.DEFAULT&&this.editorGroupService.partOptions.showTabs===br.NONE}get activityActionsEnabled(){const t=this.configurationService.getValue(T.ACTIVITY_BAR_LOCATION);return!this.isAuxiliary&&(t===be.TOP||t===be.BOTTOM)}get hasZoomableElements(){const t=!(this.currentMenubarVisibility==="hidden"||this.currentMenubarVisibility==="compact"||!nt&&ct),e=this.isCommandCenterVisible,i=this.hasGlobalToolbarEntries||this.layoutControlEnabled||this.editorActionsEnabled||this.activityActionsEnabled;return t||e||i}get preventZoom(){return Xe(K(this.element))<1||!this.hasZoomableElements}layout(t,e){this.updateLayout(new Jt(t,e)),super.layoutContents(t,e)}updateLayout(t){this.lastLayoutDimensions=t;{const e=Xe(K(this.element));if(this.element.style.setProperty("--zoom-factor",e.toString()),this.rootContainer.classList.toggle("counter-zoom",this.preventZoom),this.customMenubar){const i=new Jt(0,t.height);this.customMenubar.layout(i)}}}focus(){var t;this.customMenubar?this.customMenubar.toggleFocus():(t=this.element.querySelector('[tabindex]:not([tabindex="-1"])'))==null||t.focus()}toJSON(){return{type:h.TITLEBAR_PART}}dispose(){this._onWillDispose.fire(),super.dispose()}};ui=E([d(3,bt),d(4,Qt),d(5,Ge),d(6,x),d(7,it),d(8,at),d(9,et),d(10,vt),d(11,we),d(12,Tt),d(13,Se),d(14,Rs),d(15,ie)],ui);let es=class extends ui{constructor(t,e,i,s,n,o,r,a,c,l,m,b,p){super(h.TITLEBAR_PART,S,"main",t,e,i,s,n,o,r,a,c,l,m,b,p)}};es=E([d(0,bt),d(1,Qt),d(2,Ge),d(3,x),d(4,it),d(5,at),d(6,et),d(7,vt),d(8,we),d(9,Tt),d(10,Se),d(11,Rs),d(12,ie)],es);var Kt;let is=(Kt=class extends ui{get height(){return this.minimumHeight}constructor(t,e,i,s,n,o,r,a,c,l,m,b,p,_,V,Ct){const Ae=Ji.COUNTER++;super(`workbench.parts.auxiliaryTitle.${Ae}`,K(t),e,s,n,o,r,a,c,l,m,b,p,_,V,Ct),this.container=t,this.mainTitlebar=i}get preventZoom(){return Xe(K(this.element))<1||!this.mainTitlebar.hasZoomableElements}},Ji=Kt,Kt.COUNTER=1,Kt);is=Ji=E([d(3,bt),d(4,Qt),d(5,Ge),d(6,x),d(7,it),d(8,at),d(9,et),d(10,vt),d(11,we),d(12,Tt),d(13,Se),d(14,Rs),d(15,ie)],is);function Qa(){return{[Es.toString()]:new Vt(ts,[],!1)}}En(async u=>{u.get(Es)});var Ja='.monaco-workbench .part.statusbar{box-sizing:border-box;cursor:default;display:flex;font-size:12px;height:22px;overflow:hidden;width:100%}.monaco-workbench:not(.reduce-motion) .part.statusbar{transition:background-color .15s ease-out}.monaco-workbench .part.statusbar.status-border-top:after{background-color:var(--status-border-top-color);content:"";height:1px;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:5}.monaco-workbench .part.statusbar>.left-items,.monaco-workbench .part.statusbar>.right-items{display:flex}.monaco-workbench .part.statusbar>.right-items{flex-direction:row-reverse;flex-wrap:wrap}.monaco-workbench .part.statusbar>.left-items{flex-grow:1}.monaco-workbench .part.statusbar>.items-container>.statusbar-item{display:inline-block;font-variant-numeric:tabular-nums;height:100%;line-height:22px;max-width:40vw;vertical-align:top}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak{position:relative}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container{height:5px;left:calc(50% - 5px);position:absolute;top:-5px;width:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-beak>.status-bar-item-beak-container:before{border-bottom-style:solid;border-bottom-width:5px;border-left:5px solid transparent;border-right:5px solid transparent;content:"";position:fixed}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{margin-left:3px;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label{margin-left:0;margin-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{margin-left:3px;margin-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left.compact-right>.statusbar-item-label{margin-left:0;margin-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.left.first-visible-item{padding-left:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.right.last-visible-item{padding-right:7px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.left.first-visible-item,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color.right.last-visible-item{padding-left:0;padding-right:0}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.has-background-color>.statusbar-item-label{margin-left:0;margin-right:0;padding-left:10px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left.has-background-color>.statusbar-item-label{padding-left:3px;padding-right:10px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right.has-background-color>.statusbar-item-label{padding-left:10px;padding-right:3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>.statusbar-item-label{align-items:center;cursor:pointer;display:flex;height:100%;outline-width:0;overflow:hidden;padding:0 5px;text-overflow:ellipsis;white-space:pre}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-left>.statusbar-item-label,.monaco-workbench .part.statusbar>.items-container>.statusbar-item.compact-right>.statusbar-item-label{padding:0 3px}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a:hover:not(.disabled){color:var(--vscode-statusBarItem-hoverForeground);text-decoration:none}.monaco-workbench .part.statusbar>.items-container>.statusbar-item>a.disabled{cursor:default}.monaco-workbench .part.statusbar>.items-container>.statusbar-item span.codicon{color:inherit;font-size:14px;text-align:center}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){outline:1px solid var(--vscode-contrastActiveBorder)!important;outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:active:not(.disabled){background-color:var(--vscode-statusBarItem-activeBackground)!important}.monaco-workbench .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){outline:1px dashed var(--vscode-contrastActiveBorder);outline-offset:-1px}.monaco-workbench:not(.hc-light):not(.hc-black) .part.statusbar>.items-container>.statusbar-item a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-hoverBackground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.warning-kind{background-color:var(--vscode-statusBarItem-warningBackground);color:var(--vscode-statusBarItem-warningForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.warning-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-warningHoverBackground)!important;color:var(--vscode-statusBarItem-warningHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.error-kind{background-color:var(--vscode-statusBarItem-errorBackground);color:var(--vscode-statusBarItem-errorForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.error-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-errorHoverBackground)!important;color:var(--vscode-statusBarItem-errorHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.prominent-kind{background-color:var(--vscode-statusBarItem-prominentBackground);color:var(--vscode-statusBarItem-prominentForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.prominent-kind:not(.compact-right):not(.compact-left) a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-prominentHoverBackground)!important;color:var(--vscode-statusBarItem-prominentHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.remote-kind{background-color:var(--vscode-statusBarItem-remoteBackground);color:var(--vscode-statusBarItem-remoteForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.remote-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-remoteHoverBackground)!important;color:var(--vscode-statusBarItem-remoteHoverForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.offline-kind{background-color:var(--vscode-statusBarItem-offlineBackground);color:var(--vscode-statusBarItem-offlineForeground)}.monaco-workbench .part.statusbar>.items-container>.statusbar-item.offline-kind a:hover:not(.disabled){background-color:var(--vscode-statusBarItem-offlineHoverBackground)!important;color:var(--vscode-statusBarItem-offlineHoverForeground)}';te(Ja,{});class tc extends q{constructor(t,e,i){super(t,e,void 0,!0),this.model=i,this.checked=!i.isHidden(t)}async run(){this.model.isHidden(this.id)?this.model.show(this.id):this.model.hide(this.id)}}class ec extends q{constructor(t,e,i){super(t,g(3395,"Hide '{0}'",e),void 0,!0),this.model=i}async run(){this.model.hide(this.id)}}let ss=class extends q{constructor(t,e){super("statusbar.manage.extension",g(3396,"Manage Extension")),this.extensionId=t,this.commandService=e}run(){return this.commandService.executeCommand("_extensions.manage",this.extensionId)}};ss=E([d(1,gt)],ss);N.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusPrevious",weight:P.WorkbenchContrib,primary:v.LeftArrow,secondary:[v.UpArrow],when:ve,handler:u=>{u.get(At).focusPreviousEntry()}});N.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusNext",weight:P.WorkbenchContrib,primary:v.RightArrow,secondary:[v.DownArrow],when:ve,handler:u=>{u.get(At).focusNextEntry()}});N.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusFirst",weight:P.WorkbenchContrib,primary:v.Home,when:ve,handler:u=>{const t=u.get(At);t.focus(!1),t.focusNextEntry()}});N.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusLast",weight:P.WorkbenchContrib,primary:v.End,when:ve,handler:u=>{const t=u.get(At);t.focus(!1),t.focusPreviousEntry()}});N.registerCommandAndKeybindingRule({id:"workbench.statusBar.clearFocus",weight:P.WorkbenchContrib,primary:v.Escape,when:ve,handler:u=>{const t=u.get(At),e=u.get(Se);t.isEntryFocused()?t.focus(!1):e.activeEditorPane&&e.activeEditorPane.focus()}});class ic extends Ts{constructor(){super({id:"workbench.action.focusStatusBar",title:ht(3397,"Focus Status Bar"),category:_s.View,f1:!0})}async run(t){t.get(et).focusPart(h.STATUSBAR_PART,Ye())}}ys(ic);const Pt=class Pt extends ${get entries(){return this._entries.slice(0)}get lastFocusedEntry(){return this._lastFocusedEntry&&!this.isHidden(this._lastFocusedEntry.id)?this._lastFocusedEntry:void 0}constructor(t){super(),this.storageService=t,this._onDidChangeEntryVisibility=this._register(new C),this.onDidChangeEntryVisibility=this._onDidChangeEntryVisibility.event,this._entries=[],this.hidden=new Set,this.restoreState(),this.registerListeners()}restoreState(){const t=this.storageService.get(Pt.HIDDEN_ENTRIES_KEY,A.PROFILE);if(t)try{this.hidden=new Set(JSON.parse(t))}catch{}}registerListeners(){this._register(this.storageService.onDidChangeValue(A.PROFILE,Pt.HIDDEN_ENTRIES_KEY,this._store)(()=>this.onDidStorageValueChange()))}onDidStorageValueChange(){const t=new Set(this.hidden);this.hidden.clear(),this.restoreState();const e=new Set;for(const i of t)this.hidden.has(i)||e.add(i);for(const i of this.hidden)t.has(i)||e.add(i);if(e.size>0)for(const i of this._entries)e.has(i.id)&&(this.updateVisibility(i.id,!0),e.delete(i.id))}add(t){this._entries.push(t),this.updateVisibility(t,!1),this.sort(),this.markFirstLastVisibleEntry()}remove(t){const e=this._entries.indexOf(t);e>=0&&(this._entries.splice(e,1),this._entries.some(i=>$e(i.priority.primary)&&i.priority.primary.location.id===t.id)&&this.sort(),this.markFirstLastVisibleEntry())}isHidden(t){return this.hidden.has(t)}hide(t){this.hidden.has(t)||(this.hidden.add(t),this.updateVisibility(t,!0),this.saveState())}show(t){this.hidden.has(t)&&(this.hidden.delete(t),this.updateVisibility(t,!0),this.saveState())}findEntry(t){return this._entries.find(e=>e.container===t)}getEntries(t){return this._entries.filter(e=>e.alignment===t)}focusNextEntry(){this.focusEntry(1,0)}focusPreviousEntry(){this.focusEntry(-1,this.entries.length-1)}isEntryFocused(){return!!this.getFocusedEntry()}getFocusedEntry(){return this._entries.find(t=>qt(t.container))}focusEntry(t,e){const i=o=>{let r=o,a=r>=0&&r<this._entries.length?this._entries[r]:void 0;for(;a&&this.isHidden(a.id);)r+=t,a=r>=0&&r<this._entries.length?this._entries[r]:void 0;return a},s=this.getFocusedEntry();if(s){const o=i(this._entries.indexOf(s)+t);if(o){this._lastFocusedEntry=o,o.labelContainer.focus();return}}const n=i(e);n&&(this._lastFocusedEntry=n,n.labelContainer.focus())}updateVisibility(t,e){if(typeof t=="string"){const i=t;for(const s of this._entries)s.id===i&&this.updateVisibility(s,e)}else{const i=t,s=this.isHidden(i.id);s?In(i.container):yn(i.container),e&&this._onDidChangeEntryVisibility.fire({id:i.id,visible:!s}),this.markFirstLastVisibleEntry()}}saveState(){this.hidden.size>0?this.storageService.store(Pt.HIDDEN_ENTRIES_KEY,JSON.stringify(Array.from(this.hidden.values())),A.PROFILE,R.USER):this.storageService.remove(Pt.HIDDEN_ENTRIES_KEY,A.PROFILE)}sort(){const t=new Set(this._entries.map(o=>o.id)),e=new Map,i=new Map;for(let o=0;o<this._entries.length;o++){const r=this._entries[o];if(typeof r.priority.primary=="number"||!t.has(r.priority.primary.location.id))e.set(r,o);else{const a=r.priority.primary.location.id;let c=i.get(a);if(!c){for(const l of i.values())if(l.has(a)){c=l;break}c||(c=new Map,i.set(a,c))}c.set(r.id,r)}}const s=Array.from(e.keys());s.sort((o,r)=>{if(o.alignment===r.alignment){const a=typeof o.priority.primary=="number"?o.priority.primary:o.priority.primary.location.priority,c=typeof r.priority.primary=="number"?r.priority.primary:r.priority.primary.location.priority;return a!==c?c-a:o.priority.secondary!==r.priority.secondary?r.priority.secondary-o.priority.secondary:e.get(o)-e.get(r)}return o.alignment===U.LEFT?-1:r.alignment===U.LEFT?1:0});let n;if(i.size>0){n=[];for(const o of s){const r=i.get(o.id),a=r?Array.from(r.values()):void 0;a&&n.push(...a.filter(c=>$e(c.priority.primary)&&c.priority.primary.alignment===U.LEFT).sort((c,l)=>l.priority.secondary-c.priority.secondary)),n.push(o),a&&n.push(...a.filter(c=>$e(c.priority.primary)&&c.priority.primary.alignment===U.RIGHT).sort((c,l)=>l.priority.secondary-c.priority.secondary)),i.delete(o.id)}for(const[,o]of i)n.push(...Array.from(o.values()).sort((r,a)=>a.priority.secondary-r.priority.secondary))}else n=s;this._entries=n}markFirstLastVisibleEntry(){this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(U.LEFT)),this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(U.RIGHT))}doMarkFirstLastVisibleStatusbarItem(t){let e,i;for(const s of t)s.container.classList.remove("first-visible-item","last-visible-item"),!this.isHidden(s.id)&&(e||(e=s),i=s);e==null||e.container.classList.add("first-visible-item"),i==null||i.container.classList.add("last-visible-item")}};Pt.HIDDEN_ENTRIES_KEY="workbench.statusbar.hidden";let ns=Pt,os=class extends ${get name(){return ot(this.entry).name}get hasCommand(){var t;return typeof((t=this.entry)==null?void 0:t.command)<"u"}constructor(t,e,i,s,n,o,r,a){super(),this.container=t,this.hoverDelegate=i,this.commandService=s,this.hoverService=n,this.notificationService=o,this.telemetryService=r,this.themeService=a,this.entry=void 0,this.foregroundListener=this._register(new ae),this.backgroundListener=this._register(new ae),this.commandMouseListener=this._register(new ae),this.commandTouchListener=this._register(new ae),this.commandKeyboardListener=this._register(new ae),this.hover=void 0,this.labelContainer=document.createElement("a"),this.labelContainer.tabIndex=-1,this.labelContainer.setAttribute("role","button"),this.labelContainer.className="statusbar-item-label",this._register(vs.addTarget(this.labelContainer)),this.label=this._register(new sc(this.labelContainer)),this.container.appendChild(this.labelContainer),this.beakContainer=document.createElement("div"),this.beakContainer.className="status-bar-item-beak-container",this.container.appendChild(this.beakContainer),this.update(e)}update(t){if(this.label.showProgress=t.showProgress??!1,(!this.entry||t.text!==this.entry.text)&&(this.label.text=t.text,t.text?yn(this.labelContainer):In(this.labelContainer)),(!this.entry||t.ariaLabel!==this.entry.ariaLabel)&&(this.container.setAttribute("aria-label",t.ariaLabel),this.labelContainer.setAttribute("aria-label",t.ariaLabel)),(!this.entry||t.role!==this.entry.role)&&this.labelContainer.setAttribute("role",t.role||"button"),!this.entry||!this.isEqualTooltip(this.entry,t)){let i,s;vr(t.tooltip)?(s=t.tooltip.content,i={actions:t.tooltip.commands.map(o=>({commandId:o.id,label:o.title,run:()=>this.executeCommand(o)}))}):s=t.tooltip;const n=Di(s)?{markdown:s,markdownNotSupportedFallback:void 0}:s;this.hover?this.hover.update(typeof n=="function"?n():n,i):this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.container,n,i))}if(!this.entry||t.command!==this.entry.command){this.commandMouseListener.clear(),this.commandTouchListener.clear(),this.commandKeyboardListener.clear();const i=t.command;i&&(i!==Ks||this.hover)?(this.commandMouseListener.value=F(this.labelContainer,X.CLICK,()=>this.executeCommand(i)),this.commandTouchListener.value=F(this.labelContainer,As.Tap,()=>this.executeCommand(i)),this.commandKeyboardListener.value=F(this.labelContainer,X.KEY_DOWN,s=>{var o;const n=new ln(s);n.equals(v.Space)||n.equals(v.Enter)?(wt.stop(s),this.executeCommand(i)):(n.equals(v.Escape)||n.equals(v.LeftArrow)||n.equals(v.RightArrow))&&(wt.stop(s),(o=this.hover)==null||o.hide())}),this.labelContainer.classList.remove("disabled")):this.labelContainer.classList.add("disabled")}(!this.entry||t.showBeak!==this.entry.showBeak)&&(t.showBeak?this.container.classList.add("has-beak"):this.container.classList.remove("has-beak"));const e=!!t.backgroundColor||t.kind&&t.kind!=="standard";if(!this.entry||t.kind!==this.entry.kind){for(const i of Ar)this.container.classList.remove(`${i}-kind`);t.kind&&t.kind!=="standard"&&this.container.classList.add(`${t.kind}-kind`),this.container.classList.toggle("has-background-color",e)}(!this.entry||t.color!==this.entry.color)&&this.applyColor(this.labelContainer,t.color),(!this.entry||t.backgroundColor!==this.entry.backgroundColor)&&(this.container.classList.toggle("has-background-color",e),this.applyColor(this.container,t.backgroundColor,!0)),this.entry=t}isEqualTooltip({tooltip:t},{tooltip:e}){return t===void 0?e===void 0:Di(t)?Di(e)&&Cr(t,e):t===e}async executeCommand(t){var e;if(t===Ks)(e=this.hover)==null||e.show(!0);else{const i=typeof t=="string"?t:t.id,s=typeof t=="string"?[]:t.arguments??[];this.telemetryService.publicLog2("workbenchActionExecuted",{id:i,from:"status bar"});try{await this.commandService.executeCommand(i,...s)}catch(n){this.notificationService.error(ze(n))}}}applyColor(t,e,i){var n;let s;if(i?this.backgroundListener.clear():this.foregroundListener.clear(),e)if(Er(e)){s=(n=this.themeService.getColorTheme().getColor(e.id))==null?void 0:n.toString();const o=this.themeService.onDidColorThemeChange(r=>{var c;const a=(c=r.theme.getColor(e.id))==null?void 0:c.toString();i?t.style.backgroundColor=a??"":t.style.color=a??""});i?this.backgroundListener.value=o:this.foregroundListener.value=o}else s=e;i?t.style.backgroundColor=s??"":t.style.color=s??""}};os=E([d(3,gt),d(4,Cs),d(5,St),d(6,ws),d(7,it)],os);class sc extends Ir{constructor(t){super(t),this.container=t,this.progressCodicon=Li(Zs),this.currentText="",this.currentShowProgress=!1}set showProgress(t){this.currentShowProgress!==t&&(this.currentShowProgress=t,this.progressCodicon=Li(t==="syncing"?Zs:yr),this.text=this.currentText)}set text(t){if(this.currentShowProgress){this.container.firstChild!==this.progressCodicon&&this.container.appendChild(this.progressCodicon);for(const i of Array.from(this.container.childNodes))i!==this.progressCodicon&&i.remove();let e=t??"";e&&(e=` ${e}`),J(this.container,...Tr(e))}else super.text=t}}function nc(u){const t=u;return typeof t=="object"&&"markdown"in t&&"markdownNotSupportedFallback"in t}var qe,rs,Zt;let Fe=(Zt=class extends Ai{constructor(t,e,i,s,n,o,r,a){super(t,{hasTitle:!1},i,n,o),this.instantiationService=e,this.contextService=s,this.storageService=n,this.contextMenuService=r,this.contextKeyService=a,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this.minimumHeight=qe.HEIGHT,this.maximumHeight=qe.HEIGHT,this.pendingEntries=[],this.viewModel=this._register(new ns(this.storageService)),this.onDidChangeEntryVisibility=this.viewModel.onDidChangeEntryVisibility,this._onWillDispose=this._register(new C),this.onWillDispose=this._onWillDispose.event,this.onDidOverrideEntry=this._register(new C),this.entryOverrides=new Map,this.hoverDelegate=this._register(this.instantiationService.createInstance(_r,"element",{instantHover:!0,dynamicDelay(c){if(typeof c=="function"||Ds(c)||nc(c)&&typeof c.markdown=="function")return 500}},(c,l)=>({persistence:{hideOnKeyDown:!0,sticky:l}}))),this.compactEntriesDisposable=this._register(new ae),this.styleOverrides=new Set,this.registerListeners()}registerListeners(){this._register(this.onDidChangeEntryVisibility(()=>this.updateCompactEntries())),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateStyles()))}overrideEntry(t,e){return this.entryOverrides.set(t,e),this.onDidOverrideEntry.fire(t),mt(()=>{this.entryOverrides.get(t)===e&&(this.entryOverrides.delete(t),this.onDidOverrideEntry.fire(t))})}withEntryOverride(t,e){const i=this.entryOverrides.get(e);return i&&(t={...t,...i}),t}addEntry(t,e,i,s=0){let n;return Dr(s)?n=s:n={primary:s,secondary:Rr(e)},this.element?this.doAddEntry(t,e,i,n):this.doAddPendingEntry(t,e,i,n)}doAddPendingEntry(t,e,i,s){const n={entry:t,id:e,alignment:i,priority:s};return this.pendingEntries.push(n),{update:r=>{n.accessor?n.accessor.update(r):n.entry=r},dispose:()=>{n.accessor?n.accessor.dispose():this.pendingEntries=this.pendingEntries.filter(r=>r!==n)}}}doAddEntry(t,e,i,s){const n=new M,o=this.doCreateStatusItem(e,i),r=n.add(this.instantiationService.createInstance(os,o,this.withEntryOverride(t,e),this.hoverDelegate)),a=new class{constructor(){this.id=e,this.extensionId=t.extensionId,this.alignment=i,this.priority=s,this.container=o,this.labelContainer=r.labelContainer}get name(){return r.name}get hasCommand(){return r.hasCommand}},{needsFullRefresh:c}=this.doAddOrRemoveModelEntry(a,!0);c?this.appendStatusbarEntries():this.appendStatusbarEntry(a);let l=t;const m={update:b=>{l=b,r.update(this.withEntryOverride(b,e))},dispose:()=>{const{needsFullRefresh:b}=this.doAddOrRemoveModelEntry(a,!1);b?this.appendStatusbarEntries():(o.remove(),this.updateCompactEntries()),n.dispose()}};return n.add(this.onDidOverrideEntry.event(b=>{b===e&&m.update(l)})),m}doCreateStatusItem(t,e,...i){const s=document.createElement("div");return s.id=t,s.classList.add("statusbar-item"),i&&s.classList.add(...i),e===U.RIGHT?s.classList.add("right"):s.classList.add("left"),s}doAddOrRemoveModelEntry(t,e){const i=this.viewModel.entries;e?this.viewModel.add(t):this.viewModel.remove(t);const s=this.viewModel.entries;return e?i.splice(s.indexOf(t),0,t):i.splice(i.indexOf(t),1),{needsFullRefresh:!rn(i,s)}}isEntryVisible(t){return!this.viewModel.isHidden(t)}updateEntryVisibility(t,e){e?this.viewModel.show(t):this.viewModel.hide(t)}focusNextEntry(){this.viewModel.focusNextEntry()}focusPreviousEntry(){this.viewModel.focusPreviousEntry()}isEntryFocused(){return this.viewModel.isEntryFocused()}focus(t=!0){var i;(i=this.getContainer())==null||i.focus();const e=this.viewModel.lastFocusedEntry;t&&e&&setTimeout(()=>e.labelContainer.focus(),0)}createContentArea(t){this.element=t;const e=this._register(this.contextKeyService.createScoped(this.element));return ve.bindTo(e).set(!0),this.leftItemsContainer=document.createElement("div"),this.leftItemsContainer.classList.add("left-items","items-container"),this.element.appendChild(this.leftItemsContainer),this.element.tabIndex=0,this.rightItemsContainer=document.createElement("div"),this.rightItemsContainer.classList.add("right-items","items-container"),this.element.appendChild(this.rightItemsContainer),this._register(F(t,X.CONTEXT_MENU,i=>this.showContextMenu(i))),this._register(vs.addTarget(t)),this._register(F(t,As.Contextmenu,i=>this.showContextMenu(i))),this.createInitialStatusbarEntries(),this.element}createInitialStatusbarEntries(){for(this.appendStatusbarEntries();this.pendingEntries.length;){const t=this.pendingEntries.shift();t&&(t.accessor=this.addEntry(t.entry,t.id,t.alignment,t.priority.primary))}}appendStatusbarEntries(){const t=ot(this.leftItemsContainer),e=ot(this.rightItemsContainer);$t(t),$t(e);for(const i of[...this.viewModel.getEntries(U.LEFT),...this.viewModel.getEntries(U.RIGHT).reverse()])(i.alignment===U.LEFT?t:e).appendChild(i.container);this.updateCompactEntries()}appendStatusbarEntry(t){const e=this.viewModel.getEntries(t.alignment);t.alignment===U.RIGHT&&e.reverse();const i=ot(t.alignment===U.LEFT?this.leftItemsContainer:this.rightItemsContainer),s=e.indexOf(t);s+1===e.length?i.appendChild(t.container):i.insertBefore(t.container,e[s+1].container),this.updateCompactEntries()}updateCompactEntries(){const t=this.viewModel.entries,e=new Map;for(const o of t)this.viewModel.isHidden(o.id)||e.set(o.id,o),o.container.classList.remove("compact-left","compact-right");const i=new Map;for(const o of e.values())if($e(o.priority.primary)&&o.priority.primary.compact){const r=o.priority.primary.location.id,a=e.get(r);if(!a)continue;let c=i.get(r);if(!c){for(const l of i.values())if(l.has(r)){c=l;break}c||(c=new Map,i.set(r,c))}c.set(o.id,o),c.set(a.id,a),o.priority.primary.alignment===U.LEFT?(a.container.classList.add("compact-left"),o.container.classList.add("compact-right")):(a.container.classList.add("compact-right"),o.container.classList.add("compact-left"))}const s=this.getColor(Nr),n=this.getColor(Pr);if(this.compactEntriesDisposable.value=new M,s&&n&&!Mr(this.theme.type))for(const[,o]of i)for(const r of o.values())r.hasCommand&&(this.compactEntriesDisposable.value.add(F(r.labelContainer,X.MOUSE_OVER,()=>{o.forEach(a=>a.labelContainer.style.backgroundColor=s),r.labelContainer.style.backgroundColor=n})),this.compactEntriesDisposable.value.add(F(r.labelContainer,X.MOUSE_OUT,()=>{o.forEach(a=>a.labelContainer.style.backgroundColor="")})))}showContextMenu(t){wt.stop(t,!0);const e=new Cn(K(this.element),t);let i;this.contextMenuService.showContextMenu({getAnchor:()=>e,getActions:()=>(i=this.getContextMenuActions(e),i),onHide:()=>{i&&Ur(i)}})}getContextMenuActions(t){const e=[];e.push(ti({id:js.ID,label:g(3398,"Hide Status Bar"),run:()=>this.instantiationService.invokeFunction(n=>new js().run(n))})),e.push(new xe);const i=new Set;for(const n of this.viewModel.entries)i.has(n.id)||(e.push(new tc(n.id,n.name,this.viewModel)),i.add(n.id));let s;for(let n=t.target;n;n=n.parentElement){const o=this.viewModel.findEntry(n);if(o){s=o;break}}return s&&(e.push(new xe),s.extensionId&&e.push(this.instantiationService.createInstance(ss,s.extensionId)),e.push(new ec(s.id,s.name,this.viewModel))),e}updateStyles(){super.updateStyles();const t=ot(this.getContainer()),e=[...this.styleOverrides].sort((a,c)=>a.priority-c.priority)[0],i=this.getColor((e==null?void 0:e.background)??(this.contextService.getWorkbenchState()!==Te.EMPTY?xr:Vr))||"";t.style.backgroundColor=i;const s=this.getColor((e==null?void 0:e.foreground)??(this.contextService.getWorkbenchState()!==Te.EMPTY?Br:Lr))||"";t.style.color=s;const n=this.getColor(kr),o=this.getColor((e==null?void 0:e.border)??(this.contextService.getWorkbenchState()!==Te.EMPTY?Or:Hr))||this.getColor(Fr);o?(t.classList.add("status-border-top"),t.style.setProperty("--status-border-top-color",o)):(t.classList.remove("status-border-top"),t.style.removeProperty("--status-border-top-color"));const r=this.getColor(zr);this.styleElement||(this.styleElement=Gr(t)),this.styleElement.textContent=`

				/* Status bar focus outline */
				.monaco-workbench .part.statusbar:focus {
					outline-color: ${r};
				}

				/* Status bar item focus outline */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible {
					outline: 1px solid ${this.getColor(Wr)??n};
					outline-offset: ${o?"-2px":"-1px"};
				}

				/* Notification Beak */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {
					border-bottom-color: ${i};
				}
			`}layout(t,e,i,s){super.layout(t,e,i,s),super.layoutContents(t,e)}overrideStyle(t){return this.styleOverrides.add(t),this.updateStyles(),mt(()=>{this.styleOverrides.delete(t),this.updateStyles()})}toJSON(){return{type:h.STATUSBAR_PART}}dispose(){this._onWillDispose.fire(),super.dispose()}},qe=Zt,Zt.HEIGHT=22,Zt);Fe=qe=E([d(1,x),d(2,it),d(3,vi),d(4,at),d(5,et),d(6,bt),d(7,vt)],Fe);let as=class extends Fe{constructor(t,e,i,s,n,o,r){super(h.STATUSBAR_PART,t,e,i,s,n,o,r)}};as=E([d(0,x),d(1,it),d(2,vi),d(3,at),d(4,et),d(5,bt),d(6,vt)],as);var jt;let cs=(jt=class extends Fe{constructor(t,e,i,s,n,o,r,a){const c=rs.COUNTER++;super(`workbench.parts.auxiliaryStatus.${c}`,e,i,s,n,o,r,a),this.container=t,this.height=Fe.HEIGHT}},rs=jt,jt.COUNTER=1,jt);cs=rs=E([d(1,x),d(2,it),d(3,vi),d(4,at),d(5,et),d(6,bt),d(7,vt)],cs);let ls=class extends An{constructor(t,e,i){super("workbench.statusBarService",i,e),this.instantiationService=t,this.mainPart=this._register(this.instantiationService.createInstance(as)),this._onDidCreateAuxiliaryStatusbarPart=this._register(new C),this.onDidCreateAuxiliaryStatusbarPart=this._onDidCreateAuxiliaryStatusbarPart.event,this.onDidChangeEntryVisibility=this.mainPart.onDidChangeEntryVisibility,this._register(this.registerPart(this.mainPart))}createAuxiliaryStatusbarPart(t){const e=document.createElement("footer");e.classList.add("part","statusbar"),e.setAttribute("role","status"),e.style.position="relative",e.setAttribute("aria-live","off"),e.setAttribute("tabindex","0"),t.appendChild(e);const i=this.instantiationService.createInstance(cs,e),s=this.registerPart(i);return i.create(e),rt.once(i.onWillDispose)(()=>s.dispose()),this._onDidCreateAuxiliaryStatusbarPart.fire(i),i}createScoped(t,e){return e.add(this.instantiationService.createInstance(hs,t))}addEntry(t,e,i,s=0){return t.showInAllWindows?this.doAddEntryToAllWindows(t,e,i,s):this.mainPart.addEntry(t,e,i,s)}doAddEntryToAllWindows(t,e,i,s=0){const n=new M,o=new Set;let r=t;function a(c){const l=new M;l.add(c.onWillDispose(()=>l.dispose()));const m=l.add(c.addEntry(r,e,i,s));o.add(m),l.add(mt(()=>o.delete(m))),n.add(l),l.add(mt(()=>n.delete(l)))}for(const c of this.parts)a(c);return n.add(this.onDidCreateAuxiliaryStatusbarPart(c=>a(c))),{update:c=>{r=c;for(const l of o)l.update(c)},dispose:()=>n.dispose()}}isEntryVisible(t){return this.mainPart.isEntryVisible(t)}updateEntryVisibility(t,e){for(const i of this.parts)i.updateEntryVisibility(t,e)}overrideEntry(t,e){const i=new M;for(const s of this.parts)i.add(s.overrideEntry(t,e));return i}focus(t){this.activePart.focus(t)}focusNextEntry(){this.activePart.focusNextEntry()}focusPreviousEntry(){this.activePart.focusPreviousEntry()}isEntryFocused(){return this.activePart.isEntryFocused()}overrideStyle(t){const e=new M;for(const i of this.parts)e.add(i.overrideStyle(t));return e}};ls=E([d(0,x),d(1,at),d(2,it)],ls);let hs=class extends ${constructor(t,e){super(),this.statusbarEntryContainer=t,this.statusbarService=e,this.onDidChangeEntryVisibility=this.statusbarEntryContainer.onDidChangeEntryVisibility}createAuxiliaryStatusbarPart(t){return this.statusbarService.createAuxiliaryStatusbarPart(t)}createScoped(t,e){return this.statusbarService.createScoped(t,e)}getPart(){return this.statusbarEntryContainer}addEntry(t,e,i,s=0){return this.statusbarEntryContainer.addEntry(t,e,i,s)}isEntryVisible(t){return this.statusbarEntryContainer.isEntryVisible(t)}updateEntryVisibility(t,e){this.statusbarEntryContainer.updateEntryVisibility(t,e)}overrideEntry(t,e){return this.statusbarEntryContainer.overrideEntry(t,e)}focus(t){this.statusbarEntryContainer.focus(t)}focusNextEntry(){this.statusbarEntryContainer.focusNextEntry()}focusPreviousEntry(){this.statusbarEntryContainer.focusPreviousEntry()}isEntryFocused(){return this.statusbarEntryContainer.isEntryFocused()}overrideStyle(t){return this.statusbarEntryContainer.overrideStyle(t)}};hs=E([d(1,At)],hs);function oc(u){const t=u;return typeof t.id=="string"&&t.id.length>0&&typeof t.name=="string"&&typeof t.text=="string"&&(t.alignment==="left"||t.alignment==="right")&&(t.command===void 0||typeof t.command=="string")&&(t.tooltip===void 0||typeof t.tooltip=="string")&&(t.priority===void 0||typeof t.priority=="number")&&(t.accessibilityInformation===void 0||Jr(t.accessibilityInformation))}const tn={type:"object",required:["id","text","alignment","name"],properties:{id:{type:"string",markdownDescription:g(2390,"The identifier of the status bar entry. Must be unique within the extension. The same value must be used when calling the `vscode.window.createStatusBarItem(id, ...)`-API")},name:{type:"string",description:g(2391,"The name of the entry, like 'Python Language Indicator', 'Git Status' etc. Try to keep the length of the name short, yet descriptive enough that users can understand what the status bar item is about.")},text:{type:"string",description:g(2392,"The text to show for the entry. You can embed icons in the text by leveraging the `$(<name>)`-syntax, like 'Hello $(globe)!'")},tooltip:{type:"string",description:g(2393,"The tooltip text for the entry.")},command:{type:"string",description:g(2394,"The command to execute when the status bar entry is clicked.")},alignment:{type:"string",enum:["left","right"],description:g(2395,"The alignment of the status bar entry.")},priority:{type:"number",description:g(2396,"The priority of the status bar entry. Higher value means the item should be shown more to the left.")},accessibilityInformation:{type:"object",description:g(2397,"Defines the role and aria label to be used when the status bar entry is focused."),properties:{role:{type:"string",description:g(2398,"The role of the status bar entry which defines how a screen reader interacts with it. More about aria roles can be found here https://w3c.github.io/aria/#widget_roles")},label:{type:"string",description:g(2399,"The aria label of the status bar entry. Defaults to the entry's text.")}}}}},rc={description:g(2400,"Contributes items to the status bar."),oneOf:[tn,{type:"array",items:tn}]},en=Yr.registerExtensionPoint({extensionPoint:"statusBarItems",jsonSchema:rc});let ds=class{constructor(t){const e=new M;en.setHandler(i=>{e.clear();for(const s of i){if(!jr(s.description,"contribStatusBarItems")){s.collector.error(`The ${en.name} is proposed API`);continue}const{value:n,collector:o}=s;for(const r of Xr.wrap(n)){if(!oc(r)){o.error(g(2401,"Invalid status bar item contribution."));continue}const a=$r(s.description.identifier,r.id);t.setOrUpdateEntry(a,a,qr.toKey(s.description.identifier),r.name??s.description.displayName??s.description.name,r.text,r.tooltip,r.command?{id:r.command,title:r.name}:void 0,void 0,void 0,r.alignment==="left",r.priority,r.accessibilityInformation)===Qr.DidDefine&&e.add(mt(()=>t.unsetEntry(a)))}}})}};ds=E([d(0,Tn)],ds);var ge;let fi=(ge=class{constructor(t){this.instantiationService=t,this.instantiationService.createInstance(ds)}},ge.ID="workbench.contrib.statusBarItemsExtensionPoint",ge);fi=E([d(0,x)],fi);Kr(fi.ID,fi,Zr.BlockStartup);function ac(){return{[At.toString()]:new Vt(ls,[],!1),[Tn.toString()]:new Vt(ta,[],!1)}}var cc='.monaco-workbench .part.banner{background-color:var(--vscode-banner-background);box-sizing:border-box;color:var(--vscode-banner-foreground);cursor:default;display:flex;font-size:12px;height:100%;overflow:visible;width:100%}.monaco-workbench .part.banner .icon-container{align-items:center;display:flex;flex-shrink:0;padding:0 6px 0 10px}.monaco-workbench .part.banner .icon-container .codicon{color:var(--vscode-banner-iconForeground)}.monaco-workbench .part.banner .icon-container.custom-icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPjxwYXRoIGQ9Ik0xMDI0IDEwMjRIMFYwaDEwMjR2MTAyNHoiIHN0eWxlPSJmaWxsOiNmNmY2ZjY7ZmlsbC1vcGFjaXR5OjAiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNMTAyNCA4NS4zMzN2ODUzLjMzM0gwVjg1LjMzM2gxMDI0eiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjxwYXRoIGQ9Ik0wIDg1LjMzM2gyOTguNjY3djg1My4zMzNIMFY4NS4zMzN6bTEwMjQgMHY4NTMuMzMzSDM4NFY4NS4zMzNoNjQwem0tNTU0LjY2NyAxNjBoMzQxLjMzM3YtNjRINDY5LjMzM3Y2NHptMzQxLjMzNCA1MzMuMzM0SDQ2OS4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0xMjgtMTQ5LjMzNEg1OTcuMzMzdjY0aDM0MS4zMzNsLjAwMS02NHptMC0xNDkuMzMzSDU5Ny4zMzN2NjRoMzQxLjMzM2wuMDAxLTY0em0wLTE0OS4zMzNINTk3LjMzM3Y2NGgzNDEuMzMzbC4wMDEtNjR6IiBzdHlsZT0iZmlsbDojMTY3YWJmIi8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:16px;margin:0 6px 0 10px;padding:0;width:16px}.monaco-workbench .part.banner .message-container{line-height:26px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.monaco-workbench .part.banner .message-container a{color:var(--vscode-banner-foreground)}.monaco-workbench .part.banner .message-container p{margin-block-end:0;margin-block-start:0}.monaco-workbench .part.banner .message-actions-container{flex-grow:1;flex-shrink:0;line-height:26px}.monaco-workbench .part.banner .message-actions-container a{color:var(--vscode-banner-foreground);cursor:pointer;margin-left:12px;padding:3px;text-decoration:underline}.monaco-workbench .part.banner .message-container a{cursor:pointer;text-decoration:underline}.monaco-workbench .part.banner .action-container{padding:0 10px 0 6px}.monaco-workbench .part.banner .action-container .codicon{color:var(--vscode-banner-foreground)}';te(cc,{});let us=class extends Ai{get minimumHeight(){return this.visible?this.height:0}get maximumHeight(){return this.visible?this.height:0}get onDidChange(){return this._onDidChangeSize.event}constructor(t,e,i,s,n){super(h.BANNER_PART,{hasTitle:!1},t,i,e),this.contextKeyService=s,this.instantiationService=n,this.height=26,this.minimumWidth=0,this.maximumWidth=Number.POSITIVE_INFINITY,this._onDidChangeSize=this._register(new C),this.visible=!1,this.focusedActionIndex=-1,this.markdownRenderer=this.instantiationService.createInstance(ea,{})}createContentArea(t){this.element=t,this.element.tabIndex=0,this._register(F(this.element,X.FOCUS,()=>{this.focusedActionIndex!==-1&&this.focusActionLink()}));const e=this._register(this.contextKeyService.createScoped(this.element));return Ci.bindTo(e).set(!0),this.element}close(t){this.setVisibility(!1),$t(this.element),typeof t.onClose=="function"&&t.onClose(),this.item=void 0}focusActionLink(){var e,i,s,n,o;const t=((i=(e=this.item)==null?void 0:e.actions)==null?void 0:i.length)??0;if(this.focusedActionIndex<t){const r=(s=this.messageActionsContainer)==null?void 0:s.children[this.focusedActionIndex];Ds(r)&&((n=this.actionBar)==null||n.setFocusable(!1),r.focus())}else(o=this.actionBar)==null||o.focus(0)}getAriaLabel(t){if(t.ariaLabel)return t.ariaLabel;if(typeof t.message=="string")return t.message}getBannerMessage(t){if(typeof t=="string"){const e=L("span");return e.innerText=t,e}return this.markdownRenderer.render(t).element}setVisibility(t){t!==this.visible&&(this.visible=t,this.focusedActionIndex=-1,this.layoutService.setPartHidden(!t,h.BANNER_PART),this._onDidChangeSize.fire(void 0))}focus(){this.focusedActionIndex=-1,this.element.focus()}focusNextAction(){var e,i;const t=((i=(e=this.item)==null?void 0:e.actions)==null?void 0:i.length)??0;this.focusedActionIndex=this.focusedActionIndex<t?this.focusedActionIndex+1:0,this.focusActionLink()}focusPreviousAction(){var e,i;const t=((i=(e=this.item)==null?void 0:e.actions)==null?void 0:i.length)??0;this.focusedActionIndex=this.focusedActionIndex>0?this.focusedActionIndex-1:t,this.focusActionLink()}hide(t){var e;((e=this.item)==null?void 0:e.id)===t&&this.setVisibility(!1)}show(t){var a;if(t.id===((a=this.item)==null?void 0:a.id)){this.setVisibility(!0);return}$t(this.element);const e=this.getAriaLabel(t);e&&this.element.setAttribute("aria-label",e);const i=J(this.element,L("div.icon-container"));i.setAttribute("aria-hidden","true"),z.isThemeIcon(t.icon)?i.appendChild(L(`div${z.asCSSSelector(t.icon)}`)):(i.classList.add("custom-icon"),Si.isUri(t.icon)&&(i.style.backgroundImage=ia(t.icon)));const s=J(this.element,L("div.message-container"));if(s.setAttribute("aria-hidden","true"),s.appendChild(this.getBannerMessage(t.message)),this.messageActionsContainer=J(this.element,L("div.message-actions-container")),t.actions)for(const c of t.actions)this._register(this.instantiationService.createInstance(sa,this.messageActionsContainer,{...c,tabIndex:-1},{}));const n=J(this.element,L("div.action-container"));this.actionBar=this._register(new Ss(n));const o=t.closeLabel??"Close Banner",r=this._register(new q("banner.close",o,z.asClassName(na),!0,()=>this.close(t)));this.actionBar.push(r,{icon:!0,label:!1}),this.actionBar.setFocusable(!1),this.setVisibility(!0),this.item=t}toJSON(){return{type:h.BANNER_PART}}};us=E([d(0,it),d(1,et),d(2,at),d(3,vt),d(4,x)],us);N.registerCommandAndKeybindingRule({id:"workbench.banner.focusBanner",weight:P.WorkbenchContrib,primary:v.Escape,when:Ci,handler:u=>{u.get(se).focus()}});N.registerCommandAndKeybindingRule({id:"workbench.banner.focusNextAction",weight:P.WorkbenchContrib,primary:v.RightArrow,secondary:[v.DownArrow],when:Ci,handler:u=>{u.get(se).focusNextAction()}});N.registerCommandAndKeybindingRule({id:"workbench.banner.focusPreviousAction",weight:P.WorkbenchContrib,primary:v.LeftArrow,secondary:[v.UpArrow],when:Ci,handler:u=>{u.get(se).focusPreviousAction()}});const ue=class ue extends Ts{constructor(){super({id:ue.ID,title:ue.LABEL,category:_s.View,f1:!0})}async run(t){t.get(et).focusPart(h.BANNER_PART)}};ue.ID="workbench.action.focusBanner",ue.LABEL=ht(2803,"Focus Banner");let fs=ue;ys(fs);var Qe,Xt;let ms=(Xt=class{constructor(t,e,i){var o;const s=(o=i.options)==null?void 0:o.welcomeBanner;if(!s||e.getBoolean(Qe.WELCOME_BANNER_DISMISSED_KEY,A.PROFILE,!1))return;let n;typeof s.icon=="string"?n=z.fromId(s.icon):s.icon&&(n=Si.revive(s.icon)),t.show({id:"welcome.banner",message:s.message,icon:n,actions:s.actions,onClose:()=>{e.store(Qe.WELCOME_BANNER_DISMISSED_KEY,!0,A.PROFILE,R.MACHINE)}})}},Qe=Xt,Xt.WELCOME_BANNER_DISMISSED_KEY="workbench.banner.welcome.dismissed",Xt);ms=Qe=E([d(0,se),d(1,at),d(2,Ge)],ms);oa.as(ra.Workbench).registerWorkbenchContribution(ms,ye.Restored);function lc(){return{[se.toString()]:new Vt(us,[],!1)}}En(async u=>{u.get(se)});let gs=class extends $a{constructor(t,e,i){super(ca(),t,new la,e),this.instantiationService=i,this.mainContainer.classList.add("monaco-workbench-part")}registerErrorHandler(t){pn(e=>this.handleUnexpectedError(e,t))}createNotificationsHandlers(){}initServices(){return this.instantiationService}restore(){try{this.restoreParts()}catch(t){Ze(t)}}};gs=E([d(1,mn),d(2,x)],gs);const sn=ha(S);da(sn!=null&&!sn.guess,S);ua(async u=>{u.get(et).startup()});fa(async u=>{u.get(x).createInstance(Aa)});function Mc(u,t){return{...Sa(t),...aa({isKeybindingConfigurationVisible:()=>!0,shouldUseGlobalPicker:()=>!0}),...wa({shouldUseGlobalKeybindings:()=>!0}),[et.toString()]:new Vt(gs,[u],!1),[Tt.toString()]:new Vt(va,[],!1),[Se.toString()]:new Vt(Ca,[void 0],!1),...Qa(),...ac(),...lc()}}export{Bc as AbstractResourceEditorInput,Lc as AbstractTextResourceEditorInput,kc as ConfirmResult,Oc as DomScrollableElement,Hc as EditorInput,So as EditorInputCapabilities,h as Parts,Fc as RegisteredEditorPriority,zc as SplitView,w as ViewContainerLocation,Gc as ViewPaneContainer,Mc as default};
