import{bV as z,D as I,y as T,bG as N,i as H,j as C,bW as w,m as M,bX as D,bY as i,bZ as u,Q as b,T as l,A as m,b_ as k,b$ as v,c0 as A,c1 as B,c2 as L,n as W,c3 as $,c4 as O,aC as y,c5 as x,c6 as R,c7 as P,bK as F,c8 as K,c9 as V,ca as E,cb as G,cc as U}from"./main-BY5dYOjU.js";var j=".monaco-editor .tokens-inspect-widget{background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);color:var(--vscode-editorHoverWidget-foreground);padding:10px;user-select:text;-webkit-user-select:text;z-index:50}.monaco-editor.hc-black .tokens-inspect-widget,.monaco-editor.hc-light .tokens-inspect-widget{border-width:2px}.monaco-editor .tokens-inspect-widget .tokens-inspect-separator{background-color:var(--vscode-editorHoverWidget-border);border:0;height:1px}.monaco-editor .tokens-inspect-widget .tm-token{font-family:var(--monaco-monospace-font)}.monaco-editor .tokens-inspect-widget .tm-token-length{float:right;font-size:60%;font-weight:400}.monaco-editor .tokens-inspect-widget .tm-metadata-table{width:100%}.monaco-editor .tokens-inspect-widget .tm-metadata-value{font-family:var(--monaco-monospace-font);text-align:right}.monaco-editor .tokens-inspect-widget .tm-token-type{font-family:var(--monaco-monospace-font)}";z(j,{});var _,d;let h=(d=class extends I{static get(t){return t.getContribution(_.ID)}constructor(t,e,o){super(),this._editor=t,this._languageService=o,this._widget=null,this._register(this._editor.onDidChangeModel(n=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(n=>this.stop())),this._register(T.onDidChange(n=>this.stop())),this._register(this._editor.onKeyUp(n=>n.keyCode===N.Escape&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new S(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}},_=d,d.ID="editor.contrib.inspectTokens",d);h=_=H([C(1,w),C(2,M)],h);class Q extends x{constructor(){super({id:"editor.action.inspectTokens",label:R.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(t,e){const o=h.get(e);o==null||o.launch()}}function X(c){let t="";for(let e=0,o=c.length;e<o;e++){const n=c.charCodeAt(e);switch(n){case y.Tab:t+="→";break;case y.Space:t+="·";break;default:t+=String.fromCharCode(n)}}return t}function Y(c,t){const e=T.get(t);if(e)return e;const o=c.encodeLanguageId(t);return{getInitialState:()=>O,tokenize:(n,g,r)=>$(t,r),tokenizeEncoded:(n,g,r)=>W(o,r)}}const p=class p extends I{constructor(t,e){super(),this.allowEditorOverflow=!0,this._editor=t,this._languageService=e,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=Y(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(o=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return p._ID}_compute(t){const e=this._getTokensAtLine(t.lineNumber);let o=0;for(let a=e.tokens1.length-1;a>=0;a--){const f=e.tokens1[a];if(t.column-1>=f.offset){o=a;break}}let n=0;for(let a=e.tokens2.length>>>1;a>=0;a--)if(t.column-1>=e.tokens2[a<<1]){n=a;break}const g=this._model.getLineContent(t.lineNumber);let r="";if(o<e.tokens1.length){const a=e.tokens1[o].offset,f=o+1<e.tokens1.length?e.tokens1[o+1].offset:g.length;r=g.substring(a,f)}D(this._domNode,i("h2.tm-token",void 0,X(r),i("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),u(this._domNode,i("hr.tokens-inspect-separator",{style:"clear:both"}));const s=(n<<1)+1<e.tokens2.length?this._decodeMetadata(e.tokens2[(n<<1)+1]):null;u(this._domNode,i("table.tm-metadata-table",void 0,i("tbody",void 0,i("tr",void 0,i("td.tm-metadata-key",void 0,"language"),i("td.tm-metadata-value",void 0,`${s?s.languageId:"-?-"}`)),i("tr",void 0,i("td.tm-metadata-key",void 0,"token type"),i("td.tm-metadata-value",void 0,`${s?this._tokenTypeToString(s.tokenType):"-?-"}`)),i("tr",void 0,i("td.tm-metadata-key",void 0,"font style"),i("td.tm-metadata-value",void 0,`${s?this._fontStyleToString(s.fontStyle):"-?-"}`)),i("tr",void 0,i("td.tm-metadata-key",void 0,"foreground"),i("td.tm-metadata-value",void 0,`${s?b.Format.CSS.formatHex(s.foreground):"-?-"}`)),i("tr",void 0,i("td.tm-metadata-key",void 0,"background"),i("td.tm-metadata-value",void 0,`${s?b.Format.CSS.formatHex(s.background):"-?-"}`))))),u(this._domNode,i("hr.tokens-inspect-separator")),o<e.tokens1.length&&u(this._domNode,i("span.tm-token-type",void 0,e.tokens1[o].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(t){const e=T.getColorMap(),o=l.getLanguageId(t),n=l.getTokenType(t),g=l.getFontStyle(t),r=l.getForeground(t),s=l.getBackground(t);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(o),tokenType:n,fontStyle:g,foreground:e[r],background:e[s]}}_tokenTypeToString(t){switch(t){case m.Other:return"Other";case m.Comment:return"Comment";case m.String:return"String";case m.RegEx:return"RegEx";default:return"??"}}_fontStyleToString(t){let e="";return t&k.Italic&&(e+="italic "),t&k.Bold&&(e+="bold "),t&k.Underline&&(e+="underline "),t&k.Strikethrough&&(e+="strikethrough "),e.length===0&&(e="---"),e}_getTokensAtLine(t){const e=this._getStateBeforeLine(t),o=this._tokenizationSupport.tokenize(this._model.getLineContent(t),!0,e),n=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(t),!0,e);return{startState:e,tokens1:o.tokens,tokens2:n.tokens,endState:o.endState}}_getStateBeforeLine(t){let e=this._tokenizationSupport.getInitialState();for(let o=1;o<t;o++)e=this._tokenizationSupport.tokenize(this._model.getLineContent(o),!0,e).endState;return e}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[v.BELOW,v.ABOVE]}}};p._ID="editor.contrib.inspectTokensWidget";let S=p;A(h.ID,h,B.Lazy);L(Q);class Z extends x{constructor(){super({id:"editor.action.toggleHighContrast",label:P.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(t,e){const o=t.get(w),n=o.getColorTheme();F(n.type)?(o.setTheme(this._originalThemeName||(E(n.type)?K:V)),this._originalThemeName=null):(o.setTheme(E(n.type)?G:U),this._originalThemeName=n.themeName)}}L(Z);function J(){return{}}export{J as default};
