{"version":3,"file":"layout-validate-document.js","sourceRoot":"","sources":["../../../src/components/layout-validate-document/layout-validate-document.tsx"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable camelcase */\n/* eslint-disable sonarjs/no-identical-functions */\nimport { Component, h, Prop, State, Event, EventEmitter } from '@stencil/core';\nimport { IDocument } from '../../types/Document';\nimport {\n    createDocument,\n    fetchDocumentDetails,\n    sealDocument,\n    uploadDocument,\n} from '../../services';\nimport { ISession } from '../../types/Session';\nimport { LimeWebComponentPlatform } from '@limetech/lime-web-components';\nimport { IListItem } from '../../types/ListItem';\nimport { IRecipient } from '../../types/Recipient';\nimport { IError } from '../../types/Error';\nimport { EnumViews } from '../../models/EnumViews';\nimport { ICustomField } from '../../types/CustomField';\nimport { ITemplateRole } from 'src/types/TemplateRole';\n\n@Component({\n    tag: 'layout-validate-document',\n    shadow: true,\n    styleUrl: 'layout-validate-document.scss',\n})\nexport class LayoutValidateDocument {\n    @Prop() public document: IDocument;\n    @Prop() public template: IListItem;\n    @Prop() public templateRoles: ITemplateRole[];\n    @Prop() public limeDocument: IListItem;\n    @Prop() public fields: ICustomField[];\n    @Prop() public platform: LimeWebComponentPlatform;\n    @Prop() public session: ISession;\n    @Prop() public isSealed: boolean = false;\n    @Prop() public isSending: boolean;\n\n    @Event() documentCompleted: EventEmitter<boolean>;\n    @Event() errorHandler: EventEmitter<string>;\n    @Event() isSendingDocument: EventEmitter<boolean>;\n\n    @State() private isLoading: boolean = true;\n    @State() private recipients: IRecipient[] = [];\n    @State() private errorList: IError[] = [];\n    @State() private sentDocument: IDocument;\n    @State() private intervalId: any;\n\n    constructor() {\n        this.handleCreateDocument = this.handleCreateDocument.bind(this);\n        this.sealDocument = this.sealDocument.bind(this);\n        this.hasProperty = this.hasProperty.bind(this);\n        this.openInNewTab = this.openInNewTab.bind(this);\n        this.handleOpenGetAccept = this.handleOpenGetAccept.bind(this);\n    }\n\n    public async componentWillLoad() {\n        await this.validateDocument();\n    }\n\n    public render() {\n        return (\n            <div>\n                {(() => {\n                    if (this.isLoading) {\n                        return (\n                            <ga-loader-with-text\n                                showText={this.isSending}\n                                text=\"We are creating your document!\"\n                            />\n                        );\n                    } else if (this.isSealed) {\n                        if (this.recipients.length > 0) {\n                            return (\n                                <div class=\"share-document-container\">\n                                    <h3>Share document link:</h3>\n                                    <ul class=\"share-document-recipient-list\">\n                                        {this.recipients.map(recipient => {\n                                            return (\n                                                <share-document-link\n                                                    recipient={recipient}\n                                                />\n                                            );\n                                        })}\n                                    </ul>\n                                    <div class=\"action-buttons\">\n                                        <limel-button\n                                            label=\"Done\"\n                                            primary={true}\n                                            onClick={() => {\n                                                this.documentCompleted.emit(\n                                                    false\n                                                );\n                                            }}\n                                        />\n                                        <limel-button\n                                            label=\"Open in GetAccept\"\n                                            primary={false}\n                                            onClick={() =>\n                                                this.handleCreateDocument(\n                                                    false,\n                                                    true\n                                                )\n                                            }\n                                        />\n                                    </div>\n                                </div>\n                            );\n                        }\n                    } else {\n                        return (\n                            <div>\n                                {(() => {\n                                    if (this.errorList.length > 0) {\n                                        return (\n                                            <document-error-feedback\n                                                document={this.document}\n                                                errorList={this.errorList}\n                                            />\n                                        );\n                                    } else {\n                                        return (\n                                            <document-validate-info\n                                                document={this.document}\n                                            />\n                                        );\n                                    }\n                                })()}\n                                <div class=\"validate-document-button-container\">\n                                    {(() => {\n                                        if (this.errorList.length === 0) {\n                                            return [\n                                                <limel-button\n                                                    class=\"send-button\"\n                                                    label=\"Send\"\n                                                    primary={true}\n                                                    onClick={() =>\n                                                        this.handleCreateDocument(\n                                                            true,\n                                                            false\n                                                        )\n                                                    }\n                                                />,\n                                                <limel-button\n                                                    label=\"Share document link\"\n                                                    primary={false}\n                                                    onClick={() =>\n                                                        this.handleCreateDocument(\n                                                            false,\n                                                            false\n                                                        )\n                                                    }\n                                                />,\n                                                <limel-button\n                                                    label=\"Open in GetAccept\"\n                                                    primary={false}\n                                                    onClick={() =>\n                                                        this.handleCreateDocument(\n                                                            false,\n                                                            true\n                                                        )\n                                                    }\n                                                />,\n                                            ];\n                                        } else {\n                                            return (\n                                                <limel-button\n                                                    label=\"Open in GetAccept\"\n                                                    primary={false}\n                                                    onClick={() =>\n                                                        this.handleCreateDocument(\n                                                            false,\n                                                            true\n                                                        )\n                                                    }\n                                                />\n                                            );\n                                        }\n                                    })()}\n                                </div>\n                            </div>\n                        );\n                    }\n                })()}\n            </div>\n        );\n    }\n\n    private async handleUploadDocument(): Promise<string> {\n        if (this.limeDocument) {\n            const { data, success } = await uploadDocument(\n                this.platform,\n                this.session,\n                this.limeDocument.value\n            );\n            if (success) {\n                return data.file_id;\n            } else {\n                this.errorHandler.emit(\n                    'Could not upload Lime document to GetAccept'\n                );\n            }\n        }\n\n        return '';\n    }\n\n    private async handleCreateDocument(send: boolean, openDocument: boolean) {\n        this.toggleLoading(true);\n\n        const file_ids: string = await this.handleUploadDocument();\n\n        const documentData = {\n            ...this.document,\n            template_id: this.template ? this.template.value : '',\n            custom_fields: this.template ? this.fields : [],\n            file_ids: file_ids,\n            is_automatic_sending: send,\n        };\n\n        const { data, success } = await createDocument(\n            this.platform,\n            this.session,\n            documentData\n        );\n\n        if (!success) {\n            this.errorHandler.emit(\n                'Could not create document. Make sure that all data is correctly supplied'\n            );\n            this.toggleLoading(false);\n\n            return;\n        }\n\n        if (openDocument) {\n            this.intervalId = setInterval(\n                () => this.openInGetacceptIfDraft(data, send, openDocument),\n                // eslint-disable-next-line @typescript-eslint/no-magic-numbers\n                3000\n            );\n        } else {\n            this.setDocumentData(data, send, openDocument);\n        }\n    }\n\n    private setDocumentData(data, send, openDocument) {\n        this.sentDocument = { ...data };\n\n        if (!send && !openDocument) {\n            this.sealDocument(data.id);\n        } else {\n            this.toggleLoading(false);\n            this.documentCompleted.emit(false);\n        }\n    }\n\n    private async sealDocument(documentId: string, attempt: number = 1) {\n        const maxAttempts: number = 5;\n        const timeout: number = 5000;\n\n        const { data, success } = await sealDocument(\n            this.platform,\n            this.session,\n            documentId\n        );\n\n        if (!success && attempt < maxAttempts) {\n            return setTimeout(\n                () => this.sealDocument(documentId, (attempt += 1)),\n                timeout\n            );\n        } else if (!success && attempt >= maxAttempts) {\n            this.errorHandler.emit(\n                'Could not seal document do to lengthy import. Try to open it in GetAccept and seal it from there.'\n            );\n            this.toggleLoading(false);\n\n            return;\n        }\n\n        this.toggleLoading(false);\n\n        this.recipients = data.recipients.map(recipient => {\n            return {\n                name: recipient.fullname,\n                document_url: recipient.document_url,\n                role: recipient.role,\n                email: recipient.email,\n            };\n        });\n        this.documentCompleted.emit(true);\n    }\n\n    private handleOpenGetAccept() {\n        if (this.sentDocument) {\n            const openUrl = `https://app.getaccept.com/document/view/${this.sentDocument.id}`;\n            this.openInNewTab(openUrl);\n        }\n    }\n\n    private async openInGetacceptIfDraft(data, send, openDocument) {\n        const documentsDetails = await fetchDocumentDetails(\n            this.platform,\n            this.session,\n            data.id\n        );\n\n        if (documentsDetails.status === 'draft') {\n            const openUrl = `https://app.getaccept.com/document/edit/${data.id}`;\n            this.openInNewTab(openUrl);\n            this.setDocumentData(data, send, openDocument);\n            clearInterval(this.intervalId);\n        }\n    }\n\n    private async validateDocument() {\n        this.isLoading = true;\n        if (!this.limeDocument && !this.template) {\n            this.errorList.push({\n                header: 'No document',\n                title: 'You are missing a document.',\n                icon: 'dog_tag',\n                view: EnumViews.selectFile,\n            });\n        }\n\n        if (this.document.recipients.length === 0) {\n            this.errorList.push({\n                header: 'No recipients',\n                title: 'You need to add at least one recipient.',\n                icon: 'user_male_circle',\n                view: EnumViews.recipient,\n            });\n        }\n\n        if (\n            this.document.recipients.length > 0 &&\n            this.document.is_signing &&\n            !this.haveSigner()\n        ) {\n            this.errorList.push({\n                header: 'No signer',\n                title: 'You need to add at least one signer when you are sending a documet for signing.',\n                icon: 'autograph',\n                view: EnumViews.recipient,\n            });\n        }\n\n        if (this.haveNoTemplateRolesAdded()) {\n            this.errorList.push({\n                header: 'No template roles added.',\n                title: 'You need to add all template roles.',\n                icon: 'user_group_man_woman',\n                view: EnumViews.templateRoles,\n            });\n        }\n\n        if (\n            this.document.recipients.length > 0 &&\n            !this.document.is_sms_sending &&\n            this.recipientsWithOnlyPhoneExists()\n        ) {\n            this.errorList.push({\n                header: 'Need to activate SMS sending',\n                title: 'You need to activate SMS sendings due to recipients without email',\n                icon: 'cell_phone',\n                view: EnumViews.sendDocument,\n            });\n        }\n\n        if (\n            this.document.recipients.length > 0 &&\n            this.recipientMissingEmailAndPhoneExists()\n        ) {\n            this.errorList.push({\n                header: 'Recipient missing contact information',\n                title: 'One or many recipients are missing contact information',\n                icon: 'about_us_male',\n                view: EnumViews.recipient,\n            });\n        }\n\n        this.isLoading = false;\n    }\n\n    private haveSigner(): boolean {\n        const signers = this.document.recipients.filter(\n            recipient => recipient.role === 'signer'\n        );\n\n        return signers.length > 0;\n    }\n\n    private haveNoTemplateRolesAdded(): boolean {\n        return (\n            this.templateRoles &&\n            this.templateRoles\n                .filter(\n                    role => !(role.first_name || role.last_name || role.email)\n                )\n                .some(\n                    role =>\n                        !this.document.recipients.find(\n                            recipient => role.role_id === recipient.role_id\n                        )\n                )\n        );\n    }\n\n    private recipientsWithOnlyPhoneExists(): boolean {\n        return this.document.recipients.some(\n            recipient => !recipient.email && recipient.mobile !== ''\n        );\n    }\n\n    private recipientMissingEmailAndPhoneExists(): boolean {\n        return this.document.recipients.some(\n            recipient => !recipient.email && !recipient.mobile\n        );\n    }\n\n    private hasProperty(value): string {\n        return value ? 'Yes' : 'No';\n    }\n\n    private openInNewTab(url: string) {\n        this.toggleLoading(false);\n        this.documentCompleted.emit();\n        if (url) {\n            window.open(url, '_blank');\n        }\n    }\n\n    private toggleLoading(value) {\n        this.isLoading = value;\n        this.isSendingDocument.emit(value);\n    }\n}\n"]}