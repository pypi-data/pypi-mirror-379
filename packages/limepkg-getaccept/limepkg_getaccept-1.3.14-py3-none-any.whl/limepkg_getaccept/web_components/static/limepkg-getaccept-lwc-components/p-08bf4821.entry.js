import{r as t,c as i,h as e}from"./p-02d8d51b.js";import{P as s,o as a}from"./p-de3a71d2.js";const l=".auth-error{display:block;color:#f88987;margin-top:1rem}.auth-button{margin-top:1rem}limel-button{--lime-primary-color:#f49132}";const n=l;const r=class{constructor(e){t(this,e);this.setSession=i(this,"setSession",7);this.loginFields=[{id:"LoginEmail",style:"auth-imput",label:"Email address",type:"email",value:"email",required:false,icon:"filled_message"},{id:"LoginPassword",style:"auth-imput",label:"Password",type:"password",value:"password",required:false,icon:"lock_2"}];this.platform=undefined;this.loading=false;this.errorOnLogin=false;this.email="";this.password="";this.onChange=this.onChange.bind(this);this.onLogin=this.onLogin.bind(this);this.isDisabled=this.isDisabled.bind(this)}render(){return[this.loginFields.map((t=>e("limel-input-field",{id:t.id,class:t.style,label:t.label,type:t.type,value:this[t.value],required:t.required,trailingIcon:t.icon,onChange:i=>this.onChange(i,t.value)}))),(()=>e("div",null,e("limel-button",{class:"auth-button",label:"Login",primary:true,loading:this.loading,disabled:this.isDisabled(),onClick:this.onLogin}),this.errorOnLogin?e("span",{class:"auth-error"},"Could not login. Please check your credentials"):null))()]}isDisabled(){return!(this.email&&this.password)}onChange(t,i){this[i]=t.detail}async onLogin(){this.errorOnLogin=false;this.loading=true;const t={email:this.email,password:this.password};const i=await this.platform.get(s.Http).post("getaccept/login/",t);this.loading=false;if(i.success){const t={username:this.email,access_token:i.data.access_token,expires_in:i.data.expires_in};this.setSession.emit(t)}else{this.errorOnLogin=true}}};r.style=n;const h=".auth-signup-field-container{display:flex;flex-wrap:wrap}.auth-imput{margin-bottom:0.2rem;margin-right:0.5rem;width:48%}.auth-button{margin-top:1rem}.auth-imput{margin-bottom:0.2rem}.auth-language-label{display:block;margin:1rem 0rem 0.5rem 1rem}limel-button{--lime-primary-color:#f49132}";const o=h;const u=class{constructor(e){t(this,e);this.setSession=i(this,"setSession",7);this.errorHandler=i(this,"errorHandler",7);this.signupFields=[{id:"SignupEmail",style:"auth-imput",label:"Email address",type:"email",value:"signupEmail",required:true,icon:"filled_message"},{id:"Password",style:"auth-imput",label:"Password",type:"password",value:"signupPassword",required:true,icon:"lock_2"},{id:"FirstName",style:"auth-imput",label:"First name",type:"text",value:"signupFirstName",required:true,icon:"user"},{id:"LastName",style:"auth-imput",label:"Last name",type:"text",value:"signupLastName",required:true,icon:"user"},{id:"Company",style:"auth-imput",label:"Company",type:"text",value:"companyName",required:true,icon:"organization"},{id:"Mobile",style:"auth-imput",label:"Mobile",type:"text",value:"mobile",required:true,icon:"phone_not_being_used"}];this.countryCodes=[{id:"SE",text:"SWE",selected:true},{id:"NO",text:"NOR"},{id:"FI",text:"FIN"},{id:"DK",text:"DEN"},{id:"GB",text:"GBR"},{id:"US",text:"USA"}];this.platform=undefined;this.isLoading=false;this.disableSignup=false;this.signupFirstName="";this.signupLastName="";this.companyName="";this.mobile="";this.countryCode="SE";this.signupEmail=undefined;this.signupPassword="";this.onChange=this.onChange.bind(this);this.countrySetOnChange=this.countrySetOnChange.bind(this);this.onSignup=this.onSignup.bind(this)}render(){this.disableSignup=this.shouldDisableSignup();return[e("div",{key:"f078c65ec396cd0c92e4533684e5f180856d9807",class:"auth-signup-field-container"},this.signupFields.map((t=>e("limel-input-field",{id:t.id,class:t.style,label:t.label,type:t.type,value:this[t.value],required:t.required,trailingIcon:t.icon,onChange:i=>this.onChange(i,t.value)})))),e("span",{key:"81d917ddad7c214074978e7bb3da1793765eb604",class:"auth-language-label"},"Country"),e("limel-chip-set",{key:"9a97a52f9ca83d2cef6a3ef89f184137b0d1c426",type:"choice",onChange:this.countrySetOnChange,required:true,value:this.countryCodes}),e("limel-button",{key:"f202a3d88334c33fd6a7fc570b0b666a7301f017",class:"auth-button",label:"Signup",primary:true,loading:this.isLoading,disabled:this.disableSignup,onClick:this.onSignup})]}shouldDisableSignup(){return this.signupEmail===""&&this.signupLastName===""&&this.signupLastName===""&&this.mobile===""&&this.signupPassword===""}onChange(t,i){this[i]=t.detail}countrySetOnChange(t){this.countryCode=t.detail.id.toString()}async onSignup(){this.isLoading=true;const t={company:this.companyName,first_name:this.signupFirstName,last_name:this.signupLastName,country_code:this.countryCode,mobile:this.mobile,email:this.signupEmail,password:this.signupPassword};const{data:i,success:e}=await a(this.platform,t);if(e){const t={username:this.signupEmail,access_token:i.access_token,expires_in:i.expires_in};this.setSession.emit(t)}else{if(i.error){this.errorHandler.emit(i.error)}else{this.errorHandler.emit("Something went wrong...")}}this.isLoading=false}};u.style=o;export{r as ga_login,u as ga_signup};
//# sourceMappingURL=p-08bf4821.entry.js.map